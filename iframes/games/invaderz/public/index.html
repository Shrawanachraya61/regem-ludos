<html>
  <header>
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"
    />
    <link rel="icon" type="image/png" href="favicon.png" />
    <link rel="stylesheet" href="../../../lib.css">
    <title>Invaderz</title>
  </header>
  <body>
    <div id="loading" class="fixed"><img src="loading.gif" alt="loading"></img></div>
    <div id="error" class="fixed" style="display:none">
      <div style="display:flex;flex-direction:column;align-items:center;justify-content center;">
        <img src="error.png" alt="error"></img>
        <div style="margin-top:8px;">Encountered a problem with this content.</div>
      </div>
    </div>
    <div id="game" style="display:none">
      <div id="board" class="board">
        <canvas id="canvas" width="512" height="512"></canvas>
      </div>
      <div id="top-bar-controls" class="top-bar-controls">
        <button id="toggle-sound" onclick="Lib.toggleSound()">Toggle Sound</button>
        <button id="toggle-scale" onclick="Lib.toggleScale()">Toggle Scale</button>
        <!-- <button onclick="toggleControls()">Toggle Controls</button> -->
      </div>
      <div id="on-screen-controls" class="on-screen-controls">
        <div
          class="on-screen-control-button"
          onmousedown="Lib.handleButtonDown(1073741904)"
          onmouseup="Lib.handleButtonUp(1073741904)"
          ontouchstart="Lib.handleButtonDown(1073741904)"
          ontouchend="Lib.handleButtonUp(1073741904)"
        >
          <=
        </div>
        <div
          class="on-screen-control-button"
          onmousedown="Lib.handleButtonDown(1073741903)"
          onmouseup="Lib.handleButtonUp(1073741903)"
          ontouchstart="Lib.handleButtonDown(1073741903)"
          ontouchend="Lib.handleButtonUp(1073741903)"
        >
          =>
        </div>
        <div
          class="on-screen-control-button"
          style="background: #b00"
          onmousedown="Lib.handleButtonDown(32)"
          onmouseup="Lib.handleButtonUp(32)"
          ontouchstart="Lib.handleButtonDown(32)"
          ontouchend="Lib.handleButtonUp(32)"
        >
          Fire!
        </div>
        <div
          class="on-screen-control-button"
          style="background: #00b"
          onmousedown="Lib.handleButtonDown(13)"
          onmouseup="Lib.handleButtonUp(13)"
          ontouchstart="Lib.handleButtonDown(13)"
          ontouchend="Lib.handleButtonUp(13)"
        >
          Start
        </div>
      </div>
    </div>
  </body>
  <footer>
    <script>
      async function init() {
        var script = document.createElement('script');
        script.setAttribute('type', 'text/javascript');
        script.setAttribute('async', true);
        script.setAttribute('src', 'Invaderz.js');
        document.body.appendChild(script);
      }
      function start() {
        Lib.enableModuleControls();
        Lib.handleButtonDown(13);
        setTimeout(() => {
          Lib.handleButtonUp(13);
        }, 1);
        Lib.notifyGameStarted();
      }
      function end() {
        Lib.disableModuleControls();
        Lib.notifyGameCompleted(0);
      }
    </script>
    <script type="text/javascript" src="../../../lib.js"></script>
  </footer>
</html>
