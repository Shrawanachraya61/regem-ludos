(()=>{var e=this&&this.__createBinding||(Object.create?function(e,t,i,a){void 0===a&&(a=i),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,a){void 0===a&&(a=i),e[a]=t[i]}),t=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(null!=i)for(var r in i)"default"!==r&&Object.prototype.hasOwnProperty.call(i,r)&&e(a,i,r);return t(a,i),a},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},r=this&&this.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(i[a[r]]=e[a[r]])}return i};define("model/canvas",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getScreenSize=t.getDrawScale=t.setDrawScale=t.getCtx=t.getCanvas=t.createCanvas=t.CANVAS_ID_OUTER=t.CANVAS_ID=t.SCREEN_WIDTH=t.SCREEN_HEIGHT=void 0,t.SCREEN_HEIGHT=512,t.SCREEN_WIDTH=683,t.CANVAS_ID="canv",t.CANVAS_ID_OUTER="canv-outer";let i=null,a=null,r=1;t.createCanvas=(e,t,a)=>{let r,o=i&&window.OffscreenCanvas?new window.OffscreenCanvas(e||1,t||1):document.createElement("canvas");return o.width=e||1,o.height=t||1,a?(console.error("WebGL rendering has been removed."),r=o.getContext("webgl-2d")):r=o.getContext("2d"),[o,r,e,t]},t.getCanvas=e=>{if("outer"===e&&a)return a;if(i)return i;{let[e,a]=t.createCanvas(t.SCREEN_WIDTH,t.SCREEN_HEIGHT);e.id=t.CANVAS_ID,a.imageSmoothingEnabled=!1;let r=document.getElementById("canvas-container");if(r){let[i,a]=t.createCanvas(t.SCREEN_WIDTH,t.SCREEN_HEIGHT);i.id=t.CANVAS_ID_OUTER,a.imageSmoothingEnabled=!1;let o=document.createElement("div");o.style.position="absolute",o.style.width="100%",o.style.height="100%",o.style.top="0",o.id="fade";let n=document.createElement("div");n.style.position="absolute",n.style.width="100%",n.style.height="100%",n.style.top="0",n.id="fade2",r.appendChild(e),r.appendChild(o),r.appendChild(n),r.appendChild(i)}else console.warn("Failed to acquire parent div for primary canvas.");return i=e,e}};let o={};t.getCtx=e=>{var i;let a=o[null!=e?e:"def"];if(a)return a;let r=t.getCanvas(e);return a=null!==(i=r.getContext("2d"))&&void 0!==i?i:r.getContext("webgl-2d"),o[null!=e?e:"def"]=a,a},t.setDrawScale=e=>{r=e;let i=document.getElementById(t.CANVAS_ID);i&&((e,i)=>{e&&(e.style.width=t.SCREEN_WIDTH*i+"",e.style.height=t.SCREEN_HEIGHT*i+"",i>2&&(e.style.position="relative",e.style.left=-parseInt(e.style.width)/4+"px",e.style.top=-parseInt(e.style.height)/4+"px"))})(i,e);let o=document.getElementById(t.CANVAS_ID_OUTER);o&&(o.width=t.SCREEN_WIDTH*e/2,o.height=t.SCREEN_HEIGHT*e/2,o.style.position="absolute",o.style.left="0px",o.style.top="0px",a=o)},t.getDrawScale=()=>r,t.getScreenSize=()=>[t.SCREEN_WIDTH,t.SCREEN_HEIGHT]})),define("view/style",["require","exports","preact","picostyle"],(function(e,t,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.keyframes=t.style=t.MEDIA_QUERY_PHONE_WIDTH=t.colors=void 0;let o=(r=i(r)).default(a.h);t.colors={BLACK:"#111",WHITE:"#F8F8F8",LIGHTGREY:"#BCB7C5",GREY:"#999",DARKGREY:"#2E3740",DARKGREY_ALT:"#5A5353",BGGREY:"#333",RED:"#BE2633",LIGHTRED:"#E1534A",DARKRED:"#5E3643",PINK:"#FFAEB6",LIGHTGREEN:"#B6D53C",GREEN:"#44891A",DARKGREEN:"#005F1B",BROWN:"#A46422",ORANGE:"#FAB40B",PURPLE:"#9964F9",DARKPURPLE:"#39314B",LIGHTBLUE:"#42CAFD",BLUE:"#31A2F2",DARKBLUE:"#243F72",DARKBLUE_ALT:"#3978A8",YELLOW:"#F4B41B",DARKYELLOW:"#A05B53"},t.MEDIA_QUERY_PHONE_WIDTH="@media (max-width: 850px)",t.style=function(e,t){return o(e)(t)},t.keyframes=e=>r.keyframes(e)})),define("model/scene",["require","exports","controller/scene-management","model/generics"],(function(e,t,i,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sceneAddPostSceneCallback=t.sceneGetCurrentOverworldName=t.sceneSetCurrentOverworld=t.sceneHasTreasureBeenAcquired=t.sceneIsEncounterDefeated=t.sceneSetTreasureAcquired=t.sceneSetEncounterDefeated=t.sceneGetCommands=t.sceneHasCommand=t.sceneStopWaitingUntil=t.sceneIsWaiting=t.initScene=t.sceneCreate=void 0,t.sceneCreate=()=>{let e={storage:{},storageOnce:{},storageOnceKeys:{},storageEncounters:{},storageTreasure:{},onceKeysToCommit:[],commands:{},currentScript:null,currentTrigger:null,currentTriggerType:null,scriptStack:[],isWaitingForInput:!1,isWaitingForTime:!1,isWaitingForAnimation:!1,inputDisabled:!1,waitTimeoutId:-1,waitTimeoutCb:null,skip:!1,postSceneCallbacks:[]};return Object.assign(e.commands,i.getSceneCommands(e)),e},t.initScene=()=>{a.setCurrentScene(t.sceneCreate())},t.sceneIsWaiting=e=>e.isWaitingForInput||e.isWaitingForTime||e.isWaitingForAnimation,t.sceneStopWaitingUntil=e=>{e.isWaitingForTime=!1},t.sceneHasCommand=(e,i)=>!!t.sceneGetCommands(e)[i],t.sceneGetCommands=e=>e.commands,t.sceneSetEncounterDefeated=(e,t,i)=>{e.storageEncounters[i]?e.storageEncounters[i][t]=!0:e.storageEncounters[i]={[t]:!0}},t.sceneSetTreasureAcquired=(e,t,i)=>{e.storageTreasure[i]?e.storageTreasure[i][t]=!0:e.storageTreasure[i]={[t]:!0}},t.sceneIsEncounterDefeated=(e,t,i)=>!!e.storageEncounters[i]&&!!e.storageEncounters[i][t],t.sceneHasTreasureBeenAcquired=(e,t,i)=>!!e.storageTreasure[i]&&!!e.storageTreasure[i][t],t.sceneSetCurrentOverworld=(e,t)=>{e.storage.current_overworld=t},t.sceneGetCurrentOverworldName=e=>{var t;return null!==(t=e.storage.current_overworld)&&void 0!==t?t:"test2"},t.sceneAddPostSceneCallback=(e,t)=>{e.postSceneCallbacks.push(t)}})),define("lib/rpgscript",["require","exports","model/scene"],(function(e,t,i){"use strict";function a(e){return function(e){return e.map(e=>'"'===e[0]||"'"===e[0]?e.slice(1,-1):e)}(e).map(e=>isNaN(parseFloat(e))?e:parseFloat(e))}var r;Object.defineProperty(t,"__esModule",{value:!0}),t.getTriggers=t.getScripts=t.triggerExists=t.scriptExists=t.getTrigger=t.getScript=t.parseSingleScript=t.parseRPGScript=t.loadRPGScript=t.ScriptParser=t.Script=t.Trigger=t.TriggerType=t.formatArgs=void 0,t.formatArgs=a,(r=t.TriggerType||(t.TriggerType={})).STEP="step",r.STEP_FIRST="step-first",r.STEP_OFF="step-off",r.ACTION="action";class o{constructor(e,t,i){this.name=e,this.filename=t,this.lineNum=i,this.scriptCalls=[]}addScriptCall(e,t,i){this.scriptCalls.push({type:e,condition:t,scriptName:i})}}t.Trigger=o;class n{constructor(e,t,i){this.name=e,this.filename=t,this.lineNum=i,this.blocks=[],this.soundNameStorage={},this.currentBlockIndex=0,this.currentCommandIndex=0,this.sounds=0,this.soundsPerCharacter={}}reset(){this.currentBlockIndex=0,this.currentCommandIndex=0,this.blocks.forEach(e=>{e.conditionalResult=void 0})}isValid(e){if(!e)return{};for(let t=0;t<this.blocks.length;t++){let a=this.blocks[t];for(let t=0;t<a.commands.length;t++){let r=a.commands[t];if(":"!==r.type[0]&&!i.sceneHasCommand(e,r.type))return{msg:`No command exists with name "${r.type}" and args "${r.args.join(",")}" `,lineNum:r.i}}}return{}}getNextCommand(){let e=this.blocks[this.currentBlockIndex];if(e){let t=e.commands[this.currentCommandIndex];return t?(this.currentCommandIndex++,{i:this.currentBlockIndex,args:t.args,type:t.type,conditional:e.conditional,block:e}):(this.currentBlockIndex++,this.currentCommandIndex=0,this.getNextCommand())}return null}getNextDialog(e){this.soundsPerCharacter[e]?this.soundsPerCharacter[e]++:this.soundsPerCharacter[e]=1;let t=this.soundsPerCharacter[e];t<10&&(t="0"+t);let i=this.name+"/"+this.sounds,a=this.name+"/"+e+"-"+t;return this.sounds++,{soundNameIndexed:i,soundNameCh:a,n:t}}addCommandBlock(){let e={conditional:!0,commands:[]};return this.blocks.push(e),e}}t.Script=n;class l{constructor(e){this.name=e,this.soundsToLoad=[]}throwParsingError(e,t,i){let a=`{Line ${-1===t?0:t}} Script parsing error ${this.name}: ${e} CONTENTS [\n"${i}"\n]`;throw console.error(a),Error(a)}parseCommand(e,t,i){if(":"===(e=e.trim())[0]){let i=e.slice(),a=i.indexOf("("),r=i.lastIndexOf(")");-1===a&&this.throwParsingError("Invalid callScript shorthand, no open paren.'",t,e),-1===r&&this.throwParsingError("Invalid callScript shorthand, no close paren.'",t,e);let o=i.slice(1,a),n=i.slice(a+1,r).split(",");e=`callScript(${o},${n.join(",")});`}let r=e.indexOf("("),o=e.lastIndexOf(")");if(e.match(/^(\w)+:/)&&i)return this.createDialogCommand(e,i,t);-1!==r&&0!==r||this.throwParsingError("Invalid command, no name provided",t,e),-1!==o&&0!==o||this.throwParsingError("Invalid command, no end parens",t,e);let n=e.substr(r+1,e.length-(r+1)-(e.length-o));return n=function(e,t){let i=[],a="",r="",o=!1;for(let t=0;t<e.length;t++){let n=e[t];r?n===r&&(r="",o=!1):'"'===n||"'"===n?(r=n,o=!0):"("===n?o=!0:")"===n&&(o=!1),o||","!==e[t]?a+=n:(i.push(a),a="")}return a&&i.push(a),i}(n).map(e=>e.trim()),n.forEach(i=>{"'"===i[0]?"'"!==i[i.length-1]&&this.throwParsingError('Invalid command, unterminated single quote "\'"',t,e):'"'===i[0]&&'"'!==i[i.length-1]&&this.throwParsingError("Invalid command, unterminated double quote '\"'",t,e)}),{i:t,type:e.substr(0,r),args:a(n)}}parseConditional(e,t,i){let{type:a,args:r}=this.parseCommand(e,t,i);return["is","isnot","gt","lt","eq","any","all","as","once","with","func"].includes(a)||this.throwParsingError(`Invalid conditional, no type named "${a}"`,t,e),{type:a,args:r.map(e=>"string"==typeof e&&"func"!==a&&-1!==e.indexOf("(")?this.parseCommand(e,t,i):e)}}combineConditionals(e,t,i){return{type:i,args:[e,t]}}createAllConditional(...e){return{type:"all",args:[...e]}}getConditionalFromLine(e,t,i){let a=function(e,t){let i="",a=!1;for(let t=0;t<e.length;t++){let r=e[t];if(i?r===i&&(i="",a=!1):'"'===r||"'"===r?(i=r,a=!0):"("===r?a=!0:")"===r&&(a=!1),!a&&"?"===e[t])return t}return-1}(e);if(a>-1){let r=e.indexOf(":");-1===r&&this.throwParsingError("Invalid conditional, no ending ':'",t,e);let o=e.slice(a+1,r);return{conditional:this.parseConditional(o.trim(),t,i),endIndex:r+1}}return{conditional:!0,endIndex:0}}createDialogCommand(e,t,i){let r=e.indexOf(":");-1===r&&this.throwParsingError('Dialog command did not have a ":" character.',i,e);let o=e.slice(0,r),n=e.slice(r+1),l="playDialogue";"_"===o[0]&&(o=o.slice(1),l="playDialogueInterruptable"),n=n.trim();let{soundNameCh:s,soundNameIndexed:d,n:c}=t.getNextDialog(o);return this.soundsToLoad.push({soundNameCh:s,soundNameIndexed:d}),{i:parseInt(c+""),type:l,args:a([o,n,s])}}parse(e,t){var i;let a={},r={},l=!1,s=!1,d=!1,c=null,m=null,h=null,u=null,p=[],g=e.split("\n"),y=0;if(g.forEach((e,i)=>{var g;if(i+=1,0===(e=e.trim()).length)return;if("/"===e[0]&&"/"===e[1])return;y=i;let f=e[0];if("{"===f)l=!0,p.push(!0);else if("}"===f)l=!1,c=null,p.pop();else if("@"!==f||l){if("$"===f)d=!0,s=!1,m&&(c=m.addCommandBlock(),c.conditional=!0,c.commands.push({i:i,type:"showChoices",args:[]}));else if("#"===f)s=!0,d=!1,u=e.substr(1),h=new o(e.substr(1),this.name,i),((e,t)=>{a[e]=t})(e.substr(1),h);else if("+"===f||l){let t=e.substr(l?0:1);if(m){let{conditional:a,endIndex:r}=this.getConditionalFromLine(t,i,m);if("object"==typeof a){if("{"===t[r])return p.push(a),l=!0,c=m.addCommandBlock(),void(c.conditional=this.createAllConditional(...p));if(r===t.length)return c=m.addCommandBlock(),void(c.conditional=a)}let o=null;l?(null===c&&(c=m.addCommandBlock(),c.conditional=a),o=c):(o=c=m.addCommandBlock(),o.conditional=a);let n=t.substr(r),s=/(.*): "(.*)"/.test(n);if("?"===n[0])return void this.throwParsingError("Invalid conditional, did you forget '+' at the start?",i,e);if("+"===n[0])n=n.slice(1);else if(s){let e=this.createDialogCommand(n,m,i);return void o.commands.push(e)}let{type:d,args:h}=this.parseCommand(n,i,m);o.commands.push({i:i,type:d,args:h})}}else if(d){let t=e.indexOf(":");-1===t&&this.throwParsingError("Invalid choice definition, no colon '\"'",i,e);let a=e.substr(0,t),r=e.substr(t+1);c&&c.commands[0].args.push({text:a,target:r})}else if(s){let t=e.indexOf(",");-1===t&&this.throwParsingError("Invalid trigger script call, invalid number of arguments",i,e);let a=e.substr(0,t),r=e.substr(t+1),o=null;"item"===a&&(o={type:"with",args:[r.slice(0,r.indexOf(","))]},r=r.slice(r.indexOf(",")+1));let{conditional:n,endIndex:l}=this.getConditionalFromLine(r,i,m),s=n;o&&(s=this.combineConditionals(o,n,"all"));let d=r.substr(l);"this"===d&&u&&(d=u),h&&h.addScriptCall(a,s,d)}else if(">"===f)c&&c.commands.push({i:i,type:"callScript",args:[e.substr(1)]});else if(s=!1,m){if("?"===e[0])return void this.throwParsingError("Invalid conditional, did you forget '+' at the start?",i,e);let t=m.addCommandBlock(),a=this.createDialogCommand(e,m,i);t.commands.push(a)}}else{let a=e.substr(1,e.length-1);if("this"===a&&(a=u||""),0===a.length&&this.throwParsingError("Invalid script name",i,e),m){let e=m.isValid(t),i=e.msg;i&&this.throwParsingError(i,null!==(g=e.lineNum)&&void 0!==g?g:0,"")}m=new n(a,this.name,i),r[a]=m,s=!1,d=!1}}),m){let e=m.isValid(t),a=null==e?void 0:e.msg;a&&this.throwParsingError(a,null!==(i=e.lineNum)&&void 0!==i?i:0,g[g.length-1])}return{triggers:a,scripts:r}}}t.ScriptParser=l;let s={},d={};t.loadRPGScript=async(e,i)=>{let a=`res/rpgscript/${e}.rpgscript`;console.log("Loading script",a);let r=await(await fetch(a)).text();t.parseRPGScript(e,r,i)},t.parseRPGScript=(e,t,i)=>{let a=new l(e),{triggers:r,scripts:o}=a.parse(t,i);Object.assign(s,o),Object.assign(d,r)},t.parseSingleScript=(e,t)=>{let i=new l(e),{scripts:a}=i.parse(e,t);return a},t.getScript=e=>{let t=s[e];if(!t)throw Error("Cannot get script with name "+e);return t},t.getTrigger=e=>{let t=d[e];if(!t)throw Error("Cannot get trigger with name "+e);return t},t.scriptExists=e=>!!s[e],t.triggerExists=e=>!!d[e],t.getScripts=()=>s,t.getTriggers=()=>d})),define("map/battle1",[],{compressionlevel:-1,editorsettings:{export:{format:"json",target:"battle1.json"}},height:16,infinite:!1,layers:[{data:[29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,28,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,28,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29],height:16,id:1,name:"Tiles",opacity:1,type:"tilelayer",visible:!0,width:16,x:0,y:0},{draworder:"topdown",id:5,name:"Objects",objects:[{gid:83,height:32,id:28,name:"MarkerAlly0",rotation:0,type:"",visible:!0,width:32,x:96,y:128},{gid:83,height:32,id:29,name:"MarkerAlly1",rotation:0,type:"",visible:!0,width:32,x:144,y:176},{gid:83,height:32,id:30,name:"MarkerAlly2",rotation:0,type:"",visible:!0,width:32,x:64,y:160},{gid:83,height:32,id:31,name:"MarkerAlly3",rotation:0,type:"",visible:!0,width:32,x:112,y:208},{gid:83,height:32,id:36,name:"MarkerEnemy2",rotation:0,type:"",visible:!0,width:32,x:160,y:64},{gid:83,height:32,id:37,name:"MarkerEnemy3",rotation:0,type:"",visible:!0,width:32,x:208,y:112},{gid:83,height:32,id:38,name:"MarkerEnemy1",rotation:0,type:"",visible:!0,width:32,x:176,y:144},{gid:83,height:32,id:39,name:"MarkerEnemy0",rotation:0,type:"",visible:!0,width:32,x:128,y:96},{gid:81,height:64,id:40,name:"",rotation:0,type:"",visible:!0,width:32,x:52,y:28},{gid:81,height:64,id:41,name:"",rotation:0,type:"",visible:!0,width:32,x:236,y:208},{gid:81,height:64,id:42,name:"",rotation:0,type:"",visible:!0,width:32,x:36,y:80}],opacity:1,type:"objectgroup",visible:!0,x:0,y:0}],nextlayerid:7,nextobjectid:43,orientation:"isometric",renderorder:"left-down",tiledversion:"1.4.3",tileheight:16,tilesets:[{columns:4,firstgid:1,image:"../../res/battle-terrain1.png",imageheight:128,imagewidth:128,margin:0,name:"battle-terrain1",spacing:0,tilecount:16,tileheight:32,tilewidth:32},{columns:8,firstgid:17,image:"../../res/floors.png",imageheight:256,imagewidth:256,margin:0,name:"floors",spacing:0,tilecount:64,tileheight:32,tilewidth:32},{firstgid:81,source:"../../res/props-dynamic.tiled-sheet.tsx"}],tilewidth:32,type:"map",version:1.4,width:16}),define("map/battle-tut1",[],{compressionlevel:-1,editorsettings:{export:{format:"json",target:"battle-tut1.json"}},height:16,infinite:!1,layers:[{data:[187,187,187,187,187,187,187,187,187,187,187,187,187,187,187,187,187,189,189,189,189,189,189,189,189,189,189,189,189,189,189,187,187,189,189,189,189,189,189,189,189,189,189,189,189,189,189,187,187,189,189,189,189,189,189,189,189,189,189,189,189,189,189,187,187,189,189,189,189,189,189,189,189,189,189,189,189,189,189,187,187,189,189,189,189,189,189,189,189,189,189,189,189,189,189,187,187,189,189,189,189,189,189,189,189,189,189,189,189,189,189,187,187,189,189,189,189,189,189,189,189,189,189,189,189,189,189,187,187,189,189,189,189,189,189,189,189,189,189,189,189,189,189,187,187,189,189,189,189,189,189,189,189,189,189,189,189,189,189,187,187,189,189,189,189,189,189,189,189,189,189,189,189,189,189,187,187,189,189,189,189,189,189,189,189,189,189,189,189,189,189,187,187,189,189,189,189,189,189,189,189,189,189,189,189,189,189,187,187,189,189,189,189,189,189,189,189,189,189,189,189,189,189,187,187,189,189,189,189,189,189,189,189,189,189,189,189,189,189,187,187,187,187,187,187,187,187,187,187,187,187,187,187,187,187,187],height:16,id:1,name:"Tiles",opacity:1,type:"tilelayer",visible:!0,width:16,x:0,y:0},{draworder:"topdown",id:2,name:"Objects",objects:[{gid:354,height:32,id:50,name:"MarkerAlly0",rotation:0,type:"",visible:!0,width:32,x:104,y:132},{gid:354,height:32,id:51,name:"MarkerAlly5",rotation:0,type:"",visible:!0,width:32,x:104,y:228},{gid:354,height:32,id:52,name:"MarkerAlly2",rotation:0,type:"",visible:!0,width:32,x:80,y:156},{gid:354,height:32,id:53,name:"MarkerAlly1",rotation:0,type:"",visible:!0,width:32,x:152,y:180},{gid:355,height:32,id:54,name:"MarkerEnemy2",rotation:0,type:"",visible:!0,width:32,x:160,y:76},{gid:355,height:32,id:55,name:"MarkerEnemy4",rotation:0,type:"",visible:!0,width:32,x:184,y:52},{gid:355,height:32,id:56,name:"MarkerEnemy1",rotation:0,type:"",visible:!0,width:32,x:184,y:148},{gid:355,height:32,id:57,name:"MarkerEnemy0",rotation:0,type:"",visible:!0,width:32,x:136,y:100},{gid:354,height:32,id:58,name:"MarkerAlly3",rotation:0,type:"",visible:!0,width:32,x:128,y:204},{gid:354,height:32,id:59,name:"MarkerAlly4",rotation:0,type:"",visible:!0,width:32,x:56,y:180},{gid:355,height:32,id:60,name:"MarkerEnemy3",rotation:0,type:"",visible:!0,width:32,x:208,y:124},{gid:355,height:32,id:61,name:"MarkerEnemy5",rotation:0,type:"",visible:!0,width:32,x:232,y:100}],offsetx:-4,offsety:4,opacity:1,type:"objectgroup",visible:!0,x:0,y:0}],nextlayerid:6,nextobjectid:62,orientation:"isometric",renderorder:"right-down",tiledversion:"1.4.3",tileheight:16,tilesets:[{columns:16,firstgid:1,image:"../../res/walls.png",imageheight:512,imagewidth:512,margin:0,name:"walls",spacing:0,tilecount:128,tileheight:64,tilewidth:32},{columns:8,firstgid:129,image:"../../res/floors.png",imageheight:256,imagewidth:256,margin:0,name:"floors",spacing:0,tilecount:64,tileheight:32,tilewidth:32},{columns:4,firstgid:193,image:"../../res/control.png",imageheight:128,imagewidth:128,margin:0,name:"control",spacing:0,tilecount:16,tileheight:32,tilewidth:32},{columns:16,firstgid:209,image:"../../res/props.png",imageheight:512,imagewidth:512,margin:0,name:"props",spacing:0,tilecount:128,tileheight:64,tilewidth:32},{columns:8,firstgid:337,image:"../../res/walls128.png",imageheight:256,imagewidth:256,margin:0,name:"walls128",spacing:0,tilecount:16,tileheight:128,tilewidth:32},{firstgid:353,source:"../../../sadelica-new-world/scratch/props-dynamic.tsx"}],tilewidth:32,type:"map",version:1.4,width:16}),define("map/battle-tutBoss",[],{compressionlevel:-1,height:16,infinite:!1,layers:[{data:[129,129,129,129,129,129,129,129,129,189,129,129,129,129,129,129,129,129,189,129,185,129,129,129,129,129,129,129,129,129,185,129,129,129,129,129,129,0,129,0,129,129,129,129,129,129,129,129,129,185,129,129,129,129,129,0,189,189,189,189,189,129,129,129,129,129,129,129,129,129,129,189,189,189,189,189,189,189,129,129,129,129,129,129,129,129,189,188,189,189,189,189,190,189,189,129,129,129,129,129,129,189,188,190,189,189,189,189,188,189,189,189,129,189,129,129,189,188,188,189,189,189,189,189,188,189,189,189,129,129,129,189,189,189,189,189,189,189,189,189,188,189,189,189,129,129,129,189,189,189,189,189,189,189,189,189,189,185,129,129,189,129,129,189,189,189,189,189,189,189,189,189,189,189,129,129,129,129,129,189,189,189,189,189,189,189,189,189,185,129,129,189,129,129,129,189,189,188,190,188,188,189,189,189,129,129,129,129,129,129,129,129,189,189,189,189,189,189,185,129,129,185,129,129,129,185,129,129,129,189,189,189,189,189,129,129,129,129,129,129,129,129,129,129,129,129,189,189,189,189,129,129,189,129,129,189],height:16,id:1,name:"Tiles",offsetx:0,offsety:16,opacity:1,type:"tilelayer",visible:!0,width:16,x:0,y:0},{draworder:"topdown",id:2,name:"Objects",objects:[{gid:355,height:32,id:57,name:"MarkerEnemy0",rotation:0,type:"",visible:!0,width:32,x:202.5,y:119.5},{gid:194,height:32,id:62,name:"MarkerAlly0",rotation:0,type:"",visible:!0,width:32,x:124,y:144},{gid:194,height:32,id:63,name:"MarkerAlly1",rotation:0,type:"",visible:!0,width:32,x:149.5,y:178.5},{gid:194,height:32,id:64,name:"MarkerAlly2",rotation:0,type:"",visible:!0,width:32,x:103.5,y:164.5},{gid:194,height:32,id:65,name:"MarkerAlly3",rotation:0,type:"",visible:!0,width:32,x:128.5,y:199.5},{gid:194,height:32,id:66,name:"MarkerAlly4",rotation:0,type:"",visible:!0,width:32,x:83,y:183},{gid:194,height:32,id:67,name:"MarkerAlly5",rotation:0,type:"",visible:!0,width:32,x:108.5,y:217.5},{gid:194,height:32,id:68,name:"MarkerEnemy1",rotation:0,type:"",visible:!0,width:32,x:147.5,y:94.5},{gid:194,height:32,id:69,name:"MarkerEnemy2",rotation:0,type:"",visible:!0,width:32,x:244,y:126}],offsetx:-4,offsety:4,opacity:1,type:"objectgroup",visible:!0,x:0,y:0}],nextlayerid:6,nextobjectid:70,orientation:"isometric",renderorder:"right-down",tiledversion:"1.7.2",tileheight:16,tilesets:[{columns:16,firstgid:1,image:"../../res/walls.png",imageheight:512,imagewidth:512,margin:0,name:"walls",spacing:0,tilecount:128,tileheight:64,tilewidth:32},{columns:8,firstgid:129,image:"../../res/floors.png",imageheight:256,imagewidth:256,margin:0,name:"floors",spacing:0,tilecount:64,tileheight:32,tilewidth:32},{columns:4,firstgid:193,image:"../../res/control.png",imageheight:128,imagewidth:128,margin:0,name:"control",spacing:0,tilecount:16,tileheight:32,tilewidth:32},{columns:16,firstgid:209,image:"../../res/props.png",imageheight:512,imagewidth:512,margin:0,name:"props",spacing:0,tilecount:128,tileheight:64,tilewidth:32},{columns:8,firstgid:337,image:"../../res/walls128.png",imageheight:256,imagewidth:256,margin:0,name:"walls128",spacing:0,tilecount:16,tileheight:128,tilewidth:32},{firstgid:353,source:"../../scratch/props-dynamic.tsx"}],tilewidth:32,type:"map",version:"1.6",width:16}),define("map/test",[],{compressionlevel:-1,editorsettings:{export:{format:"json",target:"test.json"}},height:64,infinite:!1,layers:[{data:[129,2,2,11,2,2,2,13,2,2,2,11,2,2,2,2,2,5,5,5,5,0,0,0,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,1,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,4,129,129,129,129,0,0,0,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,12,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,4,129,129,129,129,0,0,0,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,1,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,4,129,129,129,129,0,0,0,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,1,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,4,129,129,129,129,0,0,0,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,8,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,4,129,129,129,129,0,0,0,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,6,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,0,0,0,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,6,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,0,0,0,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,1,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,0,0,0,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,10,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,0,0,0,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,1,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,0,0,0,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,1,5,5,5,5,5,5,5,129,129,129,129,129,129,129,129,129,129,129,129,129,0,0,0,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,4,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,0,0,0,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,4,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,0,0,0,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,4,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,0,0,0,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,4,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,0,0,0,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,4,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,0,0,0,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,4,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,0,0,0,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,4,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,0,0,0,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,4,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,0,0,0,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,4,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,0,0,0,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129],height:64,id:1,name:"Tiles",opacity:1,type:"tilelayer",visible:!0,width:64,x:0,y:0},{draworder:"topdown",id:2,name:"Objects",objects:[{gid:193,height:32,id:1,name:"Skye",rotation:0,type:"",visible:!0,width:32,x:288,y:112}],opacity:1,type:"objectgroup",visible:!0,x:0,y:0}],nextlayerid:4,nextobjectid:3,orientation:"isometric",renderorder:"right-down",tiledversion:"1.4.3",tileheight:16,tilesets:[{columns:16,firstgid:1,image:"../../res/walls.png",imageheight:512,imagewidth:512,margin:0,name:"walls",spacing:0,tilecount:128,tileheight:64,tilewidth:32},{columns:8,firstgid:129,image:"../../res/floors.png",imageheight:256,imagewidth:256,margin:0,name:"floors",spacing:0,tilecount:64,tileheight:32,tilewidth:32},{columns:2,firstgid:193,image:"../../res/control.png",imageheight:64,imagewidth:64,margin:0,name:"control",spacing:0,tilecount:4,tileheight:32,tilewidth:32},{columns:16,firstgid:197,image:"../../res/props.png",imageheight:512,imagewidth:512,margin:0,name:"props",spacing:0,tilecount:128,tileheight:64,tilewidth:32}],tilewidth:32,type:"map",version:1.4,width:64}),define("map/test2",[],{compressionlevel:-1,height:40,infinite:!1,layers:[{data:[130,2,2,11,2,2,2,13,2,2,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,2,2,2,2,129,129,129,1,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,1,129,129,129,12,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,1,129,129,129,1,130,130,130,17,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,1,129,129,129,1,130,130,17,17,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,1,129,129,129,8,130,130,130,17,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,1,129,129,129,6,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,1,129,129,129,6,130,130,130,130,130,130,130,130,16,16,16,16,16,16,16,16,16,16,16,16,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,1,129,129,129,1,130,130,130,130,130,130,130,130,16,129,129,129,129,129,129,129,129,129,129,1,215,130,130,130,130,130,130,130,130,130,130,130,130,130,130,1,129,129,129,10,130,130,130,130,130,130,130,130,16,129,129,129,129,129,129,129,129,129,129,4,215,130,130,130,130,130,130,130,130,130,130,130,130,130,130,1,129,129,129,1,130,130,130,130,130,130,130,130,16,129,129,129,129,129,129,129,129,129,129,4,215,130,130,130,130,130,130,130,130,130,130,130,130,130,130,1,129,129,129,1,130,130,130,130,130,130,130,130,16,129,129,129,129,129,129,129,129,129,129,4,215,130,130,130,130,130,130,130,130,130,130,130,130,130,130,1,129,129,129,4,130,130,130,130,130,130,130,130,16,129,129,129,129,129,129,129,129,129,129,4,215,130,130,130,130,130,130,130,130,130,130,130,130,130,130,1,129,129,129,4,130,130,130,130,130,130,130,130,16,129,129,129,129,129,129,129,129,129,129,4,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,1,129,129,129,4,130,130,130,130,130,130,130,130,16,129,129,129,129,129,129,129,129,129,129,1,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,1,129,129,129,4,209,130,130,130,130,130,130,130,16,129,129,129,129,129,129,129,129,129,129,1,2,2,2,2,2,2,15,15,2,2,2,2,2,2,2,3,129,129,129,4,130,130,130,130,130,130,130,130,16,129,129,129,129,129,129,129,129,129,129,1,129,129,129,129,129,16,130,130,16,129,129,129,129,129,129,1,129,129,129,4,130,130,130,130,130,130,130,130,16,129,129,129,129,129,129,129,129,129,129,1,129,129,129,129,129,16,130,130,16,129,129,129,129,129,129,1,129,129,129,4,130,130,130,130,130,130,130,130,16,129,129,129,129,129,129,129,129,129,129,1,129,129,129,129,129,16,130,130,16,129,129,129,129,129,129,1,129,129,129,4,217,130,130,130,130,130,130,130,16,129,129,129,129,129,129,129,129,129,129,1,2,2,2,2,2,16,15,15,16,2,2,2,2,2,2,3,129,129,129,4,217,130,130,130,130,130,130,130,16,129,129,129,129,129,129,129,129,129,129,1,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,1,129,129,129,4,130,130,130,130,130,130,130,130,16,129,129,129,129,129,129,129,129,129,129,4,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,1,129,129,129,4,130,130,130,1,16,16,16,16,16,129,129,129,129,129,129,129,129,129,129,4,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,1,129,129,129,4,221,130,130,130,130,130,130,130,16,129,129,129,129,129,129,129,129,129,129,4,130,130,130,17,130,130,130,130,130,130,130,130,130,130,130,1,129,129,129,4,221,130,130,130,130,130,130,130,16,129,129,129,129,129,129,129,129,129,129,4,130,130,17,17,130,130,130,130,130,130,130,130,130,130,130,1,129,129,129,4,130,130,130,130,130,130,130,130,16,129,129,129,129,129,129,129,129,129,129,1,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,1,129,129,129,4,130,130,130,130,130,130,130,130,16,5,5,5,5,5,5,5,5,2,2,3,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,1,129,129,129,4,219,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,131,131,131,130,130,130,130,17,130,130,130,130,130,17,130,130,130,130,1,129,129,129,4,219,130,130,130,130,130,130,130,130,235,130,130,130,130,130,130,130,131,131,131,130,130,130,130,17,130,130,130,130,130,17,130,130,130,130,1,129,129,129,4,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,17,130,130,130,130,1,129,129,129,4,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,17,17,130,130,130,130,17,130,130,130,130,1,129,129,129,4,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,17,130,130,130,130,130,17,130,130,130,130,1,129,129,129,4,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,17,130,130,130,130,1,129,129,129,4,130,130,130,130,130,130,130,130,130,239,130,130,130,130,130,130,130,130,17,17,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,1,129,129,129,4,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,17,130,130,130,130,130,130,130,130,130,130,1,129,129,129,4,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,17,17,130,130,130,130,17,130,130,130,130,1,129,129,129,4,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,17,17,17,17,17,130,130,130,130,1,129,129,129,4,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,129,129,129,129,17,2,2,2,3,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129],height:40,id:1,name:"Tiles",opacity:1,type:"tilelayer",visible:!0,width:40,x:0,y:0},{data:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,232,0,0,0,0,232,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,231,0,0,0,0,231,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,233,234,234,234,234,234,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,236,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],height:40,id:6,name:"Tiles2",opacity:1,type:"tilelayer",visible:!0,width:40,x:0,y:0},{draworder:"topdown",id:2,name:"Objects",objects:[{gid:193,height:32,id:3,name:"Skye",rotation:0,type:"",visible:!0,width:32,x:44,y:248},{gid:194,height:32,id:5,name:"MarkerWalkTest1",rotation:0,type:"",visible:!0,width:32,x:176,y:48},{gid:194,height:32,id:6,name:"MarkerWalkTest2",rotation:0,type:"",visible:!0,width:32,x:76,y:276},{gid:195,height:32,id:9,name:"#floor1-vendingPanel",rotation:0,type:"",visible:!0,width:32,x:28,y:268},{height:44,id:11,name:"#floor1-vendingPanel",rotation:0,type:"",visible:!0,width:140,x:12,y:152},{gid:193,height:32,id:18,name:"Roger",rotation:0,type:"",visible:!0,width:32,x:97.25,y:35.75},{height:57.3333,id:20,name:"#test2-openDoorA",rotation:0,type:"",visible:!0,width:32,x:428,y:286.667},{height:55.3333,id:21,name:"#test2-openDoorB",rotation:0,type:"",visible:!0,width:32,x:428,y:220},{gid:194,height:32,id:22,name:"markerDoorA",rotation:0,type:"",visible:!0,width:32,x:436,y:308},{gid:194,height:32,id:23,name:"markerDoorB",rotation:0,type:"",visible:!0,width:32,x:436,y:244},{height:164,id:26,name:"#test2-closeDoorsAB",rotation:0,type:"",visible:!0,width:64,x:412,y:200},{gid:194,height:32,id:29,name:"MarkerSpawnAtMarker",rotation:0,type:"",visible:!0,width:32,x:366.625,y:89.875},{gid:193,height:32,id:35,name:"Sigma",rotation:0,type:"",visible:!0,width:32,x:385.125,y:42.875},{height:0,id:44,name:"",rotation:0,type:"",visible:!0,width:0,x:459.625,y:232.875},{height:0,id:45,name:"",rotation:0,type:"",visible:!0,width:0,x:473.25,y:218.75},{height:0,id:46,name:"",rotation:0,type:"",visible:!0,width:0,x:476.75,y:221.75},{height:0,id:47,name:"",rotation:0,type:"",visible:!0,width:0,x:459.375,y:220.625},{height:69.125,id:52,name:"#rho-look-area",rotation:0,type:"",visible:!0,width:73.125,x:354.625,y:129.25},{gid:194,height:32,id:53,name:"MarkerWalkA",rotation:0,type:"",visible:!0,width:32,x:104,y:136},{gid:194,height:32,id:54,name:"MarkerWalkB",rotation:0,type:"",visible:!0,width:32,x:40,y:136},{gid:194,height:32,id:55,name:"MarkerWalkC",rotation:0,type:"",visible:!0,width:32,x:44,y:40},{gid:193,height:32,id:57,name:"TutRobotRoamer1",properties:[{name:"encounterName",type:"string",value:"ENCOUNTER_TUT_DUNGEON1"},{name:"overworldAi",type:"string",value:"ROAM_WALK_RIGHTUP_LEFTDOWN"}],rotation:0,type:"",visible:!0,width:32,x:374,y:340},{gid:194,height:32,id:61,name:"MarkerKioskStats",rotation:0,type:"",visible:!0,width:32,x:168,y:456},{height:56,id:62,name:"#utils-kiosk-stats-activate",rotation:0,type:"",visible:!0,width:56,x:132,y:420},{height:80,id:63,name:"#utils-kiosk-stats-deactivate",rotation:0,type:"",visible:!0,width:80,x:120,y:408},{gid:201,height:32,id:64,name:"ItemTrainingBow",rotation:0,type:"",visible:!0,width:32,x:248,y:488},{gid:194,height:32,id:65,name:"MarkerSavePoint",rotation:0,type:"",visible:!0,width:32,x:168,y:536},{height:60,id:66,name:"#utils-save-point-activate",rotation:0,type:"",visible:!0,width:52,x:140,y:504},{height:76,id:67,name:"#utils-save-point-deactivate",rotation:0,type:"",visible:!0,width:68,x:132,y:496},{gid:193,height:32,id:68,name:"Rho",rotation:0,type:"",visible:!0,width:32,x:392.542,y:170.125},{gid:194,height:32,id:69,name:"MarkerVortexMachine",rotation:0,type:"",visible:!0,width:32,x:44,y:440},{height:48,id:70,name:"#test2-vortex-machine",rotation:0,type:"",visible:!0,width:28,x:24,y:420},{gid:193,height:32,id:71,name:"TestDialogC",rotation:0,type:"",visible:!0,width:32,x:44,y:492},{gid:193,height:32,id:72,name:"TestDialogB",rotation:0,type:"",visible:!0,width:32,x:44,y:516},{height:32,id:73,name:"#test-callScriptIntegration",rotation:0,type:"",visible:!0,width:20,x:92,y:428},{gid:193,height:32,id:75,name:"TestDialogA",rotation:0,type:"",visible:!0,width:32,x:44,y:540},{gid:193,height:32,id:76,name:"TestDialogD",rotation:0,type:"",visible:!0,width:32,x:94,y:524},{gid:193,height:32,id:77,name:"Shopkeep",rotation:0,type:"",visible:!0,width:32,x:449.25,y:33.75},{gid:194,height:32,id:78,name:"MarkerPlayer",rotation:0,type:"",visible:!0,width:32,x:81.5,y:402.5},{height:69.125,id:79,name:"#test-ada-sigma-shopkeep",rotation:0,type:"",visible:!0,width:73.125,x:407.937,y:14.9375},{gid:194,height:32,id:80,name:"MarkerAdaShopkeep",rotation:0,type:"",visible:!0,width:32,x:457,y:82.3333},{gid:356,height:32,id:81,name:"PropLight",rotation:0,type:"front",visible:!0,width:32,x:308.5,y:427.5},{height:33,id:82,name:"#test-prop-light-anim",rotation:0,type:"",visible:!0,width:47,x:286.5,y:429.5},{gid:193,height:32,id:84,name:"TestDialogE",rotation:0,type:"",visible:!0,width:32,x:265,y:447},{gid:194,height:32,id:85,name:"MarkerZagMachine",rotation:0,type:"",visible:!0,width:32,x:44,y:376},{height:48,id:86,name:"#test2-zag-machine",rotation:0,type:"",visible:!0,width:28,x:24,y:356}],opacity:1,type:"objectgroup",visible:!0,x:0,y:0}],nextlayerid:7,nextobjectid:87,orientation:"isometric",renderorder:"right-down",tiledversion:"1.7.2",tileheight:16,tilesets:[{columns:16,firstgid:1,image:"../../res/walls.png",imageheight:512,imagewidth:512,margin:0,name:"walls",spacing:0,tilecount:128,tileheight:64,tilewidth:32},{columns:8,firstgid:129,image:"../../res/floors.png",imageheight:256,imagewidth:256,margin:0,name:"floors",spacing:0,tilecount:64,tileheight:32,tilewidth:32},{columns:4,firstgid:193,image:"../../res/control.png",imageheight:128,imagewidth:128,margin:0,name:"control",spacing:0,tilecount:16,tileheight:32,tilewidth:32},{columns:16,firstgid:209,image:"../../res/props.png",imageheight:512,imagewidth:512,margin:0,name:"props",spacing:0,tilecount:128,tileheight:64,tilewidth:32},{columns:16,firstgid:337,image:"../../res/props_small.png",imageheight:512,imagewidth:512,margin:0,name:"props_small",spacing:0,tilecount:256,tileheight:32,tilewidth:32}],tilewidth:32,type:"map",version:"1.6",width:40}),define("map/test3",[],{compressionlevel:-1,editorsettings:{export:{format:"json",target:"test3.json"}},height:5,infinite:!1,layers:[{data:[129,129,129,129,129,129,139,139,139,139,129,139,139,139,139,129,139,139,139,139,16,139,139,139,139],height:5,id:1,name:"Tiles",opacity:1,type:"tilelayer",visible:!0,width:5,x:0,y:0},{data:[141,141,0,0,16,141,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],height:5,id:6,name:"Tiles2",opacity:1,type:"tilelayer",visible:!0,width:5,x:0,y:0},{draworder:"topdown",id:2,name:"Objects",objects:[{gid:194,height:32,id:46,name:"MarkerPlayer",rotation:0,type:"",visible:!0,width:32,x:44,y:44}],opacity:1,type:"objectgroup",visible:!0,x:0,y:0}],nextlayerid:7,nextobjectid:47,orientation:"isometric",renderorder:"right-down",tiledversion:"1.7.0",tileheight:16,tilesets:[{columns:16,firstgid:1,image:"../../res/walls.png",imageheight:512,imagewidth:512,margin:0,name:"walls",spacing:0,tilecount:128,tileheight:64,tilewidth:32},{columns:8,firstgid:129,image:"../../res/floors.png",imageheight:256,imagewidth:256,margin:0,name:"floors",spacing:0,tilecount:64,tileheight:32,tilewidth:32},{columns:4,firstgid:193,image:"../../res/control.png",imageheight:128,imagewidth:128,margin:0,name:"control",spacing:0,tilecount:16,tileheight:32,tilewidth:32},{columns:16,firstgid:209,image:"../../res/props.png",imageheight:512,imagewidth:512,margin:0,name:"props",spacing:0,tilecount:128,tileheight:64,tilewidth:32},{columns:8,firstgid:337,image:"../../res/walls128.png",imageheight:256,imagewidth:256,margin:0,name:"walls128",spacing:0,tilecount:16,tileheight:128,tilewidth:32}],tilewidth:32,type:"map",version:"1.6",width:5}),define("map/floor1-outside",[],{compressionlevel:-1,height:32,infinite:!1,layers:[{data:[337,338,337,338,337,337,337,337,337,337,337,337,360,360,359,359,359,359,359,359,359,360,360,337,338,33,33,33,132,17,16,16,338,337,338,337,338,337,337,337,337,337,337,337,360,359,359,359,359,359,359,359,359,359,360,337,337,338,33,132,132,17,16,16,337,338,337,338,337,337,337,337,337,337,337,337,360,360,359,359,359,359,359,359,359,360,360,337,338,33,33,33,132,17,16,16,338,337,338,337,338,337,337,337,337,337,337,337,360,359,359,359,359,359,359,359,359,359,360,337,337,338,33,132,132,17,16,16,337,338,337,338,337,338,337,337,337,337,337,337,360,360,359,359,359,359,359,359,359,360,360,337,338,33,33,33,132,17,16,16,338,337,338,337,338,337,338,337,337,337,337,360,360,359,359,359,359,359,359,359,359,359,360,337,337,338,33,132,132,16,16,16,337,338,337,338,337,338,337,337,337,337,337,360,360,360,359,359,359,359,359,359,359,360,360,337,338,33,33,33,132,16,16,16,338,337,338,337,338,337,338,337,337,337,337,360,360,359,359,359,359,359,359,359,359,359,360,337,337,338,33,132,132,16,16,16,337,338,337,338,337,338,337,338,337,337,337,337,360,360,359,359,359,359,359,359,359,360,360,337,338,33,33,33,132,16,16,16,338,337,338,337,338,337,338,337,338,337,337,337,360,359,360,359,360,359,360,359,360,359,360,337,337,338,33,132,132,16,16,16,337,338,337,338,337,338,337,338,337,338,337,360,360,360,360,360,360,360,360,360,360,360,360,337,338,33,33,33,132,16,16,16,338,337,338,337,338,337,338,337,338,337,337,338,339,339,338,339,339,338,339,339,338,339,339,337,337,338,33,132,132,16,16,16,131,33,131,33,131,33,131,33,131,33,131,131,131,131,131,131,131,131,131,131,131,131,131,33,131,33,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,136,136,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,136,136,131,131,131,131,131,131,133,133,133,133,133,133,133,133,133,133,133,133,133,133,133,133,133,133,133,133,133,133,133,133,133,133,133,133,133,133,133,131,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,133,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,134,134,134,134,134,134,134,134,134,134,134,134,134,134,134,134,134,134,134,134,134,134,134,134,134,134,134,134,134,134,134,134,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,134,134,134,134,134,134,134,134,134,134,134,134,134,134,134,134,134,134,134,134,134,134,134,134,134,134,134,134,134,134,134,134,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,134,134,134,134,134,134,134,134,134,134,134,134,134,134,134,134,134,134,134,134,134,134,134,134,134,134,134,134,134,134,134,134,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,131,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,131,131,131,131,131,131,131,131,131,132,132,132,132,132,132,132,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,132,132,132,132,132,132,132,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131],height:32,id:1,name:"Tiles",opacity:1,type:"tilelayer",visible:!0,width:32,x:0,y:0},{draworder:"topdown",id:2,name:"Objects",objects:[{gid:194,height:32,id:19,name:"MarkerPlayer",rotation:0,type:"",visible:!0,width:32,x:214.5,y:241.5},{gid:356,height:108,id:45,name:"",rotation:0,type:"front",visible:!0,width:177,x:200,y:104},{gid:353,height:64,id:46,name:"",rotation:0,type:"",visible:!0,width:32,x:404.5,y:249.5},{gid:353,height:64,id:47,name:"",rotation:0,type:"",visible:!0,width:32,x:49.8333,y:248.833},{gid:194,height:32,id:48,name:"MarkerConscience",rotation:0,type:"",visible:!0,width:32,x:360,y:248},{gid:194,height:32,id:49,name:"MarkerConscience2",rotation:0,type:"",visible:!0,width:32,x:268,y:240},{gid:193,height:32,id:50,name:"Floor1BlueCar",rotation:0,type:"",visible:!0,width:32,x:416.333,y:351.333},{gid:194,height:32,id:51,name:"MarkerBlueCar1",rotation:0,type:"",visible:!0,width:32,x:-5.5,y:350.167},{gid:194,height:32,id:52,name:"MarkerBlueCar2",rotation:0,type:"",visible:!0,width:32,x:573,y:353},{gid:193,height:32,id:53,name:"Floor1GreenCar",rotation:0,type:"",visible:!0,width:32,x:591.5,y:403.5},{gid:193,height:32,id:54,name:"Floor1WhiteCar",rotation:0,type:"",visible:!0,width:32,x:-15.8333,y:297.833},{gid:194,height:32,id:55,name:"MarkerWhiteCar1",rotation:0,type:"",visible:!0,width:32,x:-72.5,y:308.5},{gid:194,height:32,id:56,name:"MarkerGreenCar1",rotation:0,type:"",visible:!0,width:32,x:-7.5,y:398.167},{gid:194,height:32,id:57,name:"MarkerGreenCar2",rotation:0,type:"",visible:!0,width:32,x:602.667,y:404},{gid:194,height:32,id:58,name:"MarkerWhiteCar2",rotation:0,type:"",visible:!0,width:32,x:580.5,y:302.167},{gid:194,height:32,id:59,name:"MarkerAdaStart",rotation:0,type:"",visible:!0,width:32,x:232.667,y:238}],opacity:1,type:"objectgroup",visible:!0,x:0,y:0}],nextlayerid:6,nextobjectid:60,orientation:"isometric",renderorder:"right-down",tiledversion:"1.7.2",tileheight:16,tilesets:[{columns:16,firstgid:1,image:"../../res/walls.png",imageheight:512,imagewidth:512,margin:0,name:"walls",spacing:0,tilecount:128,tileheight:64,tilewidth:32},{columns:8,firstgid:129,image:"../../res/floors.png",imageheight:256,imagewidth:256,margin:0,name:"floors",spacing:0,tilecount:64,tileheight:32,tilewidth:32},{columns:4,firstgid:193,image:"../../res/control.png",imageheight:128,imagewidth:128,margin:0,name:"control",spacing:0,tilecount:16,tileheight:32,tilewidth:32},{columns:16,firstgid:209,image:"../../res/props.png",imageheight:512,imagewidth:512,margin:0,name:"props",spacing:0,tilecount:128,tileheight:64,tilewidth:32},{columns:8,firstgid:337,image:"../../res/walls128.png",imageheight:256,imagewidth:256,margin:0,name:"walls128",spacing:0,tilecount:16,tileheight:128,tilewidth:32},{firstgid:353,source:"../../res/props-dynamic.tiled-sheet.tsx"},{columns:8,firstgid:359,image:"../../res/walls256.png",imageheight:256,imagewidth:256,margin:0,name:"walls256",spacing:0,tilecount:8,tileheight:256,tilewidth:32}],tilewidth:32,type:"map",version:"1.6",width:32}),define("map/floor1-atrium",[],{compressionlevel:-1,height:32,infinite:!1,layers:[{data:[129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,338,338,16,138,138,16,338,338,129,36,140,140,36,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,338,338,140,140,338,338,129,129,36,140,140,36,129,129,338,16,16,338,338,338,338,338,5,5,5,5,5,5,5,5,5,5,5,338,140,140,338,16,16,16,36,140,140,36,16,129,16,212,212,338,137,137,137,338,137,137,137,137,137,137,137,137,137,137,140,140,140,140,140,140,16,140,140,140,140,140,1,16,16,137,137,137,137,137,137,137,137,137,137,137,137,137,137,137,137,137,140,140,140,140,140,140,16,140,140,140,140,140,1,16,16,137,137,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,1,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,1,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,16,16,16,137,137,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,16,16,137,137,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,129,16,137,137,137,137,137,137,137,137,137,137,137,140,140,140,140,137,137,137,137,137,137,137,137,16,16,16,16,16,16,16,129,16,213,137,137,137,137,137,137,137,137,137,137,140,140,137,137,137,137,137,137,137,137,137,137,16,129,129,129,129,129,129,129,16,16,137,137,137,137,137,137,137,137,137,137,140,140,140,140,140,137,137,137,137,137,137,137,16,129,129,129,129,129,129,129,338,16,137,137,137,137,137,137,137,137,137,16,140,140,140,140,4,16,138,138,138,138,138,138,16,16,16,16,16,16,16,129,1,139,139,139,137,137,137,137,137,137,216,4,140,140,140,140,4,138,138,138,138,138,138,138,138,138,138,138,138,129,16,129,1,221,139,139,137,137,137,137,137,137,137,4,140,140,140,140,4,138,138,138,138,138,138,138,138,138,138,138,138,129,16,129,1,139,139,139,137,137,137,137,137,137,137,4,140,140,140,140,4,138,138,138,138,138,138,138,138,138,138,138,138,129,16,129,1,221,139,139,137,137,137,137,137,137,137,4,140,140,140,140,4,138,138,138,138,138,138,138,138,138,138,138,138,129,16,129,1,215,139,139,137,137,137,137,137,137,137,4,140,140,140,140,4,138,138,138,138,138,138,138,138,138,138,138,138,129,16,129,129,2,139,139,137,137,137,137,137,137,137,4,140,140,140,140,4,138,138,138,138,138,138,138,138,138,138,138,138,129,16,129,129,129,129,16,137,137,137,137,137,137,137,4,140,140,140,140,4,138,138,138,138,138,138,234,138,138,138,138,138,129,16,129,129,129,129,16,137,137,137,137,137,137,137,4,140,140,140,140,4,138,138,138,138,138,138,138,138,2,2,2,2,2,338,129,129,129,129,16,137,137,137,137,137,137,137,4,140,140,140,140,4,138,138,138,138,138,138,138,1,129,129,129,129,129,129,129,129,129,129,16,137,137,137,137,137,137,137,4,140,140,140,140,4,138,138,138,138,138,138,138,1,129,129,129,129,129,129,338,129,129,129,16,137,137,137,137,137,137,137,1,140,140,140,140,4,138,138,138,138,138,138,138,1,129,129,129,129,129,129,33,129,129,129,16,2,2,2,2,2,2,2,3,140,140,140,140,4,2,2,2,2,2,2,2,3,129,129,129,129,129,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,339,339,339,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,129,129,129,129,129,129,129,129,129,129,33,140,140,140,339,339,339,140,140,140,140,33,33,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,33,140,140,140,140,140,140,140,140,140,140,33,33,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,140,140,129,129,33,33,33,33,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,33,129,129,129,129,140,140,140,140,129,33,33,33,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,338,339,339,338,339,339,338,339,339,338,339,339,338,129,129,129,129,129,129,129,129,129],height:32,id:1,name:"Tiles",opacity:1,type:"tilelayer",visible:!0,width:32,x:0,y:0},{data:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,339,339,0,0,0,0,0,15,15,0,0,0,0,0,0,0,227,227,227,0,0,227,227,0,0,227,227,0,0,0,0,0,0,0,0,0,0,243,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,14,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,14,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,14,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,14,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,216,0,0,0,0,0,0,0,0,232,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,226,0,0,0,0,0,0,0,0,231,0,0,0,0,0,0,215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,226,0,0,0,0,0,0,0,0,231,0,0,0,0,0,0,0,0,0,0,0,230,0,230,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,231,0,0,0,0,0,0,0,0,0,0,0,229,0,229,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,231,0,0,0,0,0,1,0,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,231,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,233,234,234,234,234,234,0,0,0,231,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,230,0,230,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,229,0,229,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],height:32,id:6,name:"Tiles2",opacity:1,type:"tilelayer",visible:!0,width:32,x:0,y:0},{draworder:"topdown",id:2,name:"Objects",objects:[{gid:194,height:32,id:19,name:"MarkerPlayer",rotation:0,type:"",visible:!0,width:32,x:90,y:224},{gid:200,height:32,id:42,name:"MarkerDoorEntrance",rotation:0,type:"",visible:!0,width:32,x:236,y:368},{gid:198,height:32,id:43,name:"MarkerFromBowling",rotation:0,type:"",visible:!0,width:32,x:358,y:80},{gid:193,height:32,id:45,name:"Floor1AtriumDeskEmployee",rotation:0,type:"",visible:!0,width:32,x:348,y:352},{gid:194,height:32,id:46,name:"MarkerDeskEmployeeWalk",rotation:0,type:"",visible:!0,width:32,x:340,y:256},{height:48,id:47,name:"#floor1-atrium-desk-employee",rotation:0,type:"",visible:!0,width:40,x:320,y:296},{gid:194,height:32,id:52,name:"MarkerNPCWalkA",rotation:0,type:"",visible:!0,width:32,x:359.375,y:126.625},{gid:194,height:32,id:53,name:"MarkerNPCWalkB",rotation:0,type:"",visible:!0,width:32,x:172.625,y:84.375},{gid:194,height:32,id:54,name:"MarkerNPCWalkC",rotation:0,type:"",visible:!0,width:32,x:150.125,y:130.375},{gid:194,height:32,id:55,name:"MarkerNPCWalkD",rotation:0,type:"",visible:!0,width:32,x:76,y:92},{gid:193,height:32,id:56,name:"Floor1AtriumTicTacToeGirl",rotation:0,type:"",visible:!0,width:32,x:52,y:208},{gid:198,height:32,id:60,name:"MarkerDoorTut",rotation:0,type:"",visible:!0,width:32,x:463.5,y:70.5},{gid:193,height:32,id:61,name:"Floor1AtriumEmployeeJason",rotation:0,type:"",visible:!0,width:32,x:462,y:60},{gid:194,height:32,id:62,name:"MarkerJasonB",rotation:0,type:"",visible:!0,width:32,x:423,y:67},{gid:194,height:32,id:63,name:"MarkerJasonA",rotation:0,type:"",visible:!0,width:32,x:443.5,y:74.5},{gid:194,height:32,id:64,name:"MarkerDoorTutTile",rotation:0,type:"",visible:!0,width:32,x:456,y:40},{gid:194,height:32,id:65,name:"MarkerTTTMachine",rotation:0,type:"",visible:!0,width:32,x:56,y:248},{gid:363,height:32,id:66,name:"",rotation:0,type:"",visible:!0,width:32,x:340,y:320},{gid:363,height:32,id:67,name:"",rotation:0,type:"",visible:!0,width:32,x:308,y:320},{gid:193,height:32,id:68,name:"Floor1PingPongGuyA",rotation:0,type:"",visible:!0,width:32,x:152,y:260},{gid:193,height:32,id:69,name:"Floor1PingPongGuyB",rotation:0,type:"",visible:!0,width:32,x:152,y:316},{height:60,id:70,name:"#floor1-atrium-TicTacToeMachine",rotation:0,type:"",visible:!0,width:32,x:44,y:224},{gid:194,height:32,id:72,name:"MarkerPingPong",rotation:0,type:"",visible:!0,width:32,x:152,y:288},{gid:193,height:32,id:73,name:"Floor1AtriumGreeterEmployee",rotation:0,type:"",visible:!0,width:32,x:222,y:156.667},{height:84,id:74,name:"#floor1-atrium-greeter-employee",rotation:0,type:"",visible:!0,width:76,x:204,y:204},{gid:194,height:32,id:75,name:"MarkerFloor1AtriumGreeterEmployeeWalk",rotation:0,type:"",visible:!0,width:32,x:222.667,y:217.333},{gid:194,height:32,id:76,name:"MarkerTTTMachineTile",rotation:0,type:"",visible:!0,width:32,x:36,y:244},{gid:194,height:32,id:79,name:"MarkerDoorBowling",rotation:0,type:"",visible:!0,width:32,x:342.5,y:41.5},{height:46,id:80,name:"#floor1-atriumOpenBowlingDoor",rotation:0,type:"",visible:!0,width:56,x:319,y:24.5},{gid:194,height:32,id:82,name:"MarkerDoorBowling2",rotation:0,type:"",visible:!0,width:32,x:361.5,y:42.5},{height:61,id:83,name:"#floor1-transitionToBowlingFromAtrium",rotation:0,type:"",visible:!0,width:56,x:318.5,y:-21},{gid:193,height:32,id:84,name:"Floor1AtriumPingPongSearcher",rotation:0,type:"",visible:!0,width:32,x:90.5,y:335.5},{gid:193,height:32,id:85,name:"Floor1AtriumNPC1",rotation:0,type:"",visible:!0,width:32,x:200.5,y:59.5},{gid:193,height:32,id:86,name:"Floor1AtriumNPC2",rotation:0,type:"",visible:!0,width:32,x:218.375,y:58.625},{gid:193,height:32,id:88,name:"FloorAtriumWalkingNPC",rotation:0,type:"",visible:!0,width:32,x:100.375,y:142.125},{gid:194,height:32,id:89,name:"MarkerAdaNPC1NPC2",rotation:0,type:"",visible:!0,width:32,x:210.25,y:91.75},{gid:357,height:35,id:93,name:"",rotation:0,type:"front",visible:!0,width:49,x:309.5,y:4.5},{height:46.5,id:94,name:"#floor1-atriumOpenNorthDoor",rotation:0,type:"",visible:!0,width:40,x:9.5,y:84.5},{gid:194,height:32,id:95,name:"MarkerDoorNorth1",rotation:0,type:"",visible:!0,width:32,x:27,y:119},{gid:194,height:32,id:96,name:"MarkerDoorNorth2",rotation:0,type:"",visible:!0,width:32,x:27.5,y:102.5},{gid:364,height:32,id:97,name:"",rotation:0,type:"",visible:!0,width:32,x:433,y:297},{gid:364,height:32,id:98,name:"",rotation:0,type:"",visible:!0,width:32,x:434,y:252},{height:75.5,id:101,name:"#floor1-transitionToPrimaryFromAtrium",rotation:0,type:"",visible:!0,width:25,x:-16,y:63.5},{gid:197,height:32,id:102,name:"MarkerFromPrimary",rotation:0,type:"",visible:!0,width:32,x:58.5,y:115.5},{gid:363,height:32,id:103,name:"",rotation:0,type:"20",visible:!0,width:32,x:412,y:42},{gid:372,height:32,id:104,name:"",rotation:0,type:"24",visible:!0,width:32,x:416,y:24},{height:52,id:109,name:"#floor1-OpenRedDoorsFWD",rotation:0,type:"",visible:!0,width:35.5,x:470,y:118},{gid:194,height:32,id:110,name:"MarkerRedDoorFWD1",rotation:0,type:"",visible:!0,width:32,x:491,y:151},{gid:194,height:32,id:111,name:"MarkerRedDoorFWD2",rotation:0,type:"",visible:!0,width:32,x:490,y:135.5},{gid:374,height:32,id:113,name:"",rotation:0,type:"",visible:!0,width:32,x:313.5,y:32.5},{gid:374,height:32,id:114,name:"",rotation:0,type:"",visible:!0,width:32,x:360.5,y:31.5},{gid:198,height:32,id:116,name:"MarkerDoorTut2",rotation:0,type:"",visible:!0,width:32,x:464,y:38},{gid:194,height:32,id:117,name:"MarkerDeskEmployeeWalk2",rotation:0,type:"",visible:!0,width:32,x:344,y:306},{gid:371,height:32,id:118,name:"",rotation:0,type:"front",visible:!0,width:32,x:30.5,y:7.5},{gid:372,height:32,id:119,name:"",rotation:0,type:"front",visible:!0,width:32,x:53.5,y:12.5},{gid:372,height:32,id:120,name:"",rotation:0,type:"front",visible:!0,width:32,x:54.5,y:-2.5},{height:51.5,id:122,name:"#floor1-transitionToFloor1East1FromFloor1Atrium",rotation:0,type:"",visible:!0,width:18.5,x:504,y:117.5},{gid:194,height:32,id:124,name:"MarkerFromEast1",rotation:0,type:"",visible:!0,width:32,x:464.5,y:141.5},{gid:372,height:32,id:125,name:"",rotation:0,type:"24",visible:!0,width:32,x:400,y:24},{gid:371,height:32,id:127,name:"",rotation:0,type:"24",visible:!0,width:32,x:392,y:34},{gid:371,height:32,id:128,name:"",rotation:0,type:"24",visible:!0,width:32,x:392,y:50},{gid:372,height:32,id:130,name:"",rotation:0,type:"front",visible:!0,width:32,x:82,y:26},{gid:371,height:32,id:131,name:"",rotation:0,type:"front",visible:!0,width:32,x:58.5,y:35.5},{height:16.5,id:132,name:"#floor1Atrium-SnackVending",rotation:0,type:"",visible:!0,width:36,x:28.5,y:61.5},{gid:361,height:32,id:133,name:"",rotation:0,type:"front",visible:!0,width:32,x:430,y:222},{gid:361,height:32,id:134,name:"",rotation:0,type:"front",visible:!0,width:32,x:284,y:318},{gid:194,height:32,id:135,name:"MarkerGreeterA",rotation:0,type:"",visible:!0,width:32,x:213.5,y:158.5},{gid:194,height:32,id:136,name:"MarkerGreeterB",rotation:0,type:"",visible:!0,width:32,x:260,y:158}],opacity:1,type:"objectgroup",visible:!0,x:0,y:0}],nextlayerid:7,nextobjectid:137,orientation:"isometric",renderorder:"right-down",tiledversion:"1.7.2",tileheight:16,tilesets:[{columns:16,firstgid:1,image:"../../res/walls.png",imageheight:512,imagewidth:512,margin:0,name:"walls",spacing:0,tilecount:128,tileheight:64,tilewidth:32},{columns:8,firstgid:129,image:"../../res/floors.png",imageheight:256,imagewidth:256,margin:0,name:"floors",spacing:0,tilecount:64,tileheight:32,tilewidth:32},{columns:4,firstgid:193,image:"../../res/control.png",imageheight:128,imagewidth:128,margin:0,name:"control",spacing:0,tilecount:16,tileheight:32,tilewidth:32},{columns:16,firstgid:209,image:"../../res/props.png",imageheight:512,imagewidth:512,margin:0,name:"props",spacing:0,tilecount:128,tileheight:64,tilewidth:32},{columns:8,firstgid:337,image:"../../res/walls128.png",imageheight:256,imagewidth:256,margin:0,name:"walls128",spacing:0,tilecount:16,tileheight:128,tilewidth:32},{firstgid:353,source:"../../res/props-dynamic.tiled-sheet.tsx"},{columns:16,firstgid:361,image:"../../res/props_small.png",imageheight:512,imagewidth:512,margin:0,name:"props_small",spacing:0,tilecount:256,tileheight:32,tilewidth:32}],tilewidth:32,type:"map",version:"1.6",width:32}),define("map/floor1-bowlingalley",[],{compressionlevel:-1,height:24,infinite:!1,layers:[{data:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,33,37,37,37,37,37,37,33,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,37,139,139,139,139,139,139,37,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,37,139,139,139,139,139,139,37,0,0,0,0,0,148,148,148,148,149,149,149,130,0,0,0,37,139,139,139,139,139,139,37,0,130,150,150,150,150,150,150,150,149,149,149,130,130,130,0,37,139,139,139,139,139,139,37,33,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,38,38,38,38,38,38,37,37,38,151,151,151,151,151,151,151,149,149,149,149,149,149,149,140,140,140,140,140,140,140,37,37,148,148,148,148,148,148,148,148,149,149,149,149,149,149,149,140,140,140,140,140,140,140,37,37,38,150,150,150,150,150,150,150,149,149,38,149,149,149,149,38,140,140,140,140,140,140,37,37,38,151,151,151,151,151,151,151,149,149,149,149,149,149,149,38,140,140,140,140,140,140,37,37,148,148,148,148,148,148,148,148,149,149,149,149,149,149,149,38,140,140,140,140,140,140,37,37,38,150,150,150,150,150,150,150,149,149,38,149,149,149,149,38,140,140,140,140,140,140,37,37,38,151,151,151,151,151,151,151,149,149,149,149,149,149,149,38,140,140,140,140,140,140,37,37,148,148,148,148,148,148,148,148,149,149,149,149,149,149,149,38,140,140,140,140,140,140,37,37,38,150,150,150,150,150,150,150,149,149,38,149,149,149,149,38,140,140,140,140,140,140,37,37,38,151,151,151,151,151,151,151,149,149,149,149,149,149,149,38,140,140,140,140,140,140,37,37,148,148,148,148,148,148,148,148,149,149,149,149,149,149,149,38,140,140,140,140,140,140,37,37,38,150,150,150,150,150,150,150,149,149,38,149,149,149,149,38,140,140,140,140,140,140,37,37,38,148,148,148,148,148,148,148,149,149,149,149,149,149,149,38,140,140,140,140,140,140,37,37,130,130,130,130,130,130,130,130,149,149,149,149,149,149,149,38,140,140,140,140,140,140,37,33,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,140,140,37,37,37,33,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,33,140,140,33,0,0,33,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,33,140,140,33,0,0,33,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,33],height:24,id:1,name:"Tiles",opacity:1,type:"tilelayer",visible:!0,width:24,x:0,y:0},{data:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,243,243,243,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,244,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,244,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,241,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,241,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,241,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,241,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,15,15,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],height:24,id:6,name:"Tiles2",opacity:1,type:"tilelayer",visible:!0,width:24,x:0,y:0},{draworder:"topdown",id:2,name:"Objects",objects:[{gid:194,height:32,id:19,name:"MarkerPlayer",rotation:0,type:"",visible:!0,width:32,x:311,y:173},{gid:200,height:32,id:43,name:"MarkerFromAtrium",rotation:0,type:"",visible:!0,width:32,x:309.5,y:308.5},{gid:337,height:32,id:115,name:"",rotation:0,type:"",visible:!0,width:32,x:253.5,y:254.5},{gid:337,height:32,id:118,name:"",rotation:0,type:"",visible:!0,width:32,x:252,y:220},{gid:337,height:32,id:119,name:"",rotation:0,type:"",visible:!0,width:32,x:252.5,y:187.5},{gid:337,height:32,id:120,name:"",rotation:0,type:"",visible:!0,width:32,x:252,y:156},{gid:337,height:32,id:121,name:"",rotation:0,type:"",visible:!0,width:32,x:252,y:124},{gid:194,height:32,id:132,name:"MarkerWalkA",rotation:0,type:"",visible:!0,width:32,x:281,y:257},{gid:194,height:32,id:133,name:"MarkerWalkB",rotation:0,type:"",visible:!0,width:32,x:280,y:150},{gid:193,height:32,id:134,name:"Floor1BowlingGirl",rotation:0,type:"",visible:!0,width:32,x:279.5,y:232.5},{gid:345,height:32,id:135,name:"",rotation:0,type:"24",visible:!0,width:32,x:322.5,y:27.5},{gid:345,height:32,id:136,name:"",rotation:0,type:"24",visible:!0,width:32,x:315,y:11},{gid:345,height:32,id:137,name:"",rotation:0,type:"12",visible:!0,width:32,x:292,y:28},{gid:345,height:32,id:138,name:"",rotation:0,type:"24",visible:!0,width:32,x:287,y:11},{gid:193,height:32,id:139,name:"Floor1BowlingEmployee",rotation:0,type:"",visible:!0,width:32,x:310,y:70},{height:34,id:140,name:"#floor1-bowling-prevent-bowling",rotation:0,type:"",visible:!0,width:22,x:231.375,y:92.625},{height:40,id:145,name:"#floor1-bowling-employee",rotation:0,type:"",visible:!0,width:63.5,x:279,y:68},{gid:194,height:32,id:146,name:"MarkerBowlReady",rotation:0,type:"",visible:!0,width:32,x:168.636,y:114.818},{gid:194,height:32,id:147,name:"MarkerBowlBall",rotation:0,type:"",visible:!0,width:32,x:150.074,y:116.972},{gid:343,height:32,id:148,name:"",rotation:0,type:"",visible:!0,width:32,x:253.5,y:268.5},{gid:343,height:32,id:149,name:"",rotation:0,type:"",visible:!0,width:32,x:254,y:238},{gid:343,height:32,id:150,name:"",rotation:0,type:"",visible:!0,width:32,x:253.5,y:204.5},{gid:343,height:32,id:151,name:"",rotation:0,type:"",visible:!0,width:32,x:253.375,y:172.375},{gid:343,height:32,id:152,name:"",rotation:0,type:"",visible:!0,width:32,x:253.5,y:140.5},{gid:343,height:32,id:154,name:"",rotation:0,type:"",visible:!0,width:32,x:265.5,y:80.5},{gid:343,height:32,id:155,name:"",rotation:0,type:"24",visible:!0,width:32,x:263.5,y:72.5},{gid:343,height:32,id:156,name:"",rotation:0,type:"",visible:!0,width:32,x:272,y:82},{gid:343,height:32,id:157,name:"",rotation:0,type:"",visible:!0,width:32,x:271,y:73},{gid:337,height:32,id:158,name:"",rotation:0,type:"",visible:!0,width:32,x:254,y:286},{gid:194,height:32,id:159,name:"MarkerPreventBowling",rotation:0,type:"",visible:!0,width:32,x:269.457,y:109.696},{height:29,id:160,name:"#floor1-transitionToAtriumFromBowling",rotation:0,type:"",visible:!0,width:33,x:284,y:350},{gid:346,height:32,id:162,name:"",rotation:0,type:"-10",visible:!0,width:32,x:18.5,y:123.5},{gid:346,height:32,id:163,name:"",rotation:0,type:"-10",visible:!0,width:32,x:18.5,y:171.5},{gid:346,height:32,id:164,name:"",rotation:0,type:"-10",visible:!0,width:32,x:17.5,y:218.5},{gid:346,height:32,id:165,name:"",rotation:0,type:"-10",visible:!0,width:32,x:17.5,y:266.5},{gid:347,height:32,id:166,name:"",rotation:0,type:"",visible:!0,width:32,x:-4.5,y:100.5},{gid:347,height:32,id:167,name:"",rotation:0,type:"",visible:!0,width:32,x:-4.5,y:148.5},{gid:347,height:32,id:168,name:"",rotation:0,type:"",visible:!0,width:32,x:-5.5,y:195.5},{gid:347,height:32,id:170,name:"",rotation:0,type:"",visible:!0,width:32,x:-5.5,y:243.5},{gid:349,height:32,id:171,name:"",rotation:0,type:"",visible:!0,width:32,x:52,y:84},{gid:350,height:32,id:172,name:"",rotation:0,type:"",visible:!0,width:32,x:99.5,y:82.5},{gid:351,height:32,id:183,name:"",rotation:0,type:"",visible:!0,width:32,x:293.5,y:74.5},{gid:351,height:32,id:184,name:"",rotation:0,type:"",visible:!0,width:32,x:294,y:68},{gid:352,height:32,id:185,name:"",rotation:0,type:"",visible:!0,width:32,x:294.5,y:57.5},{gid:352,height:32,id:186,name:"",rotation:0,type:"",visible:!0,width:32,x:295,y:51},{gid:347,height:32,id:189,name:"",rotation:0,type:"",visible:!0,width:32,x:251,y:29},{gid:598,height:55,id:190,name:"",rotation:0,type:"front",visible:!0,width:75,x:309,y:9},{height:41.5,id:191,name:"#floor1-OpenRedDoorsBCK",rotation:0,type:"",visible:!0,width:48,x:276,y:312.5},{gid:194,height:32,id:192,name:"MarkerRedDoorBCK1",rotation:0,type:"",visible:!0,width:32,x:293.5,y:347.5},{gid:194,height:32,id:193,name:"MarkerRedDoorBCK2",rotation:0,type:"",visible:!0,width:32,x:311.5,y:347.5}],opacity:1,type:"objectgroup",visible:!0,x:0,y:0}],nextlayerid:7,nextobjectid:195,orientation:"isometric",renderorder:"right-down",tiledversion:"1.7.2",tileheight:16,tilesets:[{columns:16,firstgid:1,image:"../../res/walls.png",imageheight:512,imagewidth:512,margin:0,name:"walls",spacing:0,tilecount:128,tileheight:64,tilewidth:32},{columns:8,firstgid:129,image:"../../res/floors.png",imageheight:256,imagewidth:256,margin:0,name:"floors",spacing:0,tilecount:64,tileheight:32,tilewidth:32},{columns:4,firstgid:193,image:"../../res/control.png",imageheight:128,imagewidth:128,margin:0,name:"control",spacing:0,tilecount:16,tileheight:32,tilewidth:32},{columns:16,firstgid:209,image:"../../res/props.png",imageheight:512,imagewidth:512,margin:0,name:"props",spacing:0,tilecount:128,tileheight:64,tilewidth:32},{columns:16,firstgid:337,image:"../../res/props_small.png",imageheight:512,imagewidth:512,margin:0,name:"props_small",spacing:0,tilecount:256,tileheight:32,tilewidth:32},{firstgid:593,source:"../../res/props-dynamic.tiled-sheet.tsx"}],tilewidth:32,type:"map",version:"1.6",width:24}),define("map/floor1-primary",[],{compressionlevel:-1,height:32,infinite:!1,layers:[{data:[129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,139,140,140,140,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,140,140,37,140,129,37,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,140,140,37,140,140,37,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,16,16,16,16,16,37,140,140,37,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,16,139,139,139,140,140,140,140,140,16,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,16,139,139,139,140,140,140,140,140,16,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,16,139,139,139,140,140,140,140,140,16,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,16,139,139,139,140,140,140,140,140,16,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,16,139,139,139,140,140,140,140,140,16,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,16,139,139,139,140,140,140,140,140,16,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,16,139,139,139,140,140,140,140,140,16,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,16,139,139,139,140,140,140,140,140,16,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,0,129,129,129,16,139,139,139,140,140,140,140,140,16,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,16,139,139,139,140,140,140,140,140,16,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,16,139,139,139,140,140,140,140,140,16,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,16,139,139,139,140,140,140,140,140,16,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,16,140,140,140,140,140,140,140,140,16,16,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,16,129,16,140,140,140,140,140,140,140,140,140,140,129,129,129,129,129,338,338,338,338,338,338,338,338,338,338,338,338,338,338,338,338,338,140,140,140,140,140,140,140,140,140,140,129,129,129,129,129,338,130,130,130,338,338,130,130,130,338,338,130,130,130,338,142,338,140,140,140,140,140,140,140,140,16,16,129,129,129,33,33,338,130,130,130,338,338,130,130,130,338,338,130,130,130,338,338,338,140,140,140,140,140,140,140,140,16,129,129,129,129,33,142,142,142,142,142,142,142,142,142,142,142,142,142,142,142,142,142,16,140,140,140,140,140,140,140,140,16,129,129,129,33,33,33,142,142,142,142,142,142,142,142,142,142,142,142,142,142,142,142,142,140,140,140,140,140,140,140,140,16,129,129,129,129,33,142,142,142,142,142,142,142,142,142,142,142,142,142,142,142,142,142,142,140,140,140,140,140,140,140,140,16,129,129,129,33,33,33,142,142,142,142,142,142,142,142,142,142,142,142,142,142,142,142,16,140,140,140,140,140,140,140,140,16,129,129,129,129,33,142,142,142,142,142,142,142,142,142,142,142,142,142,142,0,142,0,33,33,33,33,33,33,33,33,33,33,129,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,129,129,129,129,129,129,129,129,129,129],height:32,id:1,name:"Tiles",opacity:1,type:"tilelayer",visible:!0,width:32,x:0,y:0},{data:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,15,15,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,223,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,223,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,223,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,14,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,14,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,7,7,0,0,9,7,7,0,0,9,7,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,14,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,14,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],height:32,id:6,name:"Tiles2",opacity:1,type:"tilelayer",visible:!0,width:32,x:0,y:0},{draworder:"topdown",id:2,name:"Objects",objects:[{gid:199,height:32,id:101,name:"MarkerFromAtrium",rotation:0,type:"",visible:!0,width:32,x:442.5,y:366.5},{height:41,id:102,name:"#floor1-openDoorsToAtriumFromPrimary",rotation:0,type:"",visible:!0,width:31,x:462,y:346},{gid:194,height:32,id:103,name:"MarkerDoorToAtrium1",rotation:0,type:"",visible:!0,width:32,x:488.5,y:377},{gid:194,height:32,id:104,name:"MarkerDoorToAtrium2",rotation:0,type:"",visible:!0,width:32,x:488,y:359.5},{height:41,id:105,name:"#floor1-transitionToAtriumFromPrimary",rotation:0,type:"",visible:!0,width:22.5,x:491,y:346.5},{gid:193,height:32,id:107,name:"Floor1PrimaryGuy1",rotation:0,type:"",visible:!0,width:32,x:377.5,y:270.5},{gid:193,height:32,id:108,name:"Floor1PrimaryGuy2",rotation:0,type:"",visible:!0,width:32,x:378.5,y:201.5},{gid:193,height:32,id:109,name:"Floor1PrimaryGirl1",rotation:0,type:"",visible:!0,width:32,x:379,y:169},{gid:194,height:32,id:110,name:"MarkerFloor1PrimaryGuy2-Floor1PrimaryGirl1-convo",rotation:0,type:"",visible:!0,width:32,x:424.5,y:235.5},{gid:194,height:32,id:111,name:"MarkerPlayer",rotation:0,type:"",visible:!0,width:32,x:396,y:414},{gid:194,height:32,id:112,name:"MarkerFromWest1",rotation:0,type:"",visible:!0,width:32,x:449,y:166.5},{height:29.5,id:113,name:"#floor1-OpenRedDoorsBCK",rotation:0,type:"",visible:!0,width:48,x:422.5,y:129.5},{gid:194,height:32,id:114,name:"MarkerRedDoorBCK1",rotation:0,type:"",visible:!0,width:32,x:441.5,y:140},{gid:194,height:32,id:115,name:"MarkerRedDoorBCK2",rotation:0,type:"",visible:!0,width:32,x:458,y:139.5},{height:24.5,id:116,name:"#floor1-transitionToFloor1West1FromFloor1Primary",rotation:0,type:"",visible:!0,width:32.5,x:431,y:109.5},{height:47.5,id:119,name:"#floor1-OpenRedDoorsToElevatorFWD",rotation:0,type:"",visible:!0,width:52.5,x:318.5,y:421.5},{gid:194,height:32,id:120,name:"MarkerRedDoorFWD1",rotation:0,type:"",visible:!0,width:32,x:349,y:457},{gid:194,height:32,id:121,name:"MarkerRedDoorFWD2",rotation:0,type:"",visible:!0,width:32,x:348.5,y:439.5},{gid:194,height:32,id:122,name:"MarkerDoorElevator2",rotation:0,type:"",visible:!0,width:32,x:201.5,y:411.5},{gid:194,height:32,id:123,name:"MarkerElevatorInside2",rotation:0,type:"",visible:!0,width:32,x:206,y:391},{gid:193,height:32,id:124,name:"Floor1AtriumElevatorEmployee",rotation:0,type:"",visible:!0,width:32,x:360.5,y:411.5},{height:16,id:126,name:"#floor1-call-elevator",rotation:0,type:"",visible:!0,width:24,x:169,y:413},{height:16,id:127,name:"#floor1-call-elevator",rotation:0,type:"",visible:!0,width:24,x:93,y:414},{height:16,id:128,name:"#floor1-call-elevator",rotation:0,type:"",visible:!0,width:24,x:249.5,y:412.5},{gid:194,height:32,id:129,name:"MarkerElevatorInside1",rotation:0,type:"",visible:!0,width:32,x:124.5,y:394.5},{gid:194,height:32,id:130,name:"MarkerElevatorInside3",rotation:0,type:"",visible:!0,width:32,x:284.5,y:394.5},{gid:379,height:32,id:131,name:"PropElevatorLight1",rotation:0,type:"front",visible:!0,width:32,x:95.5,y:405.5},{gid:379,height:32,id:132,name:"PropElevatorLight2",rotation:0,type:"front",visible:!0,width:32,x:175.5,y:405.5},{gid:379,height:32,id:133,name:"PropElevatorLight3",rotation:0,type:"front",visible:!0,width:32,x:256.5,y:406.5},{gid:194,height:32,id:134,name:"MarkerDoorElevator1",rotation:0,type:"",visible:!0,width:32,x:126,y:413},{gid:194,height:32,id:135,name:"MarkerDoorElevator3",rotation:0,type:"",visible:!0,width:32,x:283,y:412},{gid:379,height:32,id:136,name:"PropDoorLight1",rotation:0,type:"front",visible:!0,width:32,x:342,y:414},{gid:379,height:32,id:137,name:"PropDoorLight2",rotation:0,type:"front",visible:!0,width:32,x:348,y:416},{gid:379,height:32,id:138,name:"PropDoorLight3",rotation:0,type:"front",visible:!0,width:32,x:346,y:422},{gid:379,height:32,id:140,name:"PropDoorLight4",rotation:0,type:"front",visible:!0,width:32,x:352,y:424},{gid:194,height:32,id:142,name:"MarkerMoveBack",rotation:0,type:"",visible:!0,width:32,x:385,y:435},{gid:194,height:32,id:143,name:"MarkerDoorElevatorWait",rotation:0,type:"",visible:!0,width:32,x:210.5,y:451.5},{gid:370,height:32,id:144,name:"",rotation:0,type:"front",visible:!0,width:32,x:326.5,y:335.5},{gid:370,height:32,id:145,name:"",rotation:0,type:"front",visible:!0,width:32,x:326.5,y:319.5},{gid:370,height:32,id:146,name:"",rotation:0,type:"front",visible:!0,width:32,x:326.5,y:303.5},{gid:370,height:32,id:147,name:"",rotation:0,type:"front",visible:!0,width:32,x:326.5,y:287.5},{gid:370,height:32,id:148,name:"",rotation:0,type:"front",visible:!0,width:32,x:326.5,y:271.5},{gid:370,height:32,id:149,name:"",rotation:0,type:"front",visible:!0,width:32,x:326.5,y:255.5},{gid:370,height:32,id:150,name:"",rotation:0,type:"front",visible:!0,width:32,x:326.5,y:239.5},{gid:370,height:32,id:151,name:"",rotation:0,type:"front",visible:!0,width:32,x:326.5,y:223.5},{gid:370,height:32,id:152,name:"",rotation:0,type:"front",visible:!0,width:32,x:326.5,y:207.5},{gid:370,height:32,id:153,name:"",rotation:0,type:"front",visible:!0,width:32,x:326.5,y:191.5},{gid:370,height:32,id:154,name:"",rotation:0,type:"front",visible:!0,width:32,x:326.5,y:175.5},{gid:370,height:32,id:155,name:"",rotation:0,type:"front",visible:!0,width:32,x:326.5,y:159.5},{gid:370,height:32,id:156,name:"",rotation:0,type:"front",visible:!0,width:32,x:326.5,y:143.5},{gid:370,height:32,id:157,name:"",rotation:0,type:"front",visible:!0,width:32,x:326.5,y:127.5}],opacity:1,type:"objectgroup",visible:!0,x:0,y:0}],nextlayerid:7,nextobjectid:165,orientation:"isometric",renderorder:"right-down",tiledversion:"1.7.2",tileheight:16,tilesets:[{columns:16,firstgid:1,image:"../../res/walls.png",imageheight:512,imagewidth:512,margin:0,name:"walls",spacing:0,tilecount:128,tileheight:64,tilewidth:32},{columns:8,firstgid:129,image:"../../res/floors.png",imageheight:256,imagewidth:256,margin:0,name:"floors",spacing:0,tilecount:64,tileheight:32,tilewidth:32},{columns:4,firstgid:193,image:"../../res/control.png",imageheight:128,imagewidth:128,margin:0,name:"control",spacing:0,tilecount:16,tileheight:32,tilewidth:32},{columns:16,firstgid:209,image:"../../res/props.png",imageheight:512,imagewidth:512,margin:0,name:"props",spacing:0,tilecount:128,tileheight:64,tilewidth:32},{columns:8,firstgid:337,image:"../../res/walls128.png",imageheight:256,imagewidth:256,margin:0,name:"walls128",spacing:0,tilecount:16,tileheight:128,tilewidth:32},{firstgid:353,source:"../../res/props-dynamic.tiled-sheet.tsx"},{columns:16,firstgid:360,image:"../../res/props_small.png",imageheight:512,imagewidth:512,margin:0,name:"props_small",spacing:0,tilecount:256,tileheight:32,tilewidth:32}],tilewidth:32,type:"map",version:"1.6",width:32}),define("map/floor1-west1",[],{compressionlevel:-1,height:32,infinite:!1,layers:[{data:[129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,37,37,37,37,338,37,37,37,37,37,37,37,37,37,37,37,37,37,37,129,129,129,129,129,129,129,129,129,129,129,129,129,37,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,37,129,129,129,129,129,129,129,129,129,129,37,37,37,37,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,37,129,129,129,129,129,129,129,129,129,129,37,139,139,139,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,37,129,129,129,129,129,129,129,129,129,129,37,139,139,139,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,129,129,129,129,129,129,129,129,129,37,139,140,139,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,129,129,129,129,129,129,129,129,129,37,139,139,139,140,140,140,338,140,140,140,140,140,140,140,140,140,140,140,140,140,37,129,129,129,129,129,129,129,129,129,129,37,139,139,139,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,37,129,129,129,129,129,129,129,129,129,129,37,139,139,139,140,140,140,140,140,140,139,139,139,139,139,139,139,139,139,140,140,37,129,129,129,129,129,129,129,129,129,129,37,139,139,139,140,140,140,140,140,140,139,139,139,139,139,139,139,139,139,37,37,37,129,129,129,129,129,129,129,129,129,129,37,139,140,139,140,140,140,140,140,140,139,139,139,139,139,139,139,139,37,129,129,129,129,129,129,129,129,129,129,129,129,129,37,139,139,139,140,140,140,140,140,140,139,139,139,139,139,139,139,139,37,129,129,129,129,129,129,129,129,129,129,129,129,129,37,139,139,139,140,140,140,338,140,140,139,139,139,139,139,139,139,139,37,129,129,129,129,129,129,129,129,129,129,129,129,129,37,37,37,139,140,140,140,140,140,140,139,139,139,139,139,139,139,139,37,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,37,140,140,140,140,140,140,139,139,139,139,139,139,139,139,37,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,37,140,140,140,140,140,140,139,139,139,139,139,139,139,139,37,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,37,140,140,140,140,140,140,139,139,37,37,37,37,37,37,37,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,37,140,140,140,140,140,140,140,37,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,37,140,140,140,140,140,140,140,37,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,37,140,140,140,140,140,140,140,37,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,37,140,140,140,140,140,140,140,37,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,37,37,37,140,140,37,37,37,37,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,140,140,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129],height:32,id:1,name:"Tiles",opacity:1,type:"tilelayer",visible:!0,width:32,x:0,y:0},{data:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,216,226,0,0,0,0,0,0,0,0,0,0,227,227,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,227,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,233,234,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,14,0,0,0,0,0,0,0,0,0,0,0,0,239,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,14,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,246,0,0,246,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,235,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,246,0,0,246,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,226,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,226,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,15,15,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],height:32,id:6,name:"Tiles2",opacity:1,type:"tilelayer",visible:!0,width:32,x:0,y:0},{draworder:"topdown",id:2,name:"Objects",objects:[{gid:194,height:32,id:111,name:"MarkerPlayer",rotation:0,type:"",visible:!0,width:32,x:270.5,y:177.5},{height:52,id:112,name:"#floor1-OpenRedDoorsFWD",rotation:0,type:"",visible:!0,width:31,x:387.5,y:148.5},{gid:194,height:32,id:113,name:"MarkerRedDoorFWD1",rotation:0,type:"",visible:!0,width:32,x:409.5,y:182},{gid:194,height:32,id:114,name:"MarkerRedDoorFWD2",rotation:0,type:"",visible:!0,width:32,x:409,y:164.5},{height:41,id:115,name:"#floor1-transitionToFloor1West2FromFloor1West1",rotation:0,type:"",visible:!0,width:22.5,x:411,y:153},{height:28,id:116,name:"#floor1-OpenRedDoorsBCK",rotation:0,type:"",visible:!0,width:48,x:150.5,y:416},{gid:194,height:32,id:117,name:"MarkerRedDoorBCK1",rotation:0,type:"",visible:!0,width:32,x:168,y:442},{gid:194,height:32,id:118,name:"MarkerRedDoorBCK2",rotation:0,type:"",visible:!0,width:32,x:186,y:442},{height:23,id:120,name:"#floor1-transitionToFloor1PrimaryFromFloor1West1",rotation:0,type:"",visible:!0,width:32.5,x:158,y:440},{gid:194,height:32,id:121,name:"MarkerFromPrimary",rotation:0,type:"",visible:!0,width:32,x:174.5,y:407.5},{gid:194,height:32,id:122,name:"MarkerFromFloor1West2",rotation:0,type:"",visible:!0,width:32,x:375.5,y:174.5},{gid:373,height:32,id:123,name:"",rotation:0,type:"front",visible:!0,width:32,x:87,y:127},{gid:384,height:32,id:124,name:"",rotation:0,type:"front",visible:!0,width:32,x:109.5,y:318.5},{gid:366,height:32,id:125,name:"",rotation:0,type:"12",visible:!0,width:32,x:240.5,y:143.5},{gid:387,height:32,id:126,name:"",rotation:0,type:"front",visible:!0,width:32,x:212,y:92},{gid:389,height:32,id:127,name:"",rotation:0,type:"front",visible:!0,width:32,x:318,y:94},{gid:194,height:32,id:128,name:"MarkerBoxCenter",rotation:0,type:"",visible:!0,width:32,x:270,y:270},{gid:194,height:32,id:129,name:"MarkerBoxLeft",rotation:0,type:"",visible:!0,width:32,x:246.5,y:279.5},{gid:194,height:32,id:130,name:"MarkerBoxTop",rotation:0,type:"",visible:!0,width:32,x:264.5,y:249.5},{gid:194,height:32,id:131,name:"MarkerBoxBottom",rotation:0,type:"",visible:!0,width:32,x:281,y:295},{gid:194,height:32,id:132,name:"MarkerBoxRight",rotation:0,type:"",visible:!0,width:32,x:295,y:261},{gid:392,height:32,id:133,name:"",rotation:0,type:"16",visible:!0,width:32,x:220,y:142},{gid:193,height:32,id:134,name:"Floor1SaveRoomEmployee",rotation:0,type:"",visible:!0,width:32,x:245,y:135},{gid:194,height:32,id:135,name:"MarkerKioskStats",rotation:0,type:"",visible:!0,width:32,x:102,y:260},{height:56,id:136,name:"#utils-kioskStats",rotation:0,type:"",visible:!0,width:56,x:74,y:232},{gid:194,height:32,id:138,name:"MarkerSavePoint",rotation:0,type:"",visible:!0,width:32,x:104,y:184},{height:60,id:139,name:"#utils-kioskSavePoint",rotation:0,type:"",visible:!0,width:55,x:77,y:152},{height:108.5,id:141,name:"#utils-kioskInfoStats",rotation:0,type:"",visible:!0,width:109.5,x:221.5,y:222.5},{gid:360,height:49,id:142,name:"",rotation:0,type:"front",visible:!0,width:84,x:155.5,y:116.5},{gid:360,height:49,id:143,name:"",rotation:0,type:"front",visible:!0,width:84,x:154,y:211}],opacity:1,type:"objectgroup",visible:!0,x:0,y:0}],nextlayerid:7,nextobjectid:144,orientation:"isometric",renderorder:"right-down",tiledversion:"1.7.2",tileheight:16,tilesets:[{columns:16,firstgid:1,image:"../../res/walls.png",imageheight:512,imagewidth:512,margin:0,name:"walls",spacing:0,tilecount:128,tileheight:64,tilewidth:32},{columns:8,firstgid:129,image:"../../res/floors.png",imageheight:256,imagewidth:256,margin:0,name:"floors",spacing:0,tilecount:64,tileheight:32,tilewidth:32},{columns:4,firstgid:193,image:"../../res/control.png",imageheight:128,imagewidth:128,margin:0,name:"control",spacing:0,tilecount:16,tileheight:32,tilewidth:32},{columns:16,firstgid:209,image:"../../res/props.png",imageheight:512,imagewidth:512,margin:0,name:"props",spacing:0,tilecount:128,tileheight:64,tilewidth:32},{columns:8,firstgid:337,image:"../../res/walls128.png",imageheight:256,imagewidth:256,margin:0,name:"walls128",spacing:0,tilecount:16,tileheight:128,tilewidth:32},{firstgid:353,source:"../../res/props-dynamic.tiled-sheet.tsx"},{columns:16,firstgid:361,image:"../../res/props_small.png",imageheight:512,imagewidth:512,margin:0,name:"props_small",spacing:0,tilecount:256,tileheight:32,tilewidth:32}],tilewidth:32,type:"map",version:"1.6",width:32}),define("map/floor1-west2",[],{compressionlevel:-1,height:32,infinite:!1,layers:[{data:[129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,33,33,33,33,33,33,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,33,149,149,149,149,33,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,33,16,149,149,0,33,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,33,149,149,149,149,33,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,33,149,149,149,149,33,129,129,129,16,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,37,2,2,2,2,2,33,149,149,149,149,33,2,2,16,210,16,2,2,2,16,129,129,129,129,129,129,129,129,129,129,129,37,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,16,129,0,129,129,129,129,129,129,129,129,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,129,129,129,129,129,129,129,129,129,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,129,129,129,129,129,129,129,129,129,129,37,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,16,129,129,129,129,129,129,129,129,129,129,129,37,2,2,2,2,2,140,140,140,140,140,2,2,2,2,2,2,2,2,140,16,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,33,149,149,149,149,33,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,33,149,149,149,149,33,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,33,149,149,149,149,33,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,33,16,149,149,16,33,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,33,149,149,149,149,33,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,33,33,33,33,33,33,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129],height:32,id:1,name:"Tiles",opacity:1,type:"tilelayer",visible:!0,width:32,x:0,y:0},{data:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16,0,0,16,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,25,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,216,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,216,0,0,0,0,0,0,0,0,0,0,0,0,14,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,14,0,0,0,0,0,0,0,0,0,0,0,14,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,14,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,25,2,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],height:32,id:6,name:"Tiles2",opacity:1,type:"tilelayer",visible:!0,width:32,x:0,y:0},{draworder:"topdown",id:2,name:"Objects",objects:[{gid:376,height:32,id:111,name:"",rotation:0,type:"",visible:!0,width:32,x:163,y:181},{gid:376,height:32,id:113,name:"",rotation:0,type:"2",visible:!0,width:32,x:160.5,y:323.5},{gid:377,height:32,id:114,name:"",rotation:0,type:"",visible:!0,width:32,x:166.5,y:205.5},{gid:378,height:32,id:115,name:"",rotation:0,type:"10",visible:!0,width:32,x:169.5,y:288.5},{gid:194,height:32,id:116,name:"MarkerPlayer",rotation:0,type:"",visible:!0,width:32,x:282.5,y:251.5},{height:41,id:117,name:"#floor1-OpenRedDoorsFWD",rotation:0,type:"",visible:!0,width:32,x:49,y:233},{gid:194,height:32,id:118,name:"MarkerRedDoorFWD1",rotation:0,type:"",visible:!0,width:32,x:60.5,y:265.5},{gid:194,height:32,id:119,name:"MarkerRedDoorFWD2",rotation:0,type:"",visible:!0,width:32,x:57.5,y:246},{height:41,id:120,name:"#floor1-transitionToFloor1West1FromFloor1West2",rotation:0,type:"",visible:!0,width:22.5,x:29.5,y:232.5},{gid:194,height:32,id:128,name:"MarkerFromFloor1West1",rotation:0,type:"",visible:!0,width:32,x:91,y:253},{height:41,id:129,name:"#floor1-OpenRedDoorsFWD2",rotation:0,type:"",visible:!0,width:32,x:353.5,y:234.5},{gid:194,height:32,id:130,name:"MarkerFromEast2",rotation:0,type:"",visible:!0,width:32,x:351,y:253},{gid:201,height:32,id:131,name:"ItemRezGem",rotation:0,type:"",visible:!0,width:32,x:171.5,y:154.5},{gid:201,height:32,id:132,name:"ItemRezGem",rotation:0,type:"",visible:!0,width:32,x:174,y:382},{gid:194,height:32,id:133,name:"MarkerRedDoorFWD21",rotation:0,type:"",visible:!0,width:32,x:381.5,y:267},{gid:194,height:32,id:134,name:"MarkerRedDoorFWD22",rotation:0,type:"",visible:!0,width:32,x:378.5,y:247.5},{height:41,id:135,name:"#floor1-transitionFromFloor1West2ToFloor1East2",rotation:0,type:"",visible:!0,width:22.5,x:384.5,y:235.5},{gid:384,height:32,id:136,name:"",rotation:0,type:"front",visible:!0,width:32,x:81,y:201},{gid:386,height:32,id:137,name:"",rotation:0,type:"front",visible:!0,width:32,x:241,y:201},{gid:387,height:32,id:138,name:"",rotation:0,type:"front",visible:!0,width:32,x:140.5,y:165.5},{gid:387,height:32,id:139,name:"",rotation:0,type:"24",visible:!0,width:32,x:137.5,y:306.5},{gid:194,height:32,id:140,name:"MarkerBoysBathroomOutside",rotation:0,type:"",visible:!0,width:32,x:202.5,y:235.5},{gid:194,height:32,id:141,name:"MarkerBoysBathroomInside",rotation:0,type:"",visible:!0,width:32,x:201,y:197},{gid:194,height:32,id:143,name:"MarkerGirlsBathroomOutside",rotation:0,type:"",visible:!0,width:32,x:200.5,y:279.5},{gid:194,height:32,id:144,name:"MarkerGirlsBathroomInside",rotation:0,type:"",visible:!0,width:32,x:204,y:324},{height:13.5,id:145,name:"#floor1-enterBoysBathroom",rotation:0,type:"",visible:!0,width:26.5,x:186,y:224},{height:21.5,id:147,name:"#floor1-enterGirlsBathroom",rotation:0,type:"",visible:!0,width:34.5,x:179,y:279},{gid:194,height:32,id:148,name:"MarkerDoorBoysBathroom",rotation:0,type:"",visible:!0,width:32,x:203.5,y:218.5},{gid:194,height:32,id:149,name:"MarkerDoorGirlsBathroom",rotation:0,type:"",visible:!0,width:32,x:202,y:298},{height:13.5,id:150,name:"#floor1-exitBoysBathroom",rotation:0,type:"",visible:!0,width:44.5,x:169.5,y:194.5},{height:13.5,id:152,name:"#floor1-exitGirlsBathroom",rotation:0,type:"",visible:!0,width:44.5,x:175,y:303},{height:15,id:153,name:"#floor1-show-soda-machine-store",rotation:0,type:"",visible:!0,width:35,x:276.5,y:221.5}],opacity:1,type:"objectgroup",visible:!0,x:0,y:0}],nextlayerid:7,nextobjectid:154,orientation:"isometric",renderorder:"right-down",tiledversion:"1.7.2",tileheight:16,tilesets:[{columns:16,firstgid:1,image:"../../res/walls.png",imageheight:512,imagewidth:512,margin:0,name:"walls",spacing:0,tilecount:128,tileheight:64,tilewidth:32},{columns:8,firstgid:129,image:"../../res/floors.png",imageheight:256,imagewidth:256,margin:0,name:"floors",spacing:0,tilecount:64,tileheight:32,tilewidth:32},{columns:4,firstgid:193,image:"../../res/control.png",imageheight:128,imagewidth:128,margin:0,name:"control",spacing:0,tilecount:16,tileheight:32,tilewidth:32},{columns:16,firstgid:209,image:"../../res/props.png",imageheight:512,imagewidth:512,margin:0,name:"props",spacing:0,tilecount:128,tileheight:64,tilewidth:32},{columns:8,firstgid:337,image:"../../res/walls128.png",imageheight:256,imagewidth:256,margin:0,name:"walls128",spacing:0,tilecount:16,tileheight:128,tilewidth:32},{firstgid:353,source:"../../res/props-dynamic.tiled-sheet.tsx"},{columns:16,firstgid:360,image:"../../res/props_small.png",imageheight:512,imagewidth:512,margin:0,name:"props_small",spacing:0,tilecount:256,tileheight:32,tilewidth:32}],tilewidth:32,type:"map",version:"1.6",width:32}),define("map/floor1-east1",[],{compressionlevel:-1,height:32,infinite:!1,layers:[{data:[129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,338,338,338,338,338,338,338,338,338,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,39,140,140,39,129,129,129,338,338,338,129,129,129,129,338,338,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,39,140,140,39,129,129,129,338,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,39,140,140,39,129,129,129,338,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,39,140,140,39,129,129,129,338,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,39,140,140,39,39,39,338,338,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,0,0,0,129,129,129,39,140,140,140,140,140,338,338,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,338,338,338,338,338,338,338,338,140,140,140,140,140,338,338,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,338,139,139,139,139,139,139,139,140,140,140,140,140,140,37,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,338,139,139,139,139,139,139,139,140,140,140,140,140,140,37,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,338,139,139,139,139,139,139,139,140,140,140,140,140,140,37,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,338,139,139,139,139,139,139,139,140,140,140,140,140,140,37,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,338,139,139,139,139,139,139,139,140,140,140,140,140,140,37,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,338,139,139,139,139,139,139,139,140,140,140,140,140,140,37,129,129,36,36,36,36,129,129,129,129,129,129,129,129,129,338,338,338,139,139,139,139,139,139,139,140,140,140,140,140,140,36,36,36,149,149,149,149,149,129,129,129,129,129,129,129,37,37,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,149,149,149,149,149,149,149,129,129,129,129,129,129,129,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,149,149,149,149,149,149,149,129,129,129,129,129,129,129,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,36,36,36,149,149,149,149,149,129,129,129,129,129,129,129,37,37,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,37,129,36,36,36,36,36,129,129,129,129,129,129,129,129,129,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129],height:32,id:1,name:"Tiles",opacity:1,type:"tilelayer",visible:!0,width:32,x:0,y:0},{data:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,15,15,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,232,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,231,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,231,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,231,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,231,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,233,234,231,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,14,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,14,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,14,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,14,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],height:32,id:6,name:"Tiles2",opacity:1,type:"tilelayer",visible:!0,width:32,x:0,y:0},{draworder:"topdown",id:2,name:"Objects",objects:[{gid:365,height:32,id:138,name:"",rotation:0,type:"",visible:!0,width:32,x:190.5,y:147.5},{gid:362,height:32,id:139,name:"",rotation:0,type:"",visible:!0,width:32,x:192,y:124},{gid:362,height:32,id:140,name:"",rotation:0,type:"",visible:!0,width:32,x:192,y:192},{gid:372,height:32,id:141,name:"",rotation:0,type:"front",visible:!0,width:32,x:240,y:104},{gid:372,height:32,id:142,name:"",rotation:0,type:"front",visible:!0,width:32,x:180.5,y:91.5},{gid:372,height:32,id:143,name:"",rotation:0,type:"front",visible:!0,width:32,x:212.5,y:91.5},{height:34,id:144,name:"#floor1-OpenRedDoorsBCK",rotation:0,type:"",visible:!0,width:41,x:265,y:59},{gid:194,height:32,id:145,name:"MarkerRedDoorBCK1",rotation:0,type:"",visible:!0,width:32,x:280.5,y:73},{gid:194,height:32,id:146,name:"MarkerRedDoorBCK2",rotation:0,type:"",visible:!0,width:32,x:298.5,y:73},{height:23,id:147,name:"#floor1-transitionToFloor1East2FromFloor2East1",rotation:0,type:"",visible:!0,width:32.5,x:270.5,y:37.5},{gid:194,height:32,id:148,name:"MarkerFromEast2",rotation:0,type:"",visible:!0,width:32,x:291,y:101},{height:41,id:149,name:"#floor1-OpenRedDoorsFWD",rotation:0,type:"",visible:!0,width:28.5,x:114,y:248},{gid:194,height:32,id:150,name:"MarkerRedDoorFWD1",rotation:0,type:"",visible:!0,width:32,x:125.5,y:280.5},{gid:194,height:32,id:151,name:"MarkerRedDoorFWD2",rotation:0,type:"",visible:!0,width:32,x:122.5,y:261},{height:41,id:152,name:"#floor1-transitionToFloor1AtriumFromFloor1West1",rotation:0,type:"",visible:!0,width:22.5,x:94.5,y:247.5},{gid:194,height:32,id:153,name:"MarkerFromAtrium",rotation:0,type:"",visible:!0,width:32,x:149.5,y:268.5},{gid:359,height:58,id:155,name:"",rotation:0,type:"front",visible:!0,width:92,x:138.5,y:158},{gid:194,height:32,id:157,name:"MarkerRedDoorFWD21",rotation:0,type:"",visible:!0,width:32,x:382.5,y:269.5},{gid:194,height:32,id:158,name:"MarkerRedDoorFWD22",rotation:0,type:"",visible:!0,width:32,x:379.5,y:250},{gid:194,height:32,id:160,name:"MarkerFromVRPortal",rotation:0,type:"",visible:!0,width:32,x:481.5,y:258.5},{gid:395,height:32,id:165,name:"",rotation:0,type:"24",visible:!0,width:32,x:138.5,y:173.5},{gid:395,height:32,id:166,name:"",rotation:0,type:"24",visible:!0,width:32,x:138.5,y:157.5},{gid:395,height:32,id:167,name:"",rotation:0,type:"24",visible:!0,width:32,x:138.5,y:141.5},{gid:395,height:32,id:169,name:"",rotation:0,type:"",visible:!0,width:32,x:154.5,y:189.5},{gid:395,height:32,id:170,name:"",rotation:0,type:"",visible:!0,width:32,x:154.5,y:173.5},{gid:395,height:32,id:171,name:"",rotation:0,type:"",visible:!0,width:32,x:154.5,y:157.5},{gid:395,height:32,id:172,name:"",rotation:0,type:"",visible:!0,width:32,x:154.5,y:141.5},{gid:395,height:32,id:173,name:"",rotation:0,type:"",visible:!0,width:32,x:154,y:126},{gid:372,height:32,id:174,name:"",rotation:0,type:"front",visible:!0,width:32,x:151.5,y:78.5},{gid:372,height:32,id:175,name:"",rotation:0,type:"front",visible:!0,width:32,x:177.5,y:104.5},{gid:372,height:32,id:176,name:"",rotation:0,type:"front",visible:!0,width:32,x:183.5,y:78.5},{gid:372,height:32,id:177,name:"",rotation:0,type:"front",visible:!0,width:32,x:209.5,y:104.5},{gid:372,height:32,id:178,name:"",rotation:0,type:"front",visible:!0,width:32,x:214.5,y:77.5},{gid:372,height:32,id:179,name:"",rotation:0,type:"front",visible:!0,width:32,x:149.5,y:92.5},{gid:372,height:32,id:180,name:"",rotation:0,type:"front",visible:!0,width:32,x:123.5,y:66.5},{gid:372,height:32,id:181,name:"",rotation:0,type:"front",visible:!0,width:32,x:121.5,y:80.5},{gid:372,height:32,id:182,name:"",rotation:0,type:"front",visible:!0,width:32,x:147.5,y:106.5},{gid:372,height:32,id:183,name:"",rotation:0,type:"front",visible:!0,width:32,x:154.5,y:65.5},{gid:372,height:32,id:184,name:"",rotation:0,type:"front",visible:!0,width:32,x:186.5,y:65.5},{gid:371,height:32,id:185,name:"",rotation:0,type:"front",visible:!0,width:32,x:100,y:78},{gid:371,height:32,id:186,name:"",rotation:0,type:"front",visible:!0,width:32,x:100,y:110},{gid:371,height:32,id:187,name:"",rotation:0,type:"front",visible:!0,width:32,x:100,y:140.5},{gid:371,height:32,id:188,name:"",rotation:0,type:"front",visible:!0,width:32,x:100,y:156.5},{gid:371,height:32,id:189,name:"",rotation:0,type:"front",visible:!0,width:32,x:100,y:124.5},{gid:371,height:32,id:190,name:"",rotation:0,type:"front",visible:!0,width:32,x:100,y:94},{gid:371,height:32,id:191,name:"",rotation:0,type:"front",visible:!0,width:32,x:100,y:172.5},{gid:395,height:32,id:195,name:"",rotation:0,type:"24",visible:!0,width:32,x:138.5,y:125.5},{gid:194,height:32,id:203,name:"MarkerPlayer",rotation:0,type:"",visible:!0,width:32,x:318,y:256},{gid:194,height:32,id:204,name:"MarkerExit1",rotation:0,type:"",visible:!0,width:32,x:408,y:258},{gid:194,height:32,id:205,name:"MarkerExit2",rotation:0,type:"",visible:!0,width:32,x:294,y:228},{gid:194,height:32,id:223,name:"MarkerAdaShopkeep",rotation:0,type:"",visible:!0,width:32,x:221,y:171},{height:194.5,id:225,name:"#Floor1East1PrizeEmployee",rotation:0,type:"",visible:!0,width:18.5,x:249.5,y:126},{height:25.5,id:227,name:"#Floor1East1PrizeEmployee",rotation:0,type:"",visible:!0,width:118.5,x:266.5,y:167.5},{height:65,id:230,name:"#Floor1East1PrizeEmployee",rotation:0,type:"",visible:!0,width:19,x:205.5,y:125.5},{gid:193,height:32,id:231,name:"Sigma",rotation:0,type:"",visible:!0,width:32,x:215,y:213},{gid:193,height:32,id:232,name:"Floor1East1PrizeEmployee",rotation:0,type:"",visible:!0,width:32,x:183.5,y:156.5},{height:21,id:233,name:"#floor1-transitionToEast1StorageFromEast1",rotation:0,type:"",visible:!0,width:16.5,x:303.5,y:315},{gid:194,height:32,id:234,name:"MarkerDoorStorage",rotation:0,type:"",visible:!0,width:32,x:313,y:313},{gid:194,height:32,id:235,name:"MarkerFromStorage",rotation:0,type:"",visible:!0,width:32,x:315,y:297},{height:12,id:236,name:"#floor1-east1OpenStorageDoor",rotation:0,type:"",visible:!0,width:16,x:304.5,y:293.5}],opacity:1,type:"objectgroup",visible:!0,x:0,y:0},{draworder:"topdown",id:8,name:"Objects2",objects:[{gid:397,height:32,id:196,name:"",rotation:0,type:"front",visible:!0,width:32,x:136.5,y:119.5},{gid:396,height:32,id:197,name:"",rotation:0,type:"front",visible:!0,width:32,x:134.5,y:127.5},{gid:390,height:32,id:198,name:"",rotation:0,type:"26",visible:!0,width:32,x:150,y:118},{gid:391,height:32,id:199,name:"",rotation:0,type:"20",visible:!0,width:32,x:149.5,y:122.5},{gid:392,height:32,id:201,name:"",rotation:0,type:"20",visible:!0,width:32,x:149,y:127},{gid:368,height:32,id:202,name:"",rotation:0,type:"20",visible:!0,width:32,x:153,y:189},{gid:403,height:32,id:206,name:"",rotation:0,type:"front",visible:!0,width:32,x:137,y:143},{gid:400,height:32,id:207,name:"",rotation:0,type:"front",visible:!0,width:32,x:135,y:155},{gid:401,height:32,id:208,name:"",rotation:0,type:"front",visible:!0,width:32,x:135,y:161},{gid:398,height:32,id:209,name:"",rotation:0,type:"20",visible:!0,width:32,x:151,y:137},{gid:399,height:32,id:210,name:"",rotation:0,type:"20",visible:!0,width:32,x:151,y:143},{gid:405,height:32,id:212,name:"",rotation:0,type:"front",visible:!0,width:32,x:136.5,y:171.5},{gid:390,height:32,id:213,name:"",rotation:0,type:"24",visible:!0,width:32,x:152,y:182},{gid:406,height:32,id:214,name:"",rotation:0,type:"20",visible:!0,width:32,x:149,y:173},{gid:391,height:32,id:216,name:"",rotation:0,type:"20",visible:!0,width:32,x:152,y:176},{gid:391,height:32,id:218,name:"",rotation:0,type:"24",visible:!0,width:32,x:150.5,y:165.5},{gid:407,height:32,id:219,name:"",rotation:0,type:"20",visible:!0,width:32,x:151.5,y:156.5},{gid:392,height:32,id:220,name:"",rotation:0,type:"25",visible:!0,width:32,x:148.5,y:181.5},{gid:392,height:32,id:221,name:"",rotation:0,type:"25",visible:!0,width:32,x:153,y:169}],opacity:1,type:"objectgroup",visible:!0,x:0,y:0}],nextlayerid:9,nextobjectid:237,orientation:"isometric",renderorder:"right-down",tiledversion:"1.7.2",tileheight:16,tilesets:[{columns:16,firstgid:1,image:"../../res/walls.png",imageheight:512,imagewidth:512,margin:0,name:"walls",spacing:0,tilecount:128,tileheight:64,tilewidth:32},{columns:8,firstgid:129,image:"../../res/floors.png",imageheight:256,imagewidth:256,margin:0,name:"floors",spacing:0,tilecount:64,tileheight:32,tilewidth:32},{columns:4,firstgid:193,image:"../../res/control.png",imageheight:128,imagewidth:128,margin:0,name:"control",spacing:0,tilecount:16,tileheight:32,tilewidth:32},{columns:16,firstgid:209,image:"../../res/props.png",imageheight:512,imagewidth:512,margin:0,name:"props",spacing:0,tilecount:128,tileheight:64,tilewidth:32},{columns:8,firstgid:337,image:"../../res/walls128.png",imageheight:256,imagewidth:256,margin:0,name:"walls128",spacing:0,tilecount:16,tileheight:128,tilewidth:32},{firstgid:353,source:"../../res/props-dynamic.tiled-sheet.tsx"},{columns:16,firstgid:361,image:"../../res/props_small.png",imageheight:512,imagewidth:512,margin:0,name:"props_small",spacing:0,tilecount:256,tileheight:32,tilewidth:32}],tilewidth:32,type:"map",version:"1.6",width:32}),define("map/floor1-east1-storage",[],{compressionlevel:-1,height:32,infinite:!1,layers:[{data:[129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,37,37,37,37,37,37,37,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,37,140,37,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,37,37,37,140,37,37,37,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,37,137,137,137,137,137,38,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,37,137,137,137,137,137,38,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,37,137,137,137,137,137,38,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,37,137,137,137,137,137,38,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,37,137,137,137,137,137,38,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,37,137,137,137,137,137,38,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,37,38,38,38,38,38,38,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129],height:32,id:1,name:"Tiles",opacity:1,type:"tilelayer",visible:!0,width:32,x:0,y:0},{data:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,232,0,0,0,232,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,231,0,0,0,231,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,231,0,0,0,231,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,231,0,0,0,231,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],height:32,id:6,name:"Tiles2",opacity:1,type:"tilelayer",visible:!0,width:32,x:0,y:0},{draworder:"topdown",id:2,name:"Objects",objects:[{gid:400,height:32,id:233,name:"",rotation:0,type:"16",visible:!0,width:32,x:222,y:124},{gid:194,height:32,id:234,name:"MarkerPlayer",rotation:0,type:"",visible:!0,width:32,x:254.5,y:173.5},{gid:400,height:32,id:235,name:"",rotation:0,type:"16",visible:!0,width:32,x:221.5,y:130.5},{gid:398,height:32,id:236,name:"",rotation:0,type:"18",visible:!0,width:32,x:220,y:140},{gid:398,height:32,id:237,name:"",rotation:0,type:"18",visible:!0,width:32,x:219.5,y:146.5},{gid:401,height:32,id:238,name:"",rotation:0,type:"front",visible:!0,width:32,x:289,y:127},{gid:401,height:32,id:239,name:"",rotation:0,type:"front",visible:!0,width:32,x:286,y:134},{gid:401,height:32,id:240,name:"",rotation:0,type:"front",visible:!0,width:32,x:290.5,y:141.5},{gid:381,height:32,id:241,name:"",rotation:0,type:"front",visible:!0,width:32,x:310,y:174},{gid:381,height:32,id:242,name:"",rotation:0,type:"front",visible:!0,width:32,x:313.5,y:176.5},{gid:381,height:32,id:243,name:"",rotation:0,type:"front",visible:!0,width:32,x:311,y:179},{gid:194,height:32,id:245,name:"MarkerDoor",rotation:0,type:"",visible:!0,width:32,x:267.5,y:74.5},{gid:194,height:32,id:246,name:"MarkerFromEast1",rotation:0,type:"",visible:!0,width:32,x:262.5,y:101.5},{height:28,id:247,name:"#floor1-transitionToEast1FromEast1Storage",rotation:0,type:"",visible:!0,width:25.5,x:250,y:49},{height:19.5,id:248,name:"#floor1-east1StorageOpenStorageDoor",rotation:0,type:"",visible:!0,width:18.5,x:254,y:74},{gid:423,height:32,id:249,name:"",rotation:0,type:"16",visible:!0,width:32,x:223,y:159},{height:17,id:250,name:"#Floor1East1Storage_Employee",rotation:0,type:"",visible:!0,width:19,x:253,y:109},{gid:194,height:32,id:251,name:"MarkerWalkInside",rotation:0,type:"",visible:!0,width:32,x:264,y:144},{gid:194,height:32,id:252,name:"MarkerWalkEmployee",rotation:0,type:"",visible:!0,width:32,x:262,y:166},{gid:193,height:32,id:253,name:"Floor1StorageEmployee",rotation:0,type:"",visible:!0,width:32,x:263,y:197}],opacity:1,type:"objectgroup",visible:!0,x:0,y:0}],nextlayerid:9,nextobjectid:254,orientation:"isometric",renderorder:"right-down",tiledversion:"1.7.2",tileheight:16,tilesets:[{columns:16,firstgid:1,image:"../../res/walls.png",imageheight:512,imagewidth:512,margin:0,name:"walls",spacing:0,tilecount:128,tileheight:64,tilewidth:32},{columns:8,firstgid:129,image:"../../res/floors.png",imageheight:256,imagewidth:256,margin:0,name:"floors",spacing:0,tilecount:64,tileheight:32,tilewidth:32},{columns:4,firstgid:193,image:"../../res/control.png",imageheight:128,imagewidth:128,margin:0,name:"control",spacing:0,tilecount:16,tileheight:32,tilewidth:32},{columns:16,firstgid:209,image:"../../res/props.png",imageheight:512,imagewidth:512,margin:0,name:"props",spacing:0,tilecount:128,tileheight:64,tilewidth:32},{columns:8,firstgid:337,image:"../../res/walls128.png",imageheight:256,imagewidth:256,margin:0,name:"walls128",spacing:0,tilecount:16,tileheight:128,tilewidth:32},{firstgid:353,source:"../../res/props-dynamic.tiled-sheet.tsx"},{columns:16,firstgid:361,image:"../../res/props_small.png",imageheight:512,imagewidth:512,margin:0,name:"props_small",spacing:0,tilecount:256,tileheight:32,tilewidth:32}],tilewidth:32,type:"map",version:"1.6",width:32}),define("map/floor1-east2",[],{compressionlevel:-1,height:32,infinite:!1,layers:[{data:[129,129,129,129,129,129,39,39,39,39,39,39,39,39,39,39,39,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,39,136,136,136,136,136,136,136,136,136,39,129,129,140,136,140,136,129,129,136,129,129,129,129,129,129,129,129,129,129,129,129,39,136,136,136,136,136,136,136,136,136,39,129,129,140,136,136,136,136,136,136,136,129,129,129,129,129,129,129,129,129,129,129,39,136,136,136,136,136,136,136,136,136,39,136,136,40,40,40,40,40,40,40,40,40,129,129,129,129,129,129,129,129,129,129,39,136,136,136,136,136,136,136,136,136,39,136,136,40,136,140,136,136,136,136,136,40,129,129,129,129,129,129,129,129,129,129,39,136,136,136,136,136,136,136,136,136,39,136,136,40,136,136,136,136,136,136,136,40,129,129,129,129,129,129,129,129,129,129,39,136,136,136,136,136,136,136,136,136,39,39,39,40,136,136,136,136,136,136,136,40,129,129,129,129,129,129,129,129,129,129,39,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,136,140,40,129,129,129,129,129,129,129,129,129,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,40,129,129,129,129,129,129,129,129,129,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,136,40,129,129,129,129,129,129,129,129,129,129,39,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,136,40,129,129,129,129,129,129,129,129,129,129,39,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,136,40,129,129,129,129,129,129,129,129,129,129,39,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,39,40,129,129,129,129,129,129,129,129,129,129,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,140,140,140,140,39,40,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,39,140,140,140,140,39,40,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,39,140,140,140,140,39,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,39,140,140,140,140,39,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,39,140,140,140,140,39,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,39,140,140,140,140,39,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,39,140,140,140,140,39,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,39,39,140,140,129,39,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,140,140,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129],height:32,id:1,name:"Tiles",opacity:1,type:"tilelayer",visible:!0,width:32,x:0,y:0},{data:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,243,243,243,0,227,0,243,243,243,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,233,234,234,234,234,234,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,233,234,234,234,234,234,0,0,0,0,0,0,215,218,215,218,215,218,215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,226,0,0,0,0,0,0,0,225,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,14,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,14,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,39,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,39,39,15,15,39,39,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],height:32,id:6,name:"Tiles2",opacity:1,type:"tilelayer",visible:!0,width:32,x:0,y:0},{draworder:"topdown",id:2,name:"Objects",objects:[{gid:194,height:32,id:129,name:"MarkerPlayer",rotation:0,type:"",visible:!0,width:32,x:198,y:136},{gid:194,height:32,id:132,name:"MarkerFromWest2",rotation:0,type:"",visible:!0,width:32,x:136.5,y:145.5},{height:41,id:134,name:"#floor1-OpenRedDoorsFWD",rotation:0,type:"",visible:!0,width:36.5,x:94.5,y:121.5},{gid:194,height:32,id:135,name:"MarkerRedDoorFWD1",rotation:0,type:"",visible:!0,width:32,x:107.5,y:154.5},{gid:194,height:32,id:136,name:"MarkerRedDoorFWD2",rotation:0,type:"",visible:!0,width:32,x:106.5,y:135.5},{height:41,id:137,name:"#floor1-transitionFromFloor1East2ToFloor1West2",rotation:0,type:"",visible:!0,width:22.5,x:77.5,y:120.5},{height:28,id:140,name:"#floor1-OpenRedDoorsBCK",rotation:0,type:"",visible:!0,width:48,x:359.5,y:304},{gid:194,height:32,id:141,name:"MarkerRedDoorBCK1",rotation:0,type:"",visible:!0,width:32,x:376.5,y:329.5},{gid:194,height:32,id:142,name:"MarkerRedDoorBCK2",rotation:0,type:"",visible:!0,width:32,x:393.5,y:328.5},{height:23,id:143,name:"#floor1-transitionToFloor1East1FromFloor2East2",rotation:0,type:"",visible:!0,width:32.5,x:367,y:328},{gid:194,height:32,id:144,name:"MarkerFromEast1",rotation:0,type:"",visible:!0,width:32,x:386,y:298},{gid:384,height:32,id:146,name:"",rotation:0,type:"front",visible:!0,width:32,x:112.5,y:-6.5},{gid:386,height:32,id:147,name:"",rotation:0,type:"40",visible:!0,width:32,x:209,y:-7},{gid:388,height:32,id:148,name:"",rotation:0,type:"front",visible:!0,width:32,x:160.5,y:-6.5},{gid:407,height:32,id:149,name:"",rotation:0,type:"11",visible:!0,width:32,x:191.5,y:66.5},{gid:407,height:32,id:150,name:"",rotation:0,type:"24",visible:!0,width:32,x:138.5,y:49.5},{gid:423,height:32,id:151,name:"",rotation:0,type:"16",visible:!0,width:32,x:131.5,y:62.5},{gid:423,height:32,id:152,name:"",rotation:0,type:"24",visible:!0,width:32,x:208,y:46},{gid:401,height:32,id:153,name:"",rotation:0,type:"22",visible:!0,width:32,x:124.5,y:7.5},{gid:397,height:32,id:154,name:"",rotation:0,type:"22",visible:!0,width:32,x:105,y:9},{gid:399,height:32,id:155,name:"",rotation:0,type:"22",visible:!0,width:32,x:202,y:8},{gid:397,height:32,id:157,name:"",rotation:0,type:"22",visible:!0,width:32,x:137,y:9},{gid:422,height:32,id:158,name:"",rotation:0,type:"16",visible:!0,width:32,x:135,y:65},{gid:422,height:32,id:159,name:"",rotation:0,type:"16",visible:!0,width:32,x:138.5,y:63.5},{gid:380,height:32,id:161,name:"",rotation:0,type:"",visible:!0,width:32,x:222,y:74},{gid:379,height:32,id:162,name:"",rotation:0,type:"",visible:!0,width:32,x:160.5,y:71.5},{gid:382,height:32,id:165,name:"",rotation:0,type:"",visible:!0,width:32,x:222,y:76},{gid:407,height:32,id:166,name:"",rotation:0,type:"12",visible:!0,width:32,x:159,y:67},{gid:421,height:32,id:167,name:"",rotation:0,type:"18",visible:!0,width:32,x:175.5,y:58.5},{gid:389,height:32,id:168,name:"",rotation:0,type:"22",visible:!0,width:32,x:310,y:58},{gid:390,height:32,id:169,name:"",rotation:0,type:"16",visible:!0,width:32,x:121.5,y:64.5},{gid:390,height:32,id:170,name:"",rotation:0,type:"22",visible:!0,width:32,x:204.5,y:61.5},{gid:389,height:32,id:171,name:"",rotation:0,type:"30",visible:!0,width:32,x:145,y:43},{gid:420,height:32,id:172,name:"",rotation:0,type:"6",visible:!0,width:32,x:150.5,y:25.5},{gid:420,height:32,id:173,name:"",rotation:0,type:"6",visible:!0,width:32,x:118.5,y:25.5},{gid:420,height:32,id:174,name:"",rotation:0,type:"6",visible:!0,width:32,x:214.5,y:25.5},{gid:418,height:32,id:175,name:"",rotation:0,type:"6",visible:!0,width:32,x:134.5,y:25.5},{gid:418,height:32,id:176,name:"",rotation:0,type:"11",visible:!0,width:32,x:143.5,y:18.5},{gid:418,height:32,id:177,name:"",rotation:0,type:"11",visible:!0,width:32,x:207.5,y:18.5},{gid:418,height:32,id:178,name:"",rotation:0,type:"11",visible:!0,width:32,x:111.5,y:18.5},{gid:418,height:32,id:179,name:"",rotation:0,type:"11",visible:!0,width:32,x:127.5,y:18.5},{gid:415,height:32,id:180,name:"",rotation:0,type:"8",visible:!0,width:32,x:104,y:76},{gid:414,height:32,id:181,name:"",rotation:0,type:"7",visible:!0,width:32,x:271.5,y:104.5},{gid:193,height:32,id:182,name:"Floor1DNDPlayer1",rotation:0,type:"",visible:!0,width:32,x:148,y:90},{gid:194,height:32,id:183,name:"MarkerPaceA",rotation:0,type:"",visible:!0,width:32,x:179.5,y:88.5},{gid:194,height:32,id:184,name:"MarkerPaceB",rotation:0,type:"",visible:!0,width:32,x:139.5,y:90.5},{gid:193,height:32,id:185,name:"Floor1DNDPlayer2",rotation:0,type:"",visible:!0,width:32,x:149.5,y:42.5},{gid:193,height:32,id:186,name:"Floor1DNDPlayer3",rotation:0,type:"",visible:!0,width:32,x:122,y:64},{gid:193,height:32,id:187,name:"Floor1DNDPlayer4",rotation:0,type:"",visible:!0,width:32,x:198,y:86},{gid:194,height:32,id:188,name:"Marker2PaceA",rotation:0,type:"",visible:!0,width:32,x:148.5,y:41.5},{gid:194,height:32,id:189,name:"Marker2PaceB",rotation:0,type:"",visible:!0,width:32,x:210,y:38},{gid:415,height:32,id:190,name:"",rotation:0,type:"8",visible:!0,width:32,x:345,y:249},{height:16.5,id:191,name:"#Floor1East2_ZagMachine",rotation:0,type:"",visible:!0,width:68,x:364,y:78.5},{gid:194,height:32,id:192,name:"MarkerZagMachine",rotation:0,type:"",visible:!0,width:32,x:375,y:87},{gid:408,height:32,id:193,name:"",rotation:0,type:"8",visible:!0,width:32,x:311.5,y:86.5},{gid:193,height:32,id:194,name:"Floor1ZagPlayer",rotation:0,type:"",visible:!0,width:32,x:344.5,y:87.5}],opacity:1,type:"objectgroup",visible:!0,x:0,y:0}],nextlayerid:7,nextobjectid:195,orientation:"isometric",renderorder:"right-down",tiledversion:"1.7.2",tileheight:16,tilesets:[{columns:16,firstgid:1,image:"../../res/walls.png",imageheight:512,imagewidth:512,margin:0,name:"walls",spacing:0,tilecount:128,tileheight:64,tilewidth:32},{columns:8,firstgid:129,image:"../../res/floors.png",imageheight:256,imagewidth:256,margin:0,name:"floors",spacing:0,tilecount:64,tileheight:32,tilewidth:32},{columns:4,firstgid:193,image:"../../res/control.png",imageheight:128,imagewidth:128,margin:0,name:"control",spacing:0,tilecount:16,tileheight:32,tilewidth:32},{columns:16,firstgid:209,image:"../../res/props.png",imageheight:512,imagewidth:512,margin:0,name:"props",spacing:0,tilecount:128,tileheight:64,tilewidth:32},{columns:8,firstgid:337,image:"../../res/walls128.png",imageheight:256,imagewidth:256,margin:0,name:"walls128",spacing:0,tilecount:16,tileheight:128,tilewidth:32},{firstgid:353,source:"../../res/props-dynamic.tiled-sheet.tsx"},{columns:16,firstgid:360,image:"../../res/props_small.png",imageheight:512,imagewidth:512,margin:0,name:"props_small",spacing:0,tilecount:256,tileheight:32,tilewidth:32}],tilewidth:32,type:"map",version:"1.6",width:32}),define("map/floor1-tut-entrance",[],{compressionlevel:-1,height:32,infinite:!1,layers:[{data:[129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,33,36,36,33,36,36,33,36,36,33,36,36,33,36,36,33,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,36,149,149,149,149,149,149,149,149,149,149,149,149,149,149,36,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,33,149,149,149,149,149,149,149,149,149,149,149,149,149,149,33,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,36,149,149,149,149,149,144,144,144,149,149,149,149,149,149,36,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,36,149,149,149,149,149,144,144,144,149,149,149,149,149,129,36,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,33,149,149,149,149,149,144,144,144,149,149,149,149,149,129,33,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,36,149,149,149,149,149,149,149,149,149,149,149,149,149,129,36,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,36,149,149,149,149,149,149,149,149,149,149,149,149,149,129,36,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,33,149,149,149,149,149,149,149,149,149,149,149,149,149,149,33,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,36,149,149,149,149,149,149,149,149,149,149,149,149,149,149,36,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,36,149,149,149,149,149,149,149,149,149,149,149,149,149,149,36,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,33,36,36,33,36,36,33,149,149,33,36,36,33,36,36,33,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,36,149,149,36,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,36,149,149,36,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,36,149,149,36,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129],height:32,id:1,name:"Tiles",opacity:1,type:"tilelayer",visible:!0,width:32,x:0,y:0},{data:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,15,15,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],height:32,id:6,name:"Tiles2",opacity:1,type:"tilelayer",visible:!0,width:32,x:0,y:0},{draworder:"topdown",id:2,name:"Objects",objects:[{gid:194,height:32,id:61,name:"MarkerPlayer",rotation:0,type:"",visible:!0,width:32,x:200,y:256},{gid:194,height:32,id:65,name:"MarkerVRLanding",rotation:0,type:"",visible:!0,width:32,x:204,y:204},{height:44,id:66,name:"#floor1-tut-entrance-vr-portal",rotation:0,type:"",visible:!0,width:44,x:176,y:176},{gid:200,height:32,id:68,name:"MarkerDoor",rotation:0,type:"",visible:!0,width:32,x:200,y:288},{gid:194,height:32,id:69,name:"MarkerJason1",rotation:0,type:"",visible:!0,width:32,x:188,y:240},{gid:194,height:32,id:70,name:"MarkerJason2",rotation:0,type:"",visible:!0,width:32,x:148,y:196},{gid:194,height:32,id:71,name:"MarkerAda",rotation:0,type:"",visible:!0,width:32,x:152,y:244},{height:44,id:72,name:"#floor1-tut-entrance-door",rotation:0,type:"",visible:!0,width:32,x:192,y:320},{gid:194,height:32,id:73,name:"MarkerDoorTutTile",rotation:0,type:"",visible:!0,width:32,x:196,y:360}],opacity:1,type:"objectgroup",visible:!0,x:0,y:0}],nextlayerid:7,nextobjectid:74,orientation:"isometric",renderorder:"right-down",tiledversion:"1.7.2",tileheight:16,tilesets:[{columns:16,firstgid:1,image:"../../res/walls.png",imageheight:512,imagewidth:512,margin:0,name:"walls",spacing:0,tilecount:128,tileheight:64,tilewidth:32},{columns:8,firstgid:129,image:"../../res/floors.png",imageheight:256,imagewidth:256,margin:0,name:"floors",spacing:0,tilecount:64,tileheight:32,tilewidth:32},{columns:4,firstgid:193,image:"../../res/control.png",imageheight:128,imagewidth:128,margin:0,name:"control",spacing:0,tilecount:16,tileheight:32,tilewidth:32},{columns:16,firstgid:209,image:"../../res/props.png",imageheight:512,imagewidth:512,margin:0,name:"props",spacing:0,tilecount:128,tileheight:64,tilewidth:32},{columns:8,firstgid:337,image:"../../res/walls128.png",imageheight:256,imagewidth:256,margin:0,name:"walls128",spacing:0,tilecount:16,tileheight:128,tilewidth:32},{firstgid:353,source:"../../res/props-dynamic.tiled-sheet.tsx"}],tilewidth:32,type:"map",version:"1.6",width:32}),define("map/floor1-tut-exit",[],{compressionlevel:-1,height:32,infinite:!1,layers:[{data:[129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,33,36,36,33,36,36,33,36,36,33,36,36,33,36,36,33,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,33,149,149,149,149,149,149,149,149,149,149,149,149,149,149,33,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,36,149,149,149,149,149,149,149,149,149,149,149,149,149,149,36,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,36,149,149,149,149,149,149,149,149,149,149,149,149,149,149,36,129,129,129,129,129,129,129,129,129,129,129,129,129,36,36,36,33,149,149,149,149,149,149,149,149,149,149,149,149,149,149,33,129,129,129,129,129,129,129,129,129,129,129,129,149,149,149,149,149,149,149,149,149,149,144,144,144,149,149,149,149,149,149,36,129,129,129,129,129,129,129,129,129,129,129,129,149,149,149,149,149,149,149,149,149,149,144,144,144,149,149,149,149,149,129,36,129,129,129,129,129,129,129,129,129,129,129,129,129,36,36,36,33,149,149,149,149,149,144,144,144,149,149,149,149,149,129,33,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,36,149,149,149,149,149,149,149,149,149,149,149,149,149,129,36,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,36,149,149,149,149,149,149,149,149,149,149,149,149,149,129,36,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,33,149,149,149,149,149,149,149,149,149,149,149,149,149,149,33,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,36,149,149,149,149,149,149,149,149,149,149,149,149,149,149,36,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,36,149,149,149,149,149,149,149,149,149,149,149,149,149,149,36,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,33,36,36,33,36,36,33,36,36,33,36,36,33,36,36,33,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129],height:32,id:1,name:"Tiles",opacity:1,type:"tilelayer",visible:!0,width:32,x:0,y:0},{data:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,14,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,14,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],height:32,id:6,name:"Tiles2",opacity:1,type:"tilelayer",visible:!0,width:32,x:0,y:0},{draworder:"topdown",id:2,name:"Objects",objects:[{gid:194,height:32,id:74,name:"MarkerVRLanding",rotation:0,type:"",visible:!0,width:32,x:202,y:202},{height:52,id:75,name:"#floor1-OpenRedDoorsFWD",rotation:0,type:"",visible:!0,width:35.5,x:36,y:166},{gid:194,height:32,id:76,name:"MarkerRedDoorFWD1",rotation:0,type:"",visible:!0,width:32,x:43.5,y:200.5},{gid:194,height:32,id:77,name:"MarkerRedDoorFWD2",rotation:0,type:"",visible:!0,width:32,x:44,y:184},{height:51.5,id:78,name:"#floor1-transitionToEast1FromTutExit",rotation:0,type:"",visible:!0,width:18.5,x:19,y:163},{gid:194,height:32,id:79,name:"MarkerPlayer",rotation:0,type:"",visible:!0,width:32,x:154,y:242},{gid:194,height:32,id:80,name:"MarkerJason",rotation:0,type:"",visible:!0,width:32,x:125,y:189}],opacity:1,type:"objectgroup",visible:!0,x:0,y:0}],nextlayerid:7,nextobjectid:81,orientation:"isometric",renderorder:"right-down",tiledversion:"1.7.2",tileheight:16,tilesets:[{columns:16,firstgid:1,image:"../../res/walls.png",imageheight:512,imagewidth:512,margin:0,name:"walls",spacing:0,tilecount:128,tileheight:64,tilewidth:32},{columns:8,firstgid:129,image:"../../res/floors.png",imageheight:256,imagewidth:256,margin:0,name:"floors",spacing:0,tilecount:64,tileheight:32,tilewidth:32},{columns:4,firstgid:193,image:"../../res/control.png",imageheight:128,imagewidth:128,margin:0,name:"control",spacing:0,tilecount:16,tileheight:32,tilewidth:32},{columns:16,firstgid:209,image:"../../res/props.png",imageheight:512,imagewidth:512,margin:0,name:"props",spacing:0,tilecount:128,tileheight:64,tilewidth:32},{columns:8,firstgid:337,image:"../../res/walls128.png",imageheight:256,imagewidth:256,margin:0,name:"walls128",spacing:0,tilecount:16,tileheight:128,tilewidth:32},{firstgid:353,source:"../../res/props-dynamic.tiled-sheet.tsx"}],tilewidth:32,type:"map",version:"1.6",width:32}),define("map/floor1-tut-vr1",[],{compressionlevel:-1,height:32,infinite:!1,layers:[{data:[129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,187,187,187,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,187,187,187,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,185,185,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,185,185,189,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,185,185,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,185,185,189,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,185,185,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,185,185,189,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,185,185,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,185,185,189,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,185,185,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,185,185,185,185,185,185,185,185,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,185,185,185,185,185,185,185,185,189,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,185,129,185,189,189,129,185,185,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,189,129,185,185,185,129,185,185,189,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,185,129,185,185,185,129,185,185,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,189,129,185,185,185,129,185,185,189,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,185,129,129,129,129,129,185,185,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,185,185,185,185,185,185,185,185,189,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,189,185,189,185,189,185,189,185,189,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129],height:32,id:1,name:"Tiles",offsetx:0,offsety:16,opacity:1,type:"tilelayer",visible:!0,width:32,x:0,y:0},{data:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,144,144,144,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,144,144,144,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,144,144,144,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],height:32,id:6,name:"Tiles2",opacity:1,type:"tilelayer",visible:!0,width:32,x:0,y:0},{draworder:"topdown",id:2,name:"Objects",objects:[{gid:194,height:32,id:61,name:"MarkerPlayer",rotation:0,type:"",visible:!0,width:32,x:182,y:374},{gid:194,height:32,id:65,name:"MarkerVRLanding",rotation:0,type:"",visible:!0,width:32,x:188,y:380},{height:44,id:66,name:"#floor1-tut-vr1-portal",rotation:0,type:"",visible:!0,width:44,x:160,y:352},{height:0,id:67,name:"",rotation:0,type:"",visible:!0,width:0,x:136,y:88},{gid:194,height:32,id:68,name:"MarkerJason1",rotation:0,type:"",visible:!0,width:32,x:188,y:156},{gid:194,height:32,id:69,name:"MarkerJason0",rotation:0,type:"",visible:!0,width:32,x:186,y:198},{gid:198,height:32,id:70,name:"MarkerFromVR2",rotation:0,type:"",visible:!0,width:32,x:192,y:176},{height:32,id:71,name:"#floor1-tut-vr1-to-vr2",rotation:0,type:"",visible:!0,width:48,x:160,y:128},{gid:194,height:32,id:72,name:"MarkerJason2",rotation:0,type:"",visible:!0,width:32,x:183.25,y:261.25},{gid:194,height:32,id:73,name:"MarkerJason3",rotation:0,type:"",visible:!0,width:32,x:182,y:240}],opacity:1,type:"objectgroup",visible:!0,x:0,y:0}],nextlayerid:7,nextobjectid:74,orientation:"isometric",properties:[{name:"BackgroundColor",type:"string",value:"#BCB7C5"}],renderorder:"right-down",tiledversion:"1.7.2",tileheight:16,tilesets:[{columns:16,firstgid:1,image:"../../res/walls.png",imageheight:512,imagewidth:512,margin:0,name:"walls",spacing:0,tilecount:128,tileheight:64,tilewidth:32},{columns:8,firstgid:129,image:"../../res/floors.png",imageheight:256,imagewidth:256,margin:0,name:"floors",spacing:0,tilecount:64,tileheight:32,tilewidth:32},{columns:4,firstgid:193,image:"../../res/control.png",imageheight:128,imagewidth:128,margin:0,name:"control",spacing:0,tilecount:16,tileheight:32,tilewidth:32},{columns:16,firstgid:209,image:"../../res/props.png",imageheight:512,imagewidth:512,margin:0,name:"props",spacing:0,tilecount:128,tileheight:64,tilewidth:32},{columns:8,firstgid:337,image:"../../res/walls128.png",imageheight:256,imagewidth:256,margin:0,name:"walls128",spacing:0,tilecount:16,tileheight:128,tilewidth:32},{firstgid:353,source:"../../res/props-dynamic.tiled-sheet.tsx"}],tilewidth:32,type:"map",version:"1.6",width:32}),define("map/floor1-tut-vr2",[],{compressionlevel:-1,height:32,infinite:!1,layers:[{data:[129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,185,185,185,185,185,185,185,129,129,129,129,129,129,129,129,185,185,185,185,185,185,188,185,185,129,129,129,129,129,129,185,185,185,185,185,185,185,185,189,129,129,129,129,129,129,129,129,185,185,185,185,185,185,185,185,189,129,129,129,129,129,129,185,185,185,185,185,185,185,185,185,129,129,129,129,129,129,129,129,185,185,185,185,185,185,185,185,185,129,129,129,129,129,129,185,185,185,185,185,185,185,185,189,188,188,188,188,188,188,188,188,185,185,185,185,185,185,185,185,185,185,187,187,129,129,129,188,185,185,185,185,185,185,185,185,188,188,188,188,188,188,188,188,185,185,185,185,185,185,185,185,185,185,187,187,129,129,129,185,185,185,185,185,185,185,185,189,188,188,188,188,188,188,188,188,185,185,185,185,185,185,185,185,185,185,187,187,129,129,129,185,185,185,185,185,185,185,185,185,129,129,129,129,129,129,129,129,185,185,185,185,185,185,185,185,185,129,129,129,129,129,129,185,185,185,185,185,185,185,185,189,129,129,129,129,129,129,129,129,185,185,185,185,185,185,185,185,189,129,129,129,129,129,129,185,189,185,189,185,189,185,189,185,129,129,129,129,129,129,129,129,185,189,185,189,185,189,185,189,185,129,129,129,129,129,129,129,129,129,188,188,188,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,188,188,188,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,188,188,188,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,188,188,188,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,188,188,188,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,188,188,188,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,185,185,185,185,185,185,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,185,185,185,185,185,185,189,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,185,185,185,185,185,185,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,185,185,185,185,185,185,189,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,188,185,185,185,185,185,185,185,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,185,185,185,185,185,185,189,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,185,185,185,185,185,185,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,185,185,185,185,185,185,189,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,189,185,185,185,185,185,189,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,187,187,187,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,187,187,187,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129],height:32,id:1,name:"Tiles",offsetx:0,offsety:16,opacity:1,type:"tilelayer",visible:!0,width:32,x:0,y:0},{data:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,236,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,19,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,237,0,0,0,0,0,0,0,0,19,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,19,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,19,19,19,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,237,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],height:32,id:6,name:"Tiles2",opacity:1,type:"tilelayer",visible:!0,width:32,x:0,y:0},{draworder:"topdown",id:2,name:"Objects",objects:[{gid:194,height:32,id:73,name:"MarkerPlayer",rotation:0,type:"",visible:!0,width:32,x:382.5,y:97.5},{height:0,id:74,name:"",rotation:0,type:"",visible:!0,width:0,x:168,y:104},{gid:194,height:32,id:75,name:"MarkerJason1",rotation:0,type:"",visible:!0,width:32,x:76,y:332},{gid:194,height:32,id:76,name:"MarkerJason0",rotation:0,type:"",visible:!0,width:32,x:108,y:356},{height:32,id:77,name:"#floor1-tut-vr2-to-vr1",rotation:0,type:"",visible:!0,width:40,x:100,y:432},{gid:200,height:32,id:78,name:"MarkerFromVR1",rotation:0,type:"",visible:!0,width:32,x:128,y:428},{gid:194,height:32,id:80,name:"MarkerGate2",rotation:0,type:"",visible:!0,width:32,x:204,y:92},{gid:194,height:32,id:81,name:"MarkerJason2",rotation:0,type:"",visible:!0,width:32,x:124,y:280},{gid:194,height:32,id:82,name:"MarkerJason3",rotation:0,type:"",visible:!0,width:32,x:124,y:160},{gid:194,height:32,id:83,name:"MarkerJason4",rotation:0,type:"",visible:!0,width:32,x:76,y:92},{gid:194,height:32,id:84,name:"MarkerJason5",rotation:0,type:"",visible:!0,width:32,x:168,y:88},{gid:194,height:32,id:85,name:"MarkerJason6",rotation:0,type:"",visible:!0,width:32,x:348,y:92},{gid:194,height:32,id:86,name:"MarkerJason7",rotation:0,type:"",visible:!0,width:32,x:428,y:44},{gid:194,height:32,id:87,name:"MarkerJason8",rotation:0,type:"",visible:!0,width:32,x:476,y:88},{gid:199,height:32,id:88,name:"MarkerFromVR3",rotation:0,type:"",visible:!0,width:32,x:476,y:96},{gid:194,height:32,id:90,name:"MarkerAda0",rotation:0,type:"",visible:!0,width:32,x:116,y:388},{gid:194,height:32,id:91,name:"MarkerRobot1",rotation:0,type:"",visible:!0,width:32,x:124,y:332},{gid:194,height:32,id:92,name:"MarkerGate1",rotation:0,type:"",visible:!0,width:32,x:124,y:252},{ellipse:!0,height:0,id:94,name:"",rotation:0,type:"",visible:!0,width:0,x:148,y:284},{ellipse:!0,height:0,id:95,name:"",rotation:0,type:"",visible:!0,width:0,x:136,y:268},{ellipse:!0,height:0,id:96,name:"",rotation:0,type:"",visible:!0,width:0,x:136,y:264},{height:28,id:97,name:"#floor1-tut-vr2-facedown-jason",rotation:0,type:"",visible:!0,width:52,x:96,y:196},{height:16,id:99,name:"#floor1-tut-vr2-battle2-area",rotation:0,type:"",visible:!0,width:52,x:96,y:164},{gid:194,height:32,id:100,name:"MarkerAda1",rotation:0,type:"",visible:!0,width:32,x:120,y:124},{gid:194,height:32,id:101,name:"MarkerRobot2",rotation:0,type:"",visible:!0,width:32,x:124,y:92},{gid:194,height:32,id:102,name:"MarkerGate3",rotation:0,type:"",visible:!0,width:32,x:316,y:92},{gid:194,height:32,id:103,name:"MarkerAda2",rotation:0,type:"",visible:!0,width:32,x:376,y:100},{gid:194,height:32,id:104,name:"MarkerRobot3",rotation:0,type:"",visible:!0,width:32,x:396,y:152},{gid:194,height:32,id:105,name:"MarkerRobot4",rotation:0,type:"",visible:!0,width:32,x:396,y:56},{height:48,id:106,name:"#floor1-tut-vr2-battle3-area",rotation:0,type:"",visible:!0,width:32,x:256,y:64},{height:0,id:107,name:"",rotation:0,type:"",visible:!0,width:0,x:380,y:120},{height:0,id:108,name:"",rotation:0,type:"",visible:!0,width:0,x:376,y:112},{gid:194,height:32,id:110,name:"MarkerRobot6",rotation:0,type:"",visible:!0,width:32,x:340,y:60},{gid:194,height:32,id:111,name:"MarkerRobot5",rotation:0,type:"",visible:!0,width:32,x:440,y:144}],opacity:1,type:"objectgroup",visible:!0,x:0,y:0}],nextlayerid:7,nextobjectid:112,orientation:"isometric",properties:[{name:"BackgroundColor",type:"string",value:"#BCB7C5"}],renderorder:"right-down",tiledversion:"1.7.2",tileheight:16,tilesets:[{columns:16,firstgid:1,image:"../../res/walls.png",imageheight:512,imagewidth:512,margin:0,name:"walls",spacing:0,tilecount:128,tileheight:64,tilewidth:32},{columns:8,firstgid:129,image:"../../res/floors.png",imageheight:256,imagewidth:256,margin:0,name:"floors",spacing:0,tilecount:64,tileheight:32,tilewidth:32},{columns:4,firstgid:193,image:"../../res/control.png",imageheight:128,imagewidth:128,margin:0,name:"control",spacing:0,tilecount:16,tileheight:32,tilewidth:32},{columns:16,firstgid:209,image:"../../res/props.png",imageheight:512,imagewidth:512,margin:0,name:"props",spacing:0,tilecount:128,tileheight:64,tilewidth:32},{columns:8,firstgid:337,image:"../../res/walls128.png",imageheight:256,imagewidth:256,margin:0,name:"walls128",spacing:0,tilecount:16,tileheight:128,tilewidth:32},{firstgid:353,source:"../../res/props-dynamic.tiled-sheet.tsx"}],tilewidth:32,type:"map",version:"1.6",width:32}),define("map/floor1-tut-vr3",[],{compressionlevel:-1,height:32,infinite:!1,layers:[{data:[129,129,185,188,185,185,185,185,188,188,189,129,129,129,129,129,185,185,185,185,185,185,185,185,185,185,185,129,129,129,129,129,129,129,185,185,185,188,185,129,129,129,129,129,129,185,185,185,185,188,188,188,188,188,188,188,188,188,185,187,187,129,129,129,129,185,185,185,129,129,129,129,129,129,129,129,129,185,185,185,185,185,185,185,185,185,185,185,185,185,185,187,187,129,129,129,129,185,188,185,129,129,129,129,129,129,129,129,129,185,185,185,185,188,188,188,188,188,188,188,188,188,185,187,187,129,129,129,129,188,185,185,129,129,129,129,129,129,129,129,129,185,185,129,185,185,185,185,185,185,185,185,185,185,185,129,129,129,129,129,129,185,185,185,129,129,129,129,129,129,129,129,129,188,188,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,188,129,129,129,129,129,129,129,129,129,188,188,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,129,129,129,185,185,129,129,129,129,185,146,185,129,129,185,185,129,129,129,129,129,185,129,129,0,129,129,129,129,129,129,129,129,129,129,188,185,129,129,129,129,185,185,185,129,129,185,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,129,129,129,129,185,185,185,129,129,188,188,129,129,129,129,129,129,129,129,129,129,129,185,129,129,129,129,129,129,129,185,188,129,129,129,129,185,185,185,129,129,188,188,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,129,129,129,129,185,185,185,189,129,185,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,187,187,185,185,129,129,129,129,129,129,189,185,185,185,185,189,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,187,187,185,185,129,129,129,129,129,129,129,185,188,188,188,185,189,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,187,187,188,185,185,185,185,188,185,185,185,185,188,185,188,185,185,185,185,185,185,185,185,185,185,185,185,188,185,185,187,187,129,129,185,185,185,188,185,185,185,188,185,185,188,188,188,185,185,185,185,185,185,188,185,185,185,188,185,185,185,188,187,187,129,129,129,129,129,129,129,129,129,129,129,189,185,185,185,185,189,129,129,129,129,129,129,129,129,129,129,188,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,185,189,129,129,129,129,129,129,129,129,129,129,129,188,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,129,129,129,129,129,129,129,129,129,129,129,129,188,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,188,188,129,129,129,129,129,129,129,129,129,129,189,189,189,189,189,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,188,188,129,129,129,129,129,129,129,129,129,129,189,185,188,185,189,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,129,129,129,129,129,129,129,129,129,129,189,189,189,189,189,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,145,185,185,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,185,185,185,185,185,185,185,185,185,185,185,185,185,188,188,185,185,185,185,185,129,129,129,129,187,187,185,185,185,185,185,185,185,185,185,185,185,185,185,185,185,185,185,185,185,188,188,185,185,185,185,185,129,129,129,129,187,187,185,185,185,185,185,185,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,129,129,129,129,187,187,185,185,185,185,185,185,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,129,129,129,129,129,129,129,129,185,185,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,189,185,189,129,129,129,129,129,129,129,129,185,185,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,188,185,189,129,129,129,129,129,129,129,129,185,185,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,189,189,189,189,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129],height:32,id:1,name:"Tiles",offsetx:0,offsety:16,opacity:1,type:"tilelayer",visible:!0,width:32,x:0,y:0},{data:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,235,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,153,153,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,23,23,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,23,23,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,236,0,0,0,153,153,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,147,147,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,22,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,22,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,147,147,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,145,145,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,20,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,20,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,145,145,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,236,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,147,22,22,147,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,147,22,22,147,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,239,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],height:32,id:6,name:"Tiles2",opacity:1,type:"tilelayer",visible:!0,width:32,x:0,y:0},{draworder:"topdown",id:2,name:"Objects",objects:[{gid:194,height:32,id:112,name:"MarkerPlayer",rotation:0,type:"",visible:!0,width:32,x:233.5,y:44.5},{gid:194,height:32,id:113,name:"MarkerDoorFromVR2",rotation:0,type:"",visible:!0,width:32,x:76,y:428},{gid:194,height:32,id:114,name:"MarkerAda0",rotation:0,type:"",visible:!0,width:32,x:108,y:416},{gid:194,height:32,id:117,name:"TagMarkerPurple",rotation:0,type:"",visible:!0,width:32,x:376,y:412},{gid:194,height:32,id:118,name:"TagMarkerRed",rotation:0,type:"",visible:!0,width:32,x:232,y:104},{gid:194,height:32,id:119,name:"TagMarkerYellow",rotation:0,type:"",visible:!0,width:32,x:220,y:332},{gid:194,height:32,id:129,name:"TagMarkerYellow",rotation:0,type:"",visible:!0,width:32,x:220,y:316},{gid:194,height:32,id:130,name:"TagMarkerYellow",rotation:0,type:"",visible:!0,width:32,x:236,y:332},{gid:194,height:32,id:131,name:"TagMarkerYellow",rotation:0,type:"",visible:!0,width:32,x:236,y:316},{height:56,id:136,name:"#floor1-tut-vr3-to-vr2",rotation:0,type:"",visible:!0,width:28,x:36,y:396},{gid:194,height:32,id:138,name:"TagMarkerPurple",rotation:0,type:"",visible:!0,width:32,x:392,y:408},{gid:194,height:32,id:139,name:"TagMarkerPurple",rotation:0,type:"",visible:!0,width:32,x:392,y:392},{gid:194,height:32,id:140,name:"TagMarkerPurple",rotation:0,type:"",visible:!0,width:32,x:380,y:396},{gid:194,height:32,id:141,name:"TagMarkerPurple",rotation:0,type:"",visible:!0,width:32,x:220,y:172},{gid:194,height:32,id:142,name:"TagMarkerPurple",rotation:0,type:"",visible:!0,width:32,x:236,y:168},{gid:194,height:32,id:143,name:"TagMarkerPurple",rotation:0,type:"",visible:!0,width:32,x:236,y:152},{gid:194,height:32,id:144,name:"TagMarkerPurple",rotation:0,type:"",visible:!0,width:32,x:224,y:156},{gid:194,height:32,id:145,name:"TagMarkerRed",rotation:0,type:"",visible:!0,width:32,x:232,y:88},{gid:194,height:32,id:146,name:"TagMarkerRed",rotation:0,type:"",visible:!0,width:32,x:216,y:104},{gid:194,height:32,id:147,name:"TagMarkerRed",rotation:0,type:"",visible:!0,width:32,x:220,y:92},{height:28,id:150,name:"#floor1-tut-toggle-blue-doors",rotation:0,type:"",visible:!0,width:32,x:136,y:112},{height:28,id:151,name:"#floor1-tut-toggle-yellow-doors",rotation:0,type:"",visible:!0,width:32,x:168,y:368},{height:52,id:152,name:"#floor1-tut-vr3-to-vr3-west",rotation:0,type:"",visible:!0,width:32,x:0,y:192},{gid:197,height:32,id:153,name:"MarkerDoorFromVR3West",rotation:0,type:"",visible:!0,width:32,x:40,y:224},{gid:199,height:32,id:154,name:"MarkerDoorFromVR3East",rotation:0,type:"",visible:!0,width:32,x:476,y:248},{gid:194,height:32,id:156,name:"MarkerKioskStats",rotation:0,type:"",visible:!0,width:32,x:346,y:42},{height:56,id:157,name:"#utils-kiosk-stats-activate",rotation:0,type:"",visible:!0,width:56,x:318,y:14},{height:80,id:158,name:"#utils-kiosk-stats-deactivate",rotation:0,type:"",visible:!0,width:80,x:306,y:2},{gid:194,height:32,id:163,name:"MarkerSavePoint",rotation:0,type:"",visible:!0,width:32,x:120,y:472},{height:60,id:164,name:"#utils-save-point-activate",rotation:0,type:"",visible:!0,width:52,x:96,y:440},{height:68,id:165,name:"#utils-save-point-deactivate",rotation:0,type:"",visible:!0,width:68,x:88,y:432},{gid:193,height:32,id:166,name:"TutRobotRoamer1",properties:[{name:"encounterName",type:"string",value:"ENCOUNTER_TUT_DUNGEON1"},{name:"overworldAi",type:"string",value:"ROAM_WALK_UP_DOWN"}],rotation:0,type:"",visible:!0,width:32,x:228,y:204},{gid:193,height:32,id:167,name:"TutRobotRoamer1",properties:[{name:"encounterName",type:"string",value:"ENCOUNTER_TUT_DUNGEON1"},{name:"overworldAi",type:"string",value:"ROAM_WALK_RIGHTUP_LEFTDOWN"}],rotation:0,type:"",visible:!0,width:32,x:300,y:396},{gid:193,height:32,id:168,name:"TutRobotRoamer1",properties:[{name:"encounterName",type:"string",value:"ENCOUNTER_TUT_DUNGEON2"},{name:"overworldAi",type:"string",value:"ROAM_WALK_RIGHTUP_LEFTDOWN"}],rotation:0,type:"",visible:!0,width:32,x:368.5,y:245.5},{gid:193,height:32,id:169,name:"TutRobotRoamer1",properties:[{name:"encounterName",type:"string",value:"ENCOUNTER_TUT_DUNGEON2"},{name:"overworldAi",type:"string",value:"ROAM_WALK_RIGHTUP_LEFTDOWN"}],rotation:0,type:"",visible:!0,width:32,x:52,y:100},{gid:193,height:32,id:170,name:"TutRobotRoamer1",properties:[{name:"encounterName",type:"string",value:"ENCOUNTER_TUT_DUNGEON4"},{name:"overworldAi",type:"string",value:"ROAM_WALK_RIGHTUP_LEFTDOWN"}],rotation:0,type:"",visible:!0,width:32,x:100,y:16},{gid:201,height:32,id:172,name:"ItemPotion",rotation:0,type:"",visible:!0,width:32,x:444,y:476},{gid:201,height:32,id:173,name:"ItemFeeblePotion",rotation:0,type:"",visible:!0,width:32,x:444,y:332},{gid:201,height:32,id:174,name:"ItemStrongPotion",rotation:0,type:"",visible:!0,width:32,x:172,y:12},{gid:201,height:32,id:175,name:"ItemQuartzRezGem",rotation:0,type:"",visible:!0,width:32,x:236,y:28},{gid:194,height:32,id:176,name:"MarkerSpotSavePoint",rotation:0,type:"",visible:!0,width:32,x:122.5,y:451.5},{height:34.5,id:177,name:"#floor1-tut-transition-from-vr3-to-vr3-east",rotation:0,type:"",visible:!0,width:31.5,x:480.5,y:223.5},{height:0,id:178,name:"",rotation:0,type:"",visible:!0,width:0,x:413,y:185},{height:57,id:179,name:"#floor1-tut-rdy-to-lvl-up",rotation:0,type:"",visible:!0,width:21,x:256.5,y:12.5},{gid:194,height:32,id:180,name:"MarkerLevelAda",rotation:0,type:"",visible:!0,width:32,x:297,y:49},{gid:194,height:32,id:181,name:"MarkerLevelConscience",rotation:0,type:"",visible:!0,width:32,x:297,y:33},{height:47.5,id:182,name:"#floor1-tut-transition-from-VR3-to-VRPreBoss",rotation:0,type:"",visible:!0,width:30.5,x:433,y:17},{gid:194,height:32,id:183,name:"MarkerFromPreBoss",rotation:0,type:"",visible:!0,width:32,x:428.5,y:41.5}],opacity:1,type:"objectgroup",visible:!0,x:0,y:0}],nextlayerid:7,nextobjectid:184,orientation:"isometric",properties:[{name:"BackgroundColor",type:"string",value:"#BCB7C5"}],renderorder:"right-down",tiledversion:"1.7.2",tileheight:16,tilesets:[{columns:16,firstgid:1,image:"../../res/walls.png",imageheight:512,imagewidth:512,margin:0,name:"walls",spacing:0,tilecount:128,tileheight:64,tilewidth:32},{columns:8,firstgid:129,image:"../../res/floors.png",imageheight:256,imagewidth:256,margin:0,name:"floors",spacing:0,tilecount:64,tileheight:32,tilewidth:32},{columns:4,firstgid:193,image:"../../res/control.png",imageheight:128,imagewidth:128,margin:0,name:"control",spacing:0,tilecount:16,tileheight:32,tilewidth:32},{columns:16,firstgid:209,image:"../../res/props.png",imageheight:512,imagewidth:512,margin:0,name:"props",spacing:0,tilecount:128,tileheight:64,tilewidth:32},{columns:8,firstgid:337,image:"../../res/walls128.png",imageheight:256,imagewidth:256,margin:0,name:"walls128",spacing:0,tilecount:16,tileheight:128,tilewidth:32},{firstgid:353,source:"../../res/props-dynamic.tiled-sheet.tsx"}],tilewidth:32,type:"map",version:"1.6",width:32}),define("map/floor1-tut-vr3-west",[],{compressionlevel:-1,height:32,infinite:!1,layers:[{data:[129,129,129,129,187,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,187,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,185,185,185,185,146,185,129,129,129,129,129,129,129,185,129,129,185,185,129,129,129,129,129,129,129,185,185,185,185,189,185,185,185,185,185,185,185,185,129,129,129,129,129,129,129,185,185,185,185,185,185,188,188,188,188,188,185,185,185,185,185,185,185,185,185,185,185,185,185,185,129,129,129,129,129,129,129,185,185,185,185,185,185,188,188,188,188,188,185,185,185,185,185,189,185,185,185,185,185,185,185,185,129,129,129,129,129,129,129,129,129,129,185,185,129,129,129,129,129,129,129,129,129,129,188,129,185,185,185,185,185,185,185,185,129,129,129,129,185,129,129,129,129,129,188,188,129,129,129,129,129,129,129,189,129,129,188,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,188,188,129,129,129,129,129,189,129,129,129,129,188,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,129,129,129,129,129,129,129,129,129,129,185,129,129,129,129,185,129,129,129,129,129,129,129,129,129,129,129,188,188,188,185,185,188,188,188,188,188,188,129,129,129,129,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,129,129,129,129,129,129,0,0,0,185,129,129,129,185,185,185,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,185,185,185,129,129,129,185,185,185,185,185,129,129,129,185,185,185,129,129,129,129,185,185,185,185,129,129,129,129,185,185,185,185,185,185,129,129,129,129,145,185,185,185,188,188,188,185,185,185,185,188,188,185,185,185,185,185,187,187,129,129,185,185,185,185,185,185,129,129,129,129,185,185,185,185,129,129,129,129,129,185,185,188,188,185,185,185,185,185,187,187,129,129,185,185,129,188,129,129,129,129,129,129,129,185,185,185,129,129,185,129,129,188,129,129,129,129,185,185,185,185,187,187,129,129,129,129,129,188,129,129,185,129,129,189,129,188,129,129,129,129,129,129,129,188,129,129,129,129,185,185,185,185,129,129,129,129,129,129,129,188,129,129,129,129,129,129,129,188,129,129,129,129,129,129,129,188,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,188,129,129,129,129,129,185,185,188,129,129,129,185,129,129,129,188,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,188,129,129,129,185,146,185,129,129,129,129,129,129,129,129,129,188,129,129,129,189,129,129,129,129,129,129,129,129,129,185,185,188,129,129,129,185,185,189,189,129,129,129,129,129,129,129,129,188,129,129,129,129,129,129,129,129,129,129,129,129,129,145,185,185,188,188,188,185,185,185,185,129,129,129,129,129,185,185,185,185,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,189,129,129,129,129,129,189,185,185,188,188,188,185,185,185,185,129,129,129,129,129,129,185,129,129,129,129,129,129,129,129,188,129,129,129,129,129,129,188,129,189,129,129,129,129,185,189,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,188,129,129,129,129,0,129,188,129,129,129,129,129,129,188,129,129,129,129,129,185,129,129,129,129,129,129,129,129,129,129,129,188,129,129,129,129,129,0,188,129,129,129,129,129,129,188,129,129,129,129,129,129,129,129,185,129,129,129,129,129,129,129,185,185,185,129,129,129,189,185,185,185,189,129,129,129,129,188,129,129,129,185,129,129,129,129,129,129,129,129,129,129,129,129,185,185,185,129,129,129,185,153,185,185,185,129,129,129,129,185,129,129,129,129,129,185,185,129,129,129,129,129,129,129,129,129,185,185,185,129,129,129,185,185,185,185,185,185,185,185,185,185,185,185,185,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,189,189,129,129,129,129,129,129,129,185,185,185,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,185,185,129,129,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129],height:32,id:1,name:"Tiles",offsetx:0,offsety:16,opacity:1,type:"tilelayer",visible:!0,width:32,x:0,y:0},{data:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,236,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,145,20,145,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,146,21,146,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,146,21,146,0,0,146,0,146,145,20,145,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,237,0,0,0,0,0,0,0,0,0,146,21,21,146,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,146,21,21,146,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,146,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,145,0,0,0,0,0,0,0,153,0,0,0,0,0,0,0,21,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,146,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,145,0,0,0,0,0,0,0,153,0,0,0,0,0,0,0,145,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,236,0,0,0,0,0,0,0,0,0,0,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,145,0,0,0,0,0,0,0,0,0,0,0,0,0,237,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,146,0,146,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,145,0,0,0,0,0,0,153,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,20,0,0,0,0,0,0,23,0,0,0,0,0,0,145,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,145,0,0,0,0,0,0,153,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,153,0,0,0,0,0,0,0,145,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,237,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,153,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],height:32,id:6,name:"Tiles2",opacity:1,type:"tilelayer",visible:!0,width:32,x:0,y:0},{draworder:"topdown",id:2,name:"Objects",objects:[{gid:194,height:32,id:112,name:"MarkerPlayer",rotation:0,type:"",visible:!0,width:32,x:96,y:68},{gid:199,height:32,id:120,name:"MarkerDoorFromVR3",rotation:0,type:"",visible:!0,width:32,x:460,y:224},{height:32,id:121,name:"#floor1-tut-toggle-yellow-doors",rotation:0,type:"",visible:!0,width:28,x:176,y:184},{height:26,id:123,name:"#floor1-tut-toggle-blue-doors",rotation:0,type:"",visible:!0,width:32,x:425.5,y:16.5},{height:32,id:126,name:"#floor1-tut-toggle-yellow-doors",rotation:0,type:"",visible:!0,width:28,x:32,y:312},{height:32,id:127,name:"#floor1-tut-toggle-red-doors",rotation:0,type:"",visible:!0,width:28,x:144,y:408},{height:52,id:128,name:"#floor1-tut-vr3-west-to-vr3",rotation:0,type:"",visible:!0,width:32,x:464,y:192},{gid:194,height:32,id:132,name:"TagMarkerYellow",rotation:0,type:"",visible:!0,width:32,x:200,y:60},{gid:194,height:32,id:133,name:"TagMarkerBlue",rotation:0,type:"",visible:!0,width:32,x:172,y:156},{gid:194,height:32,id:136,name:"TagMarkerYellow",rotation:0,type:"",visible:!0,width:32,x:284,y:396},{gid:194,height:32,id:137,name:"TagMarkerBlue",rotation:0,type:"",visible:!0,width:32,x:332,y:252},{gid:194,height:32,id:139,name:"TagMarkerBlue",rotation:0,type:"",visible:!0,width:32,x:88,y:156},{gid:194,height:32,id:140,name:"TagMarkerBlue",rotation:0,type:"",visible:!0,width:32,x:232,y:344},{gid:194,height:32,id:144,name:"TagMarkerBlue",rotation:0,type:"",visible:!0,width:32,x:364,y:220},{gid:194,height:32,id:145,name:"TagMarkerBlue",rotation:0,type:"",visible:!0,width:32,x:380,y:220},{gid:194,height:32,id:146,name:"TagMarkerBlue",rotation:0,type:"",visible:!0,width:32,x:380,y:204},{gid:194,height:32,id:147,name:"TagMarkerBlue",rotation:0,type:"",visible:!0,width:32,x:364,y:204},{gid:194,height:32,id:148,name:"TagMarkerYellow",rotation:0,type:"",visible:!0,width:32,x:76,y:268},{gid:194,height:32,id:149,name:"TagMarkerYellow",rotation:0,type:"",visible:!0,width:32,x:216,y:152},{gid:194,height:32,id:150,name:"TagMarkerYellow",rotation:0,type:"",visible:!0,width:32,x:60,y:380},{gid:194,height:32,id:151,name:"TagMarkerBlue",rotation:0,type:"",visible:!0,width:32,x:204,y:80},{gid:194,height:32,id:152,name:"TagMarkerYellow",rotation:0,type:"",visible:!0,width:32,x:332,y:300},{height:28,id:153,name:"#floor1-tut-toggle-blue-doors",rotation:0,type:"",visible:!0,width:32,x:136,y:288},{gid:194,height:32,id:154,name:"TagMarkerRed",rotation:0,type:"",visible:!0,width:32,x:168,y:376},{gid:194,height:32,id:155,name:"TagMarkerRed",rotation:0,type:"",visible:!0,width:32,x:200,y:264},{height:32,id:156,name:"#floor1-tut-vr3-west-to-vr3-west2",rotation:0,type:"",visible:!0,width:20,x:64,y:0},{gid:198,height:32,id:157,name:"MarkerDoorFromVR3West2",rotation:0,type:"",visible:!0,width:32,x:80,y:40},{gid:201,height:32,id:158,name:"ItemTrainingBow",rotation:0,type:"",visible:!0,width:32,x:62,y:430},{gid:193,height:32,id:159,name:"TutRobotRoamer1",properties:[{name:"encounterName",type:"string",value:"ENCOUNTER_TUT_DUNGEON3"},{name:"overworldAi",type:"string",value:"ROAM_WALK_RIGHTUP_LEFTDOWN"}],rotation:0,type:"",visible:!0,width:32,x:379.5,y:34.5},{gid:193,height:32,id:160,name:"TutRobotRoamer1",properties:[{name:"encounterName",type:"string",value:"ENCOUNTER_TUT_DUNGEON2"},{name:"overworldAi",type:"string",value:"ROAM_WALK_RIGHTDOWN_LEFTUP"}],rotation:0,type:"",visible:!0,width:32,x:82,y:212},{gid:193,height:32,id:161,name:"TutRobotRoamer1",properties:[{name:"encounterName",type:"string",value:"ENCOUNTER_TUT_DUNGEON1"},{name:"overworldAi",type:"string",value:"ROAM_WALK_RIGHTUP_LEFTDOWN"}],rotation:0,type:"",visible:!0,width:32,x:324.5,y:443.5}],opacity:1,type:"objectgroup",visible:!0,x:0,y:0}],nextlayerid:7,nextobjectid:162,orientation:"isometric",properties:[{name:"BackgroundColor",type:"string",value:"#BCB7C5"}],renderorder:"right-down",tiledversion:"1.7.2",tileheight:16,tilesets:[{columns:16,firstgid:1,image:"../../res/walls.png",imageheight:512,imagewidth:512,margin:0,name:"walls",spacing:0,tilecount:128,tileheight:64,tilewidth:32},{columns:8,firstgid:129,image:"../../res/floors.png",imageheight:256,imagewidth:256,margin:0,name:"floors",spacing:0,tilecount:64,tileheight:32,tilewidth:32},{columns:4,firstgid:193,image:"../../res/control.png",imageheight:128,imagewidth:128,margin:0,name:"control",spacing:0,tilecount:16,tileheight:32,tilewidth:32},{columns:16,firstgid:209,image:"../../res/props.png",imageheight:512,imagewidth:512,margin:0,name:"props",spacing:0,tilecount:128,tileheight:64,tilewidth:32},{columns:8,firstgid:337,image:"../../res/walls128.png",imageheight:256,imagewidth:256,margin:0,name:"walls128",spacing:0,tilecount:16,tileheight:128,tilewidth:32},{firstgid:353,source:"../../res/props-dynamic.tiled-sheet.tsx"}],tilewidth:32,type:"map",version:"1.6",width:32}),define("map/floor1-tut-vr3-west2",[],{compressionlevel:-1,height:32,infinite:!1,layers:[{data:[129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,185,185,185,185,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,185,185,185,185,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,185,185,185,185,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,185,143,185,185,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,185,185,185,185,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,185,185,185,185,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,185,185,185,185,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,188,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,188,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,188,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,188,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,188,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,188,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,188,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,187,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,187,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129],height:32,id:1,name:"Tiles",offsetx:0,offsety:16,opacity:1,type:"tilelayer",visible:!0,width:32,x:0,y:0},{data:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,33,0,33,0,33,0,33,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,143,143,143,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,143,238,143,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,143,143,143,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,153,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,153,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,145,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,145,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],height:32,id:6,name:"Tiles2",opacity:1,type:"tilelayer",visible:!0,width:32,x:0,y:0},{draworder:"topdown",id:2,name:"Objects",objects:[{gid:194,height:32,id:156,name:"TagMarkerYellow",rotation:0,type:"",visible:!0,width:32,x:140,y:460},{gid:194,height:32,id:157,name:"TagMarkerRed",rotation:0,type:"",visible:!0,width:32,x:140,y:396},{gid:194,height:32,id:158,name:"MarkerPlayer",rotation:0,type:"",visible:!0,width:32,x:172,y:344},{gid:200,height:32,id:159,name:"MarkerDoorFromVR3West",rotation:0,type:"",visible:!0,width:32,x:140,y:476},{height:28,id:160,name:"#floor1-tut-vr3-west2-to-vr3-west",rotation:0,type:"",visible:!0,width:20,x:128,y:484},{height:27,id:161,name:"#floor1-tut-West2Pool",rotation:0,type:"",visible:!0,width:32.5,x:128.5,y:342.5},{gid:194,height:32,id:164,name:"MarkerAda",rotation:0,type:"",visible:!0,width:32,x:148,y:328},{gid:194,height:32,id:165,name:"MarkerConscience",rotation:0,type:"",visible:!0,width:32,x:146.5,y:299.5},{height:48,id:166,name:"#utils-heal-pool",rotation:0,type:"",visible:!0,width:48,x:159,y:287},{height:0,id:167,name:"",rotation:0,type:"",visible:!0,width:0,x:309,y:349},{gid:194,height:32,id:168,name:"MarkerHealPool",rotation:0,type:"",visible:!0,width:32,x:183,y:311},{gid:201,height:32,id:169,name:"ItemZoeBracelet",rotation:0,type:"",visible:!0,width:32,x:231,y:359}],opacity:1,type:"objectgroup",visible:!0,x:0,y:0}],nextlayerid:7,nextobjectid:170,orientation:"isometric",properties:[{name:"BackgroundColor",type:"string",value:"#BCB7C5"}],renderorder:"right-down",tiledversion:"1.7.2",tileheight:16,tilesets:[{columns:16,firstgid:1,image:"../../res/walls.png",imageheight:512,imagewidth:512,margin:0,name:"walls",spacing:0,tilecount:128,tileheight:64,tilewidth:32},{columns:8,firstgid:129,image:"../../res/floors.png",imageheight:256,imagewidth:256,margin:0,name:"floors",spacing:0,tilecount:64,tileheight:32,tilewidth:32},{columns:4,firstgid:193,image:"../../res/control.png",imageheight:128,imagewidth:128,margin:0,name:"control",spacing:0,tilecount:16,tileheight:32,tilewidth:32},{columns:16,firstgid:209,image:"../../res/props.png",imageheight:512,imagewidth:512,margin:0,name:"props",spacing:0,tilecount:128,tileheight:64,tilewidth:32},{columns:8,firstgid:337,image:"../../res/walls128.png",imageheight:256,imagewidth:256,margin:0,name:"walls128",spacing:0,tilecount:16,tileheight:128,tilewidth:32},{firstgid:353,source:"../../res/props-dynamic.tiled-sheet.tsx"}],tilewidth:32,type:"map",version:"1.6",width:32}),define("map/floor1-tut-vr3-east",[],{compressionlevel:-1,height:32,infinite:!1,layers:[{data:[129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,129,129,129,129,189,129,129,129,129,185,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,189,189,129,129,129,129,129,129,129,129,129,129,129,129,185,129,129,189,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,129,129,129,129,129,129,129,129,185,129,129,129,129,129,129,129,129,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,185,129,129,185,185,185,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,129,129,129,129,129,129,185,185,188,185,129,185,185,185,185,129,129,129,129,129,129,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,185,185,185,185,185,129,129,129,185,185,129,129,129,129,129,189,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,185,185,185,185,185,188,185,185,188,185,185,189,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,185,129,185,185,185,185,185,185,185,185,185,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,189,129,129,129,185,185,185,129,185,185,129,129,185,185,189,129,185,185,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,185,185,185,185,129,129,185,185,189,129,185,185,185,185,189,129,129,129,129,129,129,129,129,129,129,129,185,185,185,185,185,188,185,185,185,185,185,185,129,185,185,185,185,129,185,185,185,129,129,129,185,185,185,189,189,129,129,129,185,185,185,185,185,185,185,185,188,185,185,185,185,185,129,185,185,129,185,185,185,185,129,129,185,185,185,185,185,129,129,129,185,185,185,185,185,185,185,185,188,185,185,185,188,185,185,129,185,185,129,129,185,185,188,188,185,185,185,189,189,129,187,187,185,185,185,185,185,185,129,185,185,185,185,0,185,185,185,129,185,185,185,129,185,185,129,129,185,185,185,185,185,129,187,187,185,185,185,185,185,185,129,185,185,185,185,0,185,185,185,185,129,185,185,129,129,185,129,129,189,185,189,185,189,129,187,187,189,185,189,185,185,185,0,185,185,185,185,129,185,185,185,185,185,185,185,185,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,185,185,185,185,185,129,188,185,188,185,185,185,185,188,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,185,185,185,185,188,188,185,185,185,185,185,185,185,189,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,188,185,185,185,185,185,185,185,129,185,185,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,185,185,185,185,185,185,129,185,185,185,129,129,129,129,129,129,129,185,129,129,129,129,185,129,129,129,129,129,129,129,185,189,129,129,185,185,185,185,185,185,185,129,129,129,129,129,129,129,129,185,129,129,129,129,129,129,129,129,129,129,129,185,185,129,129,129,129,129,185,185,185,185,185,185,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,189,129,129,129,129,129,129,129,185,185,185,185,189,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,188,129,129,129,129,129,129,129,129,129,129,185,129,185,185,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,129,129,129,129,129,129,129,129,129,129,129,129,185,185,129,129,185,129,129,129,129,129,129,129,129,129,129,185,129,129,129,189,185,185,185,129,129,129,129,129,185,129,129,129,185,189,188,185,189,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,189,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129],height:32,id:1,name:"Tiles",offsetx:0,offsety:16,opacity:1,type:"tilelayer",visible:!0,width:32,x:0,y:0},{data:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,147,236,147,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],height:32,id:6,name:"Tiles2",opacity:1,type:"tilelayer",visible:!0,width:32,x:0,y:0},{draworder:"topdown",id:2,name:"Objects",objects:[{gid:201,height:32,id:177,name:"ItemDeVisibleCloakCutscene",rotation:0,type:"",visible:!0,width:32,x:89,y:215},{gid:193,height:32,id:178,name:"TutRobotRoamer1",properties:[{name:"encounterName",type:"string",value:"ENCOUNTER_TUT_DUNGEON2"},{name:"overworldAi",type:"string",value:"ROAM_WALK_RIGHTUP_LEFTDOWN"}],rotation:0,type:"",visible:!0,width:32,x:361,y:205},{gid:193,height:32,id:179,name:"TutRobotRoamer1",properties:[{name:"encounterName",type:"string",value:"ENCOUNTER_TUT_DUNGEON2"},{name:"overworldAi",type:"string",value:"ROAM_WALK_RIGHTUP_LEFTDOWN"}],rotation:0,type:"",visible:!0,width:32,x:200.5,y:319.5},{gid:193,height:32,id:180,name:"TutRobotRoamer1",properties:[{name:"encounterName",type:"string",value:"ENCOUNTER_TUT_DUNGEON2"},{name:"overworldAi",type:"string",value:"ROAM_WALK_RIGHTUP_LEFTDOWN"}],rotation:0,type:"",visible:!0,width:32,x:176,y:116},{gid:193,height:32,id:181,name:"TutRobotRoamer1",properties:[{name:"encounterName",type:"string",value:"ENCOUNTER_TUT_DUNGEON2"},{name:"overworldAi",type:"string",value:"ROAM_WALK_RIGHTDOWN_LEFTUP"}],rotation:0,type:"",visible:!0,width:32,x:141.5,y:152.5},{gid:193,height:32,id:182,name:"TutRobotRoamer1",properties:[{name:"encounterName",type:"string",value:"ENCOUNTER_TUT_DUNGEON2"},{name:"overworldAi",type:"string",value:"ROAM_WALK_RIGHTDOWN_LEFTUP"}],rotation:0,type:"",visible:!0,width:32,x:190.5,y:267.5},{gid:193,height:32,id:183,name:"TutRobotRoamer1",properties:[{name:"encounterName",type:"string",value:"ENCOUNTER_TUT_DUNGEON2"},{name:"overworldAi",type:"string",value:"ROAM_WALK_RIGHTDOWN_LEFTUP"}],rotation:0,type:"",visible:!0,width:32,x:303,y:295},{gid:193,height:32,id:184,name:"TutRobotRoamer1",properties:[{name:"encounterName",type:"string",value:"ENCOUNTER_TUT_DUNGEON2"},{name:"overworldAi",type:"string",value:"ROAM_WALK_RIGHTDOWN_LEFTUP"}],rotation:0,type:"",visible:!0,width:32,x:311.5,y:340.5},{gid:193,height:32,id:185,name:"TutRobotRoamer1",properties:[{name:"encounterName",type:"string",value:"ENCOUNTER_TUT_DUNGEON2"},{name:"overworldAi",type:"string",value:"ROAM_WALK_RIGHTDOWN_LEFTUP"}],rotation:0,type:"",visible:!0,width:32,x:271,y:179},{gid:193,height:32,id:186,name:"TutRobotRoamer1",properties:[{name:"encounterName",type:"string",value:"ENCOUNTER_TUT_DUNGEON2"},{name:"overworldAi",type:"string",value:"ROAM_WALK_RIGHTDOWN_LEFTUP"}],rotation:0,type:"",visible:!0,width:32,x:197.5,y:172.5},{gid:201,height:32,id:187,name:"ItemDilutedPotion",rotation:0,type:"",visible:!0,width:32,x:461.5,y:444.5},{gid:201,height:32,id:188,name:"ItemHasteFlavoring",rotation:0,type:"",visible:!0,width:32,x:284,y:28},{gid:193,height:32,id:189,name:"TutRobotRoamer1",properties:[{name:"encounterName",type:"string",value:"ENCOUNTER_TUT_DUNGEON2"},{name:"overworldAi",type:"string",value:"ROAM_WALK_RIGHTDOWN_LEFTUP"}],rotation:0,type:"",visible:!0,width:32,x:273,y:97},{gid:194,height:32,id:190,name:"MarkerPlayer",rotation:0,type:"",visible:!0,width:32,x:120.5,y:275.5},{height:32.5,id:191,name:"#floor1-tut-toggle-purple-doors",rotation:0,type:"",visible:!0,width:48,x:447.5,y:188.5},{gid:194,height:32,id:192,name:"MarkerFromVR3",rotation:0,type:"",visible:!0,width:32,x:57.5,y:268.5},{height:48.5,id:193,name:"#floor1-tut-transition-from-vr3-east-to-vr3",rotation:0,type:"",visible:!0,width:30.5,x:16.5,y:241},{gid:194,height:32,id:194,name:"MarkerConscienceItem",rotation:0,type:"",visible:!0,width:32,x:88,y:232},{gid:201,height:32,id:195,name:"ItemDeVisibleCloak",rotation:0,type:"",visible:!0,width:32,x:477,y:263}],opacity:1,type:"objectgroup",visible:!0,x:0,y:0}],nextlayerid:7,nextobjectid:196,orientation:"isometric",properties:[{name:"BackgroundColor",type:"string",value:"#BCB7C5"}],renderorder:"right-down",tiledversion:"1.7.2",tileheight:16,tilesets:[{columns:16,firstgid:1,image:"../../res/walls.png",imageheight:512,imagewidth:512,margin:0,name:"walls",spacing:0,tilecount:128,tileheight:64,tilewidth:32},{columns:8,firstgid:129,image:"../../res/floors.png",imageheight:256,imagewidth:256,margin:0,name:"floors",spacing:0,tilecount:64,tileheight:32,tilewidth:32},{columns:4,firstgid:193,image:"../../res/control.png",imageheight:128,imagewidth:128,margin:0,name:"control",spacing:0,tilecount:16,tileheight:32,tilewidth:32},{columns:16,firstgid:209,image:"../../res/props.png",imageheight:512,imagewidth:512,margin:0,name:"props",spacing:0,tilecount:128,tileheight:64,tilewidth:32},{columns:8,firstgid:337,image:"../../res/walls128.png",imageheight:256,imagewidth:256,margin:0,name:"walls128",spacing:0,tilecount:16,tileheight:128,tilewidth:32},{firstgid:353,source:"../../res/props-dynamic.tiled-sheet.tsx"}],tilewidth:32,type:"map",version:"1.6",width:32}),define("map/floor1-tut-vr-pre-boss",[],{compressionlevel:-1,height:32,infinite:!1,layers:[{data:[129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,187,187,187,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,187,187,187,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,129,129,129,129,129,129,185,185,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,185,185,185,185,189,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,189,129,129,129,129,129,129,129,129,129,185,185,185,185,185,185,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,185,185,185,185,189,185,187,187,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,189,129,129,129,129,185,185,185,185,185,185,185,185,187,187,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,185,185,185,185,189,185,187,187,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,185,185,185,185,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,189,129,129,129,129,129,129,129,129,189,185,189,185,189,185,189,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,189,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,189,129,129,129,129,129,129,129,185,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,189,129,129,129,129,129,129,129,129,129,129,129,129,189,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,189,129,185,185,185,185,189,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,185,185,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,185,185,189,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,190,190,190,129,129,129,185,185,185,185,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,190,129,129,129,189,185,185,185,189,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,190,129,129,129,129,188,188,188,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,190,129,129,129,129,188,188,188,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,187,187,185,188,185,185,185,185,185,185,185,188,185,185,185,185,185,185,187,187,129,129,129,129,129,129,129,129,129,129,129,129,187,187,185,188,185,185,185,185,185,185,185,188,185,185,185,185,185,185,187,187,129,129,129,129,129,129,129,129,129,129,129,129,187,187,185,188,185,185,185,189,185,185,185,188,185,185,189,185,185,185,187,187,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,129,129,129,129,129,129,129,129,129,189,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,129,129,129,129,129,129,129,129,129,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129],height:32,id:1,name:"Tiles",offsetx:0,offsety:16,opacity:1,type:"tilelayer",visible:!0,width:32,x:0,y:0},{data:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,144,144,144,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,144,144,144,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,144,144,144,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,129,129,0,0,0,0,0,0,0,0,239,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],height:32,id:6,name:"Tiles2",opacity:1,type:"tilelayer",visible:!0,width:32,x:0,y:0},{draworder:"topdown",id:2,name:"Objects",objects:[{gid:194,height:32,id:177,name:"MarkerPlayer",rotation:0,type:"",visible:!0,width:32,x:154,y:428},{gid:194,height:32,id:179,name:"MarkerFromVR3",rotation:0,type:"",visible:!0,width:32,x:71,y:427},{gid:194,height:32,id:180,name:"MarkerSavePoint",rotation:0,type:"",visible:!0,width:32,x:265,y:329},{height:60,id:181,name:"#utils-save-point-activate",rotation:0,type:"",visible:!0,width:52,x:237,y:297},{height:85.5,id:182,name:"#utils-save-point-deactivate",rotation:0,type:"",visible:!0,width:76.5,x:227,y:283},{height:47,id:183,name:"#floor1-tut-transition-from-VRPreBoss-to-VR3",rotation:0,type:"",visible:!0,width:29,x:33.5,y:401.5},{gid:201,height:32,id:184,name:"ItemPierceSword",rotation:0,type:"",visible:!0,width:32,x:125,y:349},{height:48,id:185,name:"#floor1-tut-VRPreBoss-spot-exit-portal",rotation:0,type:"",visible:!0,width:16,x:112,y:400},{height:51.5,id:186,name:"#floor1-tut-transition-from-VRPreBoss-to-VRBoss",rotation:0,type:"",visible:!0,width:31.5,x:322,y:399},{height:0,id:187,name:"",rotation:0,type:"",visible:!0,width:0,x:248.5,y:423.5},{gid:194,height:32,id:189,name:"MarkerFromBoss",rotation:0,type:"",visible:!0,width:32,x:317,y:425}],opacity:1,type:"objectgroup",visible:!0,x:0,y:0}],nextlayerid:7,nextobjectid:190,orientation:"isometric",properties:[{name:"BackgroundColor",type:"string",value:"#BCB7C5"}],renderorder:"right-down",tiledversion:"1.7.2",tileheight:16,tilesets:[{columns:16,firstgid:1,image:"../../res/walls.png",imageheight:512,imagewidth:512,margin:0,name:"walls",spacing:0,tilecount:128,tileheight:64,tilewidth:32},{columns:8,firstgid:129,image:"../../res/floors.png",imageheight:256,imagewidth:256,margin:0,name:"floors",spacing:0,tilecount:64,tileheight:32,tilewidth:32},{columns:4,firstgid:193,image:"../../res/control.png",imageheight:128,imagewidth:128,margin:0,name:"control",spacing:0,tilecount:16,tileheight:32,tilewidth:32},{columns:16,firstgid:209,image:"../../res/props.png",imageheight:512,imagewidth:512,margin:0,name:"props",spacing:0,tilecount:128,tileheight:64,tilewidth:32},{columns:8,firstgid:337,image:"../../res/walls128.png",imageheight:256,imagewidth:256,margin:0,name:"walls128",spacing:0,tilecount:16,tileheight:128,tilewidth:32},{firstgid:353,source:"../../res/props-dynamic.tiled-sheet.tsx"}],tilewidth:32,type:"map",version:"1.6",width:32}),define("map/floor1-tut-vr-boss",[],{compressionlevel:-1,height:32,infinite:!1,layers:[{data:[129,129,129,129,187,187,185,185,185,185,185,185,185,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,187,187,185,185,185,185,185,185,185,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,187,187,185,185,185,185,185,185,185,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,185,185,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,185,185,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,185,185,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,129,129,129,185,185,185,185,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,129,129,185,185,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,185,185,185,185,185,185,129,129,185,185,185,185,185,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,185,185,185,185,185,189,129,129,188,185,188,185,188,189,185,185,187,187,129,129,129,129,129,129,129,129,129,129,129,129,185,185,185,185,185,185,185,185,129,129,185,185,185,185,185,185,185,185,187,187,129,129,129,129,129,129,129,129,129,129,129,129,185,185,185,185,185,185,185,189,129,129,188,185,188,185,188,189,185,185,187,187,129,129,129,129,129,129,129,129,129,129,129,129,185,185,185,185,185,185,185,185,188,188,188,185,188,185,188,185,129,129,129,129,129,129,129,129,129,129,129,129,185,129,129,129,129,129,129,0,188,188,188,129,129,129,188,185,188,185,188,189,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,0,129,129,129,129,188,188,188,129,129,129,188,185,188,185,188,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,185,185,185,185,185,185,129,129,188,185,188,185,188,189,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,185,185,185,185,185,189,129,129,188,185,188,185,188,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,185,185,185,185,185,185,129,129,188,185,188,185,188,189,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,185,185,185,185,185,189,129,129,185,185,185,185,185,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,189,129,185,185,185,185,185,185,185,185,129,129,188,185,188,185,188,189,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,185,185,185,185,185,185,189,129,129,188,185,188,185,188,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,0,188,188,188,129,129,129,188,185,188,185,188,189,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,188,188,188,129,129,129,188,185,188,185,188,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,187,187,185,185,185,185,185,185,185,185,129,129,188,185,188,185,188,189,129,129,129,129,129,129,129,129,129,129,129,129,129,129,187,187,185,185,185,185,185,185,185,189,129,129,185,185,185,185,185,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,187,187,189,185,189,185,189,185,189,185,129,129,185,189,185,189,185,189,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,185,129,129,189,129,129,129,129,129,129,189,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129],height:32,id:1,name:"Tiles",offsetx:0,offsety:16,opacity:1,type:"tilelayer",visible:!0,width:32,x:0,y:0},{data:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,237,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,21,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,21,21,21,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,237,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,21,21,21,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,237,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],height:32,id:6,name:"Tiles2",opacity:1,type:"tilelayer",visible:!0,width:32,x:0,y:0},{draworder:"topdown",id:2,name:"Objects",objects:[{gid:194,height:32,id:177,name:"MarkerPlayer",rotation:0,type:"",visible:!0,width:32,x:107.5,y:410.5},{gid:194,height:32,id:178,name:"MarkerFromPreBoss",rotation:0,type:"",visible:!0,width:32,x:103,y:409},{height:47.5,id:179,name:"#floor1-tut-transition-from-VRBoss-to-VRPreBoss",rotation:0,type:"",visible:!0,width:31.5,x:64,y:384.5},{gid:194,height:32,id:180,name:"MarkerGate1",rotation:0,type:"",visible:!0,width:32,x:189.5,y:378.5},{gid:194,height:32,id:181,name:"MarkerGate2",rotation:0,type:"",visible:!0,width:32,x:190,y:250},{gid:194,height:32,id:182,name:"MarkerWalk1",rotation:0,type:"",visible:!0,width:32,x:194.5,y:407.5},{gid:194,height:32,id:183,name:"MarkerJasonSpawn",rotation:0,type:"",visible:!0,width:32,x:307,y:409},{gid:194,height:32,id:184,name:"MarkerJason1",rotation:0,type:"",visible:!0,width:32,x:297.5,y:314.5},{gid:194,height:32,id:185,name:"MarkerJason2",rotation:0,type:"",visible:!0,width:32,x:277.5,y:316.5},{height:48.5,id:186,name:"#floor1-tut-VRBoss-spotted-Jason",rotation:0,type:"",visible:!0,width:16.5,x:117,y:383},{gid:194,height:32,id:188,name:"MarkerJason0",rotation:0,type:"",visible:!0,width:32,x:277,y:409},{gid:194,height:32,id:189,name:"MarkerBossSpawn",rotation:0,type:"",visible:!0,width:32,x:135.5,y:322.5},{gid:194,height:32,id:190,name:"MarkerWalk2",rotation:0,type:"",visible:!0,width:32,x:174.5,y:277.5},{height:20.5,id:191,name:"#floor1-tut-VRBoss-walk-across-bridge",rotation:0,type:"",visible:!0,width:51.5,x:159,y:331},{gid:194,height:32,id:194,name:"MarkerBartolo1",rotation:0,type:"",visible:!0,width:32,x:276,y:186},{gid:194,height:32,id:195,name:"MarkerBartolo2",rotation:0,type:"",visible:!0,width:32,x:328,y:188},{gid:194,height:32,id:196,name:"MarkerBartolo3",rotation:0,type:"",visible:!0,width:32,x:394,y:186},{gid:194,height:32,id:197,name:"MarkerGate3",rotation:0,type:"",visible:!0,width:32,x:232.5,y:215.5}],opacity:1,type:"objectgroup",visible:!0,x:0,y:0}],nextlayerid:7,nextobjectid:198,orientation:"isometric",properties:[{name:"BackgroundColor",type:"string",value:"#BCB7C5"}],renderorder:"right-down",tiledversion:"1.7.2",tileheight:16,tilesets:[{columns:16,firstgid:1,image:"../../res/walls.png",imageheight:512,imagewidth:512,margin:0,name:"walls",spacing:0,tilecount:128,tileheight:64,tilewidth:32},{columns:8,firstgid:129,image:"../../res/floors.png",imageheight:256,imagewidth:256,margin:0,name:"floors",spacing:0,tilecount:64,tileheight:32,tilewidth:32},{columns:4,firstgid:193,image:"../../res/control.png",imageheight:128,imagewidth:128,margin:0,name:"control",spacing:0,tilecount:16,tileheight:32,tilewidth:32},{columns:16,firstgid:209,image:"../../res/props.png",imageheight:512,imagewidth:512,margin:0,name:"props",spacing:0,tilecount:128,tileheight:64,tilewidth:32},{columns:8,firstgid:337,image:"../../res/walls128.png",imageheight:256,imagewidth:256,margin:0,name:"walls128",spacing:0,tilecount:16,tileheight:128,tilewidth:32},{firstgid:353,source:"../../res/props-dynamic.tiled-sheet.tsx"}],tilewidth:32,type:"map",version:"1.6",width:32}),define("map/floor2-south",[],{compressionlevel:-1,editorsettings:{export:{format:"json",target:"floor2-south.json"}},height:32,infinite:!1,layers:[{data:[129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,16,139,140,140,16,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,16,139,140,140,16,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,24,139,140,140,16,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,26,139,140,140,16,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,16,139,140,140,16,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,16,139,140,140,16,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,139,140,140,140,16,140,140,140,16,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,16,16,16,16,16,16,140,140,140,16,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,16,139,139,139,139,139,140,140,140,16,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,16,139,140,140,140,140,140,140,140,16,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,16,139,140,140,140,140,140,140,140,16,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,16,139,140,140,140,140,140,140,140,16,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,10,139,140,140,140,140,140,140,140,16,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,12,139,140,140,140,140,140,140,140,16,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,16,139,140,140,140,140,140,140,139,16,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,16,139,140,140,140,140,140,140,139,1,16,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,16,139,140,140,140,140,140,140,139,14,139,129,129,129,129,129,129,129,129,16,27,25,16,16,16,16,27,25,16,16,16,16,16,139,140,140,140,140,140,140,139,14,139,129,129,129,129,129,129,129,139,139,139,139,139,139,139,139,139,139,139,139,139,139,139,139,140,140,140,140,140,140,139,1,16,129,129,129,129,129,129,129,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,139,16,129,129,129,129,129,129,129,129,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,139,16,129,129,129,129,129,129,129,129,140,140,140,140,139,139,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,139,16,129,129,129,129,129,129,129,129,140,139,139,139,139,139,139,139,139,139,139,139,139,139,139,139,139,139,139,139,139,139,139,16,129,129,129,129,129,129,129,129,129,16,16,25,2,16,16,16,16,25,2,16,16,16,16,25,2,16,16,16,16,16,16,16,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129],height:32,id:1,name:"Tiles",opacity:1,type:"tilelayer",visible:!0,width:32,x:0,y:0},{data:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,232,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,231,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,232,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,231,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,216,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,216,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],height:32,id:6,name:"Tiles2",opacity:1,type:"tilelayer",visible:!0,width:32,x:0,y:0},{draworder:"topdown",id:2,name:"Objects",objects:[{gid:194,height:32,id:19,name:"MarkerPlayer",rotation:0,type:"",visible:!0,width:32,x:360,y:300}],opacity:1,type:"objectgroup",visible:!0,x:0,y:0}],nextlayerid:7,nextobjectid:46,orientation:"isometric",renderorder:"right-down",tiledversion:"1.7.0",tileheight:16,tilesets:[{columns:16,firstgid:1,image:"../../res/walls.png",imageheight:512,imagewidth:512,margin:0,name:"walls",spacing:0,tilecount:128,tileheight:64,tilewidth:32},{columns:8,firstgid:129,image:"../../res/floors.png",imageheight:256,imagewidth:256,margin:0,name:"floors",spacing:0,tilecount:64,tileheight:32,tilewidth:32},{columns:4,firstgid:193,image:"../../res/control.png",imageheight:128,imagewidth:128,margin:0,name:"control",spacing:0,tilecount:16,tileheight:32,tilewidth:32},{columns:16,firstgid:209,image:"../../res/props.png",imageheight:512,imagewidth:512,margin:0,name:"props",spacing:0,tilecount:128,tileheight:64,tilewidth:32},{columns:8,firstgid:337,image:"../../res/walls128.png",imageheight:256,imagewidth:256,margin:0,name:"walls128",spacing:0,tilecount:16,tileheight:128,tilewidth:32}],tilewidth:32,type:"map",version:"1.6",width:32}),define("map/floor2-guestroom-hallway",[],{compressionlevel:-1,editorsettings:{export:{format:"json",target:"floor2-guestroom-hallway.json"}},height:32,infinite:!1,layers:[{data:[129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,16,139,140,140,16,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,16,139,140,140,16,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,24,139,140,140,16,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,26,139,140,140,16,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,16,139,140,140,16,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,16,139,140,140,16,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,139,140,140,140,16,140,140,140,16,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,16,16,16,16,16,16,140,140,140,16,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,16,139,139,139,139,139,140,140,140,16,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,16,139,140,140,140,140,140,140,140,16,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,16,139,140,140,140,140,140,140,140,16,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,16,139,140,140,140,140,140,140,140,16,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,10,139,140,140,140,140,140,140,140,16,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,12,139,140,140,140,140,140,140,140,16,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,16,139,140,140,140,140,140,140,140,16,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,16,139,140,140,140,140,140,140,140,140,16,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,16,139,140,140,140,140,140,140,139,140,139,129,129,129,129,129,129,129,129,16,27,25,16,16,16,16,27,25,16,16,16,16,16,139,140,140,140,140,140,140,139,140,139,129,129,129,129,129,129,129,139,139,139,139,139,139,139,139,139,139,139,139,139,139,139,139,140,140,140,140,140,140,139,140,16,129,129,129,129,129,129,129,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,139,16,129,129,129,129,129,129,129,129,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,139,16,129,129,129,129,129,129,129,129,140,140,140,140,139,139,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,140,139,16,129,129,129,129,129,129,129,129,140,139,139,139,139,139,139,139,139,139,139,139,139,139,139,139,139,139,139,139,139,139,139,16,129,129,129,129,129,129,129,129,129,16,16,25,2,16,16,16,16,25,2,16,16,16,16,25,2,16,16,16,16,16,16,16,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129],height:32,id:1,name:"Tiles",opacity:1,type:"tilelayer",visible:!0,width:32,x:0,y:0},{data:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,232,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,231,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,232,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,231,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,14,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,216,0,0,0,0,0,0,0,14,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,216,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],height:32,id:6,name:"Tiles2",opacity:1,type:"tilelayer",visible:!0,width:32,x:0,y:0},{draworder:"topdown",id:2,name:"Objects",objects:[{gid:194,height:32,id:19,name:"MarkerPlayer",rotation:0,type:"",visible:!0,width:32,x:360,y:300},{gid:361,height:32,id:53,name:"",rotation:0,type:"",visible:!0,width:32,x:336,y:228},{gid:358,height:32,id:54,name:"",rotation:0,type:"",visible:!0,width:32,x:336,y:188},{gid:358,height:32,id:55,name:"",rotation:0,type:"",visible:!0,width:32,x:332,y:192},{gid:357,height:32,id:59,name:"",rotation:0,type:"",visible:!0,width:32,x:336,y:200}],opacity:1,type:"objectgroup",visible:!0,x:0,y:0}],nextlayerid:7,nextobjectid:60,orientation:"isometric",renderorder:"right-down",tiledversion:"1.7.0",tileheight:16,tilesets:[{columns:16,firstgid:1,image:"../../res/walls.png",imageheight:512,imagewidth:512,margin:0,name:"walls",spacing:0,tilecount:128,tileheight:64,tilewidth:32},{columns:8,firstgid:129,image:"../../res/floors.png",imageheight:256,imagewidth:256,margin:0,name:"floors",spacing:0,tilecount:64,tileheight:32,tilewidth:32},{columns:4,firstgid:193,image:"../../res/control.png",imageheight:128,imagewidth:128,margin:0,name:"control",spacing:0,tilecount:16,tileheight:32,tilewidth:32},{columns:16,firstgid:209,image:"../../res/props.png",imageheight:512,imagewidth:512,margin:0,name:"props",spacing:0,tilecount:128,tileheight:64,tilewidth:32},{columns:8,firstgid:337,image:"../../res/walls128.png",imageheight:256,imagewidth:256,margin:0,name:"walls128",spacing:0,tilecount:16,tileheight:128,tilewidth:32},{firstgid:353,source:"../../res/props-dynamic.tiled-sheet.tsx"},{columns:6,firstgid:357,image:"../../res/props_small.png",imageheight:32,imagewidth:192,margin:0,name:"props_small",spacing:0,tilecount:6,tileheight:32,tilewidth:32}],tilewidth:32,type:"map",version:"1.6",width:32}),define("map/floor2-cafeteria",[],{compressionlevel:-1,editorsettings:{export:{format:"json",target:"floor2-cafeteria.json"}},height:32,infinite:!1,layers:[{data:[129,129,129,2,2,2,2,2,2,2,130,130,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,129,129,129,129,129,129,129,129,16,130,130,130,130,130,16,130,130,16,130,130,130,130,130,130,130,130,130,130,130,130,130,1,129,129,129,129,129,16,16,16,16,130,130,130,130,130,16,130,130,16,130,130,130,130,130,130,130,130,130,130,130,130,130,1,129,129,129,129,129,16,130,130,17,130,130,130,130,130,16,130,130,16,130,130,227,130,130,130,227,130,130,130,227,130,130,1,129,129,129,129,129,16,130,130,17,130,130,130,130,130,16,130,130,16,130,226,223,225,130,130,223,130,130,226,223,225,130,1,129,129,129,129,129,16,130,130,17,130,130,130,130,130,16,15,15,16,130,130,224,130,130,130,224,130,130,130,224,130,130,1,129,129,129,129,129,16,130,130,17,130,130,130,130,130,136,136,136,136,130,130,130,130,130,130,130,130,130,130,130,130,130,1,129,129,129,129,129,16,16,16,16,130,130,130,130,130,136,136,136,136,130,130,130,130,130,130,130,130,130,130,130,130,130,1,129,129,129,129,129,129,129,129,16,130,130,130,130,130,136,136,136,136,130,130,130,130,130,130,130,130,130,130,130,130,130,1,129,129,129,129,129,16,16,16,16,130,130,130,130,130,136,136,136,136,130,130,130,130,130,130,130,130,130,130,130,130,130,1,129,129,129,129,129,16,130,130,17,130,130,130,130,130,136,136,136,136,130,130,130,130,130,130,130,130,130,130,130,130,130,1,129,129,129,129,129,16,130,130,17,130,130,130,130,130,136,136,136,136,130,130,227,130,130,130,227,130,130,130,227,130,130,1,129,129,129,129,129,16,130,130,17,130,130,130,130,130,136,136,136,136,130,226,223,228,130,130,223,130,130,226,223,225,130,1,129,129,129,129,129,16,130,130,17,130,130,130,130,130,136,136,136,136,130,130,224,130,130,130,130,130,130,130,224,130,130,1,129,129,129,129,129,16,16,16,16,130,130,130,130,130,136,136,136,136,130,130,130,130,130,130,130,130,130,130,130,130,130,1,129,129,129,129,129,129,129,129,16,130,130,130,130,130,136,136,136,136,130,130,130,130,130,130,130,130,130,130,130,130,130,1,129,129,129,129,129,16,16,16,16,130,130,130,130,130,136,136,136,136,130,130,130,130,130,130,130,130,130,130,130,130,130,1,129,129,129,129,129,16,130,130,17,130,130,130,130,130,136,136,136,136,130,130,130,130,130,130,130,130,130,130,130,130,130,1,129,129,129,129,129,16,130,130,17,130,130,130,130,130,136,136,136,136,130,130,130,130,130,130,130,130,130,130,130,130,130,1,129,129,129,129,129,16,130,130,17,130,130,130,130,130,136,136,136,136,130,130,227,130,130,130,227,130,130,130,227,130,130,1,129,129,129,129,129,16,130,130,17,130,130,130,130,130,136,136,136,136,130,226,223,225,130,130,223,130,130,226,223,225,130,1,129,129,129,129,129,16,16,16,16,130,130,130,130,130,136,136,136,136,130,130,224,130,130,130,224,130,130,130,224,130,130,1,129,129,129,129,129,129,129,129,1,130,130,130,130,130,136,136,136,136,130,130,130,130,130,130,130,130,130,130,130,130,130,1,129,129,129,129,129,129,129,129,12,130,130,130,130,130,136,136,136,136,130,130,130,130,130,130,130,130,130,130,130,130,130,1,129,129,129,129,129,129,129,129,10,130,130,130,130,130,136,136,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,1,129,129,129,129,129,129,129,129,1,130,130,130,130,130,136,136,136,136,130,130,130,130,130,130,130,130,130,130,130,130,130,1,129,129,129,129,129,129,129,129,1,130,130,130,130,130,2,15,15,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,129,129,129,129,129,129,129,129,1,17,17,17,17,17,16,130,130,16,129,129,129,129,129,129,129,129,129,129,129,129,129,16,129,129,129,129,129,129,129,129,1,130,130,130,130,130,16,130,130,16,129,129,129,129,129,129,129,129,129,129,129,129,129,16,129,129,129,129,129,129,129,129,1,130,130,130,130,130,16,130,130,16,129,129,129,129,129,129,129,129,129,129,129,129,129,16,129,129,129,129,129,129,129,129,1,130,130,130,130,130,16,130,130,16,129,129,129,129,129,129,129,129,129,129,129,129,129,16,129,129,129,129,129,129,129,129,1,17,17,17,17,17,16,130,130,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,129,129,129,129,129],height:32,id:1,name:"Tiles",opacity:1,type:"tilelayer",visible:!0,width:32,x:0,y:0},{draworder:"topdown",id:2,name:"Objects",objects:[{gid:194,height:32,id:19,name:"MarkerPlayer",rotation:0,type:"",visible:!0,width:32,x:192,y:260},{gid:198,height:32,id:43,name:"MarkerDoorNorth",rotation:0,type:"",visible:!0,width:32,x:184,y:128},{gid:200,height:32,id:46,name:"MarkerDoorSouth",rotation:0,type:"",visible:!0,width:32,x:184,y:396}],opacity:1,type:"objectgroup",visible:!0,x:0,y:0}],nextlayerid:6,nextobjectid:47,orientation:"isometric",renderorder:"right-down",tiledversion:"1.4.3",tileheight:16,tilesets:[{columns:16,firstgid:1,image:"../../res/walls.png",imageheight:512,imagewidth:512,margin:0,name:"walls",spacing:0,tilecount:128,tileheight:64,tilewidth:32},{columns:8,firstgid:129,image:"../../res/floors.png",imageheight:256,imagewidth:256,margin:0,name:"floors",spacing:0,tilecount:64,tileheight:32,tilewidth:32},{columns:4,firstgid:193,image:"../../res/control.png",imageheight:128,imagewidth:128,margin:0,name:"control",spacing:0,tilecount:16,tileheight:32,tilewidth:32},{columns:16,firstgid:209,image:"../../res/props.png",imageheight:512,imagewidth:512,margin:0,name:"props",spacing:0,tilecount:128,tileheight:64,tilewidth:32}],tilewidth:32,type:"map",version:1.4,width:32}),define("map/floor2-north",[],{compressionlevel:-1,editorsettings:{export:{format:"json",target:"floor2-north.json"}},height:32,infinite:!1,layers:[{data:[1,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,15,15,16,16,16,16,16,16,1,210,130,130,130,130,130,16,130,130,130,16,130,130,130,16,130,130,130,16,130,130,130,16,130,130,16,130,130,130,130,17,1,210,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,17,1,210,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,17,1,210,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,17,1,210,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,17,1,210,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,17,1,130,130,130,130,130,130,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,130,130,130,130,17,1,130,130,130,130,130,130,17,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,17,130,130,130,130,17,1,130,130,130,130,130,130,17,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,17,130,130,130,130,17,1,130,130,130,130,130,130,17,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,17,130,130,130,130,17,1,130,130,130,130,130,130,17,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,17,130,130,130,130,17,1,130,130,130,130,130,130,17,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,17,130,130,130,130,17,1,130,130,130,130,130,130,17,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,17,130,130,130,130,17,1,130,130,130,130,130,130,17,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,17,130,130,130,130,17,1,130,130,130,130,130,130,17,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,17,130,130,130,130,17,1,130,130,130,130,130,130,17,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,17,130,130,130,130,17,1,209,130,130,130,130,130,17,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,17,130,130,130,130,17,1,130,130,130,130,130,130,17,130,17,17,17,17,17,130,130,130,130,130,130,130,130,130,130,130,130,17,130,130,130,130,17,1,130,130,130,130,130,130,17,130,17,130,130,130,17,130,130,130,130,130,130,130,130,130,130,130,130,17,130,130,130,130,17,1,130,130,130,130,130,130,17,130,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,130,130,130,130,17,1,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,17,1,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,17,1,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,17,1,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,17,1,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,210,210,210,210,210,210,17,1,2,15,15,2,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,1,16,130,130,16,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,1,16,130,130,16,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,1,16,130,130,16,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,1,16,130,130,16,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,16,16,130,130,16,16,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129],height:32,id:1,name:"Tiles",opacity:1,type:"tilelayer",visible:!0,width:32,x:0,y:0},{draworder:"topdown",id:2,name:"Objects",objects:[{gid:194,height:32,id:19,name:"MarkerPlayer",rotation:0,type:"",visible:!0,width:32,x:104,y:356},{gid:198,height:32,id:43,name:"MarkerDoorPrepRoom",rotation:0,type:"",visible:!0,width:32,x:408,y:48},{gid:200,height:32,id:46,name:"MarkerDoorCafeteria",rotation:0,type:"",visible:!0,width:32,x:56,y:396}],opacity:1,type:"objectgroup",visible:!0,x:0,y:0}],nextlayerid:6,nextobjectid:47,orientation:"isometric",renderorder:"right-down",tiledversion:"1.4.3",tileheight:16,tilesets:[{columns:16,firstgid:1,image:"../../res/walls.png",imageheight:512,imagewidth:512,margin:0,name:"walls",spacing:0,tilecount:128,tileheight:64,tilewidth:32},{columns:8,firstgid:129,image:"../../res/floors.png",imageheight:256,imagewidth:256,margin:0,name:"floors",spacing:0,tilecount:64,tileheight:32,tilewidth:32},{columns:4,firstgid:193,image:"../../res/control.png",imageheight:128,imagewidth:128,margin:0,name:"control",spacing:0,tilecount:16,tileheight:32,tilewidth:32},{columns:16,firstgid:209,image:"../../res/props.png",imageheight:512,imagewidth:512,margin:0,name:"props",spacing:0,tilecount:128,tileheight:64,tilewidth:32}],tilewidth:32,type:"map",version:1.4,width:32}),define("map/floor2-preproom",[],{compressionlevel:-1,editorsettings:{export:{format:"json",target:"floor2-preproom.json"}},height:21,infinite:!1,layers:[{data:[17,16,17,16,17,16,17,16,17,16,17,16,17,16,17,16,17,16,17,16,17,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,17,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,17,16,16,16,16,16,16,16,337,337,337,337,337,337,337,16,16,16,16,16,16,16,17,16,16,16,16,16,16,338,338,338,338,338,338,338,16,16,16,16,16,16,17,16,16,16,16,16,212,212,338,130,130,130,130,130,338,216,216,16,16,16,16,16,17,16,16,16,16,138,138,338,7,7,9,7,7,338,138,138,16,16,16,16,17,16,16,16,16,16,138,138,138,138,138,138,138,138,138,138,138,16,16,16,16,16,17,16,16,16,16,138,138,138,138,138,138,138,138,138,138,138,16,16,16,16,17,16,16,138,138,138,138,138,138,138,138,138,138,138,138,138,138,16,16,16,16,16,17,16,138,138,138,138,138,138,138,138,138,138,138,138,138,138,16,16,16,16,17,16,16,138,138,138,138,138,138,138,138,138,138,138,138,138,138,16,16,16,16,16,17,16,138,138,138,235,138,138,138,138,138,138,138,138,138,138,16,16,16,16,17,16,16,138,138,138,138,138,138,138,138,138,138,138,138,138,138,16,16,16,16,16,17,16,138,138,138,138,138,138,138,138,138,138,138,138,138,138,16,16,16,16,17,16,16,138,138,138,138,138,138,138,138,138,138,138,138,138,138,16,16,16,16,16,17,16,16,16,16,138,138,138,138,138,138,138,138,138,138,138,16,16,16,16,17,16,16,16,16,16,138,138,138,138,138,138,138,138,138,138,138,16,16,16,16,16,17,16,16,16,16,138,138,138,16,138,138,16,138,138,138,138,16,16,16,16,17,16,17,16,17,16,16,16,16,16,15,15,16,16,16,16,16,16,17,16,17,16,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],height:21,id:1,name:"Tiles",opacity:1,type:"tilelayer",visible:!0,width:21,x:0,y:0},{draworder:"topdown",id:2,name:"Objects",objects:[{gid:194,height:32,id:19,name:"MarkerPlayer",rotation:0,type:"",visible:!0,width:32,x:164,y:180},{gid:200,height:32,id:47,name:"MarkerDoorNorthRoom",rotation:0,type:"",visible:!0,width:32,x:164,y:272},{gid:194,height:32,id:48,name:"MarkerKioskStats",rotation:0,type:"",visible:!0,width:32,x:92,y:204},{height:56,id:49,name:"#utils-kiosk-stats-activate",rotation:0,type:"",visible:!0,width:56,x:56,y:168},{height:80,id:50,name:"#utils-kiosk-stats-deactivate",rotation:0,type:"",visible:!0,width:80,x:44,y:156}],opacity:1,type:"objectgroup",visible:!0,x:0,y:0}],nextlayerid:6,nextobjectid:51,orientation:"isometric",renderorder:"right-down",tiledversion:"1.4.3",tileheight:16,tilesets:[{columns:16,firstgid:1,image:"../../res/walls.png",imageheight:512,imagewidth:512,margin:0,name:"walls",spacing:0,tilecount:128,tileheight:64,tilewidth:32},{columns:8,firstgid:129,image:"../../res/floors.png",imageheight:256,imagewidth:256,margin:0,name:"floors",spacing:0,tilecount:64,tileheight:32,tilewidth:32},{columns:4,firstgid:193,image:"../../res/control.png",imageheight:128,imagewidth:128,margin:0,name:"control",spacing:0,tilecount:16,tileheight:32,tilewidth:32},{columns:16,firstgid:209,image:"../../res/props.png",imageheight:512,imagewidth:512,margin:0,name:"props",spacing:0,tilecount:128,tileheight:64,tilewidth:32},{columns:8,firstgid:337,image:"../../res/walls128.png",imageheight:256,imagewidth:256,margin:0,name:"walls128",spacing:0,tilecount:16,tileheight:128,tilewidth:32}],tilewidth:32,type:"map",version:1.4,width:21}),define("map/floor2-sports",[],{compressionlevel:-1,height:40,infinite:!1,layers:[{data:[129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,149,149,149,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,149,149,149,149,149,149,149,149,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,36,149,149,149,149,149,149,149,149,149,34,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,36,149,149,149,149,149,149,149,149,149,34,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,36,149,149,149,149,149,149,149,149,149,34,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,36,149,149,149,149,149,149,149,149,149,34,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,36,149,149,149,149,149,149,149,149,149,34,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,36,149,149,149,149,149,149,149,149,149,34,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,36,149,149,149,149,149,149,129,149,35,36,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,36,149,149,149,149,149,149,129,34,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,36,149,149,149,149,149,149,129,34,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,36,159,159,159,149,149,149,129,34,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,36,219,160,160,149,149,149,129,34,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,36,159,159,159,149,149,149,129,34,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,36,219,160,160,149,149,149,149,34,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,36,159,159,159,149,149,149,149,34,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,36,158,158,158,149,149,149,149,34,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,36,158,158,158,149,149,149,149,34,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,36,217,152,152,149,149,149,149,34,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,36,217,152,152,149,149,149,149,34,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,36,158,158,158,149,149,149,149,34,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,36,158,158,158,149,149,149,149,34,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,36,149,149,149,149,149,149,149,34,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,36,149,149,149,149,149,149,149,34,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,36,149,149,149,149,149,149,149,36,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129],height:40,id:1,name:"Tiles",opacity:1,type:"tilelayer",visible:!0,width:40,x:0,y:0},{data:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,221,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,221,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,221,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,226,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,216,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,223,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],height:40,id:6,name:"Tiles2",opacity:.9,type:"tilelayer",visible:!0,width:40,x:0,y:0},{draworder:"topdown",id:2,name:"Objects",objects:[{gid:194,height:32,id:81,name:"MarkerPlayer",rotation:0,type:"",visible:!0,width:32,x:382.333333333333,y:559.666666666667}],opacity:1,type:"objectgroup",visible:!0,x:0,y:0}],nextlayerid:7,nextobjectid:82,orientation:"isometric",renderorder:"right-down",tiledversion:"1.7.2",tileheight:16,tilesets:[{columns:16,firstgid:1,image:"../../res/walls.png",imageheight:512,imagewidth:512,margin:0,name:"walls",spacing:0,tilecount:128,tileheight:64,tilewidth:32},{columns:8,firstgid:129,image:"../../res/floors.png",imageheight:256,imagewidth:256,margin:0,name:"floors",spacing:0,tilecount:64,tileheight:32,tilewidth:32},{columns:4,firstgid:193,image:"../../res/control.png",imageheight:128,imagewidth:128,margin:0,name:"control",spacing:0,tilecount:16,tileheight:32,tilewidth:32},{columns:16,firstgid:209,image:"../../res/props.png",imageheight:512,imagewidth:512,margin:0,name:"props",spacing:0,tilecount:128,tileheight:64,tilewidth:32}],tilewidth:32,type:"map",version:"1.6",width:40}),define("map/bowling-alley-standalone",[],{compressionlevel:-1,height:24,infinite:!1,layers:[{data:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,37,37,37,37,37,37,37,37,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,37,139,139,139,139,139,139,37,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,37,139,139,139,139,139,139,37,0,0,0,0,0,148,148,148,148,149,149,149,130,0,0,0,37,139,139,139,139,139,139,37,0,130,150,150,150,150,150,150,150,149,149,149,130,130,130,0,37,139,139,139,139,139,139,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,38,38,38,38,38,38,37,37,38,151,151,151,151,151,151,151,149,149,149,149,149,149,149,140,140,140,140,140,140,140,37,37,148,148,148,148,148,148,148,148,149,149,149,149,149,149,149,140,140,140,140,140,140,140,37,37,38,150,150,150,150,150,150,150,149,149,38,149,149,149,149,38,140,140,140,140,140,140,37,37,38,151,151,151,151,151,151,151,149,149,149,149,149,149,149,38,140,140,140,140,140,140,37,37,148,148,148,148,148,148,148,148,149,149,149,149,149,149,149,38,140,140,140,140,140,140,37,37,38,150,150,150,150,150,150,150,149,149,38,149,149,149,149,38,140,140,140,140,140,140,37,37,38,151,151,151,151,151,151,151,149,149,149,149,149,149,149,38,140,140,140,140,140,140,37,37,148,148,148,148,148,148,148,148,149,149,149,149,149,149,149,38,140,140,140,140,140,140,37,37,38,150,150,150,150,150,150,150,149,149,38,149,149,149,149,38,140,140,140,140,140,140,37,37,38,151,151,151,151,151,151,151,149,149,149,149,149,149,149,38,140,140,140,140,140,140,37,37,148,148,148,148,148,148,148,148,149,149,149,149,149,149,149,38,140,140,140,140,140,140,37,37,38,150,150,150,150,150,150,150,149,149,38,149,149,149,149,38,140,140,140,140,140,140,37,37,38,148,148,148,148,148,148,148,149,149,149,149,149,149,149,38,140,140,140,140,140,140,37,37,130,130,130,130,130,130,130,130,149,149,149,149,149,149,149,38,140,140,140,140,140,140,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,140,140,37,37,37,37,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,37,140,140,37,0,0,37,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,37,140,140,37,0,0,37,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,37],height:24,id:1,name:"Tiles",opacity:1,type:"tilelayer",visible:!0,width:24,x:0,y:0},{data:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,243,243,243,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,244,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,244,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,241,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,241,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,241,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,241,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,15,15,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],height:24,id:6,name:"Tiles2",opacity:1,type:"tilelayer",visible:!0,width:24,x:0,y:0},{draworder:"topdown",id:2,name:"Objects",objects:[{gid:194,height:32,id:19,name:"MarkerPlayer",rotation:0,type:"",visible:!0,width:32,x:311,y:173},{gid:200,height:32,id:43,name:"MarkerFromAtrium",rotation:0,type:"",visible:!0,width:32,x:310.5,y:317.5},{gid:337,height:32,id:115,name:"",rotation:0,type:"",visible:!0,width:32,x:253.5,y:254.5},{gid:337,height:32,id:118,name:"",rotation:0,type:"",visible:!0,width:32,x:252,y:220},{gid:337,height:32,id:119,name:"",rotation:0,type:"",visible:!0,width:32,x:252.5,y:187.5},{gid:337,height:32,id:120,name:"",rotation:0,type:"",visible:!0,width:32,x:252,y:156},{gid:337,height:32,id:121,name:"",rotation:0,type:"",visible:!0,width:32,x:252,y:124},{gid:194,height:32,id:132,name:"MarkerWalkA",rotation:0,type:"",visible:!0,width:32,x:281,y:257},{gid:194,height:32,id:133,name:"MarkerWalkB",rotation:0,type:"",visible:!0,width:32,x:280,y:150},{gid:193,height:32,id:134,name:"Floor1BowlingGirl",rotation:0,type:"",visible:!0,width:32,x:279.5,y:232.5},{gid:345,height:32,id:135,name:"",rotation:0,type:"24",visible:!0,width:32,x:322.5,y:27.5},{gid:345,height:32,id:136,name:"",rotation:0,type:"24",visible:!0,width:32,x:315,y:11},{gid:345,height:32,id:137,name:"",rotation:0,type:"12",visible:!0,width:32,x:292,y:28},{gid:345,height:32,id:138,name:"",rotation:0,type:"24",visible:!0,width:32,x:287,y:11},{gid:193,height:32,id:139,name:"Floor1BowlingEmployee",rotation:0,type:"",visible:!0,width:32,x:310,y:70},{height:34,id:140,name:"#floor1-bowling-prevent-bowling",rotation:0,type:"",visible:!0,width:22,x:231.375,y:92.625},{height:40,id:145,name:"#floor1-bowling-employee-standalone",rotation:0,type:"",visible:!0,width:63.5,x:279,y:68},{gid:194,height:32,id:146,name:"MarkerBowlReady",rotation:0,type:"",visible:!0,width:32,x:168.636,y:114.818},{gid:194,height:32,id:147,name:"MarkerBowlBall",rotation:0,type:"",visible:!0,width:32,x:150.074,y:116.972},{gid:343,height:32,id:148,name:"",rotation:0,type:"",visible:!0,width:32,x:253.5,y:268.5},{gid:343,height:32,id:149,name:"",rotation:0,type:"",visible:!0,width:32,x:254,y:238},{gid:343,height:32,id:150,name:"",rotation:0,type:"",visible:!0,width:32,x:253.5,y:204.5},{gid:343,height:32,id:151,name:"",rotation:0,type:"",visible:!0,width:32,x:253.375,y:172.375},{gid:343,height:32,id:152,name:"",rotation:0,type:"",visible:!0,width:32,x:253.5,y:140.5},{gid:343,height:32,id:154,name:"",rotation:0,type:"",visible:!0,width:32,x:265.5,y:80.5},{gid:343,height:32,id:155,name:"",rotation:0,type:"24",visible:!0,width:32,x:263.5,y:72.5},{gid:343,height:32,id:156,name:"",rotation:0,type:"",visible:!0,width:32,x:272,y:82},{gid:343,height:32,id:157,name:"",rotation:0,type:"",visible:!0,width:32,x:271,y:73},{gid:337,height:32,id:158,name:"",rotation:0,type:"",visible:!0,width:32,x:254,y:286},{gid:194,height:32,id:159,name:"MarkerPreventBowling",rotation:0,type:"",visible:!0,width:32,x:269.457,y:109.696},{height:29,id:160,name:"#bowling-standalone-prevent-leave",rotation:0,type:"",visible:!0,width:33,x:286.5,y:320.5},{gid:346,height:32,id:162,name:"",rotation:0,type:"-10",visible:!0,width:32,x:18.5,y:123.5},{gid:346,height:32,id:163,name:"",rotation:0,type:"-10",visible:!0,width:32,x:18.5,y:171.5},{gid:346,height:32,id:164,name:"",rotation:0,type:"-10",visible:!0,width:32,x:17.5,y:218.5},{gid:346,height:32,id:165,name:"",rotation:0,type:"-10",visible:!0,width:32,x:17.5,y:266.5},{gid:347,height:32,id:166,name:"",rotation:0,type:"",visible:!0,width:32,x:-4.5,y:100.5},{gid:347,height:32,id:167,name:"",rotation:0,type:"",visible:!0,width:32,x:-4.5,y:148.5},{gid:347,height:32,id:168,name:"",rotation:0,type:"",visible:!0,width:32,x:-5.5,y:195.5},{gid:347,height:32,id:170,name:"",rotation:0,type:"",visible:!0,width:32,x:-5.5,y:243.5},{gid:349,height:32,id:171,name:"",rotation:0,type:"",visible:!0,width:32,x:52,y:84},{gid:350,height:32,id:172,name:"",rotation:0,type:"",visible:!0,width:32,x:99.5,y:82.5},{gid:351,height:32,id:183,name:"",rotation:0,type:"",visible:!0,width:32,x:293.5,y:74.5},{gid:351,height:32,id:184,name:"",rotation:0,type:"",visible:!0,width:32,x:294,y:68},{gid:352,height:32,id:185,name:"",rotation:0,type:"",visible:!0,width:32,x:294.5,y:57.5},{gid:352,height:32,id:186,name:"",rotation:0,type:"",visible:!0,width:32,x:295,y:51},{gid:347,height:32,id:189,name:"",rotation:0,type:"",visible:!0,width:32,x:251,y:29},{gid:598,height:55,id:190,name:"",rotation:0,type:"front",visible:!0,width:75,x:309,y:9}],opacity:1,type:"objectgroup",visible:!0,x:0,y:0}],nextlayerid:7,nextobjectid:191,orientation:"isometric",renderorder:"right-down",tiledversion:"1.7.2",tileheight:16,tilesets:[{columns:16,firstgid:1,image:"../../res/walls.png",imageheight:512,imagewidth:512,margin:0,name:"walls",spacing:0,tilecount:128,tileheight:64,tilewidth:32},{columns:8,firstgid:129,image:"../../res/floors.png",imageheight:256,imagewidth:256,margin:0,name:"floors",spacing:0,tilecount:64,tileheight:32,tilewidth:32},{columns:4,firstgid:193,image:"../../res/control.png",imageheight:128,imagewidth:128,margin:0,name:"control",spacing:0,tilecount:16,tileheight:32,tilewidth:32},{columns:16,firstgid:209,image:"../../res/props.png",imageheight:512,imagewidth:512,margin:0,name:"props",spacing:0,tilecount:128,tileheight:64,tilewidth:32},{columns:16,firstgid:337,image:"../../res/props_small.png",imageheight:512,imagewidth:512,margin:0,name:"props_small",spacing:0,tilecount:256,tileheight:32,tilewidth:32},{firstgid:593,source:"../../res/props-dynamic.tiled-sheet.tsx"}],tilewidth:32,type:"map",version:"1.6",width:24}),define("db/overworlds",["require","exports","model/room","view/style","model/utility","map/battle1","map/battle-tut1","map/battle-tutBoss","map/test","map/test2","map/test3","map/floor1-outside","map/floor1-atrium","map/floor1-bowlingalley","map/floor1-primary","map/floor1-west1","map/floor1-west2","map/floor1-east1","map/floor1-east1-storage","map/floor1-east2","map/floor1-tut-entrance","map/floor1-tut-exit","map/floor1-tut-vr1","map/floor1-tut-vr2","map/floor1-tut-vr3","map/floor1-tut-vr3-west","map/floor1-tut-vr3-west2","map/floor1-tut-vr3-east","map/floor1-tut-vr-pre-boss","map/floor1-tut-vr-boss","map/floor2-south","map/floor2-guestroom-hallway","map/floor2-cafeteria","map/floor2-north","map/floor2-preproom","map/floor2-sports","map/bowling-alley-standalone"],(function(e,t,a,r,o,n,l,s,d,c,m,h,u,p,g,y,f,v,b,w,C,S,T,x,E,A,_,I,k,R,P,O,M,L,B,N,D){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=t.getIfExists=t.get=t.getRoom=t.loadRooms=void 0,n=i(n),l=i(l),s=i(s),d=i(d),c=i(c),m=i(m),h=i(h),u=i(u),p=i(p),g=i(g),y=i(y),f=i(f),v=i(v),b=i(b),w=i(w),C=i(C),S=i(S),T=i(T),x=i(x),E=i(E),A=i(A),_=i(_),I=i(I),k=i(k),R=i(R),P=i(P),O=i(O),M=i(M),L=i(L),B=i(B),N=i(N),D=i(D);let G=window.rooms={},F={floor1Outside:h,floor1Atrium:u,floor1Bowling:p,floor1Primary:g,floor1West1:y,floor1West2:f,floor1East1:v,floor1East1Storage:b,floor1East2:w,floor1TutEntrance:C,floor1TutExit:S,floor1TutVR1:T,floor1TutVR2:x,floor1TutVR3:E,floor1TutVR3West:A,floor1TutVR3West2:_,floor1TutVR3East:I,floor1TutVRPreBoss:k,floor1TutVRBoss:R,floor2South:P,floor2GuestroomHallway:O,floor2Cafeteria:M,floor2North:L,floor2PrepRoom:B,floor2Sports:N,test3:m,battle1:n,battleTut1:l,battleTutBoss:s,bowlingAlleyStandalone:D},W=(e,t)=>{G[e]=a.createRoom(e,t)};t.loadRooms=async()=>{console.log("loading rooms"),W("test",d),W("test2",c);for(let e in F)W(e,F[e]);console.log("rooms loaded")},t.getRoom=e=>{let t=G[e];if(!t)throw console.log(Object.keys(G)),Error(`No room exists with name: "${e}"`);return a.roomCopy(t)};let U=window.overworlds={};t.get=e=>{let t=U[e];if(!t)throw Error("No overworld exists with name: "+e);return Object.assign({},t)},t.getIfExists=e=>{let t=U[e];return t?Object.assign({},t):null},t.init=async()=>{var e,i,a,n,l,s,d,c,m,h;let u=new o.Transform([0,0,0],[-684,0,0],3e4,o.TransformEase.LINEAR);U.test={roomName:"test",backgroundColor:r.colors.GREY},U.test2={roomName:"test2",loadTriggerName:"floor1",backgroundColor:r.colors.GREY};for(let e in F)U[e]={roomName:e,loadTriggerName:e,backgroundColor:r.colors.GREY};return Object.assign(null!==(e=U.bowlingAlleyStandalone)&&void 0!==e?e:{},{backgroundColor:r.colors.BLACK,music:"music_bowling"}),U.floor1Outside.backgroundColor=r.colors.DARKBLUE,Object.assign(null!==(i=U.floor1Atrium)&&void 0!==i?i:{},{backgroundColor:r.colors.BLACK,music:"music_atrium"}),Object.assign(null!==(a=U.floor1Primary)&&void 0!==a?a:{},{backgroundColor:r.colors.BLACK,music:"music_atrium"}),Object.assign(null!==(n=U.floor1West1)&&void 0!==n?n:{},{backgroundColor:r.colors.BLACK,music:"music_atrium"}),Object.assign(null!==(l=U.floor1West2)&&void 0!==l?l:{},{backgroundColor:r.colors.BLACK,music:"music_atrium"}),Object.assign(null!==(s=U.floor1East1)&&void 0!==s?s:{},{backgroundColor:r.colors.BLACK,music:"music_store"}),Object.assign(null!==(d=U.floor1East1Storage)&&void 0!==d?d:{},{backgroundColor:r.colors.BLACK,music:"music_snoop"}),Object.assign(null!==(c=U.floor1East2)&&void 0!==c?c:{},{backgroundColor:r.colors.BLACK,music:"music_atrium"}),Object.assign(null!==(m=U.floor1Bowling)&&void 0!==m?m:{},{music:"music_bowling"}),Object.assign(null!==(h=U.floor2GuestroomHallway)&&void 0!==h?h:{},{backgroundColor:r.colors.BLACK}),["floor1TutVR1","floor1TutVR2","floor1TutVR3","floor1TutVR3West","floor1TutVR3West2","floor1TutVR3East","floor1TutVRPreBoss","floor1TutVRBoss","battleTut1","battleTutBoss"].forEach((e,t)=>{var i;Object.assign(null!==(i=U[e])&&void 0!==i?i:{},{backgroundColor:r.colors.DARKBLUE,backgroundImage:"bg-clouds",backgroundTransform:u,music:t<=1?"music_tutorial":"music_tutorial_dungeon"}),e.includes("battle")&&(U[e].music=void 0)}),t.loadRooms()}})),define("model/sound",["require","exports","utils","model/generics"],(function(e,t,i,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setVolumeForMusic=t.setVolumeForActiveSounds=t.stopSound=t.playSoundName=t.stopCurrentMusic=t.stopMusic=t.playMusic=t.musicSetPlaybackPosition=t.musicGetCurrentPlaybackPosition=t.getCurrentMusic=t.playSound=t.getSound=t.loadSound=t.getSoundSpriteMetadata=t.loadSoundSpritesheet=t.SoundType=t.musicSoundObjects=t.sounds=void 0;let r={resources:[],spritemap:{}};t.sounds=window.sounds={},t.musicSoundObjects={};let o=[];var n;!function(e){e.NORMAL="normal",e.MUSIC="music",e.SPRITESHEET="spritesheet"}(n=t.SoundType||(t.SoundType={}));let l={},s=e=>{e.addEventListener("timeupdate",function(){let e=null!==(t=l[this.id])&&void 0!==t?t:null;var t;e&&(this.currentTime>e.end||this.currentTime<e.start)&&this.pause()}.bind(e))};t.loadSoundSpritesheet=async e=>{let t="res/snd/"+e.slice(0,-4)+".json";r=await fetch(t).then(e=>e.json()).catch(e=>{console.error("Failed to load json metadata for sound spritesheet",e)});let i=await fetch("res/snd/"+e).then(e=>e.blob()),a=new FileReader;a.readAsDataURL(i);let o=await new Promise((t,i)=>{let r=setTimeout(()=>{i("failed to read blob: "+e)},1e4);a.addEventListener("loadend",()=>{let e=null==a?void 0:a.result;e&&(clearTimeout(r),t(""+e))})}),l=new Audio(o);l.autoplay=!1,l.id="audio1",s(l);let c=d(l,n.SPRITESHEET,"spritesheet",1);for(let e=0;e<4;e++){let t=new Audio(o);t.autoplay=!1,t.id="audio"+(e+2),s(t),c.nodes.push(t)}},t.getSoundSpriteMetadata=e=>{let t=e.slice(e.lastIndexOf("/")+1,-4),i=r.spritemap[t];if(!i)throw Error(`No spritesheet meta exists for url='${e}' nameFromUrl='${t}'`);return i};let d=(e,i,a,r)=>{e.oncanplay=null,e.currentTime=99999999999;let o=e.currentTime;return e.currentTime=0,e.onended=function(){e.pause(),e.currentTime=0},t.sounds[a]={nodes:[e],currentNodeIndex:0,soundDuration:o,soundType:i,volumeModifier:r,useSpritesheet:!1},i===n.MUSIC&&(console.log("Adding music track",a,t.getSound(a)),t.musicSoundObjects[a]=t.getSound(a)),t.sounds[a]};t.loadSound=async(e,i,a,r,o)=>{if(!o)return i="res/snd/"+i,new Promise((t,o)=>{let n=new Audio(i);n.autoplay=!1;let l=()=>{d(n,a,e,r),clearTimeout(s),t(n)};n.oncanplay=n.onloadeddata=l;let s=setTimeout(()=>{console.error("Sound load timed out:",e,i),l()},5e3);n.addEventListener("error",t=>{console.error("sound error",t),o('Cannot load sound: name="'+e+'", url="'+i+'", type='+a)}),n.src=i});try{let a=t.getSound("spritesheet"),o=t.getSoundSpriteMetadata(i);a&&(t.sounds[e]={nodes:a.nodes,currentNodeIndex:0,soundDuration:o.end-o.start,soundType:n.NORMAL,volumeModifier:r,useSpritesheet:!0,sprite:o})}catch(e){console.error("Failed to load spritesheet sound",e)}},t.getSound=e=>{let i=t.sounds[e];return i?Object.assign(Object.assign({duration:0},i),{soundName:e,lastStartTimestamp:a.getNow()}):(console.error("Could not find sound with name: ",e),null)},t.playSound=(e,i)=>{if(a.getSoundEnabled())if(i=null!=i?i:a.getVolume(e.soundType),e.useSpritesheet&&e.sprite){let r=t.sounds.spritesheet;if(r){let t=e.sprite,o=r.nodes[r.currentNodeIndex];o.volume=(i||1)*e.volumeModifier,o.currentTime=t.start,((e,t)=>{l[e.id]=t})(o,t),o.play(),e.lastStartTimestamp=a.getNow(),r.currentNodeIndex=(r.currentNodeIndex+1)%r.nodes.length}}else{let t=e.nodes[0];t.volume=(i||1)*e.volumeModifier,t.play(),e.lastStartTimestamp=a.getNow()}},t.getCurrentMusic=()=>{for(let e in t.musicSoundObjects){let i=t.musicSoundObjects[e];if(!i.nodes[0].paused)return i}return null},t.musicGetCurrentPlaybackPosition=e=>e.nodes[0].currentTime,t.musicSetPlaybackPosition=(e,t)=>{e.nodes[0].currentTime=t},t.playMusic=async(e,r,o)=>{let l=t.musicSoundObjects[e];if(!l)return void console.error("playMusic: Could not find music with name:",e);let s=l.nodes[0];if(s.loop=r,s.paused){if(s.currentTime=0,t.playSound(l),(o=null!=o?o:0)>0){let e=13;for(let t=0;t<o;t+=e){let r=a.getVolume(n.MUSIC);s.volume=i.normalizeClamp(t,0,o,0,r),await new Promise(t=>setTimeout(t,e))}s.volume=a.getVolume(n.MUSIC)}}else console.log("playMusic: Music is already playing:",e)},t.stopMusic=async(e,r)=>{let o=t.musicSoundObjects[e];if(!o)return void console.error("stopMusic: Could not find music with name:",e);let l=o.nodes[0];if(l.paused)console.log("stopMusic: Music is not playing:",e);else if((r=null!=r?r:0)>0){let e=13;for(let t=0;t<r;t+=e){let o=a.getVolume(n.MUSIC);l.volume=o-i.normalizeClamp(t,0,r,0,o),await new Promise(t=>setTimeout(t,e))}l.pause(),l.volume=a.getVolume(n.MUSIC)}else l.pause()},t.stopCurrentMusic=async e=>{for(let i in t.musicSoundObjects)t.musicSoundObjects[i].nodes[0].paused||t.stopMusic(i,e);return new Promise(t=>setTimeout(t,null!=e?e:0))},t.playSoundName=window.playSoundName=(e,i)=>{let a=t.getSound(e);a&&t.playSound(a,i)},t.stopSound=e=>{let t=e.nodes[e.currentNodeIndex];t.pause(),t.currentTime=0},t.setVolumeForActiveSounds=e=>{o.forEach(t=>{t.nodes[t.currentNodeIndex].volume=e})},t.setVolumeForMusic=e=>{for(let i in t.musicSoundObjects){let a=t.musicSoundObjects[i];a.nodes[a.currentNodeIndex].volume=e}}})),define("model/overworld",["require","exports","model/room","model/utility","db/overworlds"],(function(e,t,i,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.overworldHide=t.overworldShow=t.overworldCharacterCreate=t.overworldEnableTriggers=t.overworldDisableTriggers=t.createOverworldFromTemplate=void 0,t.createOverworldFromTemplate=e=>{var t,i;let o=r.getRoom(e.roomName);if(!o)return console.error("Cannot initiate overworld, no room exists with name: ",e.roomName),null;o.bgImage=null!==(t=e.backgroundImage)&&void 0!==t?t:"",e.backgroundTransform&&(o.bgTransform=a.Transform.copy(e.backgroundTransform));let n={name:e.roomName,room:o,music:null!==(i=e.music)&&void 0!==i?i:"",visible:!0,triggersEnabled:!0,characterCollisionEnabled:!0,playerIsCollidingWithInteractable:!1,collidingTriggerActivators:[],previouslyCollidingTriggerActivators:[],loadTriggerName:e.loadTriggerName,timers:[],stepTimer:new a.Timer(50)};return n.stepTimer.start(),n},t.overworldDisableTriggers=e=>{e.triggersEnabled=!1},t.overworldEnableTriggers=e=>{e.triggersEnabled=!0},t.overworldCharacterCreate=e=>({ch:e.ch}),t.overworldShow=e=>{e.visible=!0,i.roomShow(e.room)},t.overworldHide=e=>{e.visible=!1,i.roomHide(e.room)}})),define("controller/events",["require","exports","model/generics","model/canvas"],(function(e,t,i,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBattleActionLabel=t.getBattleActionKey=t.isSelectKey=t.getEscapeKeyLabel=t.isEscapeKey=t.getMuteKeyLabel=t.isMuteKey=t.getSkipKeyLabel=t.isSkipKey=t.isDownKey=t.isUpKey=t.isRightKey=t.isLeftKey=t.getAuxKeyLabel=t.isPauseKey=t.getPauseKeyLabel=t.isAuxKey=t.getCancelKey=t.getCancelKeyLabel=t.getConfirmKey=t.isCancelKey=t.getConfirmKeyLabel=t.isConfirmKey=t.popKeyHandler=t.pushEmptyKeyHandler=t.pushKeyHandler=t.getCurrentKeyHandler=t.initEvents=void 0;let r=!1;t.initEvents=()=>{if(r)return console.error("Events have already been initialized."),void console.trace("events");r=!0;let e=document.getElementById(a.CANVAS_ID),{left:o,top:n,width:l,height:s}=(null==e?void 0:e.getBoundingClientRect())||{left:0,top:0,width:0,height:0};window.addEventListener("mousemove",e=>{let{clientX:t,clientY:a}=e,r=t-o,d=a-n;r>l&&(r=l),d>s&&(d=s),i.setMousePos(r,d)}),window.addEventListener("keydown",e=>{if(e.repeat)return;i.setKeyDown(e.code),i.setKeyDown(e.key);let a=t.getCurrentKeyHandler();a&&a(e)}),window.addEventListener("keyup",e=>{i.setKeyUp(e.key),i.setKeyUp(e.code)}),t.pushKeyHandler(async e=>{})};let o=window.keyHandlers=[];t.getCurrentKeyHandler=()=>o[o.length-1],t.pushKeyHandler=e=>{o.push(e)},t.pushEmptyKeyHandler=()=>{let e=()=>{};return o.push(e),e},t.popKeyHandler=e=>{if(e){let t=o.indexOf(e);t>-1&&o.splice(t,1)}else o.splice(o.length-1,1)},t.isConfirmKey=e=>["Return","Enter"," ","x","X","KeyX"].includes(e),t.getConfirmKeyLabel=()=>"(X)",t.isCancelKey=e=>["Escape","z","Z","KeyZ"].includes(e),t.getConfirmKey=()=>"KeyX",t.getCancelKeyLabel=()=>"(Z)",t.getCancelKey=()=>"KeyZ",t.isAuxKey=e=>["c","C","KeyC"].includes(e),t.getPauseKeyLabel=()=>"(Space)",t.isPauseKey=e=>[" "].includes(e),t.getAuxKeyLabel=()=>"(C)",t.isLeftKey=e=>["ArrowLeft"].includes(e),t.isRightKey=e=>["ArrowRight"].includes(e),t.isUpKey=e=>["ArrowUp"].includes(e),t.isDownKey=e=>["ArrowDown"].includes(e),t.isSkipKey=e=>["Backspace","Escape"].includes(e),t.getSkipKeyLabel=()=>"(Backspace)",t.isMuteKey=e=>["M","m","KeyM"].includes(e),t.getMuteKeyLabel=()=>"(M)",t.isEscapeKey=e=>["Escape"].includes(e),t.getEscapeKeyLabel=()=>"(ESC)",t.isSelectKey=e=>["Backspace"].includes(e),t.getBattleActionKey=e=>{switch(e){case 0:return"KeyX";case 1:return"KeyZ";case 2:return"KeyS";case 3:return"KeyA";case 4:return"KeyW";case 5:return"keyQ"}return""},t.getBattleActionLabel=e=>{switch(e){case 0:return"(X)";case 1:return"(Z)";case 2:return"(S)";case 3:return"(A)";case 4:return"(W)";case 5:return"(Q)"}return""}})),define("db/items/weapons",["require","exports","controller/battle-actions","model/battle","controller/battle-management","model/particle","db/items/index"],(function(e,t,i,a,r,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=t.initBattleActions=void 0,t.initBattleActions=()=>{let e={NoWeapon:{name:"(No weapon)",description:"Jump to target and give 'em a smack.  It probably won't be very effective.",cooldown:5e3,type:i.BattleActionType.SWING,meta:{swings:[i.SwingType.NORMAL],icon:"sword"},cb:async function(e,t){var a,r,o;let n=i.getTarget(e,t);n&&await i.doSwing(e,this,t,n,{baseDamage:1,baseStagger:1,swingType:null!==(o=null===(r=null===(a=this.meta)||void 0===a?void 0:a.swings)||void 0===r?void 0:r[t.actionStateIndex])&&void 0!==o?o:i.SwingType.NORMAL})}},TrainingSwordSwing:{name:"Swing Sword",description:"Jump to target and swing your weapon.",cooldown:4500,type:i.BattleActionType.SWING,meta:{swings:[i.SwingType.NORMAL,i.SwingType.NORMAL],icon:"sword"},cb:async function(e,t){var a,r,o;let n=i.getTarget(e,t);n&&await i.doSwing(e,this,t,n,{baseDamage:3,baseStagger:5,swingType:null!==(o=null===(r=null===(a=this.meta)||void 0===a?void 0:a.swings)||void 0===r?void 0:r[t.actionStateIndex])&&void 0!==o?o:i.SwingType.NORMAL})}},TrainingSwordSwingPlus:{name:"Swing Sword",description:"Jump to target and swing your weapon.",cooldown:4e3,type:i.BattleActionType.SWING,meta:{swings:[i.SwingType.NORMAL,i.SwingType.PIERCE],icon:"sword"},cb:async function(e,t){var a,r,o;let n=i.getTarget(e,t);n&&await i.doSwing(e,this,t,n,{baseDamage:4,baseStagger:6,swingType:null!==(o=null===(r=null===(a=this.meta)||void 0===a?void 0:a.swings)||void 0===r?void 0:r[t.actionStateIndex])&&void 0!==o?o:i.SwingType.NORMAL})}},TrainingBowShoot:{name:"Shoot Bow",description:"Fire at the ranged target.",cooldown:3500,type:i.BattleActionType.RANGED,meta:{ranges:[i.RangeType.NORMAL,i.RangeType.NORMAL]},cb:async function(e,t){var a,r,o;let n=i.getTarget(e,t);n&&await i.doRange(e,this,t,n,{baseDamage:2,baseStagger:1,rangeType:null!==(o=null===(r=null===(a=this.meta)||void 0===a?void 0:a.ranges)||void 0===r?void 0:r[t.actionStateIndex])&&void 0!==o?o:i.RangeType.NORMAL})}},Fireball:{name:"Fireball",description:"Shoot a big fireball.",cooldown:8e3,type:i.BattleActionType.CAST,meta:{castTime:3e3,icon:"sword"},cb:async(t,n)=>{await r.beginAction(n),r.setCasting(n,{castTime:e.Fireball.meta.castTime,onCast:async()=>{let r=a.battleGetTargetedEnemy(t,i.BattleActionType.RANGED);r&&await i.doSpell(t,e.Fireball,n,[r],{baseDamage:15,baseStagger:15,particleText:"Fireball!",particleTemplate:o.EFFECT_TEMPLATE_FIREBALL})},onInterrupt:async()=>{}}),await r.endAction(n)}}};return e},t.init=e=>{let i=t.initBattleActions();e.NoWeapon={label:"No Weapon",description:"No weapon is equipped.",type:n.ItemType.WEAPON,skills:[i.NoWeapon]},e.TrainingSword={label:"Training Sword",description:"A standard issue training sword.",type:n.ItemType.WEAPON,weaponType:n.WeaponType.SWORD,skills:[i.TrainingSwordSwing],icon:"sword"},e.TrainingBow={label:"Training Bow",description:"A standard issue training bow.",type:n.ItemType.WEAPON,weaponType:n.WeaponType.BOW,skills:[i.TrainingBowShoot],icon:"bow"},e.PierceSword={label:"Pierce Sword",description:"A slightly more refined version of the standard issue Training Sword.  The hilt is balanced slightly differently to allow for more force on the followup swing.",type:n.ItemType.WEAPON,weaponType:n.WeaponType.SWORD,skills:[i.TrainingSwordSwingPlus],icon:"sword"}}})),define("db/items/quest",["require","exports","db/items/index"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=void 0,t.init=e=>{e.HapticBracer={label:"Haptic Bracer",description:"A thick bracelet that surrounds the wrist.  Allows the user to interface with the various VR facilities inside the Regem Ludos Arcade.",type:i.ItemType.QUEST,icon:"bracer"},e.PingPongEquipment={label:"Ping Pong Equipment",description:"A standard set of Ping Pong equipment includes two rubber-shielded paddles (one side red, one side blue) and a shiny, three-star ping pong ball.",type:i.ItemType.QUEST,icon:"star"}}})),define("db/items/accessories",["require","exports","db/items/index"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=void 0,t.init=e=>{e.ZoeBracelet={label:"Zoe's Bracelet",description:'This unassuming bracelet has the name "Zoe" etched into the outside of it in fancy cursive letters.  Although one might feel some guilt about wearing another\'s bracelet, the fact remains that Zoe is not here right now and has no agency in the matter.',type:i.ItemType.ACCESSORY,icon:"bracelet",modifiers:{HP:10}},e.ShieldRing={label:"Armor Ring",description:'When donning this ring, one feels a certain sense of relief; the kind that says, "You are safe, now.  Unless, of course, you engage in something particularly dangerous."',type:i.ItemType.ACCESSORY,icon:"ring",modifiers:{armor:1}}}})),define("view/icons/Armor",["require","exports","preact"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>i.h("svg",{fill:e.color,stroke:e.color,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},i.h("g",{class:"",transform:"translate(0,0)",style:""},i.h("path",{d:"M129.656 21.188L37.936 79.78c3.54 26.805 8.915 53.547 16.127 80.126L240.72 39.594l-19.282-12.5c-31.28-.885-62.204-2.842-91.782-5.907zm253.47.625c-40.51 3.975-83.496 5.938-126.47 5.843l204.625 132.72c7.108-25.89 12.487-51.92 16.095-78.032l-94.25-60.53zM257.937 50.75L59.468 178.656c8.025 26.32 17.865 52.456 29.532 78.313l243.25-158-74.313-48.22zm91.468 59.344l-74.562 48.437 151.28 98.782c11.714-25.803 21.592-51.91 29.688-78.187l-106.406-69.03zm-91.687 59.562L97 274.062c12.202 25.17 26.14 50.064 41.844 74.563l196.094-128.53-77.22-50.44zM352 231.22l-77.53 50.843 101.405 67.187c15.822-24.6 29.895-49.584 42.22-74.875L352 231.22zm-94.53 61.968l-108.345 71.03c13.564 20.062 28.326 39.847 44.28 59.313l132.032-85.28-67.968-45.063zm84.967 56.312L274.5 393.406l47.03 30.375c15.845-19.342 30.513-38.993 44.033-58.936L342.438 349.5zm-84.968 54.875L205.5 437.97c16.233 18.933 33.614 37.54 52.156 55.78 18.385-18.152 35.637-36.678 51.78-55.53l-52.092-33.626.125-.22z",fill:e.color,"fill-opacity":"1"})))})),define("view/icons/Arrow",["require","exports","preact"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>i.h("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",style:"left"===e.direction?"transform: rotate(180deg)":""},i.h("g",{transform:"translate(0,0)"},i.h("path",{d:"M106.854 106.002a26.003 26.003 0 0 0-25.64 29.326c16 124 16 117.344 0 241.344a26.003 26.003 0 0 0 35.776 27.332l298-124a26.003 26.003 0 0 0 0-48.008l-298-124a26.003 26.003 0 0 0-10.136-1.994z",fill:e.color,"fill-opacity":"1"})))})),define("view/icons/BattleGear",["require","exports","preact"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>i.h("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",style:"left"===e.direction?"transform: rotate(180deg)":""},i.h("g",{transform:"translate(0,0)"},i.h("path",{d:"M262.406 17.188c-27.22 8.822-54.017 28.012-72.375 55.53 17.544 47.898 17.544 57.26 0 105.157 19.92 15.463 40.304 24.76 60.782 27.47-2.063-25.563-3.63-51.13 1.125-76.69-13.625-1.483-23.374-5.995-37-13.874V82.563c35.866 19.096 61.84 18.777 98.813 0v32.22c-13.364 6.497-21.886 11.16-35.25 13.218 3.614 25.568 3.48 51.15 1.375 76.72 18.644-3.265 37.236-12.113 55.5-26.845-14.353-47.897-14.355-57.26 0-105.156-16.982-28.008-47.453-46.633-72.97-55.532zm-129.594 8.218c-25.906 110.414-27.35 215.33-27.4 330.922-18.84-1.537-37.582-5.12-56.027-11.12v28.554h69.066c8.715 35.025 6.472 70.052-1.036 105.078h28.13c-7.195-35.026-8.237-70.053-.872-105.078h68.904v-28.555c-18.49 4.942-37.256 8.552-56.097 10.46.082-114.94 2.496-223.068-24.667-330.26zm89.47 202.375c0 117.27 25.517 233.342 120.155 257.97C446.62 464.716 462.72 345.374 462.72 227.78H222.28z",fill:e.color,"fill-opacity":"1"})))})),define("view/icons/Bracelet",["require","exports","preact"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>i.h("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",style:"left"===e.direction?"transform: rotate(180deg)":""},i.h("g",{transform:"translate(0,0)"},i.h("path",{d:"M247.1 23.09c-57.5 2.19-109.7 25.26-149.2 61.83l20.6 20.58-12.8 12.8-20.58-20.6C46.64 139.3 23.1 194.8 23.1 255.9c0 22.6 3.24 44.4 9.25 65.1-3.97 7.1-6.25 15.2-6.25 23.9 0 27 22.04 49 49 49 27 0 49-22 49-49 0-25-18.8-45.7-43.06-48.6-1.92-10.2-2.94-20.7-2.94-31.4 0-93.2 75.8-169 169-169s169 75.8 169 169-75.8 169-169 169c-10.7 0-21.2-1-31.4-2.9-2.9-24.2-23.6-43.1-48.6-43.1-27 0-49 22-49 49s22 49 49 49c8.7 0 16.8-2.3 23.9-6.3 20.6 6 42.5 9.3 65.1 9.3 61 0 116.6-23.5 158.2-62l-20.6-20.6 12.8-12.8 20.6 20.6c36.6-39.5 59.6-91.7 61.8-149.2h-40.8v-18h40.8c-.9-23.4-5.2-45.9-12.5-67L436.1 200l-8-16.2 41.7-20.8c-10.6-24.2-25.1-46.2-42.7-65.3l-36.6 36.6-12.8-12.8 36.6-36.57c-19.1-17.67-41.1-32.17-65.2-42.7l-20.9 41.7-16.2-8.06 20.1-40.25c-21.1-7.3-43.6-11.64-67-12.53V63.9h-18z",fill:e.color,"fill-opacity":"1"})))})),define("view/icons/Bracer",["require","exports","preact"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>i.h("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},i.h("g",{class:"",transform:"translate(0,0)",style:""},i.h("path",{d:"M412.6 27.246c-62.483 12.864-108.973 44.93-148.62 82.2-8.492 8.785-16.66 17.994-24.543 27.56 4.898 1.954 9.432 4.115 13.304 7.09.313-.395.7-.9 1.005-1.286 6.282-7.98 10.457-13.283 13.182-16.123l12.988 12.46c-.528.552-5.826 6.92-12.025 14.796-6.2 7.875-13.92 17.864-21.528 27.89-7.608 10.023-15.113 20.094-20.86 28.094-2.872 4-5.31 7.49-7.062 10.13-1.75 2.64-2.987 5.184-2.582 4.134l-16.793-6.48c1.2-3.11 2.415-4.648 4.375-7.603 1.082-1.63 2.37-3.5 3.774-5.506-3.99-2.19-8.23-4.21-12.563-5.67-11.845 18.36-23.12 37.345-34.032 56.61 4.74.9 9.385 2.15 13.65 4.094.547.25 1.095.51 1.64.785 2.275-3.822 4.35-7.24 6.07-9.948 1.923-3.023 3.048-4.9 4.93-6.988l13.374 12.047c.304-.336-1.358 1.838-3.113 4.598-1.756 2.76-4.004 6.458-6.542 10.745-3.152 5.323-6.773 11.605-10.516 18.203-.92 1.636-1.87 3.322-2.918 5.16-1.333 2.37-2.672 4.758-4.006 7.156-6.112 10.993-12.096 22.043-16.634 30.797-2.27 4.376-4.18 8.187-5.537 11.06-1.358 2.872-2.233 5.552-1.993 4.53l-17.52-4.128c.747-3.167 1.722-4.885 3.237-8.092 1.01-2.133 2.29-4.694 3.677-7.428-.176-.093-.336-.185-.563-.29-1.398-.654-3.906-1.24-7.11-1.456-2.58-.174-5.55-.114-8.714.024-6.96 13.054-13.88 26.046-20.812 38.855 24.224-3.728 49.8.884 72.717 11.266 25.21 11.42 47.412 29.837 61.177 52.778 9.69-11.386 19.125-22.82 28.346-34.295-6.03-7.047-12.925-13.504-20.574-19.506-3.778 5.388-12.217 17.41-12.217 17.41l-14.744-10.328s15.805-22.57 31.834-45.36c8.014-11.396 16.084-22.845 22.27-31.57 3.092-4.363 5.712-8.043 7.632-10.71.96-1.336 1.74-2.415 2.34-3.228.3-.406.554-.742.788-1.047.234-.304.034-.217 1.11-1.293l12.726 12.73c.31-.31.315-.324.395-.41-.113.145-.295.383-.54.714-.517.702-1.273 1.743-2.21 3.044-1.872 2.603-4.478 6.263-7.558 10.608-.47.662-1.203 1.71-1.693 2.402 8.655 6.093 16.436 13.453 22.96 21.498 14.668-19.693 28.886-39.478 42.85-59.322-6.27-7.52-13.506-14.377-21.59-20.72-3.778 5.388-12.22 17.408-12.22 17.408l-14.742-10.327s15.806-22.568 31.834-45.36c8.015-11.395 16.084-22.846 22.27-31.57 3.093-4.364 5.713-8.044 7.633-10.712.96-1.335 1.74-2.412 2.34-3.225.302-.406.552-.742.787-1.047.234-.304.033-.217 1.11-1.293l12.727 12.73c.305-.307.31-.32.39-.407-.112.146-.292.382-.535.71-.52.703-1.275 1.744-2.21 3.045-1.874 2.603-4.48 6.263-7.56 10.608-.47.662-1.203 1.708-1.693 2.4 8.053 5.668 15.35 12.433 21.58 19.826 14.802-21.625 29.52-43.287 44.39-64.95-8.163-14.727-13.61-35.985-17.267-59.9-3.51-22.94-4.823-47.863-3.476-70.616zm-24.935 23.988l.033 12.432c.068 26.335.24 57.675 8.26 81.712l4.045 12.127-12.78-.28c-21.215-.467-41.945-6.482-58.818-14.827-16.872-8.345-30.143-18.334-35.918-30.986l-2.78-6.09 5.032-4.412c21.065-18.48 51.315-35.886 81.126-45.766zm-17.883 25.353c-20.675 8.326-41.308 20.34-56.947 32.725 4.763 5.217 13.01 11.738 23.55 16.95 11.334 5.607 25.01 9.99 38.96 11.904-4.7-20.446-5.428-42.064-5.563-61.58zm-155.35 72.47l-19.294 31.21c8.46 2.03 15.834 5.644 22.017 9.223 2.87-4.034 5.655-7.918 11.22-15.912 3.968-5.703 7.908-11.442 10.737-15.727.11-.165.144-.23.25-.39-2.897-1.764-6.678-3.825-10.644-5.292-5.795-2.144-11.265-2.857-14.287-3.112zm143.58 69.394L338.99 246.3c14.875 11.8 27.542 25.663 36.984 42.082l15.574-23.535c-4.002-15.06-17.05-34.1-33.535-46.394zm-214.28 53.458c-2.03-.036-2.87.123-4.33.203l-17.692 36.36c3.37-.127 6.782-.277 10.246-.043 4.495.304 9.07 1.028 13.52 3.108.237.11.463.28.7.4 2.856-4.895 4.654-7.948 9.272-15.957 3.72-6.452 7.428-12.932 10.15-17.8.505-.906.755-1.39 1.186-2.17-2.534-1.152-6.38-2.25-10.494-2.98-4.125-.734-8.703-1.053-12.56-1.12zm129.925 62.125l-19.023 27.847c14.875 11.8 27.542 25.663 36.984 42.082l15.576-23.537c-4.002-15.06-17.052-34.097-33.537-46.392zM96.634 384.427c-3.352.813-6.633 1.826-9.82 3.06l-8.155 3.153c1.374 45.12 28.474 76.875 60.952 88.8 30.687 11.27 66.89 4.883 89.315-21.724l-3.803-8.79c-1.42-3.28-3.08-6.498-4.943-9.645-16.81 27.018-47.216 33.235-74.363 23.266-27.302-10.025-50.384-36.346-49.183-78.12z",fill:e.color,"fill-opacity":"1"})))})),define("view/icons/Circle",["require","exports","preact"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>i.h("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},i.h("path",{d:"M0 0h512v512H0z",fill:"rgba(0, 0, 0, 0.0)","fill-opacity":"1"}),i.h("g",{class:"",transform:"translate(0,0)",style:""},i.h("path",{d:"M256 23.05C127.5 23.05 23.05 127.5 23.05 256S127.5 488.9 256 488.9 488.9 384.5 488.9 256 384.5 23.05 256 23.05z",fill:e.color,"fill-opacity":"1"})))})),define("view/icons/CloakConsume",["require","exports","preact"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>i.h("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},i.h("g",{class:"",transform:"translate(0,0)",style:""},i.h("path",{d:"M256 23.316c-27.177 0-58.578 5.75-79.525 17.967-20.688 13.774-43.22 60.756-43.22 60.756-3.112 5.22-6.173 10.658-9.16 16.376-36.372 69.627-61.496 175.763-62.4 317.686 46.593 26.853 97.436 44.53 142.05 52.582-21.736-14.917-40.667-38.325-55.18-67.618 36.913-4.56 78.545-9.817 107.314-9.818 29.802 0 73.456 5.63 111.32 10.29-14.484 29.072-33.326 52.308-54.946 67.144 44.615-8.052 91.458-25.727 138.05-52.58-.903-141.923-26.027-248.06-62.4-317.686-2.986-5.718-6.047-11.156-9.16-16.375v-.003s-22.53-46.98-43.22-60.754c-23.52-11.95-52.347-17.967-79.524-17.967zm-.045 16.22c30.187 3.09 57.525 4.198 76.307 24.67-18.46 21.81-45.975 49.5-76.29 49.503-30.302.002-66.432-30.935-76.27-49.468 17.72-19.566 53.18-24.537 76.253-24.707zM170.57 80c5.43 12.588 52.522 49.167 85.375 49.25C289.09 129.333 336 91.16 342.32 80c0 0 12.28 18.68 18.594 31.057l4.55 10.906c20.518 45.148 32.614 92.753 32.614 158.1 0 45.65-8.408 88.144-22.873 123.724-32.45-4.387-73.958-7.39-119.205-7.39-43.513 0-83.54 2.78-115.408 6.896-14.34-35.48-22.67-77.792-22.67-123.23 0-65.347 8.096-112.952 28.613-158.1l4.55-10.906C157.378 98.725 170.57 80 170.57 80z",fill:e.color,"fill-opacity":"1"})))})),define("view/icons/Close",["require","exports","preact"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>i.h("svg",{xmlns:"http://www.w3.org/2000/svg",id:"svg2",viewBox:"0 0 84.853 84.853",version:"1.0"},i.h("g",{id:"layer1",transform:"translate(-153.29 -132.79)"},i.h("g",{id:"g2762",transform:"matrix(.70711 -.70711 .70711 .70711 -66.575 189.71)",fill:e.color},i.h("rect",{id:"rect1872",y:"165.22",width:"100",x:"145.71",height:"20"}),i.h("rect",{id:"rect1874",transform:"rotate(90)",height:"20",width:"100",y:"-205.71",x:"125.22"}))))})),define("view/icons/Contract",["require","exports","preact"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>i.h("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},i.h("g",{class:"",transform:"translate(0,0)",style:""},i.h("path",{d:"M96 64L64 96l48 48-48 48h128V64l-48 48-48-48zm224 0v128h128l-48-48 48-48-32-32-48 48-48-48zM64 320l48 48-48 48 32 32 48-48 48 48V320H64zm256 0v128l48-48 48 48 32-32-48-48 48-48H320z",fill:e.color,"fill-opacity":"1"})))})),define("view/icons/Cursor",["require","exports","preact"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>{var t;return i.h("svg",{style:`transform: rotate(${null!==(t=e.angle)&&void 0!==t?t:75}deg); filter: drop-shadow(1px 1px 0px #222) drop-shadow(-1px -1px 0px #222);`,stroke:e.color,width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.h("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M21.1568 4.15379C21.5068 3.32658 20.6734 2.49321 19.8462 2.84319L3.46966 9.77172C2.60871 10.136 2.67381 11.3772 3.56814 11.6494L8.7707 13.2327C9.72737 13.5239 10.4761 14.2726 10.7672 15.2293L12.3506 20.4318C12.6228 21.3262 13.864 21.3913 14.2283 20.5303L21.1568 4.15379ZM19.0669 1.00125C21.5485 -0.048667 24.0486 2.45145 22.9987 4.93307L16.0702 21.3096C14.9775 23.8924 11.2538 23.6971 10.4373 21.0142L8.85389 15.8116C8.75683 15.4927 8.50727 15.2432 8.18837 15.1461L2.98581 13.5627C0.302836 12.7462 0.107539 9.02252 2.69038 7.92979L19.0669 1.00125Z",fill:e.color}))}})),define("view/icons/Expand",["require","exports","preact"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>i.h("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},i.h("g",{class:"",transform:"translate(0,0)",style:""},i.h("path",{d:"M64 64v128l48-48 48 48 32-32-48-48 48-48H64zm256 0l48 48-48 48 32 32 48-48 48 48V64H320zM64 320v128h128l-48-48 48-48-32-32-48 48-48-48zm288 0l-32 32 48 48-48 48h128V320l-48 48-48-48z",fill:e.color,"fill-opacity":"1"})))})),define("view/icons/Flask",["require","exports","preact"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>i.h("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},i.h("g",{class:"",transform:"translate(0,0)",style:""},i.h("path",{d:"M365.47 18.727c-11.353-.18-21.053 7.365-24.786 20.058h-.002c-24.423-7.6-57.52-4.092-68.328 19.856-15.69-20.86-47.866-13.98-55.194 9.85-7.328 23.828 13.462 49.474 44.68 48.55-3.078 33.98 44.304 54.69 81.764 39.132-.473 19.307 8.312 41.853 30.37 44.97-6.395 18.11 3.104 42.047 28.614 42.047 31.47 0 38.024-36.316 21.025-53.145 9.474-10.39 12.832-25.167 11.096-39.13 17.282 12.104 34.59-6.52 33.767-20.08-1.516-24.97-20.366-35.97-33.768-24.3-8.8-27.616-37.243-32.007-52.562-16.353 1.35-7.425.2-13.105-5.255-19.274 22.605-5.702 18.913-37.698 4.68-46.904-5.44-3.517-10.942-5.195-16.102-5.277zm68.37 5.13c-22.7 0-22.882 34.655 0 34.655s22.7-34.655 0-34.655zM177.672 74.842c-22.7 0-22.882 34.654 0 34.654s22.7-34.654 0-34.654zm64.695 59.38c-1.695.06-3.792.895-5.877 2.887-4.765 4.554-8.11 13.804-1.814 24.216 1.365 2.257 2.837 4.486 4.408 6.672l-14.21 26.414-34.43 59.637-153.62 87.682-.008.006c-11.038 6.375-16.508 14.786-17.537 24.037-1.03 9.254 2.46 20.22 13.083 31.508 45.295 48.134 101.19 77.71 164.907 95.106 15.645 4.267 26.47 2.614 33.156-2.1 6.686-4.712 11.047-13.382 11.047-28.413v-.006l.214-177.61 38.008-65.832c-14.036-3.907-26.16-10.638-36.332-18.932l8.967-16.67c13.568 12.152 31.753 20.64 55.14 20.645 11.536-.03 18.363-7.457 20.046-13.542.84-3.044.414-5.247-.604-6.73-1.018-1.48-3.004-3.204-8.754-3.66-31.006-2.452-53.782-15.764-68.293-39.714-2.816-4.65-5-5.413-6.797-5.584-.224-.02-.46-.028-.7-.02zm234.053 39.305c-22.7 0-22.882 34.655 0 34.655s22.7-34.655 0-34.655zm-44.668 86.022c-35.27 0-35.553 53.837 0 53.837s35.27-53.838 0-53.838zm-235.256 8.337l9.367 16.172-136.506 79.06-.005.003c-4 2.31-4.756 3.894-5.043 5.127-.29 1.233-.127 3.423 1.852 7.027.543.988 1.228 2.044 2.024 3.15l-.416-.193c18.068 27.077 54.2 61.967 89.34 80.934-23.56-10.45-50.91-25.15-72.737-40.756C69.11 407.5 56.51 396.524 49.78 384.272c-3.363-6.124-5.332-13.14-3.673-20.262 1.66-7.123 6.93-13.046 13.9-17.07l136.49-79.053zm-88.068 88.87c18.55 6.4 52.894 25.26 80.154 46.013 13.63 10.375 25.305 20.885 32.086 31.998 3.022 4.952 5.264 10.303 5.2 16.203l-20.626-9.488c-9.495-11.61-23.806-22.776-35.75-29.517-24.435-17.28-54.436-33.15-67.16-37.54l6.096-17.667z",fill:e.color,"fill-opacity":"1"})))})),define("view/icons/Flower",["require","exports","preact"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>i.h("svg",{fill:e.color,stroke:e.color,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},i.h("g",{class:"",transform:"translate(0,0)",style:""},i.h("path",{d:"M256 24c-11.8 0-24.5 10.15-34.6 30.32-7.1 14.37-12.6 33.19-15.1 54.48 4.6 4 9.2 8.2 13.7 12.7 11.4 11.3 21.2 23.3 29.3 35.3 2.2-.1 4.5-.2 6.7-.2 2.4 0 4.8.1 7.2.3 8.1-12.1 17.9-24 29.3-35.4 4.3-4.3 8.8-8.5 13.3-12.3-2.6-21.44-8-40.42-15.2-54.88C280.5 34.15 267.8 24 256 24zM113.2 84.12c-9.2.13-16.33 2.76-20.99 7.44-8.32 8.32-10.16 24.44-3 45.84 7.15 21.4 22.89 46.5 45.59 69.2 8.3 8.3 17 15.7 25.6 22.1 9.5-33.2 35.9-59.3 69.2-68.5-6.4-8.8-13.9-17.6-22.3-26-22.7-22.7-47.8-38.48-69.2-45.64-9.4-3.13-17.8-4.54-24.9-4.44zm286.1 0c-7.1-.1-15.5 1.33-24.8 4.48-21.4 7.14-46.5 22.9-69.2 45.6-8.5 8.5-16 17.3-22.4 26.1 33.2 9.3 59.4 35.5 68.8 68.7 8.8-6.5 17.6-14 26-22.4 22.7-22.7 38.4-47.8 45.6-69.2 7.2-21.4 5.3-37.49-3-45.83-4.7-4.69-11.8-7.33-21-7.45zM256 174.6c-45.1 0-81.4 36.3-81.4 81.4 0 45.1 36.3 81.4 81.4 81.4 45.1 0 81.4-36.3 81.4-81.4 0-45.1-36.3-81.4-81.4-81.4zm-146.2 31.6c-21.67 2.5-40.87 8-55.48 15.2C34.15 231.5 24 244.2 24 256s10.15 24.5 30.32 34.6c14.48 7.2 33.48 12.6 54.88 15.2 4.1-4.7 8.4-9.4 12.9-13.9 11.2-11.2 22.9-20.9 34.7-28.9-.1-2.3-.2-4.6-.2-7 0-2.6.1-5.2.3-7.7-11.9-8-23.6-17.7-34.8-28.9-4.3-4.3-8.4-8.8-12.3-13.2zm292.8 0c-3.9 4.4-7.9 8.8-12.2 13.1-11.4 11.4-23.3 21.2-35.3 29.3.2 2.4.3 4.9.3 7.4 0 2.2-.1 4.5-.2 6.7 11.9 8 23.8 17.8 35.1 29.1 4.6 4.6 8.9 9.2 12.9 13.9 21.3-2.5 40.1-8 54.5-15.1 20.2-10.1 30.3-22.8 30.3-34.6s-10.1-24.5-30.3-34.6c-14.5-7.2-33.6-12.7-55.1-15.2zm-50.8 76.1c-9.1 33.4-35.3 59.8-68.5 69.3 6.3 8.6 13.6 17.2 21.9 25.4 22.7 22.7 47.8 38.4 69.2 45.6 21.4 7.1 37.5 5.3 45.8-3 8.4-8.3 10.2-24.5 3-45.9-7.1-21.4-22.9-46.5-45.6-69.2-8.4-8.4-17-15.8-25.8-22.2zm-191.6.4c-8.6 6.4-17.1 13.7-25.4 21.9-22.7 22.7-38.43 47.8-45.57 69.2-7.21 21.4-5.37 37.5 2.97 45.9 8.3 8.3 24.5 10.2 45.8 2.9 21.4-7.1 46.5-22.9 69.2-45.6 8.2-8.2 15.5-16.7 21.9-25.3-33.3-9.4-59.5-35.7-68.9-69zm88.6 72.4c-8 11.8-17.6 23.5-28.8 34.7-4.5 4.5-9.1 8.8-13.8 12.8 2.5 21.5 8 40.6 15.2 55.1 10.1 20.2 22.8 30.3 34.6 30.3s24.5-10.1 34.6-30.3c7.2-14.6 12.7-33.8 15.2-55.5-4.5-3.9-9-8.1-13.4-12.5-11.2-11.2-20.8-22.8-28.7-34.6-2.6.2-5.1.3-7.7.3-2.4 0-4.8-.1-7.2-.3z","fill-opacity":"1"})))})),define("view/icons/Gear",["require","exports","preact"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>i.h("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},i.h("g",{class:"",transform:"translate(0,0)",style:""},i.h("path",{d:"M87 32v71h18V32H87zm160 0v345h18V32h-18zm160 0v167h18V32h-18zM50 121c-5.14 0-9 3.9-9 9v28c0 5.1 3.86 9 9 9h92c5.1 0 9-3.9 9-9v-28c0-5.1-3.9-9-9-9H50zm37 64v295h18V185H87zm283 32c-5.1 0-9 3.9-9 9v28c0 5.1 3.9 9 9 9h92c5.1 0 9-3.9 9-9v-28c0-5.1-3.9-9-9-9h-92zm37 64v199h18V281h-18zM210 395c-5.1 0-9 3.9-9 9v28c0 5.1 3.9 9 9 9h92c5.1 0 9-3.9 9-9v-28c0-5.1-3.9-9-9-9h-92zm37 64v21h18v-21h-18z",fill:e.color,"fill-opacity":"1"})))})),define("view/icons/Hammer",["require","exports","preact"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>i.h("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:e.color,stroke:e.color},i.h("g",{class:"",transform:"translate(0,0)",style:""},i.h("path",{d:"M266.033 32.42l-85.238 85.238v19.799L285.832 32.42h-19.799zm41.528 3.728L184.523 159.186l168.291 168.29L475.852 204.44 307.56 36.15zm172.02 190.02L374.542 331.205h19.799l85.238-85.238v-19.799zm-239.903 13.627l-9.9 9.9 32.527 32.528 9.9-9.9-32.527-32.528zm-22.627 22.627l-23.528 23.527h47.055l-23.527-23.527zm-41.528 41.527l-27.255 27.256h65.054l27.256-27.256h-65.055zm-45.255 45.256l-27.254 27.254h65.054l27.254-27.254h-65.054zm-27.254 45.254l23.527 23.527 23.527-23.527h-47.054zm-21.729 3.728l-9.898 9.899 32.527 32.527 9.898-9.898-32.527-32.527zm-38.767 18.899l-7.504 22.512 37.388 37.388 22.512-7.504v-12.414L54.93 417.086H42.518z","fill-opacity":"1"})))})),define("view/icons/Hazard",["require","exports","preact"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>i.h("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:e.color,stroke:e.color},i.h("g",{class:"",transform:"translate(0,0)",style:""},i.h("path",{d:"M254.97 34.75c-30.48-.167-59.02 22.12-79.532 62.156-.075.146-.176.26-.25.406L43.063 326.783l-.22.343C18.5 365.413 13.377 401.515 28.47 428.03c15.08 26.498 48.627 40.126 93.5 37.908H387.063c44.887 2.227 78.445-11.404 93.53-37.907 15.09-26.51 9.956-62.595-14.375-100.874l-.22-.375L335.28 98.064c-.06-.12-.124-.225-.186-.344-20.948-40.263-49.626-62.803-80.125-62.97zm.06 18.844c13.576.13 26.453 6.93 38.126 18.343 11.606 11.347 22.554 27.453 33.406 48.344.063.122.125.224.188.345l115.22 201.563c.033.053.058.102.092.156l.125.22c12.92 20.274 21.395 38.06 25.282 53.967 3.91 16.01 3.063 30.648-3.845 42.408-6.908 11.76-19.222 19.533-34.78 23.906-15.444 4.34-34.508 5.656-57.408 4.5H137.625c-24.845 1.258-44.73-.32-60.405-5.125-15.78-4.84-27.68-13.45-33.72-25.69-6.04-12.237-5.862-26.797-1.5-42.436 4.333-15.535 12.815-32.608 24.875-51.53l.22-.377L183.562 120c.08-.157.17-.28.25-.438C194.51 98.644 205.32 82.6 216.875 71.376c11.642-11.307 24.58-17.913 38.156-17.78zm47.657 62.093l-28.53 224.032h-41.844L204.438 120.5c-1.404 2.556-2.81 5.205-4.22 7.97l-.093.218-.125.218-116.938 202.97-.093.187-.126.187C71.28 350.346 63.598 366.226 60 379.125c-3.598 12.9-3.108 22.322.25 29.125 3.358 6.803 9.925 12.28 22.47 16.125 12.542 3.845 30.67 5.547 54.405 4.313l.25-.032h234.313l.25.03c21.85 1.138 39.308-.28 51.875-3.81 12.566-3.533 19.822-8.827 23.687-15.407 3.865-6.58 4.978-15.545 1.813-28.5-3.166-12.958-10.732-29.374-23.094-48.72l-.126-.188-.125-.218-115.658-202.28-.093-.158-.064-.187c-2.5-4.828-4.99-9.326-7.47-13.532zM231.28 361.875h43.907v43.906H231.28v-43.905z","fill-opacity":"1"})))})),define("view/icons/Help",["require","exports","preact"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>i.h("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},i.h("g",{class:"",transform:"translate(0,0)",style:""},i.h("path",{d:"M256 16C123.45 16 16 123.45 16 256s107.45 240 240 240 240-107.45 240-240S388.55 16 256 16zm0 60c99.41 0 180 80.59 180 180s-80.59 180-180 180S76 355.41 76 256 156.59 76 256 76zm0 30c-66.274 0-120 40.294-120 90 0 30 60 30 60 0 0-16.57 26.862-30 60-30 33.138 0 60 13.43 60 30s-30 15-60 30c-1.875.938-3.478 2.126-4.688 3.28C226.53 244.986 226 271.926 226 286v15c0 16.62 13.38 30 30 30 16.62 0 30-13.38 30-30v-15c0-45 90-40.294 90-90s-53.726-90-120-90zm0 240a30 30 0 0 0-30 30 30 30 0 0 0 30 30 30 30 0 0 0 30-30 30 30 0 0 0-30-30z",fill:e.color,"fill-opacity":"1"})))})),define("view/icons/Menu",["require","exports","preact"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>i.h("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},i.h("g",{class:"",transform:"translate(0,0)",style:""},i.h("g",{class:"",transform:"translate(0,0)",style:""},i.h("path",{d:"M32 96v64h448V96H32zm0 128v64h448v-64H32zm0 128v64h448v-64H32z",fill:e.color,"fill-opacity":"1"}))))})),define("view/icons/MineralHeart",["require","exports","preact"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>i.h("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},i.h("g",{class:"",transform:"translate(0,0)",style:""},i.h("path",{d:"M182.344 19.906L28.78 173.47 255.626 487.5 481.938 174 328.375 20.47l-72.75 72.75-73.28-73.314zm-.938 27.75L188 54.28l67.625 67.626L323.25 54.28l6.625-6.624 6.594 6.625L452.56 170.376l5.625 5.625-4.656 6.438-190.31 263.78-7.595 10.5-7.563-10.5L57.72 182.44 53.062 176l5.624-5.625L174.78 54.28l6.626-6.624zm0 26.438L77.53 177.97l178.095 246.81L433.72 177.97 329.874 74.093l-61 60.97 66 66 6.594 6.592-6.595 6.625-78.25 78.25-6.625 6.626-6.594-6.625-78.25-78.25 13.188-13.218L250 272.72l65.063-65.033-59.407-59.406-.03.032-6.595-6.593-67.624-67.626zm1.406 24.78l109.032 109.032-13.22 13.22-109.03-109.032 13.22-13.22zm147.97 0l81.437 81.407L399 193.5l-81.406-81.406 13.187-13.22z",fill:e.color,"fill-opacity":"1"})))})),define("view/icons/Muffin",["require","exports","preact"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>i.h("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},i.h("g",{class:"",transform:"translate(0,0)",style:""},i.h("path",{d:"M236.854 43.83c-20.16 13.472-36.99 24.95-45.3 34.426-4.717 5.377-6.786 9.82-7.056 13.88-.27 4.057 1.052 8.634 5.95 14.97l1.128 1.458c18.455-3.476 39.757-5.143 62.834-4.593 31.04.74 60.438 5.363 85.147 12.778-1.497-2.823-2.983-5.458-4.604-7.744-5.866-8.274-11.98-13.49-30.498-12.436l-.514.03-.51-.037c-32.236-2.307-48.314-12.643-56.16-25.792-5.796-9.718-7.625-19.235-10.416-26.938zm14.03 76.106c-33.25-.134-62.172 4.695-82.003 12.46-10.576 4.142-18.52 9.15-23.18 14.196-4.658 5.047-5.933 9.63-5.083 13.92.713 3.6 3.05 7.485 7.738 11.78 25.135-9.197 55.557-16.22 89.254-20.02 48.777-5.503 95.2-3.222 131.65 5.238 7.676 1.78 14.91 3.834 21.654 6.174-1.476-3.516-4.52-7.305-9.797-11.487-6.712-5.317-16.727-10.752-29.053-15.44-24.65-9.373-58.415-15.87-94.474-16.728-2.254-.054-4.49-.086-6.705-.094zm43.085 44.937c-16.56-.05-33.91.863-51.58 2.856-47.114 5.313-87.534 17.302-114.218 31.905-13.342 7.3-23.203 15.28-28.82 22.926-4.695 6.39-6.384 12.186-5.698 17.534 3.86-1.397 7.875-2.74 12.057-4.028 39.064-12.02 91.923-19.22 150.29-19.22 58.367 0 111.226 7.2 150.29 19.22 1.26.388 2.505.782 3.737 1.18 4.37-3.597 7.91-7.223 10.522-10.777 5.616-7.647 6.945-14.448 5.03-20.64s-7.217-12.243-17.025-18.148c-9.808-5.906-23.772-11.197-40.578-15.098-21.008-4.876-46.41-7.63-74.008-7.71zM256 231.153c-56.508 0-107.65 7.127-143.867 18.27-18.11 5.573-32.444 12.176-41.77 18.96-9.325 6.784-13.42 13.294-13.42 19.617s4.095 12.833 13.42 19.617c.07.05.144.1.213.15l57.447-28.722 63.22 32.01 64.827-32.012 62.36 32.012 65.615-31.977 57.38 28.69c.068-.05.143-.1.212-.15 9.325-6.785 13.42-13.295 13.42-19.618 0-6.323-4.095-12.833-13.42-19.617-9.326-6.784-23.66-13.387-41.77-18.96-36.218-11.143-87.36-18.27-143.867-18.27zm127.955 65.77L327.51 324.43 311.938 449l-15.875-2 15.205-121.635-55.338-28.408-55.332 27.326L215.938 447l-15.875 2-15.42-123.352-56.666-28.693-54.022 27.012L133.605 488h244.79l59.65-164.033-54.09-27.045z",fill:e.color,"fill-opacity":"1"})))})),define("view/icons/Necklace",["require","exports","preact"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>i.h("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},i.h("g",{class:"",transform:"translate(0,0)",style:""},i.h("path",{d:"M29.018 18.875c-2.63 10.297.047 21.72 8.044 29.72 10.035 10.034 25.46 11.696 37.29 5 5.914 5.346 11.686 10.373 17.357 15.12-.338 1.818-.522 3.687-.522 5.597 0 17.024 14.008 31 31.03 31 4.917 0 9.576-1.17 13.72-3.24 5.755 3.91 11.562 7.715 17.482 11.48-.474 2.142-.732 4.36-.732 6.635 0 17.024 14.008 31 31.03 31 7.577 0 14.55-2.772 19.964-7.345l13.873 8.125c-.263 1.535-.414 3.113-.414 4.732v38.904L114.07 255.27v160.064l138.284 80.053 138.283-80.053V255.27l-104.047-60.233V156.7c0-.983-.067-1.946-.172-2.897 5.393-3.07 10.655-6.08 15.697-8.994 5.226 3.992 11.736 6.377 18.762 6.377 17.023 0 31-13.976 31-31 0-1.867-.176-3.695-.498-5.476 6.047-3.987 12.012-8.058 17.978-12.298 3.97 1.855 8.38 2.9 13.02 2.9 17.023 0 31.03-13.976 31.03-31 0-1.973-.194-3.903-.553-5.78 5.273-4.45 10.697-9.14 16.318-14.116 11.6 5.714 26.135 3.778 35.736-5.822 7.998-7.998 10.675-19.42 8.045-29.72h-20.413c4.018 4.888 3.736 11.916-.85 16.5-4.887 4.888-12.55 4.89-17.437 0-4.585-4.585-4.867-11.614-.85-16.5h-20.414c-1.915 7.5-1 15.592 2.72 22.528-4.12 3.636-8.123 7.105-12.034 10.434-5.575-5.288-13.083-8.555-21.297-8.555-17.024 0-31.03 14.01-31.03 31.032 0 5.45 1.438 10.583 3.948 15.05-4.245 2.958-8.5 5.84-12.797 8.673-5.6-5.48-13.24-8.88-21.62-8.88-17.025 0-31.032 14.01-31.032 31.032 0 3.166.484 6.225 1.383 9.11-4.23 2.445-8.744 5.028-13.247 7.605-1.028-.994-2.112-1.91-3.246-2.716-6.692-4.768-14.72-6.882-22.714-7.014-7.996-.132-16.15 1.718-22.97 6.504-.807.565-1.586 1.186-2.337 1.85-4.367-2.573-8.764-5.164-12.947-7.622.642-2.47.984-5.056.984-7.716 0-17.024-14.007-31.032-31.03-31.032-7.977 0-15.29 3.075-20.812 8.094-4.47-2.838-8.894-5.69-13.248-8.596 2.267-4.297 3.56-9.178 3.56-14.34 0-17.025-13.977-31.033-31-31.033-8.26 0-15.804 3.304-21.388 8.642-4.515-3.827-9.1-7.833-13.79-12.067 3.063-6.575 3.715-14.03 1.94-20.98H68.568c4.018 4.887 3.736 11.915-.85 16.5-4.887 4.887-12.55 4.888-17.437 0-4.584-4.586-4.865-11.615-.848-16.5H29.018zm93.2 43.094c6.924 0 12.313 5.42 12.313 12.343s-5.387 12.312-12.31 12.312c-6.926 0-12.345-5.39-12.345-12.313 0-6.923 5.42-12.343 12.344-12.343zm260.157 0c6.924 0 12.344 5.42 12.344 12.343s-5.42 12.312-12.345 12.312c-6.924 0-12.344-5.39-12.344-12.313 0-6.923 5.42-12.343 12.345-12.343zM183.72 107.843c6.922 0 12.343 5.42 12.343 12.344 0 6.923-5.42 12.312-12.344 12.312-6.926 0-12.345-5.39-12.345-12.313 0-6.923 5.42-12.343 12.344-12.343zm137.155 0c6.924 0 12.313 5.42 12.313 12.344 0 6.923-5.39 12.312-12.313 12.312-6.924 0-12.344-5.39-12.344-12.313 0-6.923 5.42-12.343 12.345-12.343zm-69.164 38.013c4.695.078 9.355 1.536 12.18 3.55 2.826 2.012 4.01 3.805 4.01 7.292v27.52l-15.546-9-16.526 9.565V156.7c0-4.09 1.258-5.835 3.953-7.725 2.696-1.89 7.237-3.195 11.93-3.118zm-8.122 56.03v32.728l-74.182 43.21-28.558-16.462 102.74-59.476zm18.687.67l102.16 59.138-28.624 16.502-73.533-42.83-.002-32.81zm-9.988 48.62l72.256 42.085-.002 84.316-72.253 42.086-72.256-42.086.003-84.314 72.254-42.088zm.465 18.33l-56.883 98.15v.724l56.566 32.977L309 368.38v-66.085l-56.248-32.79zm-119.994 8.764l28.586 16.48v84.027l-28.586 16.48V278.272zm239.19.668l-.003 115.648-28.715-16.553v-82.54l28.717-16.555zM333.493 393.99l28.414 16.38-99.63 57.677v-32.574l71.216-41.483zm-161.77.375l71.864 41.86v32.494l-100.21-58.013 28.345-16.342z",fill:e.color,"fill-opacity":"1"})))})),define("view/icons/Potion",["require","exports","preact"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>i.h("svg",{fill:e.color,stroke:e.color,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},i.h("g",{class:"",transform:"translate(0,0)",style:""},i.h("path",{d:"M94.055 21.9L18.998 96.96l42.727 23.6-26.98 26.952L142.35 212.39c-40.443 70.148-30.72 161.07 29.2 220.958 71.605 71.606 187.737 71.587 259.356 0 71.62-71.587 71.642-187.654.037-259.22-59.915-59.878-150.896-69.57-221.084-29.177L144.95 37.415l-8.44 8.432-18.588 18.57L94.055 21.9zm47.224 45.598l62.337 103.275 8.098-5.248c44.21-28.663 99.014-34.044 147.166-16.078-1.16-.026-2.328-.04-3.503-.04-38.988 0-70.594 14.807-70.594 33.073 0 18.27 31.606 33.075 70.594 33.075 31.53 0 58.225-9.684 67.287-23.05 15.942 17.34 27.492 37.224 34.65 58.253-7.76-3.387-18.28-6.706-30.902-9.563-31.383-7.1-75.547-11.615-124.305-11.615-48.757 0-92.92 4.514-124.304 11.615-13.71 3.102-24.997 6.75-32.893 10.438 4.34-12.997 10.343-25.568 18.018-37.383l5.263-8.104-103.33-62.3 13.894-13.88 46.937 25.923 27.914-27.915-26.18-46.635 13.855-13.842zm-1.087 201.287c.482.28.982.56 1.506.84 7.89 4.22 20.41 8.487 36.103 12.037 31.383 7.1 75.547 11.615 124.304 11.615 48.758 0 92.922-4.514 124.305-11.615 15.687-3.55 28.203-7.813 36.094-12.033 1.236 5.837 2.153 11.727 2.746 17.643-9.432 4.277-21.204 7.893-35.074 11.032-33.205 7.513-78.27 12.037-128.07 12.037-49.802 0-94.866-4.524-128.07-12.037-14.67-3.32-27-7.17-36.69-11.776.625-5.952 1.57-11.876 2.845-17.745z",fill:e.color,"fill-opacity":"1"})))})),define("view/icons/Purse",["require","exports","preact"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>i.h("svg",{fill:e.color,stroke:e.color,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},i.h("g",{class:"",transform:"translate(0,0)",style:""},i.h("path",{d:"M149.25 18.313L168.156 115c-.274.174-.54.356-.812.53L94 97.876l17.47 74.22c-.655 1.046-1.306 2.093-1.94 3.155l-91.28-8.875 73 51.156c-.808 2.82-1.546 5.658-2.22 8.532l-64.53 40 63.906 39.22c.28 1.282.57 2.57.875 3.843l-46.468 36.563 55.97-7.907c3.506 8.184 7.588 16.056 12.218 23.564l-17 72.344 64.344-15.47-9.094 75.563 52.188-58.06c7.553 2.82 15.352 5.14 23.343 6.936l37.407 61.094L299 443.656c5.876-1.156 11.655-2.6 17.313-4.312l29.406 31.03-5.47-40.187c7.902-3.694 15.49-7.96 22.72-12.718l67.405 16.217-15.906-67.656c5.62-8.506 10.555-17.504 14.686-26.936l47.563 6.594-39.095-30.438c1.175-4.23 2.192-8.526 3.063-12.875l59.187-36.313-59.75-37.03c-1.686-7.793-3.87-15.397-6.53-22.782l59.5-47.656-73.94 17.03c-1.645-2.777-3.367-5.507-5.155-8.186l16.375-69.563-70.344 16.938c-5.638-3.56-11.49-6.824-17.53-9.75l3.22-63.376-37.22 51c-2.527-.64-5.088-1.215-7.656-1.75l-38.656-63.156-39.282 64.19c-4.772 1.127-9.475 2.438-14.094 3.936L149.25 18.312zm115 88.874c88.423 0 159.875 71.484 159.875 159.907 0 88.423-71.452 159.875-159.875 159.875s-159.906-71.453-159.906-159.876 71.483-159.906 159.906-159.906zm49.03 44.157c-5.278.115-10.207 2.383-16.936 9.562l-6.563 7-6.81-6.72c-7.39-7.28-13.218-9.29-19.126-9.03-5.91.26-12.856 3.336-20.625 9.625l-6.22 5.032-5.906-5.343c-8.9-8.053-16.485-10.44-23.75-10.064-5.288.273-10.775 2.265-16.25 5.75l40.97 73.688c15.445 9.445 47.003 13.015 68.717 2.094l39.626-73.375c-7.51-3.063-14.258-6.202-20.094-7.407-2.112-.436-4.07-.755-5.968-.812-.356-.01-.71-.008-1.063 0zm-90 96.187c-18.017 12.748-32.488 34.71-38.093 66.876-5.436 31.197 3.127 52.266 18.282 66.625 15.154 14.36 37.9 21.77 61 21.47 23.098-.3 46.134-8.31 61.624-22.938 15.49-14.626 24.25-35.456 19.28-65.218-5.132-30.736-18.383-52.115-35.155-65.063-28.498 15.077-64.154 11.872-86.94-1.75z","fill-opacity":"1"})))})),define("view/icons/RangedMulti",["require","exports","preact"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>i.h("svg",{fill:e.color,stroke:e.color,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},i.h("g",{class:"",transform:"translate(0,0) rotateZ(-90deg)",style:""},i.h("path",{d:"M136.564 31.01l239.67 149.595c-12.418 21.234-20.756 28.302-45.027 46.936l156.3-26.33-85.603-125.474c4.936 24.85 8.85 38.5.75 60.49L136.568 31.01h-.004zM21.524 42.75l83.13 325.893c-21.017 5.232-30.98 3.262-58.875-3.96l124.046 113.45 13.426-166.844c-10.836 23.322-15.94 37.197-34.342 46.82L21.523 42.75zm64.353.215l252.2 353.16c-23.285 16.947-36.38 19.583-73.83 24.9l200.66 71.74L407.7 286.944c-2.477 33.743-2.313 53.14-20.37 74.09L85.877 42.965z",fill:e.color,"fill-opacity":"1"})))})),define("view/icons/RangedNormal",["require","exports","preact"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>i.h("svg",{fill:e.color,stroke:e.color,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},i.h("g",{class:"",transform:"translate(0,0)",style:""},i.h("path",{d:"M492.656 20.406l-118.594 56.22L413.875 86l-86.97 86.97-305.5 259.374.69.687 104.75-47.467-46.376 105.843.905.906 272.5-319.875 73.22-73.218 9.342 39.81 56.22-118.624zm-473.25.063c-1.347 23.43 5 39.947 16.563 52.218l24.093 302.28 17.562-14.874-21.72-272.438c57.975 31.954 169.096 25.165 216.907 106.72l66.625-56.564 1.22-1.218C292.74 38.666 86.01 99.716 19.406 20.47zm359.531 151.56l-1.156 1.157-57.25 67.188c82.006 47.945 75.587 159.267 107.283 218.03l-272.157-24.5-14.812 17.408 301.562 27.125c12.48 12.283 29.4 19.084 53.688 17.687-79.95-67.2-18.36-275.754-117.156-324.094z",fill:e.color,"fill-opacity":"1"})))})),define("view/icons/Ring",["require","exports","preact"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>i.h("svg",{fill:e.color,stroke:e.color,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},i.h("g",{class:"",transform:"translate(0,0)",style:""},i.h("path",{d:"M201.837 53.087L177.547 21h55.676zM278.766 21l30.82 31.465L333.065 21h-54.298zm12.428 38.12L256 23.18l-35.25 35.985h70.5zm82.091 0l-23.511-30.855-23.003 30.9h46.57zM161.096 28.683L138.5 59.188h45.746zm51.248 48.242L256 196.821l43.69-119.896h-87.38zm-73.166 0l90.384 99.017-36.153-99.017h-54.231zm233.712 0h-54.23l-36.076 99.017zm-19.455 48.142l-29.059 31.838a154.298 154.298 0 0 1 85.786 138.119C410.14 380.008 340.995 449.197 256 449.197s-154.14-69.144-154.14-154.14a154.298 154.298 0 0 1 85.787-138.119L158.588 125.1a196.044 196.044 0 0 0-98.53 169.924C60.057 403.056 147.955 491 256 491c108.044 0 195.943-87.899 195.943-195.943a196.044 196.044 0 0 0-98.542-169.99z",fill:e.color,"fill-opacity":"1"})))})),define("view/icons/Shield",["require","exports","preact"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>i.h("svg",{fill:e.color,stroke:e.color,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},i.h("path",{d:"M0 0h512v512H0z",fill:"rgba(0, 0, 0, 0)","fill-opacity":"0"}),i.h("g",{class:"",transform:"translate(0,0)",style:""},i.h("path",{d:"M256 16c25 24 100 72 150 72v96c0 96-75 240-150 312-75-72-150-216-150-312V88c50 0 125-48 150-72z",fill:e.color,"fill-opacity":"1"})))})),define("view/icons/Signal",["require","exports","preact"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>i.h("svg",{fill:e.color,stroke:e.color,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},i.h("g",{class:"",transform:"translate(0,0)",style:""},i.h("path",{d:"M138.188 38.875C67.478 79.483 19.624 155.295 19.624 242.688c0 87.858 48.383 163.966 119.72 204.406-47.45-46.694-78.25-120.545-78.25-204.406 0-83.27 30.218-157.06 77.093-203.813zm237.687 2.313c45.574 46.86 74.75 119.59 74.75 201.5 0 82.128-29.53 154.623-75.313 201.468C444 403.043 490.344 328.56 490.344 242.686c0-85.87-46.022-160.33-114.47-201.5zm-179.28 46.718c-61.425 24.617-105.126 84.56-105.126 154.78 0 70.413 43.995 130.262 105.686 154.75-41.348-30.252-69.47-88.174-69.47-154.748 0-66.367 27.774-124.45 68.908-154.782zm142.5 8.78c35.18 31.963 57.81 85.566 57.81 146 0 61.134-23.1 114.77-58.967 146.595 52.006-28.25 87.593-83.246 87.593-146.592 0-62.886-35.052-117.566-86.436-146zm-115.22 44.064c-42.65 14.34-73.125 54.454-73.125 101.938 0 47.91 30.968 88.504 74.22 102.5-27.047-18.556-45.97-57.28-45.97-102.5 0-44.573 18.457-83.072 44.875-101.938zm78.094 3.344c23.836 19.926 39.342 56.72 39.342 98.594 0 42.514-15.99 79.48-40.437 99.187 38.416-16.463 65.375-54.746 65.375-99.188 0-44-26.476-81.867-64.28-98.593zM262 211.344c-20.3 0-36.75 16.45-36.75 36.75 0 15.484 9.573 28.743 23.125 34.156v213.125h27.25V282.25c13.558-5.41 23.125-18.668 23.125-34.156 0-20.3-16.45-36.75-36.75-36.75z","fill-opacity":"1"})))})),define("view/icons/Snack",["require","exports","preact"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>i.h("svg",{fill:e.color,stroke:e.color,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},i.h("g",{class:"",transform:"translate(0,0)",style:""},i.h("path",{d:"M132.684 31.388a1.443 1.443 0 0 0-.29.004c-.396.048-.768.25-1.398.609-1.26.719-3.215 2.597-5.039 5.484-3.648 5.776-6.593 15.148-7.516 22.34-2.004 15.623 3.42 23.692 13.293 31.436 5 3.92 11.236 7.328 17.914 10.515-3.23-13.668-3.189-27.344-3.732-38.859-.419-8.882-1.232-16.509-3.107-21.623-1.853-5.052-3.884-7.627-8.987-9.62-.472-.156-.833-.262-1.138-.286zm111.212 11.478c-27.446.122-54.797 1.187-81.492 2.78.891 5.354 1.23 10.856 1.492 16.423.048 1.01.092 2.025.137 3.037 21.693 20.288 34.01 21.811 44.826 20.485 5.516-.677 10.93-2.497 17.13-3.977.993-.237 2.029-.455 3.081-.658 8.481-8.258 19.868-14.662 33.342-20.033A61.785 61.785 0 0 1 287.7 56.56c8.175.303 15.944 2.17 22.854 5.03 6.499 2.69 12.318 6.169 17.218 10.23 2.24-.62 4.518-.928 6.819-.967 7.174-.12 14.565 2.29 21.66 5.385 11.352 4.952 22.62 12.632 31.791 20.908 2.124 1.917 4.14 3.82 6.033 5.737l16.018-3.11 2.63-1.925c13.21-9.668 22.782-20.853 30.01-31.409-56.662-17.009-121.396-23.16-186.43-23.564-4.136-.026-8.271-.028-12.406-.01zm-142.01 7.254a4102.267 4102.267 0 0 0-36.077 3.254c1.134 11.198 6.268 21.673 18.056 32.58l3.17 2.934 22.328 4.808c-6.756-9.505-10.64-21.648-8.777-36.162.309-2.406.74-4.894 1.3-7.414zm183.048 24.371c-5.166.056-10.503 1.019-15.856 3.153C255.233 83.162 245 89.696 239.15 96.478c-5.85 6.78-7.914 13.268-6.27 22.378.093.51.196 1.012.302 1.51l33.588 7.235 69.66-13.526c-4.783-5.828-9.006-12.019-12.248-18.79-2.489-5.199-10.313-12.84-20.512-17.061-5.1-2.111-10.69-3.475-16.533-3.702-.73-.028-1.465-.039-2.203-.03zm57.095 15.85c3.411 5.378 7.23 10.978 11.621 16.22a150.804 150.804 0 0 0 3.252 3.54l15.147-2.94c-7.09-5.78-15.437-11.126-22.996-14.424a45.357 45.357 0 0 0-7.024-2.396zm-174.496.594c.94 5.71 2.199 11.12 3.799 16.109l43.184 9.303a43.858 43.858 0 0 1 1.423-13.678 70.877 70.877 0 0 1-4.888.787c-11.8 1.447-26.322-.936-43.518-12.521zM91.93 108.356l-8.383 76.563 94.193 2.305c21.335-19.254 48.606-30.866 78.479-30.866 31.857 0 60.758 13.206 82.652 34.805l77.983 1.908-5.041-75.295-145.231 28.198zm164.289 66.002c-58.224 0-106.217 52.74-106.217 119.13 0 66.39 47.993 119.128 106.217 119.128 58.223 0 106.217-52.739 106.217-119.129 0-66.39-47.994-119.129-106.217-119.129zM75.785 202.733l-6.281 62.846C63.95 321.138 77.74 377.93 99.787 435.145l1.66 4.31-2.531 3.86c-7.597 11.588-19.783 21.862-33.562 31.42 14.767 1.264 29.76 2.284 44.917 3.102l22.924-29.006 14.121 11.16-14.927 18.89c14.169.58 28.459.997 42.832 1.278l1.113-25.775 17.984.777-1.093 25.283c16.038.191 32.158.21 48.296.127v-25.629h18v25.5c16.873-.173 33.736-.457 50.543-.818l-3.898-24.117 17.77-2.873 4.296 26.58c16.438-.401 32.687-.872 48.893-1.346l-13.9-23.219 15.445-9.246 19.074 31.867c16.498-.494 32.835-.987 48.902-1.44-12.73-11.767-25.39-24.23-32.433-39.46l-1.111-2.402.367-2.623s12.397-89.64 12.533-132.92c.073-23.34-2.226-55.719-5.145-87.25l-66.455-1.625c16.34 23.275 26.034 52.45 26.034 83.937 0 75.138-55.176 137.13-124.217 137.13-69.042 0-124.217-61.992-124.217-137.13 0-33.654 11.075-64.665 29.502-88.656zm237.53 41.409c6.184-.143 12.236 2.243 17.081 5.77 6.891 5.014 12.332 12.414 15.83 21.1 6.998 17.373 5.063 41.493-15.263 57.376-17.671 13.808-38.32 16.338-57.145 10.445a79.905 79.905 0 0 1-6.324-2.295c-12.764 3.93-27.601 9.065-42.97 9.707-16.562.692-34.526-5.338-46.34-23.398-5.325-8.14-10.014-18.55-11.545-29.149-.766-5.3-.78-10.759 1.148-16.115 1.929-5.356 6.402-10.43 12.367-12.79l.145-.056.146-.052a32.522 32.522 0 0 1 10.29-1.885c6.457-.127 12.625 1.658 17.83 4.586 7.93 4.46 14.327 11 20.703 17.789.692.737 1.384 1.481 2.076 2.222 29.671 1.337 40.027-5.507 47.39-13.54 3.755-4.098 6.69-8.995 10.442-14.147 3.752-5.152 8.697-10.777 16.314-13.93a21.561 21.561 0 0 1 7.824-1.638zm1.013 17.925a4.529 4.529 0 0 0-1.955.346c-3.299 1.365-5.61 3.723-8.648 7.895-3.039 4.171-6.427 9.934-11.721 15.71-8.033 8.765-20.623 16.386-41.225 18.745 7.154 6.034 14.434 10.94 21.575 14.23l13.15 4.242c11.839 2.249 22.923-.082 34.375-9.03 14.157-11.063 14.339-24.833 9.652-36.468-2.343-5.817-6.195-10.7-9.726-13.271-2.318-1.687-4.071-2.343-5.477-2.399zm-122.54 18.5c-1.556.022-3.21.362-5.126 1.028-1.288.523-1.468.776-1.94 2.086-.49 1.365-.757 4.062-.269 7.443.977 6.761 4.824 15.8 8.793 21.867 8.623 13.182 17.991 15.796 30.527 15.272 6.35-.266 13.304-1.726 20.454-3.641-11.335-8.295-20.188-18.721-28.08-27.125-6.088-6.482-11.659-11.753-16.407-14.424-2.374-1.335-4.366-2.162-6.426-2.422a10.956 10.956 0 0 0-1.527-.084z","fill-opacity":"1"})))})),define("view/icons/Soda",["require","exports","preact"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>i.h("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},i.h("g",{class:"",transform:"translate(0,0)",style:""},i.h("path",{d:"M171 42l-20 48h210l-20-48H171zm-19.45 65.55v296.9h208.9v-296.9h-208.9zM151 422l20 48h170l20-48H151z",fill:e.color,"fill-opacity":"1"})))})),define("view/icons/Speaker",["require","exports","preact"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>i.h("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},i.h("g",{class:"",transform:"translate(0,0)",style:""},i.h("path",{d:"M275.5 96l-96 96h-96v128h96l96 96V96zm51.46 27.668l-4.66 17.387c52.066 13.95 88.2 61.04 88.2 114.945 0 53.904-36.134 100.994-88.2 114.945l4.66 17.387C386.81 372.295 428.5 317.962 428.5 256c0-61.963-41.69-116.295-101.54-132.332zm-12.425 46.365l-4.658 17.387C340.96 195.748 362.5 223.822 362.5 256s-21.54 60.252-52.623 68.58l4.658 17.387C353.402 331.552 380.5 296.237 380.5 256c0-40.238-27.098-75.552-65.965-85.967zm-12.424 46.363l-4.657 17.387C307.55 236.49 314.5 245.547 314.5 256s-6.95 19.51-17.047 22.217l4.658 17.387c17.884-4.792 30.39-21.09 30.39-39.604 0-18.513-12.506-34.812-30.39-39.604z",fill:e.color,"fill-opacity":"1"})))})),define("view/icons/Spear",["require","exports","preact"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>i.h("svg",{fill:e.color,stroke:e.color,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},i.h("path",{d:"M0 0h512v512H0z",fill:"rgba(0, 0, 0, 0)","fill-opacity":"0"}),i.h("g",{class:"",transform:"translate(0,0)",style:""},i.h("path",{d:"M20.563 20.844v44.593l73.124 72.907c4.878-7.945 10.962-15.65 18.126-22.813 7.152-7.15 14.825-13.194 22.75-18.06L58.156 20.843H20.563zm159.812 81.062c-.566-.005-1.138.014-1.72.03-3.097.097-6.42.522-9.905 1.283-13.942 3.043-29.973 11.753-43.75 25.53-13.777 13.777-22.487 29.808-25.53 43.75-2.905 13.296-.81 23.935 5.28 30.78 5.4-20.354 17.587-41.18 35.594-59.186 18.024-18.024 38.876-30.203 59.25-35.594-4.718-4.223-11.25-6.526-19.22-6.594zm40.47 22.156c-3.977.096-8.19.624-12.595 1.563-17.62 3.755-37.603 14.572-54.72 31.688C136.417 174.428 125.6 194.38 121.845 212c-3.755 17.62-.633 32.086 8.47 41.188.905.906 1.894 1.744 2.905 2.53 4.635-31.49 18.506-59.084 39.436-80 20.69-20.674 47.894-34.465 78.938-39.25-.678-.837-1.393-1.642-2.156-2.405-6.827-6.827-16.668-10.288-28.594-10zm55.343 28.657c-36.56.167-68.017 13.906-90.344 36.218-2.24 2.24-4.375 4.58-6.438 7 22.43 11.654 37.317 26.57 46.313 43.062 10.575 19.392 12.977 40.393 12.155 60.03l-18.688-.78c.736-17.565-1.448-34.863-9.875-50.313-7.466-13.688-19.874-26.317-41.03-36.687-18.155 29.68-24.497 68.66-12.657 111.844 36.472 3.146 72.888 24.29 86.375 66.25 45.025-6.375 119.336 26.557 127.22 64.25 39.96 18.477 84.588 33.368 125.717 45.094-11.33-35.873-24.38-81.097-40.718-116.97-34.53-21.506-49.702-62.82-46.626-106.343-40.336-30.105-70.18-69.518-74.78-112.625-19.782-6.95-38.806-10.113-56.627-10.03zm-9.532 45.5c10.293 52.54 58.667 86.17 100.625 93.718l-3.31 18.375c-11.09-1.996-22.478-5.503-33.595-10.438-6.93 19.615 1.34 41.252 19.75 60 19.638 19.998 50.412 34.906 81.094 35.97l-.658 18.686c-36.154-1.25-70.657-18.014-93.78-41.56-.98-1-1.936-2.004-2.876-3.033-15.47-12.362-27.615-16.12-38.47-15.5-10.918.624-21.598 6.012-33.03 15.063l-11.594-14.656c13.043-10.327 27.295-18.134 43.563-19.063 6.378-.363 12.9.373 19.563 2.283-5.637-15.188-6.428-31.344-.25-46.813-31.03-18.508-57.392-48.844-65.344-89.438l18.312-3.593z","fill-opacity":"1"})))})),define("view/icons/Star",["require","exports","preact"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>i.h("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},i.h("g",{class:"",transform:"translate(0,0)",style:""},i.h("path",{d:"M256 38.013c-22.458 0-66.472 110.3-84.64 123.502-18.17 13.2-136.674 20.975-143.614 42.334-6.94 21.358 84.362 97.303 91.302 118.662 6.94 21.36-22.286 136.465-4.116 149.665 18.17 13.2 118.61-50.164 141.068-50.164 22.458 0 122.9 63.365 141.068 50.164 18.17-13.2-11.056-128.306-4.116-149.665 6.94-21.36 98.242-97.304 91.302-118.663-6.94-21.36-125.444-29.134-143.613-42.335-18.168-13.2-62.182-123.502-84.64-123.502z",fill:e.color,"fill-opacity":"1"})))})),define("view/icons/SwingFinisher",["require","exports","preact"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>i.h("svg",{fill:e.color,stroke:e.color,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},i.h("g",{class:"",transform:"translate(0,0)",style:""},i.h("path",{d:"M47.688 19.156c-.376-.003-.748.016-1.126.032-6.044.245-12.252 2.815-17.28 7.843-10.057 10.058-10.297 24.924-1.72 33.5 3.94 3.94 9.21 6.034 14.72 6.157l3.062-3.093L67.5 41.437l1.406-1.406c-.123-5.515-2.217-10.78-6.156-14.718-4.022-4.02-9.423-6.114-15.063-6.156zm28.28 40.25L63.063 72.313c13.653 33.245 37.167 56.274 67.438 73.718l18.75-18.75C130.385 97.324 105.988 74.1 75.97 59.407zm129.344 38.25L99.906 203.094l23.844 23.844c29.782-40.624 65.415-75.33 105.5-105.344l-23.938-23.938zm12.813 56.406c-22.467 18.703-43.183 39.077-61.875 61.438 34.053 43.905 76.278 82.775 122.406 112.375-20.858 1.702-40.402 1.278-58.562-1.28 34.15 24.845 71.227 45.65 110.25 61.155-28.237 2.647-54.58 2.25-78.97-1.188 72.535 52.773 155.472 91.19 243.064 107.47-20.59-94.733-58.107-178.44-109.844-249.094 3.565 24.952 4.537 52.326 2.47 82.312-16.075-41.127-36.744-78.823-61.564-112.72 2.653 18.574 3.49 38.852 2.22 60.94-29.64-47.287-66.485-88.237-109.595-121.408z",fill:e.color,"fill-opacity":"1"})))})),define("view/icons/SwingNormal",["require","exports","preact"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>i.h("svg",{fill:e.color,stroke:e.color,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},i.h("g",{class:"",transform:"translate(0,0)",style:""},i.h("path",{d:"M146.326 6.15l87.813 128.725-60.87-39.916 34.925 62.864L38.56 48.06h-.003c40.207 71.33 82.046 134.913 129.23 191.764L303.94 103.67c-45.164-37.052-96.674-69.324-157.614-97.52zm347.145 9.496L372.983 61.713l-214.59 214.09 13.213 13.215L383.367 77.75l78.078-29.85-29.402 78.56-211.746 211.25 13.213 13.214 214.61-214.106 45.35-121.172zM407.177 89.13l-259.95 259.95c-11.956-17.32-11.687-40.444.25-57.764l-31.26-31.255c-28.637 34.832-28.588 85.102.167 119.864L52.336 443.97c-2.528-.95-5.184-1.43-7.842-1.43-5.74 0-11.476 2.216-15.908 6.647-8.864 8.865-8.866 22.953 0 31.82 8.864 8.863 22.954 8.863 31.818 0 6.512-6.513 8.234-15.844 5.178-23.853l64.057-64.056c34.788 28.437 85.12 28.65 119.817.203l-31.262-31.26c-17.28 11.84-40.352 11.907-57.68.18l259.876-259.874-13.214-13.215zm-2.196 117.01L268.186 342.937c55.29 48.057 118.235 90.138 192.464 127.216L398.783 351.41l102.78 68.85-117.75-164.645 86.816 42.908c-20.895-33.04-42.523-63.772-65.65-92.382z",fill:e.color,"fill-opacity":"1"})))})),define("view/icons/SwingPierce",["require","exports","preact"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>i.h("svg",{fill:e.color,stroke:e.color,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},i.h("g",{class:"",transform:"translate(0,0)",style:""},i.h("path",{d:"M259.632 28.52c-15.21 29.776-26.798 59.26-36.147 88.652l-3.888 12.226-10.172-7.82c-23.276-17.89-44.87-38.798-63.885-63.892 1.717 33.39 6.423 64.716 13.022 94.843l2.746 12.533-12.72-1.686c-29.102-3.856-58.257-11.165-87.27-23.39 18.18 28.057 37.92 52.835 58.7 75.626l8.64 9.48-11.856 4.9c-27.133 11.213-56.04 19.458-87.28 23.376 29.775 15.208 59.26 26.797 88.65 36.146l12.227 3.888-7.82 10.172c-17.892 23.276-38.8 44.87-63.893 63.885 33.39-1.716 64.716-6.422 94.843-13.02l12.533-2.747-1.685 12.72c-3.856 29.102-11.165 58.257-23.39 87.27 28.057-18.18 52.835-37.92 75.626-58.7l9.48-8.64 4.9 11.856c11.213 27.132 19.458 56.038 23.376 87.28 15.21-29.776 26.798-59.26 36.147-88.652l3.888-12.226 10.172 7.82c23.276 17.89 44.87 38.798 63.885 63.892-1.717-33.39-6.423-64.716-13.022-94.843l-2.746-12.532 12.72 1.685c29.102 3.856 58.257 11.165 87.27 23.39-18.18-28.057-37.92-52.835-58.7-75.626l-8.64-9.48 11.856-4.9c27.133-11.213 56.038-19.458 87.28-23.376-29.775-15.208-59.26-26.797-88.65-36.146l-12.227-3.888 7.82-10.172c17.89-23.276 38.798-44.87 63.892-63.885-18.057.927-35.508 2.736-52.496 5.24L276.195 276.4c-6.194 6.236-14.033 9.328-21.386 9.077-7.354-.253-13.934-3.538-18.73-8.396-9.59-9.716-11.724-27.68.407-40.166l.045-.047 118.098-118.1c4.217-19.508 10.193-39.013 18.385-58.454-28.058 18.182-52.836 37.92-75.627 58.7l-9.48 8.642-4.9-11.857C271.794 88.67 263.55 59.763 259.63 28.52zm224.03.818l-86.112 54.8v31.313h31.314l54.8-86.112zM379.55 119.31l-8.37 8.372-121.783 121.78c-6.11 6.288-4.212 11.222-.505 14.977 1.853 1.877 4.235 2.972 6.533 3.05 2.297.08 4.797-.547 8.002-3.773l.01-.01L393.69 133.45h-14.14v-14.14zM144.64 374.507a662.042 662.042 0 0 1-24.73 4.443l-92.39 92.39 14.14 14.14 101.163-101.162a341.49 341.49 0 0 0 1.817-9.812z",fill:e.color,"fill-opacity":"1"})))})),define("view/icons/Sword",["require","exports","preact"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>i.h("svg",{fill:e.color,stroke:e.color,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},i.h("g",{class:"",transform:"translate(0,0)",style:""},i.h("path",{d:"M491.844 22.533l-83.42 14.865L196.572 249.25c3.262 4.815 5.37 10.72 5.37 16.932 0 5.863-1.71 11.35-4.643 15.996-5.065-1.606-10.448-2.477-16.027-2.477-15.724 0-29.904 6.89-39.69 17.796l-9.112-9.113 17.237-17.237c-4.515-5.772-8.907-11.645-13.19-17.6l-19.443 19.44-13.215-13.215 21.828-21.827c-4.403-6.59-8.67-13.278-12.792-20.068l-40.802 40.803 58.314 58.314c-1.613 5.075-2.49 10.47-2.49 16.063 0 7.666 1.65 14.96 4.592 21.564l-72.14 72.14-14.56-14.56L21.013 437l14.558 14.56-8.607 8.608 27.246 27.246 8.606-8.61 14.56 14.56 24.798-24.8-14.557-14.556 72.158-72.16c6.586 2.922 13.858 4.562 21.498 4.562 5.593 0 10.988-.877 16.063-2.49l58.363 58.363L296.5 401.48c-6.797-4.127-13.486-8.395-20.068-12.793l-21.83 21.83L241.39 397.3l19.442-19.44c-5.962-4.29-11.835-8.683-17.603-13.194l-17.238 17.238-9.16-9.16c10.905-9.785 17.795-23.965 17.795-39.69 0-5.346-.806-10.51-2.285-15.39 4.703-3.04 10.288-4.817 16.265-4.816 6.21 0 11.776 1.77 16.52 4.955L476.98 105.95l14.864-83.417zm-66.227 53.012l13.215 13.215-191.684 191.68-13.214-13.213L425.617 75.545zM181.273 298.39c19.257 0 34.665 15.41 34.665 34.665 0 19.256-15.408 34.666-34.665 34.666-19.256 0-34.666-15.41-34.666-34.665s15.41-34.666 34.666-34.666z",fill:"#fff","fill-opacity":"1"})))})),define("view/icons/Talk",["require","exports","preact"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>i.h("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:e.color,stroke:e.color},i.h("g",{class:"",transform:"translate(0,0)",style:""},i.h("path",{d:"M488 348.78h-70.24l-15.1 87.44-48.78-87.44H169v-50h190v-157h129zm-145-273v207H158.13l-48.79 87.47-15.11-87.47H24v-207zM136.724 215.324c0-10.139-12.257-15.214-19.425-8.046-7.168 7.168-2.093 19.426 8.046 19.426 6.285 0 11.38-5.095 11.38-11.38zm60.945 0c-.068-10.12-12.32-15.122-19.452-7.943-7.131 7.18-2.047 19.399 8.073 19.399 6.314 0 11.422-5.141 11.38-11.456zm60.945 0c0-10.139-12.257-15.214-19.425-8.046-7.169 7.168-2.093 19.426 8.046 19.426 6.284 0 11.38-5.095 11.38-11.38z",fill:e.color,"fill-opacity":"1"})))})),define("view/icons/Target",["require","exports","preact"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>i.h("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:e.color,stroke:e.color},i.h("path",{d:"M0 0h512v512H0z",fill:"rgba(0, 0, 0, 0)","fill-opacity":"1"}),i.h("g",{class:"",transform:"translate(0,0)",style:""},i.h("path",{d:"M138.563 16.063C83.49 42.974 41.459 86.794 16.124 138.53l59.938 29.407c18.988-38.845 50.47-71.807 91.812-92l-29.313-59.874zm234.843.156L344 76.124c38.846 18.99 71.807 50.47 92 91.813l59.875-29.313c-26.913-55.073-70.732-97.073-122.47-122.406zm62.53 327.717c-18.982 38.865-50.53 71.673-91.873 91.875l29.437 60.125c55.116-26.925 97.085-70.76 122.375-122.562l-59.938-29.438zm-359.936.125l-60 29.375c26.928 55.097 70.776 97.082 122.563 122.375l29.406-59.937C129.122 416.885 96.192 385.4 76 344.062z",fill:e.color,"fill-opacity":"1"})))})),define("view/icons/TargetMelee",["require","exports","preact"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>i.h("svg",{fill:e.color,stroke:e.color,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},i.h("g",{class:"",transform:"translate(0,0)",style:""},i.h("path",{d:"M122.1 17.52L186.6 161l104.5-44.9-44.5-98.58h-51.1l35.8 80.75-16.4 7.23-39-87.98zm265.2 77.75L110.4 215.2l12 28.2 278.1-119.8zm-69.7 98.53l-23.9 11.5c12.8 5.4 26 13.7 38.3 15.6 18.1-13.1-4.9-30.5-14.4-27.1zm-60.7 11.1l-36.2 16.7c-11.9 18.4-14.8 46-18.2 69.7 20.6 30.1 30.5 62.4 39.5 94 17.9-3.7 32.2-6.8 48.7-11.5-24.4-38.7-42.2-78.4-53.6-118.9 0 0 5.6-10.5 8.4-15.8 11.9 7.3 24.9 12.4 36.6 9.9 10-4.1 21.5-7.9 27.7-16.6-17.6-6.9-37.1-17.5-52.9-27.5zm92.6 26.6c-10.8 5.8-23 11.2-31.9 18.9-5.3 4.7-12.1 8.8-20.5 12.3 1.1 7.3-.1 19.6 8.1 18.8 20.5-6.2 40.5-15 59.7-28.4-.1-9.2-8-24.1-15.4-21.6zm-90.2 34.2c11.3 34.8 27.6 69 49.3 102.6 4.7-1.6 9.3-3.3 13.5-5-7.3-6.2-11.7-15.9-12-25.3-16.6-4.1-20.8-29.4-17.2-41.6-9.5-7-13.6-18.1-14.2-28.7-7.2.7-13.6-.1-19.4-2zm103.3 10.4c-13.6 8.1-27.6 14.3-41.6 19.2l-9 4.4c-4.4 4.6-4.5 15.6 1 20.3 9.7 3.5 50.1-21.2 57.7-27.9 1.3-5.8-3.5-14.9-8.1-16zm-178.1 21.2L19.1 335.8V495c95.7-25.3 146.9-47.1 209.7-90.2-10.8-38-20.5-74.8-44.3-107.5zm187.8 16.9c-13.6 10.2-27.2 16.2-42.9 21.4-.4 6.7 2.5 18.1 12.1 16 19.9-4.3 36.3-17.5 36.6-24.6.2-3.7-2-10.5-5.8-12.8zm-7.5 48.6c-14.3 8.2-31.5 15.9-46.7 21.4l18.7 31.8 39.3-18.8zm22.2 49.1L342.9 433l3.1 21.9c15.1.5 46.6-11.3 55.4-26.1v-.1z",fill:e.color,"fill-opacity":"1"})))})),define("view/icons/TicTacToe",["require","exports","preact"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>i.h("svg",{fill:e.color,stroke:e.color,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},i.h("g",{class:"",transform:"translate(0,0)",style:""},i.h("path",{d:"M169.344 35.844A9.5 9.5 0 0 0 160 45.47v117.343H45.5a9.5 9.5 0 1 0 0 19H160v151H45.5a9.5 9.5 0 1 0 0 19H160V466.5a9.5 9.5 0 1 0 19 0V351.812h151V466.5a9.5 9.5 0 1 0 19 0V351.812h117.406a9.5 9.5 0 1 0 0-19H349v-151h115.563a9.5 9.5 0 1 0 0-19H349V45.47a9.5 9.5 0 0 0-9.656-9.626A9.5 9.5 0 0 0 330 45.47v117.343H179V45.47a9.5 9.5 0 0 0-9.656-9.626zM86 35.97c-13.07 0-25.77 4.94-35.156 13.843C41.458 58.715 36 71.06 36 83.874c0 12.814 5.458 25.16 14.844 34.063C60.23 126.84 72.93 131.81 86 131.81c13.07 0 25.77-4.97 35.156-13.875C130.542 109.034 136 96.69 136 83.876c0-12.814-5.458-25.16-14.844-34.063C111.77 40.91 99.07 35.97 86 35.97zm170 0c-13.07 0-25.77 4.94-35.156 13.843C211.458 58.715 206 71.06 206 83.874c0 12.814 5.458 25.16 14.844 34.063C230.23 126.84 242.93 131.81 256 131.81c13.07 0 25.77-4.97 35.156-13.875C300.542 109.034 306 96.69 306 83.876c0-12.814-5.458-25.16-14.844-34.063C281.77 40.91 269.07 35.97 256 35.97zm138.844 9.218A9.5 9.5 0 0 0 388.25 61.5l22.375 22.375L389 105.5a9.502 9.502 0 1 0 13.438 13.438l21.625-21.626 22.375 22.407a9.502 9.502 0 1 0 13.437-13.44L437.5 83.876l21.625-21.625a9.5 9.5 0 0 0-6.906-16.313 9.5 9.5 0 0 0-6.533 2.876l-21.625 21.624-22.375-22.374a9.5 9.5 0 0 0-6.843-2.876zM86 54.968c8.137 0 16.485 3.337 22.094 8.657 5.608 5.32 8.937 12.95 8.937 20.25 0 7.3-3.328 14.96-8.936 20.28-5.61 5.32-13.957 8.626-22.094 8.626s-16.485-3.304-22.094-8.624c-5.608-5.32-8.937-12.98-8.937-20.28 0-7.302 3.328-14.93 8.936-20.25 5.61-5.32 13.957-8.657 22.094-8.657zm170 0c8.137 0 16.485 3.337 22.094 8.657 5.608 5.32 8.937 12.95 8.937 20.25 0 7.3-3.328 14.96-8.936 20.28-5.61 5.32-13.957 8.626-22.094 8.626s-16.485-3.304-22.094-8.624c-5.608-5.32-8.937-12.98-8.937-20.28 0-7.302 3.328-14.93 8.936-20.25 5.61-5.32 13.957-8.657 22.094-8.657zm-77 126.844h151v151H179v-151zm245.063 26.282c-13.07 0-25.77 4.94-35.157 13.844-9.386 8.903-14.844 21.248-14.844 34.062 0 12.814 5.458 25.16 14.844 34.063 9.386 8.903 22.087 13.875 35.156 13.875 13.07 0 25.77-4.972 35.157-13.875 9.385-8.904 14.842-21.25 14.842-34.063 0-12.814-5.457-25.16-14.843-34.063-9.387-8.903-22.088-13.843-35.158-13.843zm-197.25 9.22a9.5 9.5 0 0 0-6.625 16.31L242.563 256l-21.625 21.625a9.502 9.502 0 1 0 13.437 13.438L256 269.438l22.375 22.375a9.502 9.502 0 1 0 13.438-13.438L269.438 256l21.625-21.625a9.5 9.5 0 0 0-6.907-16.313 9.5 9.5 0 0 0-6.53 2.875L256 242.563l-22.375-22.375a9.5 9.5 0 0 0-6.813-2.875zm197.25 9.78c8.136 0 16.485 3.305 22.093 8.625 5.61 5.32 8.938 12.98 8.938 20.28 0 7.3-3.33 14.93-8.938 20.25-5.608 5.32-13.957 8.656-22.094 8.656-8.136 0-16.485-3.336-22.093-8.656-5.61-5.32-8.94-12.95-8.94-20.25 0-7.3 3.33-14.96 8.94-20.28 5.607-5.32 13.956-8.626 22.092-8.626zM256 380.156c-13.07 0-25.77 4.94-35.156 13.844-9.386 8.903-14.844 21.25-14.844 34.063 0 12.813 5.458 25.19 14.844 34.093C230.23 471.06 242.93 476.03 256 476.03c13.07 0 25.77-4.97 35.156-13.874 9.386-8.903 14.844-21.28 14.844-34.094 0-12.813-5.458-25.16-14.844-34.062-9.386-8.903-22.087-13.844-35.156-13.844zm-199.188 9.22a9.5 9.5 0 0 0-6.624 16.312l22.374 22.406L50.94 449.72a9.502 9.502 0 1 0 13.437 13.436L86 441.53l22.375 22.376a9.502 9.502 0 1 0 13.438-13.437l-22.376-22.376 21.626-21.625a9.5 9.5 0 0 0-6.907-16.314 9.5 9.5 0 0 0-6.53 2.875L86 414.657 63.625 392.25a9.5 9.5 0 0 0-6.813-2.875zM256 399.187c8.137 0 16.485 3.304 22.094 8.625 5.608 5.32 8.937 12.948 8.937 20.25 0 7.3-3.328 14.96-8.936 20.28-5.61 5.32-13.957 8.626-22.094 8.626s-16.485-3.306-22.094-8.626c-5.608-5.32-8.937-12.98-8.937-20.28 0-7.303 3.328-14.93 8.936-20.252 5.61-5.32 13.957-8.625 22.094-8.625z","fill-opacity":"1"})))})),define("view/icons/VendingMachine",["require","exports","preact"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>i.h("svg",{fill:e.color,stroke:e.color,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},i.h("g",{class:"",transform:"translate(0,0)",style:""},i.h("path",{d:"M100 29v454h312V29zm18 18h210v338H118zm226 16h50v66h-50zm18 18v30h14V81zm-203 7v23h-16v18h160v-18h-64V80l-16 6-6 25h-26V88zm194 55h32v18h-32zm-90 10.8c-5.4 0-10.1 3-12.8 6.7-2.9 4.9-4.5 9.6-4.1 14.5H143v18h160v-18h-23.1c.3-5.1-1.6-11-4.1-14.5-2.7-3.7-7.4-6.7-12.8-6.7zm90 21.2h32v18h-32zm-194 41v23h-16v18h160v-18h-24v-23h-24v23h-32v-31h-16v31h-32v-15zm8 61.4c-6.1 0-10.8 3.9-13.3 8-3.2 6.1-4 11.5-3.5 17.6H143v18h160v-18h-64v-23h-32v23h-23.2c.6-6-.7-13-3.5-17.6-2.5-4.1-7.2-8-13.3-8zM353 351h32v18h-32zm-235 52h210v62H118zm18 18v26h174v-26z",fill:e.color,"fill-opacity":"1"})))})),define("view/icons/Wand",["require","exports","preact"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>i.h("svg",{fill:e.color,stroke:e.color,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},i.h("g",{class:"",transform:"translate(0,0)",style:""},i.h("path",{d:"M339.72 55.875c-61.792 0-111.876 50.08-111.876 111.875 0 61.79 50.08 111.875 111.875 111.875 61.79 0 111.905-50.08 111.905-111.875 0-61.79-50.112-111.875-111.906-111.875zm0 18.875c51.36 0 93 41.642 93 93 0 51.362-41.643 93-93 93-51.363 0-92.97-41.642-92.97-93 0-33.034 17.208-62.033 43.156-78.53-4.767 5.728-7.656 13.088-7.656 21.124 0 18.257 14.806 33.062 33.063 33.062 18.256 0 33.062-14.805 33.062-33.062 0-17.464-13.562-31.73-30.72-32.938 7.073-1.72 14.46-2.656 22.064-2.656zm-62.533 65.03c-8.418 0-15.28 6.825-15.28 15.25 0 8.42 6.854 15.25 15.28 15.25 8.42 0 15.25-6.822 15.25-15.25 0-8.418-6.823-15.25-15.25-15.25zm-76.312 72.97c-.846 7.796-2.342 14.92-4.5 21.406l78.5 78.5c6.444-2.173 13.523-3.733 21.25-4.625l-95.25-95.28zm-13.125 39.22c-4.91 7.335-11.078 13.393-18.5 18.218l69.594 69.625c4.842-7.41 10.92-13.58 18.25-18.5L187.75 251.97zm-36.438 26.718c-6.406 2.136-13.398 3.716-20.968 4.687 32.544 31.712 62.545 62.546 95.187 95.188 1.003-7.534 2.595-14.498 4.75-20.875l-78.968-79zm-15.687 36.406L17.187 433.188v21.937l129.25-129.22-10.812-10.81zm24 24L17.187 481.53v13.595h53.72L193.28 372.75l-33.655-33.656z","fill-opacity":"1"})))})),define("view/icons/index",["require","exports","view/icons/Armor","view/icons/Arrow","view/icons/BattleGear","view/icons/Bracelet","view/icons/Bracer","view/icons/Circle","view/icons/CloakConsume","view/icons/Close","view/icons/Contract","view/icons/Cursor","view/icons/Expand","view/icons/Flask","view/icons/Flower","view/icons/Gear","view/icons/Hammer","view/icons/Hazard","view/icons/Help","view/icons/Menu","view/icons/MineralHeart","view/icons/Muffin","view/icons/Necklace","view/icons/Potion","view/icons/Purse","view/icons/RangedMulti","view/icons/RangedNormal","view/icons/Ring","view/icons/Shield","view/icons/Signal","view/icons/Snack","view/icons/Soda","view/icons/Speaker","view/icons/Spear","view/icons/Star","view/icons/SwingFinisher","view/icons/SwingNormal","view/icons/SwingPierce","view/icons/Sword","view/icons/Talk","view/icons/Target","view/icons/TargetMelee","view/icons/TicTacToe","view/icons/VendingMachine","view/icons/Wand"],(function(e,t,i,r,o,n,l,s,d,c,m,h,u,p,g,y,f,v,b,w,C,S,T,x,E,A,_,I,k,R,P,O,M,L,B,N,D,G,F,W,U,H,j,K,q){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getIcon=void 0,i=a(i),r=a(r),o=a(o),n=a(n),l=a(l),s=a(s),d=a(d),c=a(c),m=a(m),h=a(h),u=a(u),p=a(p),g=a(g),y=a(y),f=a(f),v=a(v),b=a(b),w=a(w),C=a(C),S=a(S),T=a(T),x=a(x),E=a(E),A=a(A),_=a(_),I=a(I),k=a(k),R=a(R),P=a(P),O=a(O),M=a(M),L=a(L),B=a(B),N=a(N),D=a(D),G=a(G),F=a(F),W=a(W),U=a(U),H=a(H),j=a(j),K=a(K),q=a(q);let z={armor:i.default,arrow:r.default,battleGear:o.default,bracelet:n.default,bracer:l.default,circle:s.default,cloakConsume:d.default,close:c.default,contract:m.default,cursor:h.default,expand:u.default,flask:p.default,flower:g.default,gear:y.default,hammer:f.default,hazard:v.default,help:b.default,menu:w.default,mineralHeart:C.default,muffin:S.default,necklace:T.default,potion:x.default,purse:E.default,rangedMult:A.default,rangedNormal:_.default,ring:I.default,shield:k.default,signal:R.default,snack:P.default,soda:O.default,speaker:M.default,spear:L.default,star:B.default,swingFinisher:N.default,swingNormal:D.default,swingPierce:G.default,sword:F.default,talk:W.default,target:U.default,targetMelee:H.default,ticTacToe:j.default,vending:K.default,wand:q.default};t.getIcon=e=>{var t;return null!==(t=z[e])&&void 0!==t?t:b.default}})),define("view/components/UseItemDescription",["require","exports","model/generics","model/player","preact","view/style","db/items/index","view/icons/index"],(function(e,t,i,a,r,o,n,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>{var t,s;let d=i.getCurrentPlayer(),c=a.playerGetItemCount(d,null!==(t=e.itemName)&&void 0!==t?t:""),m=n.getIfExists(e.itemName),h=l.getIcon(null!==(s=null==m?void 0:m.icon)&&void 0!==s?s:"");return r.h("div",{style:{marginBottom:"16px",padding:"16px",fontSize:"18px"}},(null==m?void 0:m.icon)?r.h("div",{style:{display:"flex",justifyContent:"center",marginBottom:"8px"}},r.h("div",{style:{width:"48px"}},r.h(h,{color:o.colors.WHITE}))):null,r.h("div",{style:{color:o.colors.ORANGE,textAlign:"center",marginBottom:"8px"}},null==m?void 0:m.label),r.h("div",{style:{color:o.colors.WHITE,textAlign:"center",marginBottom:"8px"}},null==m?void 0:m.effectDescription),r.h("div",{style:{textAlign:"center"}},"You have"," ",r.h("span",{style:{color:c>0?o.colors.BLUE:o.colors.RED,transform:"scale(1.25)"}},c)," ","remaining."))}})),define("db/persistent-effects",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=t.getIfExists=t.get=void 0;let i={};t.get=e=>{let t=i[e];if(!t)throw Error("No IPersistentEffectTemplate exists with name: "+e);return Object.assign({},t)},t.getIfExists=e=>{let t=i[e];return t?Object.assign({},t):null},t.init=()=>{i.CLOAKED={name:"CLOAKED",description:"Enemies will not see you while walking around."},i.HASTE={name:"HASTE",description:"Cooldowns in battle are reduced by 50% (10s)."}}})),define("db/items/consumables",["require","exports","preact","controller/battle-management","controller/events","controller/scene/scene-commands","controller/ui-actions","model/battle","model/battle-character","model/character","model/generics","model/particle","model/player","model/room","model/sound","model/store","utils","view/components/UseItemDescription","view/style","db/items/index","db/persistent-effects"],(function(e,t,i,r,o,n,l,s,d,c,m,h,u,p,g,y,f,v,b,w,C){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=t.createOverworldStatusOnUseCb=t.createRezOnUseCb=t.createEnemySelectOnUseCb=t.createPartyMemberSelectOnUseCb=t.createConfirmUseModal=t.createSelectEnemyCall=t.createSelectPartyMemberCall=t.showBattleParticles=void 0,v=a(v);let S=e=>u.playerGetItemCount(m.getCurrentPlayer(),e)>0;t.showBattleParticles=async(e,t,i)=>new Promise(a=>{let o=m.getCurrentBattle(),n=s.battleGetBattleCharacterFromCharacter(o,e);if(n){l.hideModal(),l.showBattleEffect([n],t),m.enablePauseRendering();let e=null;if(i){let[t,a]=c.characterGetPosCenterPx(n.ch),r=h.createStatusParticle(""+i,t,a,b.colors.LIGHTGREEN);p.roomAddParticle(o.room,r),e=r}setTimeout(()=>{d.battleCharacterSetAnimationIdle(n),r.resetCooldownTimer(n),s.battlePauseTimers(o,[n]),n.actionTimer.timestampPause=n.actionTimer.timestampStart,c.characterGetAnimation(n.ch).pause(),l.hideBattleEffect(),e&&p.roomRemoveParticle(o.room,e),setTimeout(()=>{m.disablePauseRendering()},100),a(!0)},1500)}}),t.createSelectPartyMemberCall=(e,t,{isBattle:i,filter:a,onCharacterSelectedMenu:r,onCharacterSelectedBattle:o})=>{l.showPartyMemberSelectModal({showDelayInfo:!0,itemNameForDescription:e.name,body:v.default,onCharacterSelected:async a=>{S(e.name)?i?(o(a),l.hideModal(),t(!0)):r(a):g.playSoundName("terminal_cancel")},onClose:()=>t(!1),filter:a})},t.createSelectEnemyCall=(e,t,{filter:i,onCharacterSelectedBattle:a})=>{let r=m.getCurrentBattle();l.showBattleEffect([],""),l.showCharacterFollowerSelectModal({body:`Use ${e.label} on which character?`,isAll:!1,characters:r.enemies.map(e=>e.ch),onCharacterSelected:async t=>{S(e.name)?(m.enablePauseRendering(),a(t),l.hideModal()):g.playSoundName("terminal_cancel")},onClose:()=>{l.hideModal(),l.hideBattleEffect(),t(!1)},filter:i})},t.createConfirmUseModal=(e,t)=>{let a=o.pushEmptyKeyHandler();l.showModal(y.ModalSection.CONFIRM,{onClose:()=>{t(!1),o.popKeyHandler(a)},onConfirm:()=>{t(!0),o.popKeyHandler(a)},body:i.h("div",null,"Are you sure you wish to use:"," ",i.h("span",{style:{color:b.colors.BLUE}},e.label),"?",i.h("div",{style:{margin:"12px 0px",color:b.colors.LIGHTGREY}},null==e?void 0:e.effectDescription))})},t.createPartyMemberSelectOnUseCb=(e,i,a,r)=>async(o,n)=>new Promise(l=>{t.createSelectPartyMemberCall(o,l,{isBattle:n,filter:null!=r?r:e=>e.hp>0,onCharacterSelectedMenu:e=>{a(e,o)},onCharacterSelectedBattle:r=>{a(r,o),t.showBattleParticles(r,e,i)}})}),t.createEnemySelectOnUseCb=(e,i,a,r)=>async(o,n)=>new Promise(n=>{t.createSelectEnemyCall(o,n,{filter:null!=r?r:e=>!0,onCharacterSelectedMenu:()=>{},onCharacterSelectedBattle:r=>{a([r],o),t.showBattleParticles(r,e,i).then(()=>n(!0))}})}),t.createRezOnUseCb=(e,i,a)=>async(r,o)=>new Promise(n=>{t.createSelectPartyMemberCall(r,n,{isBattle:o,filter:e=>0===e.hp,onCharacterSelectedMenu:e=>{a(e,r),l.hideModal(),n(!0)},onCharacterSelectedBattle:o=>{a(o,r);let n=m.getCurrentBattle(),l=s.battleGetBattleCharacterFromCharacter(n,o);l&&(l.isDefeated=!1,l.shouldRemove=!1,n.allies.includes(l)||n.allies.push(l)),t.showBattleParticles(o,e,i),setTimeout(()=>{let e=m.getCurrentBattle(),t=s.battleGetBattleCharacterFromCharacter(e,o);t&&(c.characterHasAnimationState(o,c.AnimationState.BATTLE_REVIVE)?c.characterSetAnimationState(o,c.AnimationState.BATTLE_REVIVE):(d.battleCharacterSetAnimationIdle(t),c.characterGetAnimation(t.ch).pause()))},1e3)}})}),t.createOverworldStatusOnUseCb=e=>async(i,a)=>new Promise(r=>{a&&r(!1),t.createConfirmUseModal(i,t=>{t&&e(i),r(t)})}),t.init=e=>{e.DilutedPotion={label:"Diluted HP Potion",sortName:"0PotionHP",description:"This bottle contains a green-ish liquid that, when imbibed, restores a rather uninspiring amount of HP.",effectDescription:"Restore 10 hp.",type:w.ItemType.USABLE,icon:"potion",onUse:t.createPartyMemberSelectOnUseCb("effect_heal_anim_loop","+10",(e,t)=>{g.playSoundName("use_item"),c.characterModifyHp(e,10),u.playerRemoveItem(m.getCurrentPlayer(),t.name)})},e.FeeblePotion=e.DilutedPotion,e.Potion={label:"Standard HP Potion",sortName:"1PotionHP",description:"This bottle contains a green liquid that, when imbibed, restores a standard amount of HP.",effectDescription:"Restore 25 hp.",type:w.ItemType.USABLE,icon:"potion",onUse:t.createPartyMemberSelectOnUseCb("effect_heal_anim_loop","+10",(e,t)=>{g.playSoundName("use_item"),c.characterModifyHp(e,25),u.playerRemoveItem(m.getCurrentPlayer(),t.name)})},e.StrongPotion={label:"Strong HP Potion",sortName:"2PotionHP",description:"This bottle contains a green liquid that, when imbibed, restores a large amount of HP.",effectDescription:"Restore 50 hp.",type:w.ItemType.USABLE,icon:"potion",onUse:t.createPartyMemberSelectOnUseCb("effect_heal_anim_loop","+50",(e,t)=>{g.playSoundName("use_item"),c.characterModifyHp(e,50),u.playerRemoveItem(m.getCurrentPlayer(),t.name)})},e.DoubleStrongPotion={label:"Double Strong HP Potion",sortName:"3PotionHP",description:"This bottle contains a green liquid that, when imbibed, restores a doubly-large amount of HP.",effectDescription:"Restore 100 hp.",type:w.ItemType.USABLE,icon:"potion",onUse:t.createPartyMemberSelectOnUseCb("effect_heal_anim_loop","+100",(e,t)=>{g.playSoundName("use_item"),c.characterModifyHp(e,100),u.playerRemoveItem(m.getCurrentPlayer(),t.name)})},e.RezGem={label:"Quartz Respawn Gem",sortName:"0RespawnGem",description:"This small gem is used to restore a character who has had their HP reduced to zero.",effectDescription:"Revive character with 5 hp.",type:w.ItemType.USABLE,icon:"mineralHeart",onUse:t.createRezOnUseCb("effect_heal_anim_loop","Revive!",(e,t)=>{g.playSoundName("rez"),c.characterModifyHp(e,5),u.playerRemoveItem(m.getCurrentPlayer(),t.name)})},e.QuartzRezGem=e.RezGem,e.AmberGem={label:"Amber Respawn Gem",sortName:"1RespawnGem",description:"This small gem is used to restore a character who has had their HP reduced to zero.",effectDescription:"Revive character with 25 hp.",type:w.ItemType.USABLE,icon:"mineralHeart",onUse:t.createRezOnUseCb("effect_heal_anim_loop","Revive!",(e,t)=>{g.playSoundName("rez"),c.characterModifyHp(e,25),u.playerRemoveItem(m.getCurrentPlayer(),t.name)})},e.TopazGem={label:"Topaz Respawn Gem",sortName:"2RespawnGem",description:"This small gem is used to restore a character who has had their HP reduced to zero.",effectDescription:"Revive character with 50 hp.",type:w.ItemType.USABLE,icon:"mineralHeart",onUse:t.createRezOnUseCb("effect_heal_anim_loop","Revive!",(e,t)=>{g.playSoundName("rez"),c.characterModifyHp(e,50),u.playerRemoveItem(m.getCurrentPlayer(),t.name)})},e.Muffin={label:"Muffin",sortName:"Muffin",description:"This tasty snack is just the right thing to put somebody back on their feet.",effectDescription:'Remove the "Knocked Down" status for an allied character.',type:w.ItemType.USABLE_BATTLE,icon:"muffin",onUse:t.createPartyMemberSelectOnUseCb("effect_heal_anim_loop","",(e,t)=>{d.battleCharacterRecoverFromKnockDown(s.battleGetBattleCharacterFromCharacter(m.getCurrentBattle(),e),m.getCurrentBattle()),u.playerRemoveItem(m.getCurrentPlayer(),t.name)},e=>e.hp>0&&m.getCurrentBattle()&&d.battleCharacterIsKnockedDown(s.battleGetBattleCharacterFromCharacter(m.getCurrentBattle(),e)))},e.DilutedAcidicCompound={label:"Diluted Acidic Compound",description:"A flask of some nasty-smelling liquid that supposedly can eat through one's armor.",effectDescription:"Remove 1 point of armor from target.",type:w.ItemType.USABLE_BATTLE,icon:"flask",onUse:t.createEnemySelectOnUseCb("","Acid",(e,t)=>{let i=e[0],a=m.getCurrentBattle();if(a){let e=s.battleGetBattleCharacterFromCharacter(a,i);e&&(r.applyArmorDamage(a,e,1,!0),u.playerRemoveItem(m.getCurrentPlayer(),t.name))}})},e.DeVisibleCloak={label:"DeVisible Cloak",description:"In the early days of the Regem Ludos VR, players were forced to engage in any battle they encountered, since enemies were known to tenaciously chase players down when spotted.  Ostensibly this irritated Mr. Charles DeVisible, who spent months hacking a certain item into the world that would cloak himself from vision.  When other players caught Mr. DeVisible using this item to bypass challenges in VR, they sought to copy the item.  <br/><br/>And copy it they most certainly did.  <br/><br/>While Mr. DeVisible probably still holds the original version of the DeVisible Cloak, a copious number of copies of it can be found littered all about the various floors of the Regem Ludos VR, and they all serve the same purpose: to bypass encounters.  Unfortunately, these copies are not perfect.  For some reason they only last for a limited time before the cloak inexplicably disintegrates, leaving the wearer quite vulnerable.",effectDescription:`Apply the ${C.get("CLOAKED").name} effect for 30 seconds: ${C.get("CLOAKED").description}`,type:w.ItemType.USABLE_OVERWORLD,icon:"cloakConsume",onUse:t.createOverworldStatusOnUseCb(e=>{g.playSoundName("use_item");let t=m.getCurrentPlayer().leader;c.characterAddItemStatus(t,c.ItemStatus.CLOAKED),u.playerRemoveItem(m.getCurrentPlayer(),e.name),f.timeoutPromise(25e3).then(()=>{c.characterSetItemStatusState(t,c.ItemStatus.CLOAKED,"expiring")}),f.timeoutPromise(3e4).then(()=>{c.characterRemoveItemStatus(t,c.ItemStatus.CLOAKED)})})},e.DeVisibleCloakCutscene=Object.assign(Object.assign({},e.DeVisibleCloak),{name:"DeVisibleCloak",onAcquire:async e=>{n.callScript("floor1-tut-DeVisibleCloakCutscene")}}),e.HasteFlavoring={label:"Haste Flavoring",description:'This viscous, red "flavoring" is used to decrease the cooldowns of abilities while in a Regem Ludos VR Battle.  Even though it looks suspiciously like ketchup, nobody can actually taste anything while in VR, so the substance cannot be confirmed.',effectDescription:`While in battle, apply the ${C.get("HASTE").name} effect to one character:  ${C.get("HASTE").description}`,type:w.ItemType.USABLE_BATTLE,icon:"potion",onUse:t.createPartyMemberSelectOnUseCb("effect_heal_anim_loop","Haste",(e,t)=>{let i=m.getCurrentBattle();if(i){let a=s.battleGetBattleCharacterFromCharacter(i,e);a&&(g.playSoundName("use_item"),d.battleCharacterAddStatus(a,s.BattleStatus.HASTE,1e4),u.playerRemoveItem(m.getCurrentPlayer(),t.name))}})}}})),define("db/items/overworld-consumables/vending",["require","exports","model/character","model/generics","model/player","model/sound","utils","db/items/index","db/items/consumables"],(function(e,t,i,a,r,o,n,l,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=void 0;let d=(e,t,o)=>{let l=a.getCurrentPlayer().leader;i.characterHasItemStatus(l,i.ItemStatus.STAT)&&i.characterRemoveItemStatus(l,i.ItemStatus.STAT),i.characterAddItemStatus(l,i.ItemStatus.STAT,o),r.playerRemoveItem(a.getCurrentPlayer(),e.name),n.timeoutPromise(t-5e3).then(()=>{i.characterSetItemStatusState(l,i.ItemStatus.STAT,"expiring")}),n.timeoutPromise(t).then(()=>{i.characterRemoveItemStatus(l,i.ItemStatus.STAT)})};t.init=e=>{e.FennelSoda={label:"Fennel Soda",sortName:"soda-fennel",description:"A refreshing drink that can get a bit too fizzy if left out for too long.",effectDescription:"Outside of combat, restore 5 HP.",type:l.ItemType.USABLE_OVERWORLD,icon:"soda",onUse:s.createPartyMemberSelectOnUseCb("effect_heal_anim_loop","+5",(e,t)=>{o.playSoundName("use_item"),i.characterModifyHp(e,5),r.playerRemoveItem(a.getCurrentPlayer(),t.name)})},e.CarrotSoda={label:"Carrot Soda",sortName:"soda-carrot",description:"This delicious soda has an unfortunate reputation for accidentally masquerading as some kind of orange drink due to its color.  Nonetheless it provides a refreshing experience.",effectDescription:"Outside of combat, restore 5 HP.",type:l.ItemType.USABLE_OVERWORLD,icon:"soda",onUse:s.createPartyMemberSelectOnUseCb("effect_heal_anim_loop","+5",(e,t)=>{o.playSoundName("use_item"),i.characterModifyHp(e,5),r.playerRemoveItem(a.getCurrentPlayer(),t.name)})},e.DurianSoda={label:"Durian Soda",sortName:"soda-durian",description:"One might expect this soda to have a pungent odor, but it is much the opposite: a sweet aroma and subtle savoriness punctuate the smells of this refreshing drink.",effectDescription:"Outside of combat, restore 5 HP.",type:l.ItemType.USABLE_OVERWORLD,icon:"soda",onUse:s.createPartyMemberSelectOnUseCb("effect_heal_anim_loop","+5",(e,t)=>{o.playSoundName("use_item"),i.characterModifyHp(e,5),r.playerRemoveItem(a.getCurrentPlayer(),t.name)})},e.OysterSoda={label:"Oyster Soda",sortName:"soda-oyster",description:"This savory, bubbly refreshment provides a prefect pallette cleanser for the adventurous individual.",effectDescription:"Outside of combat, restore 5 HP.",type:l.ItemType.USABLE_OVERWORLD,icon:"soda",onUse:s.createPartyMemberSelectOnUseCb("effect_heal_anim_loop","+5",(e,t)=>{o.playSoundName("use_item"),i.characterModifyHp(e,5),r.playerRemoveItem(a.getCurrentPlayer(),t.name)})},e.GrilledTortillaChipettes={label:"Grilled Chip-Ettes",sortName:"snack-grilled-chips",description:"These tiny chips are perfect fare for one seeking a crunchy, lightly salted delight.",effectDescription:"Increase POW by 1 for all party members for thirty seconds.",type:l.ItemType.USABLE_OVERWORLD,icon:"snack",onUse:s.createOverworldStatusOnUseCb(e=>{o.playSoundName("use_item"),d(e,3e4,{POW:1})})},e.GarlicSticks={label:"Garlic Sticks",sortName:"snack-garlic-sticks",description:"This short cylinder holds a veritable bevy of delicious garlic treats.",effectDescription:"Increase ACC by 1  for all party members for thirty seconds.",type:l.ItemType.USABLE_OVERWORLD,icon:"snack",onUse:s.createOverworldStatusOnUseCb(e=>{o.playSoundName("use_item"),d(e,3e4,{ACC:1})})},e.EspressoTart={label:"Espresso Tart",sortName:"snack-espresso-tart",description:"This nondescript rectangle might not look like much, but it's packed with a strong enough concentration of caffeine and flavor to life the spirts of any drowsy individual.",effectDescription:"Increase EVA by 1  for all party members for thirty seconds.",type:l.ItemType.USABLE_OVERWORLD,icon:"snack",onUse:s.createOverworldStatusOnUseCb(e=>{o.playSoundName("use_item"),d(e,3e4,{EVA:1})})}}})),define("db/items/armor",["require","exports","db/items/index"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=void 0,t.init=e=>{e.StarterArmor={label:"Starter Armor",description:"A standard-issue vestment that provides a paltry bare-minimum of defense.",type:i.ItemType.ARMOR,icon:"armor",modifiers:{FOR:1}},e.ResilientHoodie={label:"Resilient Hoodie",description:"This hoodie is made of an itchy, but also surprisingly resilient material.  Although it may not be very comfortable to wear, it can provide some protection from an everyday sword swing or arrow to the chest.",type:i.ItemType.ARMOR,icon:"armor",modifiers:{CON:2,FOR:2}},e.MantleOfQuickness={label:"Mantle Of Quickness",description:"This wispy-then mantle makes one just a bit quicker on the uptake, especially when potentially sharp objects come hurtling in their general direction.",type:i.ItemType.ARMOR,icon:"armor",modifiers:{EVA:10}}}})),define("db/items/index",["require","exports","db/items/weapons","db/items/quest","db/items/accessories","db/items/consumables","db/items/overworld-consumables/vending","db/items/armor"],(function(e,t,i,a,r,o,n,l){"use strict";var s,d;Object.defineProperty(t,"__esModule",{value:!0}),t.init=t.getIfExists=t.get=t.WeaponType=t.ItemType=void 0,function(e){e.NONE="none",e.QUEST="quest",e.JUNK="junk",e.USABLE="usable",e.USABLE_BATTLE="usable-battle",e.USABLE_OVERWORLD="usable-overworld",e.WEAPON="weapon",e.ARMOR="armor",e.ACCESSORY="accessory"}(s=t.ItemType||(t.ItemType={})),(d=t.WeaponType||(t.WeaponType={})).SWORD="sword",d.SPEAR="spear",d.HAMMER="hammer",d.BOW="bow",d.GUN="gun",d.WAND="wand";let c={};t.get=e=>{let t=c[e];if(!t)throw Error("No item template exists with name: "+e);return Object.assign({},t)},t.getIfExists=e=>{let t=c[e];return t?Object.assign({},t):null},t.init=()=>{i.init(c),a.init(c),r.init(c),o.init(c),n.init(c),l.init(c);for(let e in c){let t=c[e];t.name||(t.name=e),t.type||(t.type=s.NONE),t.icon||(t.icon="help")}}})),define("model/player",["require","exports","model/character","model/battle","utils","model/canvas","db/items/index"],(function(e,t,i,a,r,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.playerRemoveFromActiveParty=t.playerAddToActiveParty=t.playerAddExperience=t.playerModifyTickets=t.playerModifyTokens=t.playerGetItemCount=t.playerHasItem=t.playerRemoveItem=t.playerAddItem=t.playerGetCameraOffset=t.playerGetBattlePosition=t.playerSetBattlePosition=t.playerCreateNew=t.playerCreate=void 0,t.playerCreate=e=>{let t=i.characterCreateFromTemplate(e);return{leader:t,tokens:99,tickets:99,backpack:[n.get("TrainingSword"),n.get("TrainingBow"),n.get("TrainingSword"),n.get("TrainingSword"),n.get("FeeblePotion"),n.get("FeeblePotion"),n.get("RezGem"),n.get("DeVisibleCloak"),n.get("ShieldRing"),n.get("ZoeBracelet"),n.get("HasteFlavoring"),n.get("Muffin"),n.get("DilutedAcidicCompound"),n.get("DilutedAcidicCompound")],party:[t],battlePositions:[t],partyStorage:[t]}},t.playerCreateNew=e=>{let t=i.characterCreateFromTemplate(e);return{leader:t,tokens:0,tickets:0,backpack:[],party:[t],battlePositions:[t],partyStorage:[t]}},t.playerSetBattlePosition=(e,t,i)=>{r.removeIfPresent(e.battlePositions,t),i===a.BattlePosition.FRONT?e.battlePositions.unshift(t):e.battlePositions.push(t)},t.playerGetBattlePosition=(e,t)=>{let i=e.battlePositions.indexOf(t);return i>=4?a.BattlePosition.BACK:i>=2?a.BattlePosition.MIDDLE:a.BattlePosition.FRONT},t.playerGetCameraOffset=e=>{let t=e.leader,[i,a]=r.isoToPixelCoords(t.x,t.y),[n,l]=o.getScreenSize();return[Math.round(n/2-i-16),Math.floor(l/2-a-16)]},t.playerAddItem=(e,t)=>{let i=n.getIfExists(t);return i&&e.backpack.push(i),!0},t.playerRemoveItem=(e,t)=>{let i=e.backpack.findIndex(e=>e.name===t);return i>-1&&(e.backpack.splice(i,1),!0)},t.playerHasItem=(e,t)=>e.backpack.findIndex(e=>e.name===t)>-1,t.playerGetItemCount=(e,t)=>{let i=0;for(let a=0;a<e.backpack.length;a++)e.backpack[a].name===t&&i++;return i},t.playerModifyTokens=(e,t)=>{e.tokens+=t,e.tokens<0&&(e.tokens=0)},t.playerModifyTickets=(e,t)=>{e.tickets+=t,e.tickets<0&&(e.tickets=0)},t.playerAddExperience=(e,t)=>{let a=[];return e.partyStorage.forEach(e=>{let r=i.characterGetLevel(e);e.experience+=t,r<i.characterGetLevel(e)&&a.push(e)}),a},t.playerAddToActiveParty=(e,t)=>{let i=e.partyStorage.find(e=>e.name.toLowerCase()===t.toLowerCase());i&&!e.party.includes(i)&&e.party.push(i),i&&!e.battlePositions.includes(i)&&e.battlePositions.push(i)},t.playerRemoveFromActiveParty=(e,t)=>{let i=e.partyStorage.find(e=>e.name.toLowerCase()===t.toLowerCase()),a=e.party.indexOf(i);i&&a>-1&&e.party.splice(a,1);let r=e.battlePositions.indexOf(i);i&&r>-1&&e.battlePositions.splice(r,1)}})),define("model/particle-system",["require","exports","utils","view/draw","view/style","model/canvas","model/generics","model/particle"],(function(e,t,i,a,r,o,n,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createBattleTransitionParticleSystem=t.ParticleSystem=void 0;class s{constructor(){this.particles=[],this.width=0,this.height=0,this.clearColor="",this.meta={},this.onParticleUpdate=()=>{}}updateDraw(){let e=o.getCanvas("outer").getContext("2d");this.clearColor&&a.drawRect(0,0,this.width,this.height,this.clearColor,!1,e);for(let t=0;t<this.particles.length;t++){let i=this.particles[t];this.onParticleUpdate(i),l.particleUpdate(i),a.drawParticle(i,i.x,i.y,1,e)}e.restore()}}t.ParticleSystem=s,t.createBattleTransitionParticleSystem=e=>{let t=o.getCanvas("outer"),a=new s,d=t.width,c=t.height;a.width=d,a.height=c,a.clearColor=`rgba(0, 0, 0, ${.05*n.getFrameMultiplier()})`;for(let e=0;e<1500;e++){let e=l.particleCreate();e.y=-Math.random()*c/2,e.x=Math.random()*d,e.vy=20+1.5*Math.random(),e.w=e.h=15+8*Math.random(),e.color=i.randInArr([r.colors.WHITE,r.colors.GREY]),e.timer.pause(),e.shape="rect",a.particles.push(e)}return a}})),define("controller/battle-management",["require","exports","model/battle","model/battle-character","model/character","model/room","db/overworlds","model/generics","model/player","model/particle","utils","model/store","controller/ui-actions","controller/battle-actions","controller/loop","controller/scene-management","controller/events","view/ui","view/style","model/particle-system","view/draw","controller/scene/scene-commands","model/utility","model/sound","model/overworld","model/scene","model/canvas"],(function(e,t,i,a,r,o,n,l,s,d,c,m,h,u,p,g,y,f,v,b,w,C,S,T,x,E,A){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateBattle=t.fleeBattle=t.getReturnToOverworldBattleCompletionCB=t.getEvasionAfterEvasionEffects=t.getDamageAfterDamageEffects=t.applyDamage=t.applyMiss=t.completeCast=t.interruptChannel=t.interruptCast=t.setCasting=t.resetCooldownTimer=t.applyMagicDamage=t.applyRangeDamage=t.applySwingDamage=t.applyKnockDown=t.applyArmorDamage=t.applyStaggerDamage=t.didEvade=t.endAction=t.beginAction=t.invokeSkill=t.battleKeyHandler=t.allyIndexToKey=t.keyToAllyIndex=t.callScriptDuringBattle=t.invokeAllChannels=t.panCameraRelativeToBattleCenter=t.panCameraToBattleCenter=t.initiateBattle=t.transitionToBattle=void 0,t.transitionToBattle=async(e,o,n,s)=>{var d,u;h.hideSection(m.AppSection.Debug),T.stopCurrentMusic(500);let[p,g]=A.getScreenSize(),f=new S.Transform([0,0,0],[p/2-16,g/4-13,0],1,S.TransformEase.EASE_OUT);if(l.setCameraTransform(f),s){let a=t.initiateBattle(e,o);return a.isPaused=!0,i.battlePauseTimers(a),(null===(d=o.events)||void 0===d?void 0:d.onBattleStart)&&await(null===(u=o.events)||void 0===u?void 0:u.onBattleStart(a)),h.showSection(m.AppSection.BattleUI,!0),await t.invokeAllChannels(a),a.isPaused=!1,a.isStarted=!0,i.battleUnpauseTimers(a),void i.battleSubscribeEvent(a,i.BattleEvent.onCompletion,()=>{T.stopCurrentMusic(1e3),n&&n()})}let v=b.createBattleTransitionParticleSystem(w.getImageDataScreenshot());l.setGlobalParticleSystem(v);let x=y.pushEmptyKeyHandler();setTimeout(()=>{var e;C.fadeOut(100,!0),T.playMusic(null!==(e=o.music)&&void 0!==e?e:"music_battle1",!0)},1250),setTimeout(()=>{l.setGlobalParticleSystem(null),y.popKeyHandler(x);let s=t.initiateBattle(e,o);s.transitioning=!0,s.isPaused=!0,i.battlePauseTimers(s),C.fadeIn(250),s.allies.filter(e=>e.ch.hp>0).forEach((e,t)=>{let i=r.characterGetPos(e.ch),o=new S.Transform([i[0]-96,i[1]+96,0],i,500,S.TransformEase.LINEAR,S.transformOffsetJumpFar);r.characterSetTransform(e.ch,o),o.timer.pause(),c.timeoutPromise(500+250*t).then(()=>{var i;0===t&&T.playSoundName("battle_jump"),r.characterSetAnimationState(e.ch,r.AnimationState.BATTLE_JUMP),null===(i=e.ch.transform)||void 0===i||i.timer.unpause(),c.timeoutPromise(500).then(()=>{a.battleCharacterSetAnimationIdle(e)})})}),c.timeoutPromise(1500+250*s.allies.length).then(async()=>{var e,a;h.showSection(m.AppSection.BattleUI,!0),s.isStarted=!0,s.isPaused=!1,s.transitioning=!1,(null===(e=o.events)||void 0===e?void 0:e.onBattleStart)?null===(a=o.events)||void 0===a||a.onBattleStart(s):(await t.invokeAllChannels(s),i.battleUnpauseTimers(s))}),i.battleSubscribeEvent(s,i.BattleEvent.onCompletion,()=>{T.stopCurrentMusic(1e3),n&&n()})},2550)},t.initiateBattle=(e,c)=>{var m,h,u,p,g;let f=n.getRoom(c.roomName);f.characters=[];let b=n.get(c.roomName);f.bgImage=null!==(m=b.backgroundImage)&&void 0!==m?m:"",b.backgroundTransform&&(f.bgTransform=S.Transform.copy(b.backgroundTransform));let w=f.bgTransform,C=()=>{w.timer=new S.Timer(w.timer.duration),w.timer.awaits.push(C),w.timer.start()};w.timer.awaits.push(C),w.timer.start();let x=c.enemies.map(e=>{let t=r.characterCreateFromTemplate(e.chTemplate);return o.roomAddCharacter(f,t),a.battleCharacterCreateEnemy(t,e)}),E=e.party.map(t=>(o.roomAddCharacter(f,t),a.battleCharacterCreateAlly(t,{position:s.playerGetBattlePosition(e,t)}))),A=i.battleCreate(f,E,x);return A.itemTimer.forceComplete(),A.template=c,A.allies.forEach(e=>{e.ch.hp>0?t.resetCooldownTimer(e):(e.isDefeated=!0,e.shouldRemove=!0)}),A.enemies.forEach(t.resetCooldownTimer),A.alliesStorage.forEach(e=>{r.characterSetFacing(e.ch,r.Facing.RIGHT)}),A.allies.forEach(e=>{e.ch.hp>0?a.battleCharacterSetAnimationIdle(e):r.characterSetAnimationState(e.ch,r.AnimationState.BATTLE_DEAD)}),l.setCurrentPlayer(e),l.setCurrentBattle(A),l.setCurrentRoom(f),i.battleSetActorPositions(A),y.pushKeyHandler(t.battleKeyHandler),i.battleSubscribeEvent(A,i.BattleEvent.onTurnStarted,e=>{e===i.BattleAllegiance.ALLY?(t.panCameraRelativeToBattleCenter(300,20,0),i.battlePauseActionTimers(A,A.allies)):(t.panCameraRelativeToBattleCenter(300,-20,0),i.battlePauseActionTimers(A,A.enemies))}),i.battleSubscribeEvent(A,i.BattleEvent.onTurnEnded,e=>{i.battleUnpauseActionTimers(A,e===i.BattleAllegiance.ALLY?A.allies:A.enemies),t.panCameraToBattleCenter(300)}),i.battleSubscribeEvent(A,i.BattleEvent.onCharacterRecovered,e=>{let[t,n]=r.characterGetPosCenterPx(e.ch);o.roomAddParticle(l.getCurrentRoom(),d.createStatusParticle("Recovery",t,n,v.colors.BLUE)),a.battleCharacterSetAnimationIdle(e),i.battleGetAllegiance(A,e.ch)===i.BattleAllegiance.ALLY&&T.playSoundName("battle_recovery")}),(null===(h=c.events)||void 0===h?void 0:h.onCharacterDamaged)&&i.battleSubscribeEvent(A,i.BattleEvent.onCharacterDamaged,null===(u=c.events)||void 0===u?void 0:u.onCharacterDamaged),(null===(p=c.events)||void 0===p?void 0:p.onTurnEnded)&&i.battleSubscribeEvent(A,i.BattleEvent.onTurnEnded,null===(g=c.events)||void 0===g?void 0:g.onTurnEnded),console.log("CREATE BATTLE",A),A},t.panCameraToBattleCenter=e=>{t.panCameraRelativeToBattleCenter(e,0,0)},t.panCameraRelativeToBattleCenter=(e,t,i)=>{let a=e,r=l.getCameraTransform();if(r){let[e,o]=r.current(),[n,s]=(()=>{let[e,t]=A.getScreenSize();return[e/2-16,t/4-13]})(),d=new S.Transform([e,o,0],[n-t,s-i,0],a,S.TransformEase.EASE_OUT);l.setCameraTransform(d)}},t.invokeAllChannels=async e=>{let t=e.enemies.filter(e=>a.battleCharacterGetSelectedSkill(e).type===u.BattleActionType.CHANNEL),i=e.allies.filter(e=>e.ch.hp>0&&a.battleCharacterGetSelectedSkill(e).type===u.BattleActionType.CHANNEL),r=t.concat(i);r.length&&await c.timeoutPromise(1e3);for(let t=0;t<r.length;t++){let i=r[t],o=a.battleCharacterGetSelectedSkill(i);o&&(await o.cb(e,i),i.actionTimer.start(),i.actionTimer.pause(),await c.timeoutPromise(500))}},t.callScriptDuringBattle=async e=>{let t=l.getCurrentBattle();if(t){t.isPaused=!0;let a=y.pushEmptyKeyHandler();h.hideSections(),i.battlePauseTimers(t),l.disableKeyUpdate(),await g.callScript(l.getCurrentScene(),e),t.isPaused=!1,l.enableKeyUpdate(),y.popKeyHandler(a),i.battleUnpauseTimers(t),h.showSection(m.AppSection.BattleUI,!0)}},t.keyToAllyIndex=e=>({x:0,z:1,s:2,a:3,w:4,q:5}[e.toLowerCase()]),t.allyIndexToKey=e=>{var t;return null===(t=["x","z","s","a","w","q"][e])||void 0===t?void 0:t.toUpperCase()},t.battleKeyHandler=async e=>{var r;let o=l.getCurrentBattle(),n=l.getIsPaused();if(!(f.getUiInterface().appState.sections.length>1||o.transitioning))if(n||!/^[xzsawqXZSAWQ]$/.test(e.key))switch(e.key){case"d":l.getTriggersVisible()?(l.hideTriggers(),l.hideMarkers()):(l.showTriggers(),l.showMarkers());break;case"ArrowLeft":n||(i.battleCycleMeleeTarget(o)?T.playSoundName("menu_select"):T.playSoundName("menu_cancel"),f.renderUi());break;case"ArrowRight":n||(i.battleCycleRangeTarget(o)?T.playSoundName("menu_select"):T.playSoundName("menu_cancel"),f.renderUi());break;case" ":n||(T.playSoundName("woosh"),p.pause())}else{let i=e.key.toLowerCase(),n=o.alliesStorage[null!==(r=t.keyToAllyIndex(i))&&void 0!==r?r:-1];if((null==n?void 0:n.ch.hp)>0){let e=a.battleCharacterGetSelectedSkill(n);t.invokeSkill(n,e)}}},t.invokeSkill=(e,t)=>{let r=l.getCurrentBattle();((e,t)=>!(i.battleGetDyingCharacters(e).length||t.actionState!==a.BattleActionState.ACTING_READY&&t.actionState!==a.BattleActionState.CHANNELING&&(t.actionState===a.BattleActionState.CASTING||!a.battleCharacterCanAct(e,t)&&(console.log("cannot attack, battle character cannot act yet",t),1))))(r,e)&&(e.canActSignaled=!1,t.cb(r,e),i.battleInvokeEvent(l.getCurrentBattle(),i.BattleEvent.onCharacterAction,e))},t.beginAction=async e=>{console.log("begin action",e);let t=l.getCurrentBattle();t.isPaused||(null===i.battleGetActingAllegiance(t)&&i.battleInvokeEvent(t,i.BattleEvent.onTurnStarted,i.battleGetAllegiance(t,e.ch)),a.battleCharacterSetActonState(e,a.BattleActionState.ACTING),e.actionTimer.start(),e.actionTimer.pause(),i.battleInvokeEvent(t,i.BattleEvent.onCharacterActionStarted,e))},t.endAction=async e=>{console.log("end action",e);let t=l.getCurrentBattle();if(!t.isPaused){if(a.battleCharacterIsCasting(e)||a.battleCharacterIsChanneling(e));else{a.battleCharacterSetActonState(e,a.BattleActionState.ACTING);let t=e.ch.transform;if(t){let i=t.createInverse();r.characterSetTransform(e.ch,i),T.playSoundName("battle_jump"),r.characterSetAnimationState(e.ch,r.AnimationState.BATTLE_JUMP),await i.timer.onCompletion(),i.markForRemoval()}a.battleCharacterSetAnimationIdle(e),a.battleCharacterSetActonState(e,a.BattleActionState.IDLE)}if(e.canActSignaled=!1,i.battleInvokeEvent(t,i.BattleEvent.onCharacterActionEnded,e),null===i.battleGetActingAllegiance(t)){let a=i.battleGetDefeatedCharacters(t);if(console.log("NO MORE ALLEGIANCE IS ACTING",a),a.length){let o=1500;for(let e=0;e<a.length;e++){let i=a[e];T.playSoundName("despawn"),r.characterSetAnimationState(i.ch,r.AnimationState.BATTLE_DEAD),t.targetedEnemyIndex=Math.max(0,t.targetedEnemyIndex-a.length),t.targetedEnemyRangeIndex=Math.max(0,t.targetedEnemyRangeIndex-a.length),await c.timeoutPromise(100)}await c.timeoutPromise(o),i.battleInvokeEvent(t,i.BattleEvent.onTurnEnded,i.battleGetAllegiance(t,e.ch)),setTimeout(()=>{f.renderUi()},100)}else i.battleInvokeEvent(t,i.BattleEvent.onTurnEnded,i.battleGetAllegiance(t,e.ch))}}},t.didEvade=(e,i,r)=>{let o=l.getCurrentBattle(),n=t.getEvasionAfterEvasionEffects(o,e,i,a.battleCharacterGetEvasion(e))*r,s=100*Math.random(),d=s<=n;return console.log("DID evade?",d,s,n),d},t.applyStaggerDamage=(e,n)=>{if(console.log("apply stagger damage of",n,"to",e.ch.name),e.armor>0&&(n/=2),a.battleCharacterIsStaggered(e))e.staggerTimer.start();else if(e.staggerGauge.fill(n),e.staggerGauge.isFull()){console.log("STAGGER!"),e.canActSignaled=!1,e.staggerSoundName?(console.log("PLAY STAGGER SOUND",e.staggerSoundName),T.playSoundName(e.staggerSoundName)):console.error("NO STAGGER SOUND SPECIFIED FOR BCH",e),t.interruptCast(e),t.interruptChannel(e),e.armor&&(t.applyArmorDamage(l.getCurrentBattle(),e,1,!0),e.armor=0),i.battleInvokeEvent(l.getCurrentBattle(),i.BattleEvent.onCharacterStaggered,e),a.battleCharacterSetActonState(e,a.BattleActionState.STAGGERED),e.staggerTimer.start(),e.staggerGauge.empty(),e.actionTimer.start(),e.actionTimer.pause();let[n,s]=r.characterGetPosCenterPx(e.ch);o.roomAddParticle(l.getCurrentRoom(),d.createStatusParticle("Staggered",n,s,"orange")),r.characterSetAnimationState(e.ch,r.AnimationState.BATTLE_STAGGERED)}},t.applyArmorDamage=(e,t,i,a)=>{let n=i,l=!1;if(a?(T.playSoundName("battle_armor_broken"),console.log("BROKE ARMOR WITH PIERCE ATTACK!"),t.armor--,l=!0,n=0):t.armorTimer.isComplete()?(T.playSoundName("battle_armor_hit"),t.armorTimer.start(),n=0):(T.playSoundName("battle_armor_broken"),console.log("BROKE ARMOR WITH SIMULTANEOUS ATTACK!"),t.armor--,l=!0),l){let[i,a]=r.characterGetPosCenterPx(t.ch),n=d.particleCreateFromTemplate([i+8,a-t.ch.spriteHeight/4],d.EFFECT_TEMPLATE_ARMOR_REDUCED);o.roomAddParticle(e.room,n)}return{nextDamageAmount:n}},t.applyKnockDown=e=>{i.battleInvokeEvent(l.getCurrentBattle(),i.BattleEvent.onCharacterKnockedDown,e),a.battleCharacterSetActonState(e,a.BattleActionState.KNOCKED_DOWN),e.koTimer.start(),e.staggerTimer.start(),e.staggerGauge.empty(),e.actionTimer.start(),e.actionTimer.pause(),r.characterSetAnimationState(e.ch,r.AnimationState.BATTLE_KNOCKED_DOWN);let[t,n]=r.characterGetPosCenterPx(e.ch);o.roomAddParticle(l.getCurrentRoom(),d.createStatusParticle("Knockdown!",t,n,"red"))},t.applySwingDamage=(e,r,o,n)=>{let{damage:l,staggerDamage:s}=n,d=v.colors.WHITE,m="",h=l+r.ch.stats.POW,p=Math.floor(c.getRandBetween(h-Math.ceil(h/4),h)),g="";if(a.battleCharacterIsStaggered(o))p*=2,d=v.colors.BLUE,m="!",g="robot_staggered_damaged",n.attackType!==u.SwingType.KNOCK_DOWN||a.battleCharacterIsKnockedDown(o)||t.applyKnockDown(o);else if(o.armor>0){let{nextDamageAmount:i}=t.applyArmorDamage(e,o,p,n.attackType===u.SwingType.PIERCE);p=i}return t.applyStaggerDamage(o,s),o.armor<=0&&(t.interruptCast(o),t.interruptChannel(o)),p=t.getDamageAfterDamageEffects(e,o,i.BattleDamageType.SWING,Math.max(0,p)),console.log("APPLY SWING DAMAGE",p),t.applyDamage(e,o,{damage:p,particleColor:d,postfix:m,soundName:g}),!0},t.applyRangeDamage=(e,r,o,n,l)=>{let s="",d=v.colors.WHITE,m=n+Math.floor(r.ch.stats.POW/2),h=Math.floor(c.getRandBetween(m-Math.ceil(m/4),m)),u="";if(a.battleCharacterIsStaggered(o))s="!",d=v.colors.ORANGE,h*=2,u="robot_staggered_damaged";else if(o.armor>0){let{nextDamageAmount:i}=t.applyArmorDamage(e,o,h,!1);h=i}return t.applyStaggerDamage(o,l),o.armor<=0&&(t.interruptCast(o),t.interruptChannel(o)),h=t.getDamageAfterDamageEffects(e,o,i.BattleDamageType.RANGED,Math.max(0,h)),t.applyDamage(e,o,{damage:h,particleColor:d,soundName:u,postfix:s}),!0},t.applyMagicDamage=(e,r,o,n,l)=>{let s="",d="",m=n+r.ch.stats.POW,h=Math.floor(c.getRandBetween(m-Math.ceil(m/4),m));return a.battleCharacterIsStaggered(o)?(s="!",h*=2,d="robot_staggered_damaged"):o.armor>0&&t.applyArmorDamage(e,o,h,!1),t.applyStaggerDamage(o,l),t.interruptCast(o),t.interruptChannel(o),h=t.getDamageAfterDamageEffects(e,o,i.BattleDamageType.MAGIC,Math.max(0,h)),t.applyDamage(e,o,{damage:h,particleColor:v.colors.LIGHTBLUE,postfix:s,soundName:d}),!0},t.resetCooldownTimer=e=>{let t=e.ch.skills[e.ch.skillIndex],r=e.ch.stats.SPD;if(t){let o=1-1/(1+r/100),n=Math.max(t.cooldown-t.cooldown*o,1e3);a.battleCharacterHasStatus(e,i.BattleStatus.HASTE)&&(n/=2),console.log("RESET COOLDOWN TIMER",e.ch.name,n,o,r),e.actionTimer.start(n)}},t.setCasting=(e,t)=>{a.battleCharacterSetActonState(e,a.BattleActionState.CASTING),r.characterSetAnimationState(e.ch,r.AnimationState.BATTLE_CAST),i.battleInvokeEvent(l.getCurrentBattle(),i.BattleEvent.onCharacterCasting,e),T.playSoundName(t.soundName?t.soundName:"battle_cast");let[n,s]=r.characterGetPosCenterPx(e.ch);o.roomAddParticle(l.getCurrentRoom(),d.createStatusParticle("Casting",n,s)),e.actionTimer.pause(),e.castTimer.start(t.castTime),e.onCast=async()=>{t.onCast&&await t.onCast()},e.onCastInterrupted=async()=>{t.onInterrupt&&await t.onInterrupt()}},t.interruptCast=e=>{if(a.battleCharacterIsCasting(e)){console.log("INTERRUPT CAST",e),a.battleCharacterSetActonState(e,a.BattleActionState.IDLE),i.battleInvokeEvent(l.getCurrentBattle(),i.BattleEvent.onCharacterInterrupted,e),e.onCastInterrupted();let[n,s]=r.characterGetPosCenterPx(e.ch);e.actionTimer.unpause(),t.resetCooldownTimer(e),T.playSoundName("battle_interrupt_channel"),o.roomAddParticle(l.getCurrentRoom(),d.createStatusParticle("Interrupt!",n,s,"cyan"))}},t.interruptChannel=e=>{if(a.battleCharacterIsChanneling(e)){console.log("INTERRUPT CHANNEL",e),a.battleCharacterSetActonState(e,a.BattleActionState.IDLE),i.battleInvokeEvent(l.getCurrentBattle(),i.BattleEvent.onCharacterInterrupted,e),e.onChannelInterrupted();let[t,n]=r.characterGetPosCenterPx(e.ch);e.actionTimer.start(),e.actionTimer.unpause(),T.playSoundName("battle_interrupt_channel"),o.roomAddParticle(l.getCurrentRoom(),d.createStatusParticle("Interrupt!",t,n,"teal"))}},t.completeCast=async e=>{let a=l.getCurrentBattle(),r=i.battleGetActingAllegiance(a);null!==r&&r!==i.battleGetAllegiance(a,e.ch)||(await t.beginAction(e),i.battleInvokeEvent(l.getCurrentBattle(),i.BattleEvent.onCharacterSpell,e),await e.onCast(),e.actionTimer.unpause(),e.actionTimer.start(),e.actionTimer.pause(),await t.endAction(e))},t.applyMiss=(e,t)=>{console.log("apply miss to",t.ch.name);let n=r.characterGetAnimation(t.ch);n.disableSounds(),c.timeoutPromise(150).then(()=>n.enableSounds()),T.playSoundName("battle_evasion");let[s,m]=r.characterGetPosCenterPx(t.ch);o.roomAddParticle(e.room,d.createDamageParticle("Miss!",s,m,v.colors.WHITE)),r.characterSetAnimationState(t.ch,r.AnimationState.BATTLE_EVADED),r.characterOnAnimationCompletion(t.ch,()=>{a.battleCharacterSetAnimationIdle(t)}),i.battleInvokeEvent(l.getCurrentBattle(),i.BattleEvent.onCharacterEvaded,t)},t.applyDamage=(e,t,n)=>{let{damage:l,particleColor:s,postfix:c,soundName:m}=n;if(console.log("apply damage to",l,t.ch.name),l>0){let[a,n]=r.characterGetPosCenterPx(t.ch);o.roomAddParticle(e.room,d.createDamageParticle(`${l}${null!=c?c:""}`,a,n,s)),r.characterModifyHp(t.ch,-l),i.battleInvokeEvent(e,i.BattleEvent.onCharacterDamaged,t)}if(t.isDefeated){let[a,n]=r.characterGetPosCenterPx(t.ch);o.roomAddParticle(e.room,d.createWeightedParticle(d.EFFECT_TEMPLATE_GEM,a,n,1e3)),i.battleInvokeEvent(e,i.BattleEvent.onCharacterDefeated,t)}else t.ch.hp>0&&m&&T.playSoundName(m);a.battleCharacterSetAnimationStateAfterTakingDamage(t)},t.getDamageAfterDamageEffects=(e,t,a,r)=>{let o=i.battleGetPersistentEffects(e,i.PersistentEffectEvent.onBeforeCharacterDamaged,i.battleGetAllegiance(e,t.ch));for(let e=0;e<o.length;e++){let i=o[e].cb(t,r,a);void 0!==i&&(r=i)}return Math.max(0,r)},t.getEvasionAfterEvasionEffects=(e,t,a,r)=>{let o=i.battleGetPersistentEffects(e,i.PersistentEffectEvent.onBeforeCharacterEvades,i.battleGetAllegiance(e,t.ch));for(let e=0;e<o.length;e++){let i=o[e].cb(t,r,a);void 0!==i&&(r=i)}return Math.min(95,r=Math.max(0,r))},t.getReturnToOverworldBattleCompletionCB=(e,t,i,a,o)=>{let n=0,s=T.getCurrentMusic();return s&&(n=T.musicGetCurrentPlaybackPosition(s)),T.stopCurrentMusic(),()=>{console.log("BATTLE COMPLETED!"),C.fadeOut(500,!0),c.timeoutPromise(500).then(()=>{var d,c;l.setCameraTransform(null),C.fadeIn(500,!0),l.setCurrentBattle(null),l.setCurrentRoom(e),h.showSection(m.AppSection.Debug,!0),x.overworldShow(l.getCurrentOverworld());let u=l.getCurrentPlayer();if(r.characterSetPos(u.leader,t),r.characterSetFacing(u.leader,i),o){let t=o.name,i=l.getCurrentScene();E.sceneSetEncounterDefeated(i,t,e.name)}s&&(T.playMusic(s.soundName,!0),T.musicSetPlaybackPosition(s,n)),(null===(d=a.events)||void 0===d?void 0:d.onAfterBattleEnded)&&(null===(c=a.events)||void 0===c||c.onAfterBattleEnded())})}},t.fleeBattle=e=>{var a;(null===(a=e.template)||void 0===a?void 0:a.disableFlee)?console.error("Cannot flee a battle which has flee disabled."):(h.hideSections(),e.isCompleted=!0,e.transitioning=!0,y.popKeyHandler(t.battleKeyHandler),i.battlePauseActionTimers(e),T.stopCurrentMusic(),e.allies.filter(e=>e.ch.hp>0).forEach((e,t)=>{let i=r.characterGetPos(e.ch),a=new S.Transform(i,[i[0]-96,i[1]+96,0],500,S.TransformEase.LINEAR,S.transformOffsetJumpFar);r.characterSetTransform(e.ch,a),a.timer.pause(),c.timeoutPromise(500+250*t).then(()=>{var i;0===t&&T.playSoundName("battle_jump"),r.characterSetAnimationState(e.ch,r.AnimationState.BATTLE_JUMP),null===(i=e.ch.transform)||void 0===i||i.timer.unpause()})}),c.timeoutPromise(1500+250*e.allies.length).then(async()=>{e.isStarted=!0,e.isPaused=!1,e.transitioning=!1,i.battleInvokeEvent(e,i.BattleEvent.onCompletion,e)}))},t.updateBattle=e=>{for(let t=0;t<e.allies.length;t++){let i=e.allies[t];a.updateBattleCharacter(e,i),i.shouldRemove&&(e.allies.splice(t,1),t--)}for(let t=0;t<e.enemies.length;t++){let i=e.enemies[t];a.updateBattleCharacter(e,i),i.shouldRemove&&(e.enemies.splice(t,1),t--)}e.itemTimer.update(),e.isCompleted||(async e=>{var a,o,n,s;if(i.battleIsVictory(e)){h.hideSections(),e.isCompleted=!0,y.popKeyHandler(t.battleKeyHandler),i.battlePauseActionTimers(e),(null===(o=null===(a=e.template)||void 0===a?void 0:a.events)||void 0===o?void 0:o.onBattleEnd)&&await(null===(s=null===(n=e.template)||void 0===n?void 0:n.events)||void 0===s?void 0:s.onBattleEnd(e)),console.log("VICTORY"),T.stopCurrentMusic(),T.playSoundName("fanfare"),h.hideSections(),c.timeoutPromise(2800).then(()=>{C.panCameraRelativeToPlayer(70,20,500,!0),T.playMusic("music_battle_victory",!0),h.showSection(m.AppSection.BattleVictory,!0)}),await c.timeoutPromise(250);for(let t in e.allies)r.characterSetAnimationState(e.allies[t].ch,r.AnimationState.BATTLE_FLOURISH)}else i.battleIsLoss(e)&&(r.characterSetAnimationState(l.getCurrentPlayer().leader,r.AnimationState.BATTLE_DEAD),h.hideSections(),T.playSoundName("battle_loss"),e.isCompleted=!0,y.popKeyHandler(t.battleKeyHandler),i.battlePauseActionTimers(e),await c.timeoutPromise(100),console.log("DEFEAT!"),h.showSection(m.AppSection.BattleDefeated,!0))})(e)}})),define("model/render-object",["require","exports","model/sprite","utils","model/room"],(function(e,t,i,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createTileRenderObject=t.createTriggerActivatorRenderObject=t.createMarkerRenderObject=t.createPropRenderObject=void 0,t.createPropRenderObject=(e,t)=>{var o;if(e.isDynamic){let r=i.getSprite(e.sprite);if(!r)throw console.error(e),Error("Cannot create prop render object, no sprite exists:"+e.sprite);let[,,,n,l]=r,[s,d]=a.isoToPixelCoords(e.x,e.y);t||(32===n&&32===l?(d=d-l+20-4+1-1,s=s-n/2+20-4+0):(d=d-l+16,s=s-n/2+16));let c=0;return void 0!==e.sortOffset?c=e.sortOffset:(null===(o=e.sprite)||void 0===o?void 0:o.includes("props_small"))&&(c=16),{sprite:e.sprite,px:s,py:d,sortY:e.isFront?1/0:d+l+c,visible:!0}}{let[t,o]=a.isoToPixelCoords(e.x,e.y),[,,,n,l]=i.getSprite(e.sprite);return t-=t-n/2+r.TILE_WIDTH/2,o=o-l+r.TILE_HEIGHT/2,{sprite:e.sprite,px:t,py:o,sortY:o+l,visible:!0}}},t.createMarkerRenderObject=e=>{let{x:t,y:i}=e,[r,o]=a.isoToPixelCoords(t,i,0);return{name:e.name,sprite:"control_1",px:r,py:o,sortY:o+32,visible:!0,isMarker:!0}},t.createTriggerActivatorRenderObject=e=>{if(e.polygon)return{name:e.name,polygon:e.polygon,sortY:1/0,visible:!0,isTrigger:!0};{let{x:t,y:i}=e,[r,o]=a.isoToPixelCoords(t,i,0);return{name:e.name,sprite:"control_2",px:r,py:o,sortY:o+32,visible:!0,isTrigger:!0}}},t.createTileRenderObject=(e,t)=>{let i=a.isoToPixelCoords(e.x*r.TILE_WIDTH/2,e.y*r.TILE_HEIGHT/2),o=i[0],n=i[1],l=n;n-=e.tileHeight-32;let s=parseFloat(e.sprite.slice(e.sprite.lastIndexOf("_")+1)),d=e.sprite.indexOf("floors")>-1,c=n+(e.tileHeight-32)+(e.tileHeight>32?20:16)+(null!=t?t:0),m=e.sprite;return d&&(!isNaN(s)&&s>=56&&(n+=16),"floors_0"===e.sprite&&(m="invisible")),{sprite:m,origPy:l,px:o,py:n,highlighted:e.highlighted,isFloor:d,sortY:c,visible:!0}}})),define("db/enemies/tutorial-enemies",["require","exports","model/battle","model/character","controller/battle-actions","controller/battle-management","model/battle-character","model/particle","model/animation","db/particles","model/generics","db/enemies/index","utils","model/room","model/sound","view/ui"],(function(e,t,i,a,r,o,n,l,s,d,c,m,h,u,p,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=t.initBattleActions=void 0,t.initBattleActions=()=>{let e={RobotSwingNormalNNStaggerable:{name:"RobotSwingNormalNNStaggerable",label:"Robot",description:"AI",cooldown:15e3,type:r.BattleActionType.SWING,meta:{swings:[r.SwingType.NORMAL,r.SwingType.NORMAL]},cb:async function(e,t){var i,a,o;let n=r.getTarget(e,t);n&&await r.doSwing(e,this,t,n,{baseDamage:1,baseStagger:5,swingType:null!==(o=null===(a=null===(i=this.meta)||void 0===i?void 0:i.swings)||void 0===a?void 0:a[t.actionStateIndex])&&void 0!==o?o:r.SwingType.NORMAL})}},RobotSwingNormalNN:{name:"RobotSwingNormalNN",label:"Robot",description:"AI",cooldown:15e3,type:r.BattleActionType.SWING,meta:{swings:[r.SwingType.NORMAL,r.SwingType.NORMAL]},cb:async function(e,t){var i,a,o;let n=r.getTarget(e,t);n&&await r.doSwing(e,this,t,n,{baseDamage:1,baseStagger:5,swingType:null!==(o=null===(a=null===(i=this.meta)||void 0===i?void 0:i.swings)||void 0===a?void 0:a[t.actionStateIndex])&&void 0!==o?o:r.SwingType.NORMAL})}},RobotSwingSpeedyN:{name:"RobotSwingSpeedyN",label:"Robot",description:"AI",cooldown:6e3,type:r.BattleActionType.SWING,meta:{swings:[r.SwingType.NORMAL,r.SwingType.NORMAL]},cb:async function(e,t){var i,a,o;let n=r.getTarget(e,t);n&&await r.doSwing(e,this,t,n,{baseDamage:1,baseStagger:5,swingType:null!==(o=null===(a=null===(i=this.meta)||void 0===i?void 0:i.swings)||void 0===a?void 0:a[t.actionStateIndex])&&void 0!==o?o:r.SwingType.NORMAL})}},RobotSwingArmoredNK:{name:"RobotSwingArmoredNK",description:"AI",cooldown:16500,type:r.BattleActionType.SWING,meta:{swings:[r.SwingType.NORMAL,r.SwingType.KNOCK_DOWN]},cb:async function(e,t){var i,a,o;let n=r.getTarget(e,t);n&&await r.doSwing(e,this,t,n,{baseDamage:3,baseStagger:1,swingType:null!==(o=null===(a=null===(i=this.meta)||void 0===i?void 0:i.swings)||void 0===a?void 0:a[t.actionStateIndex])&&void 0!==o?o:r.SwingType.NORMAL})}},RobotSwingPierce:{name:"RobotSwingPierce",description:"AI",cooldown:13500,type:r.BattleActionType.SWING,meta:{swings:[r.SwingType.PIERCE]},cb:async function(e,t){var i,a,o;let n=r.getTarget(e,t);n&&await r.doSwing(e,this,t,n,{baseDamage:1,baseStagger:5,swingType:null!==(o=null===(a=null===(i=this.meta)||void 0===i?void 0:i.swings)||void 0===a?void 0:a[t.actionStateIndex])&&void 0!==o?o:r.SwingType.NORMAL})}},RobotRanged:{name:"RobotRanged",description:"AI",cooldown:7500,type:r.BattleActionType.RANGED,meta:{ranges:[r.RangeType.NORMAL,r.RangeType.NORMAL]},cb:async function(e,t){var i,a,o;let n=r.getTarget(e,t);n&&await r.doRange(e,this,t,n,{baseDamage:1,baseStagger:0,rangeType:null!==(o=null===(a=null===(i=this.meta)||void 0===i?void 0:i.ranges)||void 0===a?void 0:a[t.actionStateIndex])&&void 0!==o?o:r.RangeType.NORMAL})}},RobotBlackFireSnap:{name:"RobotBlackFireSnap",description:"AI",cooldown:8250,type:r.BattleActionType.CAST,meta:{castTime:3e3},cb:async function(t,i){r.getTarget(t,i)&&o.setCasting(i,{castTime:e.RobotBlackFireSnap.meta.castTime,onCast:async()=>{let a=r.getTarget(t,i);a&&await r.doSpell(t,e.RobotBlackFireSnap,i,[a],{baseDamage:5,baseStagger:99,particleText:"Black Fire Snap!",particleTemplate:l.EFFECT_TEMPLATE_FIREBALL,soundName:"battle_fire_explosion1"})},onInterrupt:async()=>{}})}},RobotChannelEvasionBuff:{name:"RobotChannelEvasionBuff",description:"AI",cooldown:3e4,type:r.BattleActionType.CHANNEL,meta:{},cb:async function(t,a){let o={cb:(e,t,i)=>(console.log("GOT A EVASION TYPE IN PERSISTENT EFFECT CB",e,t,i),t+10),source:a,affectedAllegiance:i.BattleAllegiance.ENEMY,name:"Evasion+",description:"Units have 10% increased evasion.",icon:"effects_channel_buff",anim:s.createAnimation("effects_channel_buff2")};i.battleAddPersistentEffect(t,i.PersistentEffectEvent.onBeforeCharacterEvades,o),a.onChannelInterrupted=async()=>{i.battleRemovePersistentEffect(t,i.PersistentEffectEvent.onBeforeCharacterEvades,o)},await r.doChannel(t,e.RobotChannelEvasionBuff,a,{particleText:"Evasion+",soundName:"robot_channel_start"})}},BossRobotSwingArmoredN:{name:"BossRobotSwingArmoredNK",description:"AI",cooldown:9e3,type:r.BattleActionType.SWING,meta:{swings:[r.SwingType.NORMAL,r.SwingType.NORMAL]},cb:async function(e,t){var i,a,o;let n=r.getTarget(e,t);n&&await r.doSwing(e,this,t,n,{baseDamage:5,baseStagger:3,swingType:null!==(o=null===(a=null===(i=this.meta)||void 0===i?void 0:i.swings)||void 0===a?void 0:a[t.actionStateIndex])&&void 0!==o?o:r.SwingType.NORMAL})}},BossRobotSwingArmoredNK:{name:"BossRobotSwingArmoredNK",description:"AI",cooldown:9e3,type:r.BattleActionType.SWING,meta:{swings:[r.SwingType.KNOCK_DOWN]},cb:async function(e,t){var i,a,o;let n=r.getTarget(e,t);n&&await r.doSwing(e,this,t,n,{baseDamage:5,baseStagger:3,swingType:null!==(o=null===(a=null===(i=this.meta)||void 0===i?void 0:i.swings)||void 0===a?void 0:a[t.actionStateIndex])&&void 0!==o?o:r.SwingType.NORMAL})}},BossRobotSwingPierce:{name:"BossRobotSwingPierce",description:"AI",cooldown:10500,type:r.BattleActionType.SWING,meta:{swings:[r.SwingType.PIERCE]},cb:async function(e,t){var i,a,o;let n=r.getTarget(e,t);n&&await r.doSwing(e,this,t,n,{baseDamage:1,baseStagger:5,swingType:null!==(o=null===(a=null===(i=this.meta)||void 0===i?void 0:i.swings)||void 0===a?void 0:a[t.actionStateIndex])&&void 0!==o?o:r.SwingType.NORMAL})}},BossRobotSummonAid:{name:"BossRobotSummonAid",description:"AI",cooldown:10500,type:r.BattleActionType.CAST,meta:{castTime:1e3},cb:async function(t,s){r.getTarget(t,s)&&o.setCasting(s,{castTime:e.BossRobotSummonAid.meta.castTime,onCast:async()=>{await r.doSpell(t,e.BossRobotSummonAid,s,[],{baseDamage:void 0,baseStagger:void 0,particleText:"Summon Aid!",particleTemplate:d.get("EFFECT_TEMPLATE_PORTAL_SPAWN"),soundName:"battle_fire_explosion1",cb:()=>{let e=c.getCurrentRoom(),t=c.getCurrentBattle(),r=[{chTemplate:m.get("TUT_ROBOT_MELEE"),position:i.BattlePosition.FRONT,ai:"BATTLE_AI_ATTACK"},{chTemplate:h.varyStats(m.get("TUT_ROBOT_MAGE")),position:i.BattlePosition.MIDDLE,ai:"BATTLE_AI_ATTACK"}].map(t=>{let i=a.characterCreateFromTemplate(t.chTemplate);return u.roomAddCharacter(e,i),n.battleCharacterCreateEnemy(i,t)});p.playSoundName("battle_fire_explosion1"),r.forEach(e=>{t.enemies.push(e),t.enemiesStorage.push(e),o.resetCooldownTimer(e),i.battleSetEnemyActorPosition(t,e);let[r,n]=a.characterGetPosCenterPx(e.ch),s=d.get("EFFECT_TEMPLATE_PORTAL_SPAWN");u.roomAddParticle(t.room,l.particleCreateFromTemplate([r,n],s))}),g.renderUi()}})},onInterrupt:async()=>{}})}}};return e},t.init=e=>{let r=t.initBattleActions();e.TUT_ROBOT_MELEE_REALLY_EASY={name:"Robot M",spriteBase:"tut_robot_melee",stats:Object.assign(Object.assign({},i.battleStatsCreate()),{HP:1,STAGGER:5}),facing:a.Facing.LEFT,animationState:a.AnimationState.BATTLE_IDLE,skills:[r.RobotSwingNormalNNStaggerable],armor:0,staggerSoundName:"robot_staggered"},e.TUT_ROBOT_MELEE_EASY={name:"Robot M",spriteBase:"tut_robot_melee",stats:Object.assign(Object.assign({},i.battleStatsCreate()),{HP:15,STAGGER:15}),facing:a.Facing.LEFT,animationState:a.AnimationState.BATTLE_IDLE,skills:[r.RobotSwingNormalNNStaggerable],armor:0,staggerSoundName:"robot_staggered"},e.TUT_ROBOT_MELEE_STAGGERABLE={name:"Robot M",spriteBase:"tut_robot_melee",stats:Object.assign(Object.assign({},i.battleStatsCreate()),{HP:25,STAGGER:1}),facing:a.Facing.LEFT,animationState:a.AnimationState.BATTLE_IDLE,skills:[r.RobotSwingNormalNNStaggerable],armor:0,staggerSoundName:"robot_staggered"},e.TUT_ROBOT_MELEE={name:"Robot M",spriteBase:"tut_robot_melee",stats:Object.assign(Object.assign({},i.battleStatsCreate()),{HP:25,POW:5,STAGGER:5}),facing:a.Facing.LEFT,animationState:a.AnimationState.BATTLE_IDLE,skills:[r.RobotSwingNormalNN],armor:0,staggerSoundName:"robot_staggered"},e.TUT_ROBOT_MELEE_SPEEDY={name:"Robot M Fast",spriteBase:"tut_robot_melee_speedy",stats:Object.assign(Object.assign({},i.battleStatsCreate()),{HP:20,POW:3,STAGGER:3}),facing:a.Facing.LEFT,animationState:a.AnimationState.BATTLE_IDLE,skills:[r.RobotSwingSpeedyN],armor:0,staggerSoundName:"robot_staggered"},e.TUT_ROBOT_ARMORED={name:"Robot Armored",spriteBase:"tut_robot_armored",spriteSize:[40,40],stats:Object.assign(Object.assign({},i.battleStatsCreate()),{HP:28,POW:6,STAGGER:12}),facing:a.Facing.LEFT,animationState:a.AnimationState.BATTLE_IDLE,skills:[r.RobotSwingArmoredNK,r.RobotSwingPierce],armor:1,staggerSoundName:"robot_staggered"},e.TUT_ROBOT_RANGED={name:"Robot R",spriteBase:"tut_robot_ranged",stats:Object.assign(Object.assign({},i.battleStatsCreate()),{HP:20,POW:3,STAGGER:5}),facing:a.Facing.LEFT,animationState:a.AnimationState.BATTLE_IDLE,skills:[r.RobotRanged],armor:0,staggerSoundName:"robot_staggered"},e.TUT_ROBOT_MAGE={name:"Robot Mage",spriteBase:"tut_robot_mage",stats:Object.assign(Object.assign({},i.battleStatsCreate()),{HP:18,POW:6,STAGGER:5}),facing:a.Facing.LEFT,animationState:a.AnimationState.BATTLE_IDLE,skills:[r.RobotBlackFireSnap],armor:0,staggerSoundName:"robot_staggered"},e.TUT_ROBOT_CHANNELER={name:"Robot Chnl",spriteBase:"tut_robot_channeler",stats:Object.assign(Object.assign({},i.battleStatsCreate()),{HP:18,STAGGER:5}),facing:a.Facing.LEFT,animationState:a.AnimationState.BATTLE_IDLE,skills:[r.RobotChannelEvasionBuff],armor:0,staggerSoundName:"robot_staggered"},e.TUT_ROBOT_BOSS={name:"Big Robot!",spriteBase:"tut_robot_boss",spriteSize:[96,96],followerSize:[64,64],sortOffset:32,stats:Object.assign(Object.assign({},i.battleStatsCreate()),{HP:100,STAGGER:25}),facing:a.Facing.LEFT,animationState:a.AnimationState.BATTLE_IDLE,skills:[r.BossRobotSwingArmoredN,r.BossRobotSwingArmoredNK,r.BossRobotSwingPierce,r.BossRobotSummonAid],armor:1,hiddenHP:!0,staggerSoundName:"robot_staggered"}}})),define("db/enemies/index",["require","exports","model/battle","model/character","controller/battle-actions","db/enemies/tutorial-enemies"],(function(e,t,i,a,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=t.get=void 0;let n={};t.get=e=>{let t=n[e];if(!t)throw Error("No enemy template exists with name: "+e);return Object.assign(Object.assign({},t),{stats:Object.assign({},t.stats)})},t.init=()=>{n.ENEMY_GUY={name:"guy",spriteBase:"guy-battle",stats:Object.assign(Object.assign({},i.battleStatsCreate()),{HP:100,STAGGER:10}),facing:a.Facing.LEFT,animationState:a.AnimationState.BATTLE_IDLE,skills:[r.BattleActions.Swing,r.BattleActions.Swing],armor:1},n.ENEMY_GUY_IMPOSSIBLE={name:"guy",spriteBase:"guy-battle",stats:Object.assign(Object.assign({},i.battleStatsCreate()),{HP:1e3,STAGGER:100}),facing:a.Facing.LEFT,animationState:a.AnimationState.BATTLE_IDLE,skills:[r.BattleActions.SwingKO],armor:99},o.init(n),window.enemies=n;for(let e in n){let t=n[e];for(let e in t.skills)if(!t.skills[e])throw Error(`Enemy template '${t.name}' has invalid skill at index: ${e}`)}}})),define("db/encounters/tutorial-encounters",["require","exports","model/battle","db/enemies/index","controller/battle-management","controller/overworld-management","db/items/index","utils"],(function(e,t,i,a,r,o,n,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=void 0,t.init=e=>{e.ENCOUNTER_TUT1={roomName:"battleTut1",baseExperience:1,baseTokens:0,disableFlee:!0,enemies:[{chTemplate:a.get("TUT_ROBOT_MELEE_EASY"),position:i.BattlePosition.FRONT,ai:"BATTLE_AI_ATTACK"}],events:{onBattleStart:async e=>{await r.callScriptDuringBattle("floor1-tut-vr2-battle1-on-start")},onAfterBattleEnded:async()=>{await o.callScriptDuringOverworld("floor1-tut-vr2-battle1-on-after-end",{disableKeys:!0,hideUi:!0,setPlayerIdle:!0})}}},e.ENCOUNTER_TUT1_5={roomName:"battleTut1",baseExperience:1,baseTokens:0,disableFlee:!0,enemies:[{chTemplate:a.get("TUT_ROBOT_MELEE_STAGGERABLE"),position:i.BattlePosition.FRONT,ai:"BATTLE_AI_ATTACK"}],events:{onBattleStart:async e=>{await r.callScriptDuringBattle("floor1-tut-vr2-battle1_5-on-start")},onAfterBattleEnded:async()=>{await o.callScriptDuringOverworld("floor1-tut-vr2-battle1_5-on-after-end",{disableKeys:!0,hideUi:!0,setPlayerIdle:!0})}}},e.ENCOUNTER_TUT2={roomName:"battleTut1",baseExperience:2,baseTokens:0,disableFlee:!0,enemies:[{chTemplate:l.varyStats(a.get("TUT_ROBOT_MELEE")),position:i.BattlePosition.FRONT,ai:"BATTLE_AI_ATTACK"},{chTemplate:l.varyStats(a.get("TUT_ROBOT_MELEE_SPEEDY")),position:i.BattlePosition.BACK,ai:"BATTLE_AI_ATTACK"}],events:{onBattleStart:async e=>{await r.callScriptDuringBattle("floor1-tut-vr2-battle2-on-start")},onAfterBattleEnded:async()=>{await o.callScriptDuringOverworld("floor1-tut-vr2-battle2-on-after-end",{disableKeys:!0,hideUi:!0,setPlayerIdle:!0})}}},e.ENCOUNTER_TUT3={roomName:"battleTut1",baseExperience:2,baseTokens:0,disableFlee:!0,enemies:[{chTemplate:l.varyStats(a.get("TUT_ROBOT_MELEE")),position:i.BattlePosition.FRONT,ai:"BATTLE_AI_ATTACK"},{chTemplate:l.varyStats(a.get("TUT_ROBOT_MAGE")),position:i.BattlePosition.MIDDLE,ai:"BATTLE_AI_ATTACK"}],events:{onBattleStart:async e=>{await r.callScriptDuringBattle("floor1-tut-vr2-battle3-on-start")},onBattleEnd:async e=>{await r.callScriptDuringBattle("floor1-tut-vr2-battle3-on-end")},onAfterBattleEnded:async()=>{await o.callScriptDuringOverworld("floor1-tut-vr2-battle3-on-after-end",{disableKeys:!0,hideUi:!0,setPlayerIdle:!0})}}},e.ENCOUNTER_TUT4={roomName:"battleTut1",baseExperience:2,baseTokens:0,disableFlee:!0,enemies:[{chTemplate:l.varyStats(a.get("TUT_ROBOT_ARMORED")),position:i.BattlePosition.FRONT,ai:"BATTLE_AI_ATTACK"},{chTemplate:l.varyStats(a.get("TUT_ROBOT_MAGE")),position:i.BattlePosition.MIDDLE,ai:"BATTLE_AI_ATTACK"}],events:{onBattleStart:async e=>{await r.callScriptDuringBattle("floor1-tut-vr2-battle4-on-start")},onBattleEnd:async e=>{await r.callScriptDuringBattle("floor1-tut-vr2-battle4-on-end")},onAfterBattleEnded:async()=>{await o.callScriptDuringOverworld("floor1-tut-vr2-battle4-on-after-end",{disableKeys:!0,hideUi:!0,setPlayerIdle:!0})}}},e.ENCOUNTER_TUT_DUNGEON1={roomName:"battleTut1",baseExperience:2,baseTokens:2,enemies:[{chTemplate:l.varyStats(a.get("TUT_ROBOT_MELEE")),position:i.BattlePosition.FRONT,ai:"BATTLE_AI_ATTACK"},{chTemplate:l.varyStats(a.get("TUT_ROBOT_MELEE_SPEEDY")),position:i.BattlePosition.FRONT,ai:"BATTLE_AI_ATTACK"}]},e.ENCOUNTER_TUT_DUNGEON2={roomName:"battleTut1",baseExperience:2,baseTokens:2,getDrops:()=>Math.random()>.9?[n.get("FeeblePotion"),n.get("RezGem")]:Math.random()>.5?[Math.random()>.5?n.get("FeeblePotion"):n.get("RezGem")]:[],enemies:[{chTemplate:l.varyStats(a.get("TUT_ROBOT_MELEE")),position:i.BattlePosition.FRONT,ai:"BATTLE_AI_ATTACK"},{chTemplate:l.varyStats(a.get("TUT_ROBOT_MAGE")),position:i.BattlePosition.MIDDLE,ai:"BATTLE_AI_ATTACK"}]},e.ENCOUNTER_TUT_DUNGEON3={roomName:"battleTut1",baseExperience:5,baseTokens:3,getDrops:()=>Math.random()>.5?[n.get("FeeblePotion")]:[],enemies:[{chTemplate:l.varyStats(a.get("TUT_ROBOT_MELEE_SPEEDY")),position:i.BattlePosition.FRONT,ai:"BATTLE_AI_ATTACK"},{chTemplate:l.varyStats(a.get("TUT_ROBOT_MELEE_SPEEDY")),position:i.BattlePosition.FRONT,ai:"BATTLE_AI_ATTACK"},{chTemplate:l.varyStats(a.get("TUT_ROBOT_RANGED")),position:i.BattlePosition.MIDDLE,ai:"BATTLE_AI_ATTACK"}]},e.ENCOUNTER_TUT_DUNGEON4={roomName:"battleTut1",baseExperience:5,baseTokens:2,getDrops:()=>Math.random()>.5?[n.get("RezGem")]:[],enemies:[{chTemplate:l.varyStats(a.get("TUT_ROBOT_ARMORED")),position:i.BattlePosition.FRONT,ai:"BATTLE_AI_ATTACK"},{chTemplate:l.varyStats(a.get("TUT_ROBOT_MAGE")),position:i.BattlePosition.MIDDLE,ai:"BATTLE_AI_ATTACK"}]},e.ENCOUNTER_TUT_BOSS={roomName:"battleTutBoss",baseExperience:10,baseTokens:25,disableFlee:!0,enemies:[{chTemplate:a.get("TUT_ROBOT_BOSS"),position:i.BattlePosition.FRONT,ai:"BATTLE_AI_TUT_BOSS1"}]}}})),define("db/encounters/index",["require","exports","model/battle","db/enemies/index","controller/battle-management","db/encounters/tutorial-encounters","utils"],(function(e,t,i,a,r,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=t.getIfExists=t.get=void 0;let l={};t.get=e=>{let t=l[e];if(!t)throw Error("No encounter exists with name: "+e);return t},t.getIfExists=e=>{let t=l[e];return t?Object.assign({},t):null},t.init=()=>{l.ENCOUNTER_IMPOSSIBLE={roomName:"battle1",baseExperience:1,baseTokens:1,enemies:[{chTemplate:a.get("ENEMY_GUY_IMPOSSIBLE"),position:i.BattlePosition.FRONT,ai:"BATTLE_AI_ATTACK"}]},l.ENCOUNTER_ONE_VS_ONE={roomName:"battle1",baseExperience:1,baseTokens:1,enemies:[{chTemplate:n.varyStats(a.get("ENEMY_GUY")),position:i.BattlePosition.FRONT,ai:"BATTLE_AI_ATTACK"}]},l.ENCOUNTER_ONE_VS_TWO={roomName:"battle1",baseExperience:1,baseTokens:1,enemies:[{chTemplate:n.varyStats(a.get("ENEMY_GUY")),position:i.BattlePosition.FRONT,ai:"BATTLE_AI_ATTACK"},{chTemplate:n.varyStats(a.get("ENEMY_GUY")),position:i.BattlePosition.FRONT,ai:"BATTLE_AI_ATTACK"}]},l.ENCOUNTER_ONE_VS_THREE={roomName:"battle1",baseExperience:1,baseTokens:1,enemies:[{chTemplate:n.varyStats(a.get("ENEMY_GUY")),position:i.BattlePosition.FRONT,ai:"BATTLE_AI_ATTACK"},{chTemplate:n.varyStats(a.get("ENEMY_GUY")),position:i.BattlePosition.FRONT,ai:"BATTLE_AI_ATTACK"},{chTemplate:n.varyStats(a.get("ENEMY_GUY")),position:i.BattlePosition.MIDDLE,ai:"BATTLE_AI_ATTACK"}]},l.ENCOUNTER_TEST_EVENTS={roomName:"battleTut1",baseExperience:1,baseTokens:1,enemies:[{chTemplate:a.get("TUT_ROBOT_MELEE"),position:i.BattlePosition.FRONT,ai:"BATTLE_AI_ATTACK"}],events:{onBattleStart:async e=>{await r.callScriptDuringBattle("test-fight-event-start")},onBattleEnd:async e=>{i.battleIsVictory(e)&&await r.callScriptDuringBattle("test-fight-event-end")}}},l.ENCOUNTER_TEST_MULTI_DEATH={roomName:"battleTut1",baseExperience:1,baseTokens:1,enemies:[{chTemplate:a.get("TUT_ROBOT_MELEE_REALLY_EASY"),position:i.BattlePosition.FRONT,ai:"BATTLE_AI_ATTACK"},{chTemplate:a.get("TUT_ROBOT_MELEE_REALLY_EASY"),position:i.BattlePosition.FRONT,ai:"BATTLE_AI_ATTACK"}]},o.init(l)},t.default=l})),define("controller/overworld-management",["require","exports","model/room","model/generics","model/overworld","utils","model/character","controller/scene-management","controller/scene/scene-commands","lib/rpgscript","controller/ui-actions","model/store","controller/events","controller/loop","model/scene","model/utility","view/ui","model/sound","controller/battle-management","db/encounters/index"],(function(e,t,i,a,r,o,n,l,s,d,c,m,h,u,p,g,y,f,v,b){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateOverworld=t.callStepOffTriggers=t.callStepTriggers=t.overworldKeyHandler=t.callScriptDuringOverworld=t.resumeOverworldAi=t.pauseOverworldAi=t.enableOverworldControl=t.initiateOverworld=t.overworldKeysDisabledOnLoadVal=void 0,t.overworldKeysDisabledOnLoadVal=!1,t.initiateOverworld=(e,l,c)=>{let m=r.createOverworldFromTemplate(l);if(m){let h=m.room,u=e.leader;i.roomAddCharacter(h,u);for(let e=0;e<h.props.length;e++){let t=h.props[e];t.isItem&&p.sceneHasTreasureBeenAcquired(a.getCurrentScene(),t.id,m.name)&&i.roomRemoveProp(h,t)}a.setCurrentRoom(h),a.setCurrentPlayer(e),a.setCurrentOverworld(m),a.setRenderBackgroundColor(l.backgroundColor);let y=h.bgTransform,v=()=>{y.timer=new g.Timer(y.timer.duration),y.timer.awaits.push(v),y.timer.start()};y.timer.awaits.push(v),y.timer.start();let b=a.getCurrentScene();p.sceneSetCurrentOverworld(b,l.roomName);let w=c?h.markers[c]:null;if(w?n.characterSetPos(u,[w.x,w.y,0]):h.markers.MarkerPlayer?s.setCharacterAtMarker(u.name,"MarkerPlayer"):n.characterSetPos(u,[0,0,0]),r.overworldShow(m),console.log("initiateOverworld trigger",m.loadTriggerName),m.loadTriggerName)try{console.log("Invoke overworld trigger"),d.scriptExists(m.loadTriggerName)?(console.log("INVOKE SCRIPT AFTER A SLIGHT PAUSE",m.loadTriggerName),o.timeoutPromise(10).then(()=>{t.callScriptDuringOverworld(m.loadTriggerName,{disableKeys:!0,hideUi:!1,setPlayerIdle:!0,pause:!1})})):console.log("WARNING overworld load trigger script does not exist:",m.loadTriggerName)}catch(e){console.error(e)}else console.log("No overworld trigger was specified");return m.playerIsCollidingWithInteractable=!0,m.music&&f.playMusic(m.music,!0,500),t.overworldKeysDisabledOnLoadVal=!0,setTimeout(()=>{t.overworldKeysDisabledOnLoadVal=!1},500),m}return null};let w=()=>{let e=y.getUiInterface().appState.sections;return a.getCurrentOverworld().visible&&!e.includes(m.AppSection.ArcadeCabinet)&&!e.includes(m.AppSection.Debug)};t.enableOverworldControl=()=>{h.pushKeyHandler(t.overworldKeyHandler)},t.pauseOverworldAi=()=>{let e=a.getCurrentOverworld();e&&e.room.characters.forEach(e=>{n.characterStopAi(e)})},t.resumeOverworldAi=()=>{let e=a.getCurrentOverworld();e&&e.room.characters.forEach(e=>{n.characterStartAi(e)})},t.callScriptDuringOverworld=async(e,t,...i)=>{let o=a.getCurrentOverworld();r.overworldDisableTriggers(o),t.disableKeys&&a.disableKeyUpdate(),t.hideUi&&c.hideSections(),t.setPlayerIdle&&n.characterSetAnimationState(a.getCurrentPlayer().leader,n.AnimationState.IDLE),t.pause&&u.pause(),console.log("Call script during overworld",e,i),await l.callScript(a.getCurrentScene(),e,i);let s=a.getCurrentOverworld();r.overworldEnableTriggers(s),t.disableKeys&&a.enableKeyUpdate(),t.hideUi&&s.visible&&c.showSection(m.AppSection.Debug,!0)};let C=async(e,t)=>{let i=a.getCurrentOverworld();r.overworldDisableTriggers(i),t.disableKeys&&a.disableKeyUpdate(),t.hideUi&&c.hideSections(),t.setPlayerIdle&&n.characterSetAnimationState(a.getCurrentPlayer().leader,n.AnimationState.IDLE),await e();let o=a.getCurrentOverworld();r.overworldEnableTriggers(o),t.disableKeys&&a.enableKeyUpdate(),t.hideUi&&o.visible&&c.showSection(m.AppSection.Debug,!0)},S=(e,t,i)=>l.invokeTrigger(a.getCurrentScene(),e,t,i),T=async e=>{let t=a.getCurrentPlayer().leader,i=Array.isArray(e)?e:[e],r=a.getCurrentOverworld().collidingTriggerActivators;for(let e=0;e<r.length;e++){let o=r[e];for(let e=0;e<i.length;e++){let r=i[e],l=S(o.name,r);if(null!==l)return r!==d.TriggerType.ACTION&&r!==d.TriggerType.STEP_FIRST||n.characterSetAnimationState(t,n.AnimationState.IDLE),await C(l,{hideUi:!1,disableKeys:!0,setPlayerIdle:!1}),r===d.TriggerType.ACTION&&a.getCurrentOverworld().visible&&!y.getUiInterface().appState.sections.includes(m.AppSection.ArcadeCabinet)&&(console.log("SHOW SECTION AFTER CALLING A TRIGGER"),c.showSection(m.AppSection.Debug,!1)),a.getCharactersWithSuspendedAi().forEach(e=>{n.characterStartAi(e),a.removeCharacterWithSuspendedAi(e)}),o.name}}return""};t.overworldKeyHandler=async e=>{let s=a.getCurrentOverworld(),g=a.getIsPaused();if(!(a.isOverworldUpdateKeysDisabled()||!y.getUiInterface().appState.sections.includes(m.AppSection.Debug)||y.getUiInterface().appState.sections.includes(m.AppSection.Menu)||t.overworldKeysDisabledOnLoadVal||y.getUiInterface().appState.sections.includes(m.AppSection.Modal)||y.getUiInterface().appState.sections.includes(m.AppSection.Store)))if(h.isCancelKey(e.key))g||(u.pause(),c.showMenu(()=>{u.unpause(),c.hideSection(m.AppSection.Menu)}));else if(h.isConfirmKey(e.key)){if(!g&&s.triggersEnabled){if(await T(d.TriggerType.ACTION))return void(w()&&c.showSection(m.AppSection.Debug,!0));if(await(async()=>{let e=a.getCurrentPlayer(),r=a.getCurrentRoom(),o=e.leader,l=a.getCurrentScene();for(let e=0;e<r.props.length;e++){let s=r.props[e];if(!s.isItem)continue;let{x:d,y:c}=s;if(n.characterCollidesWithPoint(o,[d+32+12,c+32+12,16])){i.roomRemoveProp(r,s),await t.callScriptDuringOverworld("utils-get-treasure",{disableKeys:!0,hideUi:!0,setPlayerIdle:!0,pause:!1},s.itemName);let e=a.getCurrentOverworld();return p.sceneSetTreasureAcquired(l,s.id,e.name),!0}}return!1})())return void c.showSection(m.AppSection.Debug,!0);if(await(async()=>{let e=a.getCurrentPlayer(),t=a.getCurrentRoom(),r=e.leader;for(let e=0;e<t.characters.length;e++){let s=t.characters[e],[c,m]=n.characterGetPosBottom(s);if(s.talkTrigger&&n.characterCollidesWithPoint(r,[c,m,16])){let e=l.invokeTrigger(a.getCurrentScene(),s.talkTrigger,d.TriggerType.ACTION);if(null!==e){if(n.characterStopAi(s),i.roomDoCharactersOccupySameTile(t,s,r)||n.characterCollidesWithOther(s,r)){let e=i.roomGetEmptyAdjacentTile(t,s,r);e&&await n.characterSetWalkTargetAsync(r,o.tileToWorldCoords(e.x,e.y))}return await C(e,{hideUi:!0,disableKeys:!0,setPlayerIdle:!0}),n.characterStartAi(s),!0}}}return!1})())return}}else if(h.isAuxKey(e.key))g||(u.pause(),c.showSettings(()=>{l.sceneIsPlaying(a.getCurrentScene())||c.showSection(m.AppSection.Debug,!0),u.unpause()}));else switch(e.key){case"m":r.overworldHide(a.getCurrentOverworld()),v.transitionToBattle(a.getCurrentPlayer(),b.get("ENCOUNTER_TUT_BOSS"),()=>{console.log("COMPLETED!")},!0);break;case"b":a.getKeyUpdateEnabled()&&(r.overworldHide(a.getCurrentOverworld()),v.transitionToBattle(a.getCurrentPlayer(),b.get("ENCOUNTER_IMPOSSIBLE"),()=>{console.log("COMPLETED!")},!0));break;case"d":a.getTriggersVisible()?(a.hideTriggers(),a.hideMarkers()):(a.showTriggers(),a.showMarkers())}},t.callStepTriggers=async e=>{let t=(e=>{let t=a.getCurrentOverworld().collidingTriggerActivators;for(let i=0;i<t.length;i++){let a=t[i];for(let t=0;t<e.length;t++)if(S(a.name,e[t],!0))return!0}return!1})([d.TriggerType.STEP_FIRST,d.TriggerType.STEP]);t&&(e.playerIsCollidingWithInteractable?(await T(d.TriggerType.STEP),w()&&c.showSection(m.AppSection.Debug,!0),e.stepTimer.start()):(await T([d.TriggerType.STEP_FIRST,d.TriggerType.STEP]),w()&&c.showSection(m.AppSection.Debug,!0),e.stepTimer.start())),t!==e.playerIsCollidingWithInteractable&&(t||c.setCharacterText("")),e.playerIsCollidingWithInteractable=!!a.getCurrentScene().currentScript||t},t.callStepOffTriggers=async e=>{for(let t=0;t<e.previouslyCollidingTriggerActivators.length;t++){let i=e.previouslyCollidingTriggerActivators[t];if(!e.collidingTriggerActivators.includes(i)){let e=S(i.name,d.TriggerType.STEP_OFF);null!==e&&await C(e,{hideUi:!1,disableKeys:!0,setPlayerIdle:!1})}}},t.updateOverworld=e=>{let i=a.getCurrentPlayer().leader;if(!e.visible)return e.previouslyCollidingTriggerActivators=[],void(e.collidingTriggerActivators=[]);e.previouslyCollidingTriggerActivators=e.collidingTriggerActivators,e.collidingTriggerActivators=(()=>{let e=a.getCurrentPlayer(),t=a.getCurrentRoom(),i=e.leader,r=[];for(let e=0;e<t.triggerActivators.length;e++){let a=t.triggerActivators[e];n.characterCollidesWithRect(i,[a.x,a.y,a.width,a.height])&&r.push(a)}return r})();let r=!1,o=0,l=0;a.getKeyUpdateEnabled()&&!a.isOverworldUpdateKeysDisabled()&&(a.isKeyDown("ArrowLeft")?(r=!0,o-=1,l+=1):a.isKeyDown("ArrowRight")&&(r=!0,o+=1,l-=1),a.isKeyDown("ArrowUp")?(r=!0,o-=1,l-=1):a.isKeyDown("ArrowDown")&&(r=!0,o+=1,l+=1),r||i.walkTarget?n.characterSetAnimationState(i,n.AnimationState.WALK):a.isOverworldUpdateKeysDisabled()||n.characterSetAnimationState(i,n.AnimationState.IDLE),i.vx=o,i.vy=l),e.triggersEnabled&&e.stepTimer.isComplete()&&(t.callStepTriggers(e),e.stepTimer.start()),e.triggersEnabled&&t.callStepOffTriggers(e),e.room.characters.forEach(e=>{e.aiEnabled&&(e.timers=e.timers.filter(e=>(e.update(),!e.isComplete()||(e.shouldRemove=!0,!1))),e.overworldAi.update(e))})}})),define("controller/loop",["require","exports","model/generics","model/room","view/draw","model/character","model/particle","view/ui","controller/battle-management","controller/overworld-management","model/canvas","controller/scene-management","model/player","model/battle"],(function(e,t,i,a,r,o,n,l,s,d,c,m,h,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.runMainLoop=t.unpause=t.pause=void 0,t.pause=()=>{if(i.getIsPaused())return;i.setIsPaused(!0),l.renderUi(),i.getAllTimers().forEach(e=>{e.pauseOverride()});let e=i.getCameraTransform();e&&e.timer.pauseOverride();let t=i.getCurrentRoom();if(t){t.bgTransform.timer.pause();for(let e=0;e<t.renderObjects.length;e++){let i=t.renderObjects[e];i.anim&&i.anim.pause()}t.characters.forEach(e=>{e.transform&&e.transform.timer.pauseOverride(),o.characterGetAnimation(e).pause()}),t.particles.forEach(e=>{e.timer.pauseOverride(),e.anim&&e.anim.pause(),e.transform&&e.transform.timer.pauseOverride()})}let a=i.getCurrentBattle();a&&(u.battlePauseTimers(a),a.isPaused=!0)},t.unpause=()=>{if(!i.getIsPaused())return;i.setIsPaused(!1),i.getAllTimers().forEach(e=>{e.unpauseOverride()});let e=i.getCameraTransform();e&&e.timer.unpauseOverride();let t=i.getCurrentRoom();if(t){t.bgTransform.timer.unpause();for(let e=0;e<t.renderObjects.length;e++){let i=t.renderObjects[e];i.anim&&i.anim.unpause()}t.characters.forEach(e=>{e.transform&&e.transform.timer.unpauseOverride(),o.characterGetAnimation(e).unpause()}),t.particles.forEach(e=>{e.timer.unpauseOverride(),e.anim&&e.anim.unpause(),e.transform&&e.transform.timer.unpauseOverride()})}let a=i.getCurrentBattle();a&&(u.battleUnpauseTimers(a),a.isPaused=!1),l.renderUi()};let p=!1;t.runMainLoop=async()=>{if(p)return void console.log("Main loop is already running.");p=!0;let e=performance.now(),t=e;window.running=!0,c.getCanvas("outer").getContext("2d");let l=()=>window.running&&requestAnimationFrame(u),u=e=>{let u=e-t,p=u/16;if(i.setFrameMultiplier(p>4?4:p),i.setDeltaT(u),t=e,i.setNow(e),i.getIsPaused()){let[e,t]=c.getScreenSize(),a=i.getCurrentRoom(),o=(i.getCurrentBattle(),a.visible),n=0,s=0,d=i.getCurrentPlayer();if(d){let e=i.getCameraTransform();if(e){let[t,i]=e.current();n=t,s=i,e.update()}else{let[e,t]=h.playerGetCameraOffset(d);n=e,s=t}}if(i.setCameraDrawOffset([n,s]),i.isPauseRenderingEnabled()){let o=a.bgTransform;r.drawRect(0,0,e,t,i.getRenderBackgroundColor()),o.update();let n=o.current();a.bgImage&&r.drawSprite(a.bgImage,171+n[0],128+n[1])}o&&r.drawRoom(a,n,s,void 0,!i.isPauseRenderingEnabled());let m=i.getRenderables();for(let e in m)(0,m[e])();return void l()}i.getAllTimers().forEach(e=>{e.update()});let[g,y]=c.getScreenSize(),f=i.getCurrentScene(),v=i.getCurrentBattle(),b=i.getCurrentOverworld(),w=i.getCurrentRoom();f&&m.updateScene(f);let C=!1,S=0,T=0;if(w){C=w.visible;for(let e=0;e<w.tiles.length;e++)w.tiles[e].highlighted=!1;b&&d.updateOverworld(b),v&&s.updateBattle(v);for(let e=0;e<w.characters.length;e++)o.characterUpdate(w.characters[e]);for(let e=0;e<w.particles.length;e++)n.particleUpdate(w.particles[e]),w.particles[e].shouldRemove&&(a.roomRemoveParticle(w,w.particles[e]),e--);let e=i.getCurrentPlayer();if(e){let t=i.getCameraTransform();if(t){let[e,i]=t.current();S=e,T=i,t.update()}else{let[t,i]=h.playerGetCameraOffset(e);S=t,T=i}}i.setCameraDrawOffset([S,T])}let x=i.getGlobalParticleSystem();if(x)return x.updateDraw(),void l();r.clearScreen(),r.clearScreen(c.getCtx("outer")),r.drawRect(0,0,g,y,i.getRenderBackgroundColor());let E=w.bgTransform;E.update();let A=E.current();w.bgImage&&r.drawSprite(w.bgImage,171+A[0],128+A[1]),C&&r.drawRoom(w,S,T);let _=i.getRenderables();for(let e in _)(0,_[e])();l()};u(e)}})),define("db/stores",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=t.getIfExists=t.get=void 0;let i={};t.get=e=>{let t=i[e];if(!t)throw Error("No IItemStoreTemplate exists with name: "+e);return Object.assign({},t)},t.getIfExists=e=>{let t=i[e];return t?Object.assign({},t):null},t.init=()=>{i.SODA_VENDING_MACHINE={label:"Soda Vending Machine",description:"This vending machine sells a variety of tasty sodas.",openSound:"vending_machine",icon:"vending",items:[{itemName:"FennelSoda",price:5,quantity:5},{itemName:"CarrotSoda",price:5,quantity:5},{itemName:"DurianSoda",price:5,quantity:5},{itemName:"OysterSoda",price:5,quantity:5}]},i.SNACK_VENDING_MACHINE={label:"Snack Vending Machine",description:"This vending machine sells a variety of tasty snacks.",openSound:"vending_machine",icon:"vending",items:[{itemName:"GrilledTortillaChipettes",price:5,quantity:5},{itemName:"GarlicSticks",price:5,quantity:5},{itemName:"EspressoTart",price:5,quantity:5}]};for(let e in i)i[e].name=e}})),define("controller/ui-actions",["require","exports","view/ui","model/store","view/components/ArcadeCabinet/index","model/generics","model/overworld","model/sound","controller/events","model/character","controller/loop","db/stores"],(function(e,t,i,a,r,o,n,l,s,d,c,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hideInfoStatsSection=t.showInfoStatsSection=t.hideStoreSection=t.showStoreSection=t.setInterfaceStateDisabled=t.showNotification=t.removeRoomUiParticle=t.addRoomUiParticle=t.hideBattleEffect=t.showBattleEffect=t.hideQuestSection=t.showQuestSection=t.showLevelUp=t.showSave=t.showSettings=t.showMenu=t.showCharacterFollowerSelectModal=t.showPartyMemberSelectModal=t.hideModal=t.showModal=t.setCharacterText=t.setBattleCharacterSelectedAction=t.setBattleCharacterIndexSelected=t.hideChoices=t.showChoices=t.hideArcadeGame=t.setArcadeGameReady=t.setArcadeGameRunning=t.showArcadeGame=t.setCutsceneText=t.startConversationActors=t.startConversation2=t.startConversation=t.showConversation=t.hideConversation=t.hideSection=t.showSections=t.showSection=t.hideSections=t.appReducer=void 0;let h={hideSections:e=>{e.sections=[]},showSection:(e,t)=>{var i;e.sections.includes(t.section)||e.sections.push(t.section);let a=null!==(i=t.hideSections)&&void 0!==i?i:[];e.sections=e.sections.filter(e=>!a.includes(e))},hideSection:(e,t)=>{let i=e.sections.filter(e=>e!==t.section);e.sections=i},setCutsceneState:(e,t)=>{Object.assign(e.cutscene,t)},setArcadeGameState:(e,t)=>{Object.assign(e.arcadeGame,t)},setBattleState:(e,t)=>{Object.assign(e.battle,t)},setChoicesState:(e,t)=>{Object.assign(e.choices,t)},setOverworldState:(e,t)=>{void 0!==t.characterText&&t.characterText!==e.overworld.characterText&&(t.prevCharacterText=e.overworld.characterText),Object.assign(e.overworld,t)},setModalState:(e,t)=>{Object.assign(e.modal,t)},setMenuState:(e,t)=>{Object.assign(e.menu,t)},setSettingsState:(e,t)=>{Object.assign(e.settings,t)},setSaveState:(e,t)=>{Object.assign(e.save,t)},setLevelUpState:(e,t)=>{Object.assign(e.levelUp,t)},setQuestState:(e,t)=>{Object.assign(e.quest,t)},setStoreState:(e,t)=>{Object.assign(e.store,t)},setInfoStatsState:(e,t)=>{Object.assign(e.infoStats,t)},addRoomUiParticle:(e,t)=>{e.room.particles=[...e.room.particles,t]},removeRoomUiParticle:(e,t)=>{let i=e.room.particles.indexOf(t);i>-1&&e.room.particles.splice(i,1)},showNotification:(e,t)=>{e.notifications.push(t)},hideNotification:(e,t)=>{let i=e.notifications.indexOf(t);i>-1&&e.notifications.splice(i)}};t.appReducer=function(e,t){let i=Object.assign({},e),a=h[t.action];return a?(a(i,t.payload,e),console.log("MUTATE STATE",t)):console.error(`Action without a reducer mutation: "${t.action}"`,t),i},t.hideSections=()=>{i.getUiInterface().dispatch({action:"hideSections"})},t.showSection=(e,a,r)=>{let o=i.getUiInterface().appState.sections;a&&1===o.length&&o[0]===e?console.log("Show section skipped because it would result in a redundant render."):(a&&t.hideSections(),i.getUiInterface().dispatch({action:"showSection",payload:{section:e,hideSections:r}}))},t.showSections=(e,a)=>{a&&t.hideSections(),e.forEach(e=>{i.getUiInterface().dispatch({action:"showSection",payload:{section:e}})})},t.hideSection=e=>{let t={section:e};i.getUiInterface().dispatch({action:"hideSection",payload:t})},t.hideConversation=()=>{o.setOverworldUpdateKeysDisabled(!1),i.getUiInterface().dispatch({action:"setCutsceneState",payload:{visible:!1,portraitLeft:"",portraitLeft2:"",portraitRight:"",portraitRight2:"",portraitCenter:"",portraitLeftEmotion:"",portraitLeft2Emotion:"",portraitRightEmotion:"",portraitRight2Emotion:"",portraitCenterEmotion:"",actorName:"",actors:[],portraitActors:[]}})},t.showConversation=()=>{i.getUiInterface().dispatch({action:"setCutsceneState",payload:{visible:!0}})},t.startConversation=(e,r)=>{o.setOverworldUpdateKeysDisabled(!0),t.showSection(a.AppSection.Cutscene,!1,[a.AppSection.Debug,a.AppSection.Menu]),i.getUiInterface().dispatch({action:"setCutsceneState",payload:{showBars:r,portraitCenter:e,portraitLeft:"",portraitRight:"",portraitLeft2:"",portraitRight2:"",portraitLeftEmotion:"",portraitLeft2Emotion:"",portraitRightEmotion:"",portraitRight2Emotion:"",portraitCenterEmotion:"",speaker:a.CutsceneSpeaker.None,visible:!0,actors:[],portraitActors:[]}})},t.startConversation2=(e,r)=>{o.setOverworldUpdateKeysDisabled(!0),t.showSection(a.AppSection.Cutscene,!1,[a.AppSection.Debug,a.AppSection.Menu]),i.getUiInterface().dispatch({action:"setCutsceneState",payload:{showBars:!0,portraitLeft:e,portraitRight:r,portraitLeft2:"",portraitRight2:"",portraitCenter:"",portraitLeftEmotion:"",portraitLeft2Emotion:"",portraitRightEmotion:"",portraitRight2Emotion:"",portraitCenterEmotion:"",speaker:a.CutsceneSpeaker.None,speakerName:"",visible:!0,actors:[],portraitActors:[]}})},t.startConversationActors=(e,r)=>{o.setOverworldUpdateKeysDisabled(!0),t.showSection(a.AppSection.Cutscene,!1,[a.AppSection.Debug,a.AppSection.Menu]);let n=e.filter(e=>!!d.characterGetPortraitSpriteName(e)),l=e.filter(e=>!d.characterGetPortraitSpriteName(e));console.log("set actors",n,l),i.getUiInterface().dispatch({action:"setCutsceneState",payload:{showBars:r,portraitCenter:"ada",portraitLeft:"",portraitRight:"",portraitLeft2:"",portraitRight2:"",portraitLeftEmotion:"",portraitLeft2Emotion:"",portraitRightEmotion:"",portraitRight2Emotion:"",portraitCenterEmotion:"",speaker:a.CutsceneSpeaker.None,actorName:"",visible:!0,actors:l,portraitActors:n}})},t.setCutsceneText=(e,t,a,r)=>{if(e){let e=document.getElementById("cutscene-textbox-content");e&&(e.innerHTML="")}let o={text:e,visible:!0,speakerName:"",id:+new Date+""};t&&(o.speaker=t,o.actorName=null!=r?r:"",o.speakerName=a),i.getUiInterface().dispatch({action:"setCutsceneState",payload:o})},t.showArcadeGame=e=>{var s,d;let m={path:e,isGameRunning:!1,isGameReady:!1};i.getUiInterface().dispatch({action:"setArcadeGameState",payload:m});let h=r.getArcadeGamePathMeta(e);o.setOverworldUpdateKeysDisabled(!0),(null===(s=null==h?void 0:h.cabinet)||void 0===s?void 0:s.music)||l.stopCurrentMusic(250),(null===(d=null==h?void 0:h.cabinet)||void 0===d?void 0:d.disabled)?(t.setInterfaceStateDisabled(!0),t.showSection(a.AppSection.ArcadeCabinet,!1)):(n.overworldHide(o.getCurrentOverworld()),c.pause(),t.showSection(a.AppSection.ArcadeCabinet,!0))},t.setArcadeGameRunning=e=>{let t={isGameRunning:e};i.getUiInterface().dispatch({action:"setArcadeGameState",payload:t})},t.setArcadeGameReady=e=>{let t={isGameReady:e};i.getUiInterface().dispatch({action:"setArcadeGameState",payload:t})},t.hideArcadeGame=()=>{c.unpause(),i.getUiInterface().dispatch({action:"setArcadeGameState",payload:{path:"",isGameRunning:!1,isGameReady:!1}}),t.showSection(a.AppSection.Debug,!0),t.setInterfaceStateDisabled(!1),o.setOverworldUpdateKeysDisabled(!1);let e=o.getCurrentOverworld();n.overworldShow(e),e.music&&l.playMusic(e.music,!0,250)},t.showChoices=e=>{t.showSection(a.AppSection.Choices,!1);let r={choiceTexts:e,keyHandlerInternal:s.pushEmptyKeyHandler()};i.getUiInterface().dispatch({action:"setChoicesState",payload:r}),l.playSoundName("menu_choice_open")},t.hideChoices=()=>{s.popKeyHandler(i.getUiInterface().appState.choices.keyHandlerInternal),t.hideSection(a.AppSection.Choices)},t.setBattleCharacterIndexSelected=e=>{let t={characterIndexSelected:e};i.getUiInterface().dispatch({action:"setBattleState",payload:t})},t.setBattleCharacterSelectedAction=(e,t)=>{e.ch.skillIndex=t,i.renderUi()},t.setCharacterText=e=>{let t=i.getUiInterface();t.appState.overworld.characterText!==e&&t.dispatch({action:"setOverworldState",payload:{characterText:e}})},t.showModal=(e,r)=>{var o,n,l;let s={section:e,onClose:r.onClose,onConfirm:r.onConfirm,body:r.body,danger:null!==(o=r.danger)&&void 0!==o&&o,filter:null!==(n=r.filter)&&void 0!==n?n:()=>!0,meta:null!==(l=r.meta)&&void 0!==l?l:{}};i.getUiInterface().dispatch({action:"setModalState",payload:s}),t.showSection(a.AppSection.Modal,!1)},t.hideModal=()=>{t.hideSection(a.AppSection.Modal)},t.showPartyMemberSelectModal=e=>{t.showModal(a.ModalSection.SELECT_PARTY_MEMBER,{onClose:e.onClose,onConfirm:e.onCharacterSelected,filter:e.filter,body:e.body,meta:{showDelayInfo:e.showDelayInfo,itemNameForDescription:e.itemNameForDescription}})},t.showCharacterFollowerSelectModal=e=>{t.showModal(a.ModalSection.SELECT_CHARACTER_FOLLOWER,{onClose:e.onClose,onConfirm:e.onCharacterSelected,filter:e.filter,body:e.body,meta:{characters:e.characters,isAll:e.isAll}})},t.showMenu=e=>{l.playSoundName("menu_choice_open");let r={onClose:e};i.getUiInterface().dispatch({action:"setMenuState",payload:r}),t.showSection(a.AppSection.Menu,!1)},t.showSettings=e=>{l.playSoundName("menu_choice_open");let r={onClose:e};i.getUiInterface().dispatch({action:"setSettingsState",payload:r}),t.showSection(a.AppSection.Settings,!1)},t.showSave=e=>{l.playSoundName("menu_choice_open");let r={onClose:e};i.getUiInterface().dispatch({action:"setSaveState",payload:r}),t.showSection(a.AppSection.Save,!1)},t.showLevelUp=e=>{l.playSoundName("blip");let r={onClose:e};i.getUiInterface().dispatch({action:"setLevelUpState",payload:r}),t.showSection(a.AppSection.LevelUp,!1)},t.showQuestSection=(e,r)=>{let o={onClose:r,questName:e};i.getUiInterface().dispatch({action:"setQuestState",payload:o}),t.showSection(a.AppSection.Quest,!1)},t.hideQuestSection=()=>{t.hideSection(a.AppSection.Quest)},t.showBattleEffect=(e,t)=>{let a={effect:{bChList:e,effectAnimName:t,active:!0}};i.getUiInterface().dispatch({action:"setBattleState",payload:a})},t.hideBattleEffect=()=>{i.getUiInterface().dispatch({action:"setBattleState",payload:{effect:{active:!1,effectAnimName:"",bChList:[]}}})},t.addRoomUiParticle=e=>{i.getUiInterface().dispatch({action:"addRoomUiParticle",payload:e})},t.removeRoomUiParticle=e=>{let t=i.getUiInterface();t.appState.room.particles.indexOf(e)>-1&&t.dispatch({action:"removeRoomUiParticle",payload:e})},t.showNotification=e=>{e.timeoutId=setTimeout(()=>{i.getUiInterface().dispatch({action:"hideNotification",payload:e})},3e3),i.getUiInterface().dispatch({action:"showNotification",payload:e})},t.setInterfaceStateDisabled=e=>{i.getUiInterface().dispatch({action:"setOverworldState",payload:{interfaceDisabled:e}})},t.showStoreSection=(e,r)=>{let o={onClose:r,storeName:e},n=m.get(e);l.playSoundName(n.openSound?n.openSound:"menu_choice_open"),i.getUiInterface().dispatch({action:"setStoreState",payload:o}),t.showSection(a.AppSection.Store,!1)},t.hideStoreSection=()=>{let e=i.getUiInterface().appState.store.storeName;if(e){let t=m.get(e);l.playSoundName(t.closeSound?t.closeSound:"menu_choice_close")}t.hideSection(a.AppSection.Store)},t.showInfoStatsSection=e=>{let r={onClose:e};i.getUiInterface().dispatch({action:"setInfoStatsState",payload:r}),t.showSection(a.AppSection.InfoStats,!1),l.playSoundName("menu_choice_open")},t.hideInfoStatsSection=()=>{t.hideSection(a.AppSection.InfoStats),l.playSoundName("menu_choice_close")}})),define("db/tiles",["require","exports","utils"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=t.getReplacementTemplate=t.getIfExists=t.get=void 0;let a={},r={};window.tileTemplates=a,t.get=e=>{let t=a[e];if(!t)throw Error("No tile template exists with name: "+e);return Object.assign({},t)},t.getIfExists=e=>{let t=a[e];return t?Object.assign({},t):null},t.getReplacementTemplate=e=>{let i=r[e];if(!i)return null;let a=t.get(i);return Object.assign({},a)};let o=(e,t,i,o,n)=>{let l=["bck_close","fwd_close","bck_open","fwd_open"],s=["BCK_CLOSED","FWD_CLOSED","BCK_OPEN","FWD_OPEN"];for(let r=0;r<l.length;r++){let n=l[r],d=s[r];a[e+"_"+d]={baseSprite:d.includes("BCK")?o:i,animName:t+"_"+n,isWall:r<2}}n||(r[o]=e+"_BCK_CLOSED",r[i]=e+"_FWD_CLOSED")};t.init=()=>{o("WOOD_DOOR","walls-anims_wood_door","walls_23","walls_24"),((e,t,i,o,n)=>{let l=["bck_close1","bck_close2","fwd_close1","fwd_close2","bck_open1","bck_open2","fwd_open1","fwd_open2"],s=["BCK_CLOSED1","BCK_CLOSED2","FWD_CLOSED1","FWD_CLOSED2","BCK_OPEN1","BCK_OPEN2","FWD_OPEN1","FWD_OPEN2"];for(let e=0;e<l.length;e++){let t=l[e],i=s[e];a["RED_DOOR_"+i]={baseSprite:i.includes("BCK")?"walls_14":"walls_13",animName:"walls-anims_red_door_"+t,isWall:e<4}}r.walls_14="RED_DOOR_BCK_CLOSED1",r.walls_13="RED_DOOR_FWD_CLOSED1"})(),o("DARK_BLOCK","walls-anims_dark_block","walls_36","walls_36",!0),a.RED_DOOR_BCKL_CLOSED={baseSprite:"walls_14",animName:"walls-anims_red_door_bck_close1",isWall:!0},a.RED_DOOR_BCKR_CLOSED={baseSprite:"walls_14",animName:"walls-anims_red_door_bck_close2",isWall:!0},a.RED_DOOR_FWDL_CLOSED={baseSprite:"walls_13",animName:"walls-anims_red_door_fwd_close1",isWall:!0},a.RED_DOOR_FWDR_CLOSED={baseSprite:"walls_13",animName:"walls-anims_red_door_fwd_close2",isWall:!0},a.RED_DOOR_BCKL_OPEN={baseSprite:"walls_14",animName:"walls-anims_red_door_bck_open1",isWall:!1},a.RED_DOOR_BCKR_OPEN={baseSprite:"walls_14",animName:"walls-anims_red_door_bck_open2",isWall:!1},a.RED_DOOR_FWDL_OPEN={baseSprite:"walls_13",animName:"walls-anims_red_door_fwd_open1",isWall:!1},a.RED_DOOR_FWDR_OPEN={baseSprite:"walls_13",animName:"walls-anims_red_door_fwd_open2",isWall:!1},a.ELEVATOR_BCK_CLOSED1={baseSprite:"walls_7",animName:"walls-anims_elevator_bck_close1",isWall:!0},a.ELEVATOR_BCK_CLOSED2={baseSprite:"walls_7",animName:"walls-anims_elevator_bck_close2",isWall:!0},a.ELEVATOR_FWD_CLOSED1={baseSprite:"walls_6",animName:"walls-anims_elevator_fwd_close1",isWall:!0},a.ELEVATOR_FWD_CLOSED2={baseSprite:"walls_6",animName:"walls-anims_elevator_fwd_close2",isWall:!0},a.ELEVATOR_BCK_OPEN1={baseSprite:"walls_7",animName:"walls-anims_elevator_bck_open1",isWall:!1},a.ELEVATOR_BCK_OPEN2={baseSprite:"walls_7",animName:"walls-anims_elevator_bck_open2",isWall:!1},a.ELEVATOR_FWD_OPEN1={baseSprite:"walls_6",animName:"walls-anims_elevator_fwd_open1",isWall:!1},a.ELEVATOR_FWD_OPEN2={baseSprite:"walls_6",animName:"walls-anims_elevator_fwd_open2",isWall:!1},a.TALL_RED_DOOR_BCK_OPEN={baseSprite:"walls128_2",animName:"walls128-anims_tall_red_door_bck_open",isWall:!1},a.TALL_RED_DOOR_BCK_CLOSED={baseSprite:"walls128_2",animName:"walls128-anims_tall_red_door_bck_closed",isWall:!0},a.KIOSK_STATS_ACTIVE={baseSprite:"props_26",animName:"tile_vr_portal_active",isWall:!0,isProp:!1},a.KIOSK_STATS_PASSIVE={baseSprite:"props_26",animName:"tile_vr_portal_passive",isWall:!0,isProp:!1},a.SAVE_POINT_ACTIVE={baseSprite:"props_30",animName:"tile_save_point_active",isWall:!0,isProp:!1,size:[32,64]},a.SAVE_POINT_PASSIVE={baseSprite:"props_30",animName:"tile_save_point_passive",isWall:!0,isProp:!1,size:[32,64]},a.SAVE_POINT_PASSIVE_INITIAL={baseSprite:"props_30",animName:"tile_save_point_passive_initial",isWall:!0,isProp:!1},r.props_30="SAVE_POINT_PASSIVE_INITIAL",a.VR_PORTAL_FLOOR={baseSprite:"floors_15",animName:"tile_vr_portal_floor_anim"},r.floors_15="VR_PORTAL_FLOOR",a.TUT_GATE_FLOOR={baseSprite:"floors_59",animName:"floors_59",isWall:!1,hasFloorTile:!1,size:[32,32],pxOffset:[0,48]},a.TUT_GATE={baseSprite:"walls_18",animName:"walls_18",isWall:!0,size:[32,64]},a.TUT_GATE_YELLOW={baseSprite:"walls_19",isWall:!0,floorTile:"TUT_GATE_FLOOR",size:[32,64]},a.TUT_GATE_BLUE={baseSprite:"walls_20",isWall:!0,floorTile:"TUT_GATE_FLOOR",size:[32,64]},a.TUT_GATE_PURPLE={baseSprite:"walls_21",isWall:!0,floorTile:"TUT_GATE_FLOOR",size:[32,64]},a.TUT_GATE_RED={baseSprite:"walls_22",isWall:!0,floorTile:"TUT_GATE_FLOOR",size:[32,64]},a.HEAL_POOL={baseSprite:"props_29",animName:"tile_heal_pool_anim",isWall:!0,isProp:!0,size:[32,64]},r.props_29="HEAL_POOL",a.HEAL_POOL_INACTIVE={baseSprite:"props_29",animName:"tile_heal_pool_inactive",isWall:!0,isProp:!0,hasFloorTile:!0,floorTile:"TUT_GATE_FLOOR",size:[32,64]},a.PROPS_BOWLING_DISPENSER={baseSprite:"props_32",isWall:!0,isProp:!0},r.props_32="PROPS_BOWLING_DISPENSER",a.TIC_TAC_TOE_EXCITED={baseSprite:"props_12",animName:"props-anims-tic-tac-toe-machine-excited",isWall:!0,isProp:!0,size:[32,64]},a.TIC_TAC_TOE_NORMAL={baseSprite:"props_12",animName:"props-anims-tic-tac-toe-machine-excited",isWall:!0,isProp:!0,size:[32,64]},a.BRIDGE_FLOOR_FLICKER={baseSprite:"floors_59",animName:"tile_floor_flicker",size:[32,32],onAfterCreation:e=>{var t;let a=null===(t=null==e?void 0:e.ro)||void 0===t?void 0:t.anim;a&&(a.disableSounds(),a.timestampStart-=Math.round(Math.random()*a.getDurationMs()),i.timeoutPromise(500).then(()=>{a.enableSounds()}))}},r.floors_61="BRIDGE_FLOOR_FLICKER",a.SQUARE_MACHINE={baseSprite:"props_37",animName:"props-anims-square-machine",isWall:!0,isProp:!0,size:[32,64]},r.props_37="SQUARE_MACHINE"}})),define("db/characters/party",["require","exports","model/battle","model/character","db/items/index"],(function(e,t,i,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=void 0,t.init=()=>{let e={};return e.Ada={name:"Ada",fullName:"Adalais Eldridge",spriteBase:"ada",staggerSoundName:"battle_staggered1",stats:Object.assign(Object.assign({},i.battleStatsCreate()),{STAGGER:15,HP:50}),facing:a.Facing.DOWN,animationState:a.AnimationState.IDLE,weaponEquipTypes:[r.WeaponType.SWORD],collisionSize:8,speed:1.5},e.Conscience={name:"Conscience",fullName:"<Unknown Entity>",spriteBase:"conscience",talkTrigger:"",staggerSoundName:"battle_staggered1",facing:a.Facing.DOWN,animationState:a.AnimationState.IDLE,weaponEquipState:a.WeaponEquipState.RANGED,weaponEquipTypes:[r.WeaponType.BOW,r.WeaponType.WAND],stats:Object.assign(Object.assign({},i.battleStatsCreate()),{STAGGER:12,HP:35}),speed:1.5},e.Skye={name:"Skye",fullName:"Skye Salsbeck",spriteBase:"skye",talkTrigger:"",staggerSoundName:"battle_staggered1",facing:a.Facing.LEFT_UP,animationState:a.AnimationState.IDLE,weaponEquipTypes:[r.WeaponType.HAMMER],speed:1.5,stats:Object.assign(Object.assign({},i.battleStatsCreate()),{HP:55})},e.Anjana={name:"Anjana",fullName:"Anjana Lal",spriteBase:"skye",talkTrigger:"",staggerSoundName:"battle_staggered1",facing:a.Facing.LEFT_UP,animationState:a.AnimationState.IDLE,weaponEquipTypes:[r.WeaponType.WAND],speed:1.5,stats:Object.assign(Object.assign({},i.battleStatsCreate()),{HP:40})},e.Vivi={name:"Vivi",fullName:"Vivianna Mills",spriteBase:"skye",talkTrigger:"",staggerSoundName:"battle_staggered1",facing:a.Facing.LEFT_UP,animationState:a.AnimationState.IDLE,weaponEquipTypes:[r.WeaponType.WAND],speed:1.5,stats:Object.assign(Object.assign({},i.battleStatsCreate()),{HP:40})},e.Iroha={name:"Iroha",fullName:"Iroha Shimomura",spriteBase:"skye",talkTrigger:"",staggerSoundName:"battle_staggered1",facing:a.Facing.LEFT_UP,animationState:a.AnimationState.IDLE,weaponEquipTypes:[r.WeaponType.WAND],speed:1.5,stats:Object.assign(Object.assign({},i.battleStatsCreate()),{HP:40})},e}})),define("db/characters/tutorial-roamers",["require","exports","model/character"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=void 0,t.init=()=>{let e={};return e.TutRobotRoamer1={name:"TutRobotRoamer1",spriteBase:"tut_robot_roamer",facing:i.Facing.LEFT,animationState:i.AnimationState.IDLE,overworldAi:"ROAM_WALK_RIGHT_LEFT",visionRange:44},e.TutRobotRoamer2={name:"TutRobotRoamer1",spriteBase:"guy3",facing:i.Facing.LEFT,animationState:i.AnimationState.IDLE,overworldAi:"ROAM_WALK_RIGHT_LEFT",visionRange:44},e.TutRobotRoamerBoss={name:"TutRobotRoamerBoss",spriteBase:"tut_robot_boss",facing:i.Facing.RIGHT,animationState:i.AnimationState.IDLE,visionRange:1,spriteSize:[96,96]},e.TutRobotDummy0={name:"TutRobotDummy0",spriteBase:"tut_robot_roamer",facing:i.Facing.LEFT_DOWN,animationState:i.AnimationState.IDLE},e.TutRobotDummy1={name:"TutRobotDummy1",spriteBase:"tut_robot_roamer",facing:i.Facing.LEFT_DOWN,animationState:i.AnimationState.WALK},e.TutRobotDummy2={name:"TutRobotDummy2",spriteBase:"tut_robot_roamer",facing:i.Facing.RIGHT_UP,animationState:i.AnimationState.WALK},e.TutRobotDummy3={name:"TutRobotDummy3",spriteBase:"tut_robot_roamer",facing:i.Facing.UP,animationState:i.AnimationState.WALK},e.TutRobotDummy4={name:"TutRobotDummy4",spriteBase:"tut_robot_roamer",facing:i.Facing.DOWN,animationState:i.AnimationState.WALK},e}})),define("db/characters/test2",["require","exports","model/character"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=void 0,t.init=()=>{let e={};return e.TestDialogA={name:"TestDialogA",spriteBase:"guy2",facing:i.Facing.RIGHT_DOWN,animationState:i.AnimationState.IDLE,talkTrigger:"test-testDialogA"},e.TestDialogB={name:"TestDialogB",spriteBase:"girl2",facing:i.Facing.RIGHT_DOWN,animationState:i.AnimationState.IDLE,talkTrigger:"test-testDialogB"},e.TestDialogC={name:"TestDialogC",spriteBase:"girl3",facing:i.Facing.RIGHT_DOWN,animationState:i.AnimationState.IDLE,talkTrigger:"test-testDialogC"},e.TestDialogD={name:"TestDialogD",spriteBase:"girl",facing:i.Facing.DOWN,animationState:i.AnimationState.IDLE,talkTrigger:"test-testDialogD"},e.TestDialogE={name:"TestDialogE",spriteBase:"girl",facing:i.Facing.LEFT_DOWN,animationState:i.AnimationState.IDLE,talkTrigger:"test-testDialogE"},e.Shopkeep={name:"Shopkeep",spriteBase:"employee-guy",facing:i.Facing.LEFT_DOWN,animationState:i.AnimationState.IDLE,talkTrigger:"test-ada-sigma-shopkeep"},e}})),define("controller/pathfinding",["require","exports","model/room","utils"],(function(e,t,i,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createPFPath=t.pfPathToRoomPath=void 0;let r=!1,o=(e,t,i)=>t<0||t>=e.width||i<0||i>=e.height?null:e.nodes[a.to1dIndex([t,i],e.width)];t.pfPathToRoomPath=e=>e.path.map(e=>[e[0]*i.TILE_WIDTH_WORLD,e[1]*i.TILE_HEIGHT_WORLD]),t.createPFPath=(e,t,i)=>{let n={path:[]},l=(e=>({width:e.width,height:e.height,nodes:e.tiles.map(e=>({hCost:9999999,cost:9999999,isWall:e.isWall,x:e.x,y:e.y,connections:[],tile:e,visited:!1}))}))(i);((e,t,i)=>{if(!i.nodes[a.to1dIndex(t,i.width)])throw console.error(e,t,i),Error("Cannot setupPFGraph: End point is not in PFGraph");a.to1dIndex(e,i.width),i.nodes.forEach(e=>{e.visited=!1,e.connections=((e,t)=>[o(t,e.x,e.y-1),o(t,e.x-1,e.y),o(t,e.x,e.y+1),o(t,e.x+1,e.y)].filter(e=>{var i,a,n,l;if(!e)return!1;let s=o(t,null!==(i=null==e?void 0:e.x)&&void 0!==i?i:-1,null!==(a=null==e?void 0:e.y)&&void 0!==a?a:0),d=o(t,null!==(n=null==e?void 0:e.x)&&void 0!==n?n:0,null!==(l=null==e?void 0:e.y)&&void 0!==l?l:-1);return r&&console.log("CHECK GET CONNECTIONS NODE",e),!(!e||(e.isWall?(r&&console.log("-- node is wall"),1):s&&s.isWall?(r&&console.log("-- node below is wall"),1):d&&d.isWall?(r&&console.log("-- node right is wall"),1):(r&&console.log("-- NODE IS CONNECTED!"),0)))}).map(e=>({node:e,cost:1})))(e,i),r=!1})})(e,t,l);let s=l.nodes[a.to1dIndex(e,l.width)];if(!s)throw console.error(e,t,l),Error("Cannot createPFPath: Start point is not in PFGraph");let d=l.nodes[a.to1dIndex(t,l.width)];if(!d)throw console.error(e,t,l),Error("Cannot createPFPath: End point is not in PFGraph");if(s===d)return n.path=[[s.x,s.y]],n;let c=[s];s.cost=0,s.hCost=0;let m=0;for(;c.length&&m<500;){let e=c.shift();if(e===d)break;if(!e)break;for(let t=0;t<e.connections.length;t++){let{node:i,cost:r}=e.connections[t],o=e.cost+r;o<i.cost&&(i.cost=o,i.hCost=o+a.calculateDistance([i.x,i.y,0],[d.x,d.y,0]),i.parent=e,c.includes(i)||c.push(i))}c=c.sort((e,t)=>e.hCost<t.hCost?-1:1),m++}if(1e3===m||0===c.length)return console.log(e,t,l,s,d),console.error("Cannot find path, too long or impossible"),n;let h=d;do{n.path.push([h.x,h.y]),h=h.parent}while(h&&h.parent);return n.path=n.path.reverse(),n}})),define("db/overworld-ai",["require","exports","model/character","model/overworld","model/utility","controller/scene/scene-commands","utils","model/generics","model/room","controller/pathfinding","controller/battle-management","controller/battle-actions","model/particle","model/sound","model/scene","model/animation"],(function(e,t,i,a,r,o,n,l,s,d,c,m,h,u,p,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=t.createIntervalAI=t.createWalkerAI=t.getIfExists=t.get=void 0;let y={};t.get=e=>{let t=y[e];if(!t)throw Error("No overworld-ai exists with name: "+e);return Object.assign({},t)},t.getIfExists=e=>{let t=y[e];return t?Object.assign({},t):null},t.createWalkerAI=(e,t)=>{let a=0,o="",n=(t,r)=>{let n=l.getCurrentRoom();a=t.aiState.nextMarker,o=e[a],t.aiState.nextMarker=(a+1)%e.length;let s=n.markers[o];s?i.characterSetWalkTarget(t,[s.x,s.y],r):console.error("OAI: Could not find target marker with name: "+o)};return{onCreate:e=>{e.aiState.isWaiting=!0,e.aiState.nextMarker=0;let a=new r.Timer(500);a.awaits.push(()=>{n(e,()=>{(null==t?void 0:t.onReachDestination)&&t.onReachDestination(e,o),e.aiState.isWaiting=!1})}),i.characterAddTimer(e,a)},update:e=>{var a;if(!e.aiState.isWaiting){e.aiState.isWaiting=!0;let l=new r.Timer(null!==(a=null==t?void 0:t.pauseDurationMs)&&void 0!==a?a:600);l.awaits.push(()=>{n(e,()=>{e.aiState.isWaiting=!1,(null==t?void 0:t.onReachDestination)&&t.onReachDestination(e,o)})}),i.characterAddTimer(e,l)}}}},t.createIntervalAI=(e,t)=>({onCreate:t=>{t.aiState.isWaiting=!0;let a=new r.Timer(e);a.awaits.push(()=>{t.aiState.isWaiting=!1}),i.characterAddTimer(t,a)},update:a=>{if(!a.aiState.isWaiting){a.aiState.isWaiting=!0;let o=new r.Timer(e);o.awaits.push(()=>{a.aiState.isWaiting=!1}),t(a),i.characterAddTimer(a,o)}}});let f=e=>{let t=e.encounter,r=l.getCurrentRoom();if(t){u.playSoundName("battle_encountered"),a.overworldHide(l.getCurrentOverworld());let o=l.getCurrentPlayer(),n=i.characterGetPos(o.leader);c.transitionToBattle(o,t,c.getReturnToOverworldBattleCompletionCB(r,n,o.leader.facing,t,e),!1)}else console.error("ERROR: Roamer has no Encounter!",e)};t.init=()=>{y.DO_NOTHING={update:function(){}},y.ROAM_SEEK_PLAYER={onCreate:e=>{e.aiState.halted=!0;let t=new r.Timer(500);t.awaits.push(()=>{e.aiState.halted=!1}),i.characterAddTimer(e,t)},update:e=>{e.aiState.halted||e.walkTarget||(e=>{var t;let a=l.getCurrentRoom(),c=i.characterGetPos(e),m=i.characterGetPos(l.getCurrentPlayer().leader),h=s.roomGetTileBelow(a,n.truncatePoint3d(c)),g=s.roomGetTileBelow(a,n.truncatePoint3d(m)),y=d.createPFPath([(null==h?void 0:h.x)||0,(null==h?void 0:h.y)||0],[(null==g?void 0:g.x)||0,(null==g?void 0:g.y)||0],l.getCurrentRoom()),f=d.pfPathToRoomPath(y),v=null!==(t=f[1])&&void 0!==t?t:f[0];if(v)i.characterSetWalkTarget(e,[v[0]-7,v[1]-7],()=>{});else{let t=async()=>{e.encounterStuckRetries>3?(u.playSoundName("spawn_enemy"),o.spawnParticleAtCharacter("EFFECT_TEMPLATE_SPAWN",e.name,"normal"),await n.timeoutPromise(400),o.despawnCharacter(e.name)):(s.awaits.push(()=>{e.aiState.halted=!1}),i.characterAddTimer(e,s))},a=l.getCurrentScene();if(p.sceneIsWaiting(a)||a.currentScript)return;e.aiState.halted=!0;let s=new r.Timer(300);e.encounterStuckRetries++,t()}})(e);let t=l.getCurrentScene();p.sceneIsWaiting(t)||t.currentScript||!e.aiState.encountered&&i.characterCollidesWithOther(e,l.getCurrentPlayer().leader)&&(e.aiState.halted=!0,e.aiState.encountered=!0,s.roomRemoveCharacter(l.getCurrentRoom(),e),f(e))}};let e=function(e){let[t,a]=e,o=(e,r)=>{let o=l.getCurrentRoom(),[d,c]=i.characterGetPos(e),m=e.aiState.nextMarker;e.aiState.nextMarker=(m+1)%2;let h=((e,t,a)=>{let r=s.roomGetTileBelow(e,t);if(!r)return console.error(e,t,a),console.error("cannot findNextLinearWalkPosition, given startingPoint is not contained within the room."),[0,0];let[o,l]=n.facingToIncrements(n.pxFacingToWorldFacing(a)),d=0,c=t[0],m=t[1],h=!0;do{if(r){let t=s.roomGetTileAt(e,r.x+o,r.y+l);if(!t||t.isWall)break;if(o>0){let i=s.roomGetTileAt(e,t.x+1,t.y);if(null==i?void 0:i.isWall){h=!1;break}}if(l>0){let i=s.roomGetTileAt(e,t.x,t.y+1);if(null==i?void 0:i.isWall){h=!1;break}}r=t,c+=16*o,m+=16*l}d++}while(d<100);return h&&(c-=8*o,m-=8*l),a===i.Facing.LEFT_DOWN?m+=13:a===i.Facing.RIGHT_DOWN&&(c+=13),[c,m]})(o,[d,c],0===m?t:a);i.characterSetWalkTarget(e,h,r)};return{onCreate:e=>{e.aiState.isWaiting=!0,e.aiState.nextMarker=1;let t=new r.Timer(1e3);t.awaits.push(()=>{o(e,()=>{e.aiState.isWaiting=!1})}),i.characterAddTimer(e,t)},update:e=>{if(!e.aiState.isWaiting){e.aiState.isWaiting=!0;let t=new r.Timer(1e3);t.awaits.push(()=>{o(e,()=>{e.aiState.isWaiting=!1})}),i.characterAddTimer(e,t)}let t=l.getCurrentPlayer();if(i.characterCanSeeOther(e,t.leader)){u.playSoundName("aggro_alert");let t=m.createParticleAtCharacter(Object.assign({},h.EFFECT_TEMPLATE_AGGROED),e);e.speed=1.6,s.roomAddParticle(l.getCurrentRoom(),t),i.characterClearTimers(e),i.characterStopWalking(e),i.characterSetOverworldAi(e,y.ROAM_SEEK_PLAYER)}!e.aiState.encountered&&i.characterCollidesWithOther(e,l.getCurrentPlayer().leader)&&(e.aiState.halted=!0,e.aiState.encountered=!0,s.roomRemoveCharacter(l.getCurrentRoom(),e),i.characterRemoveNonPersistentItemStatuses(l.getCurrentPlayer().leader),f(e))}}};y.ROAM_WALK_RIGHT_LEFT=e([i.Facing.RIGHT,i.Facing.LEFT]),y.ROAM_WALK_UP_DOWN=e([i.Facing.UP,i.Facing.DOWN]),y.ROAM_WALK_RIGHTUP_LEFTDOWN=e([i.Facing.RIGHT_UP,i.Facing.LEFT_DOWN]),y.ROAM_WALK_RIGHTDOWN_LEFTUP=e([i.Facing.RIGHT_DOWN,i.Facing.LEFT_UP]),y.WALK_BETWEEN_MARKERS_ABC=t.createWalkerAI(["MarkerWalkA","MarkerWalkB","MarkerWalkC"]),y.PING_PONG=function(){let e={ballWaiting:!1,aHitNextTick:!1,ballInAirLTR:!1,bHitNextTick:!1,ballInAirRTL:!1,ballWaitingNextTick:!0},t=(e,t)=>{let a=g.createAnimation(e.spriteBase+"_pingpong_hit");i.characterOverrideAnimation(e,a,()=>{let a=g.createAnimation(e.spriteBase+"_pingpong_idle");i.characterOverrideAnimation(e,a),t()})};return{update:i=>{i.aiState.pingpong_interrupted||(i.aiState.pingpong_reset&&(i.aiState.pingpong_reset=!1,Object.assign(e,{ballWaiting:!1,aHitNextTick:!1,ballInAirLTR:!1,bHitNextTick:!1,ballInAirRTL:!1,ballWaitingNextTick:!0})),e.ballWaitingNextTick&&(e.ballWaitingNextTick=!1,e.ballWaiting=!0,n.timeoutPromise(2e3).then(()=>{e.ballWaiting=!1,e.aHitNextTick=!0})),e.aHitNextTick&&"guy3"===i.spriteBase&&(e.aHitNextTick=!1,e.ballInAirLTR=!0,o.spawnParticleAtMarker("EFFECT_TEMPLATE_PING_PONG_LTR","MarkerPingPong","normal"),t(i,()=>{e.ballInAirLTR=!1,e.bHitNextTick=!0})),e.bHitNextTick&&"guy2"===i.spriteBase&&(e.bHitNextTick=!1,e.ballInAirRTL=!0,o.spawnParticleAtMarker("EFFECT_TEMPLATE_PING_PONG_RTL","MarkerPingPong","normal"),t(i,()=>{e.ballInAirRTL=!1,e.ballWaitingNextTick=!0})))}}}()}})),define("db/characters/floor1",["require","exports","controller/scene/scene-commands","db/overworld-ai","model/character","model/generics","model/room","utils"],(function(e,t,i,a,r,o,n,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=void 0,t.init=()=>{let e={};return e.Floor1BlueCar={name:"Floor1BlueCar",spriteBase:"blue_car",spriteSize:[96,96],sortOffset:48,facing:r.Facing.LEFT_UP,animationState:r.AnimationState.IDLE,speed:4,overworldAi:a.createWalkerAI(["MarkerBlueCar1"],{pauseDurationMs:1500,onReachDestination:e=>{i.setAtMarker(e.name,"MarkerBlueCar2")}})},e.Floor1GreenCar={name:"Floor1GreenCar",spriteBase:"green_car",spriteSize:[96,96],sortOffset:48,facing:r.Facing.LEFT_UP,animationState:r.AnimationState.IDLE,speed:5,overworldAi:a.createWalkerAI(["MarkerGreenCar1"],{pauseDurationMs:1e3,onReachDestination:e=>{i.setAtMarker(e.name,"MarkerGreenCar2")}})},e.Floor1WhiteCar={name:"Floor1WhiteCar",spriteBase:"white_car",spriteSize:[96,96],sortOffset:48,facing:r.Facing.LEFT_UP,animationState:r.AnimationState.IDLE,speed:5,overworldAi:a.createWalkerAI(["MarkerWhiteCar1"],{pauseDurationMs:1e3,onReachDestination:e=>{n.roomRemoveCharacter(o.getCurrentRoom(),e)}})},e.Floor1AtriumDeskEmployee={name:"Atrium Desk Employee",spriteBase:"employee-girl",talkTrigger:"floor1-atrium-desk-employee",facing:r.Facing.RIGHT_UP,animationState:r.AnimationState.IDLE},e.Floor1AtriumElevatorEmployee={name:"Atrium Elevator Employee",spriteBase:"employee-guy",talkTrigger:"floor1-atrium-elevator-employee",facing:r.Facing.RIGHT_DOWN,animationState:r.AnimationState.IDLE},e.Floor1AtriumTicTacToeGirl={name:"Tic Tac Toe Girl",nameLabel:"Girl",spriteBase:"girl",talkTrigger:"floor1-atrium-TicTacToeGirl",facing:r.Facing.RIGHT_DOWN,animationState:r.AnimationState.IDLE},e.Floor1AtriumEmployeeJason={name:"Atrium Employee Jason",nameLabel:"Employee Jason",spriteBase:"employee-guy2",talkTrigger:"floor1-atrium-employee-jason",facing:r.Facing.LEFT_DOWN,animationState:r.AnimationState.IDLE,speed:1},e.Floor1AtriumEmployeeJason2=Object.assign({},e.Floor1AtriumEmployeeJason),e.Floor1AtriumEmployeeJason2.name="Jason",e.Floor1PingPongGuyA={name:"Floor1PingPongGuyA",nameLabel:"Ping Pong Guy",spriteBase:"guy2",facing:r.Facing.LEFT_DOWN,animationState:r.AnimationState.IDLE,overrideAnimationName:"guy2_pingpong_idle",talkTrigger:"floor1-Floor1PingPongGuyA",overworldAi:"PING_PONG"},e.Floor1PingPongGuyB={name:"Floor1PingPongGuyB",nameLabel:"Avid Ping Pong Guy",spriteBase:"guy3",facing:r.Facing.RIGHT_UP,animationState:r.AnimationState.IDLE,overrideAnimationName:"guy3_pingpong_idle",talkTrigger:"floor1-Floor1PingPongGuyA",overworldAi:"PING_PONG"},e.Floor1AtriumPingPongSearcher={name:"Floor1AtriumPingPongSearcher",nameLabel:"Ping Pong Girl",spriteBase:"girl2",facing:r.Facing.RIGHT_DOWN,animationState:r.AnimationState.IDLE,talkTrigger:"floor1-AtriumPingPongSearcher"},e.Floor1AtriumGreeterEmployee={name:"AtriumGreeterEmployee",nameLabel:"Employee Greeter",spriteBase:"employee-girl",talkTrigger:"floor1-atrium-greeter-employee",facing:r.Facing.LEFT_DOWN,animationState:r.AnimationState.IDLE,overworldAi:a.createWalkerAI(["MarkerGreeterA","MarkerGreeterB"],{pauseDurationMs:3500,onReachDestination:e=>{r.characterSetFacing(e,r.Facing.LEFT_DOWN)}})},e.Floor1AtriumNPC1={name:"Floor1AtriumNPC1",nameLabel:"Girl",spriteBase:"girl5",talkTrigger:"floor1-AtriumNPC1NPC2",facing:r.Facing.RIGHT_DOWN,animationState:r.AnimationState.IDLE},e.Floor1AtriumNPC2={name:"Floor1AtriumNPC2",nameLabel:"Boy",spriteBase:"guy5",talkTrigger:"floor1-AtriumNPC1NPC2",facing:r.Facing.LEFT_UP,animationState:r.AnimationState.IDLE},e.FloorAtriumWalkingNPC={name:"FloorAtriumWalkingNPC",nameLabel:"Walking Boy",spriteBase:"guy8",talkTrigger:"floor1-AtriumWalkingNPC",facing:r.Facing.LEFT_UP,animationState:r.AnimationState.IDLE,speed:.5,overworldAi:a.createWalkerAI(["MarkerNPCWalkA","MarkerNPCWalkB","MarkerNPCWalkC"],{pauseDurationMs:3500,onReachDestination:e=>{r.characterSetFacing(e,r.Facing.DOWN)}})},e.Floor1BowlingGirl={name:"Floor1BowlingGirl",nameLabel:"Girl",spriteBase:"girl3",talkTrigger:"floor1-bowling-girl",facing:r.Facing.LEFT_DOWN,animationState:r.AnimationState.IDLE,overworldAi:a.createWalkerAI(["MarkerWalkA","MarkerWalkB"],{pauseDurationMs:1e3,onReachDestination:e=>{r.characterSetFacing(e,r.Facing.LEFT_UP)}})},e.Floor1BowlingEmployee={name:"Floor1BowlingEmployee",nameLabel:"Bowling Employee",spriteBase:"employee-girl",talkTrigger:"floor1-bowling-employee",facing:r.Facing.LEFT_DOWN,animationState:r.AnimationState.IDLE},e.Floor1PrimaryGuy1={name:"Floor1PrimaryGuy1",nameLabel:"Older Gentleman",spriteBase:"guy6",talkTrigger:"Floor1PrimaryGuy1",facing:r.Facing.RIGHT_UP,animationState:r.AnimationState.IDLE},e.Floor1PrimaryGuy2={name:"Floor1PrimaryGuy2",nameLabel:"Guy",spriteBase:"guy7",talkTrigger:"Floor1PrimaryGuy2-Floor1PrimaryGirl1-convo",facing:r.Facing.RIGHT_UP,animationState:r.AnimationState.IDLE},e.Floor1PrimaryGirl1={name:"Floor1PrimaryGirl1",nameLabel:"Girl",spriteBase:"girl6",talkTrigger:"Floor1PrimaryGuy2-Floor1PrimaryGirl1-convo",facing:r.Facing.LEFT_DOWN,animationState:r.AnimationState.IDLE},e.Floor1East1PrizeEmployee={name:"Shopkeep",nameLabel:"Prize Employee",spriteBase:"employee-guy",talkTrigger:"Floor1East1PrizeEmployee",facing:r.Facing.RIGHT_DOWN,animationState:r.AnimationState.IDLE,overworldAi:a.createIntervalAI(2e3,e=>{r.characterSetFacing(e,l.randInArr([r.Facing.LEFT_UP,r.Facing.RIGHT_DOWN]))})},e.Floor1DNDPlayer1={name:"DNDPlayer1",nameLabel:"Tabletop Player",spriteBase:"guy3",talkTrigger:"Floor1East2_DNDPlayer1",facing:r.Facing.RIGHT_UP,animationState:r.AnimationState.IDLE,overworldAi:a.createWalkerAI(["MarkerPaceA","MarkerPaceB"],{pauseDurationMs:2e3,onReachDestination:e=>{r.characterSetFacing(e,r.Facing.RIGHT_UP)}})},e.Floor1DNDPlayer2={name:"DNDPlayer2",nameLabel:"Tabletop Player",spriteBase:"guy7",talkTrigger:"Floor1East2_DNDPlayer2",facing:r.Facing.LEFT_DOWN,animationState:r.AnimationState.IDLE,overworldAi:a.createWalkerAI(["Marker2PaceA","Marker2PaceB"],{pauseDurationMs:5e3,onReachDestination:e=>{r.characterSetFacing(e,r.Facing.LEFT_DOWN)}})},e.Floor1DNDPlayer3={name:"DNDPlayer3",nameLabel:"Tabletop Player",spriteBase:"guy2",talkTrigger:"Floor1East2_DNDPlayer3",facing:r.Facing.RIGHT_DOWN,animationState:r.AnimationState.IDLE},e.Floor1DNDPlayer4={name:"DNDPlayer4",nameLabel:"Tabletop Player",spriteBase:"girl7",talkTrigger:"Floor1East2_DNDPlayer4",facing:r.Facing.RIGHT_UP,animationState:r.AnimationState.IDLE},e.Floor1ZagPlayer={name:"ZagPlayer",nameLabel:"Zag Player",spriteBase:"guy10",talkTrigger:"Floor1East2_ZagPlayer",facing:r.Facing.RIGHT_UP,animationState:r.AnimationState.IDLE},e.Floor1SaveRoomEmployee={name:"Employee",nameLabel:"Employee",spriteBase:"employee-guy",talkTrigger:"Floor1West1_Employee",facing:r.Facing.LEFT_DOWN,animationState:r.AnimationState.IDLE,overworldAi:a.createIntervalAI(2e3,e=>{r.characterSetFacing(e,l.randInArr([r.Facing.LEFT_DOWN,r.Facing.LEFT,r.Facing.DOWN,r.Facing.RIGHT_DOWN]))})},e.Floor1StorageEmployee={name:"Employee",nameLabel:"Storage Employee",spriteBase:"employee-guy5",talkTrigger:"Floor1East1Storage_Employee",facing:r.Facing.RIGHT_UP,animationState:r.AnimationState.IDLE},e}})),define("db/characters/index",["require","exports","model/character","db/characters/party","db/characters/tutorial-roamers","db/characters/test2","db/characters/floor1"],(function(e,t,i,a,r,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=t.getIfExists=t.get=void 0;let l={};t.get=e=>{let t=l[e];if(!t)throw Error("No character template exists with name: "+e);return Object.assign({},t)},t.getIfExists=e=>{let t=l[e];return t?Object.assign({},t):null},t.init=()=>{Object.assign(l,a.init()),Object.assign(l,o.init()),Object.assign(l,r.init()),Object.assign(l,n.init()),l.Roger={name:"Roger",spriteBase:"guy2",talkTrigger:"test-roger",facing:i.Facing.LEFT_DOWN,animationState:i.AnimationState.IDLE,tags:["A"],overworldAi:"WALK_BETWEEN_MARKERS_ABC"},l.Rho={name:"Rho",spriteBase:"rho",talkTrigger:"test-rho",facing:i.Facing.DOWN,animationState:i.AnimationState.IDLE,collisionSize:8},l.Sigma={name:"Sigma",spriteBase:"sigma",talkTrigger:"Floor1East1Sigma",facing:i.Facing.LEFT_UP,animationState:i.AnimationState.IDLE};for(let e in l)""===l[e].name&&(l[e].name=e)}})),define("db/quests/quests-part1",["require","exports","view/style"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=void 0,t.init=e=>{e.OpeningQuest={label:"A Benign Request",summary:"Discover what Carl-Arnold wants with Ada at the Regem Ludos Arcade.",description:"Carl-Arnold, an acquaintance from the school they both attend, wants to meet Ada at an arcade in the city. ",questStartScriptKey:"quest_floor1-main",questEndScriptKey:"quest_floor1-main1-complete",steps:[{label:"Find out where Carl-Arnold is inside the Regem Ludos Arcade.",description:"Carl-Arnold is waiting in the Regem Ludos Arcade.  Discover why he insists on Ada coming here to meet him today."},{label:"Go to the second floor of the Regem Ludos Arcade.",description:"Carl-Arnold is waiting for Ada on the second floor of the Regem Ludos Arcade.  Go there and meet him."},{label:"Follow Lotte.",description:"A girl named Lotte will lead the way to Carl-Arnold.  Follow her."}]},e.Tutorial={label:"Mandatory Tutorial",summary:"Complete the Regem Ludos tutorial.",description:"The Regem Ludos arcade requires the completion of a tutorial before anyone is allowed to ascend to further floors.",questStartScriptKey:"quest_tutorial",questEndScriptKey:"quest_tutorial_complete",steps:[{completedScriptKey:"quest_tutorial1",label:"Speak with Employee Jason.",description:"An employee standing in the atrium of the Regem Ludos arcade will provide a tutorial on how to use their fancy VR.  Ask him to do so."},{completedScriptKey:"quest_tutorial2",label:"Follow Employee Jason through the tutorial.",description:"Employee Jason will guide Ada through the tutorial.  Follow his instructions to complete it."},{completedScriptKey:"quest_tutorial3",label:"Find a way to escape the tutorial.",description:"Ada and Conscience arrived in the tutorial area via some kind of portal.  Find out if there is another one."},{completedScriptKey:"quest_tutorial4",label:"Access the escape portal.",description:"An escape portal is on the northern side of the tutorial area.  Find a way to access the platform on which it resides."}]},e.TicTacToe={label:"Tic Tac Woe",summary:"The sad Tic Tac Toe AI deserves a few wins.",description:"A girl standing by the Tic Tac Toe machines feels sorry for the AI programmed inside of them.  After all, the game is so simple that it does an awful lot of losing.  Someone ought to let it win a couple of games so that it doesn't need to have it so rough.",questStartScriptKey:"quest_floor1-atrium_tic-tac-toe",questEndScriptKey:"quest_floor1-atrium_tic-tac-toe-complete",icon:"tic-tac-toe",iconColor:i.colors.WHITE,experienceReward:3,ticketsReward:10,itemsReward:()=>[],steps:[{completedScriptKey:"quest_floor1-atrium_tic-tac-toe-1",label:"Lose at Tic Tac Toe.",description:"Lose all three games in a single round at the Tic Tac Toe arcade cabinets by the entrance on floor 1."}]},e.PingPong={label:"The Ping Pong Girl",summary:"A girl by the ping pong tables can't find any extra equipment.",description:"A girl is moping around the ping pong tables in the atrium lamenting the fact that there are no extra balls and paddles.  There has to be some ping pong equipment somewhere in this arcade, right?",questStartScriptKey:"quest_floor1PingPongGirl",questEndScriptKey:"quest_floor1PingPongGirl_complete",icon:"star",iconColor:i.colors.WHITE,experienceReward:3,ticketsReward:10,itemsReward:()=>[],steps:[{completedScriptKey:"quest_floor1PingPongGirl_0",label:"Speak to the greeter employee.",description:"Speak with the employee greeting people at the entrance to see if she knows where to get ping pong equipment."},{completedScriptKey:"quest_floor1PingPongGirl_1",label:"Speak to the employee at the prize counter on floor 1.",description:"Speak with the employee at the prize counter to see if they have some ping pong equipment."},{completedScriptKey:"quest_floor1PingPongGirl_2",label:"Speak to the boys playing Ping Pong in the atrium on floor 1.",description:"It seems that there is no extra equipment available right now.  Try to get the boys to share their paddles."},{completedScriptKey:"quest_floor1PingPongGirl_3",label:"Meet the secretive person by the elevator on floor 1.",description:"Somebody approached and said that they know of a way to get ping pong equipment.  Speak with this individual by the elevator on floor 1."},{completedScriptKey:"quest_floor1PingPongGirl_4",label:"Enter the secret storage room near the floor 1 prize counter.",description:'Apparantly there is a secret storage room accessible via a door on the south wall of the room on floor 1 with the prize counter.  Find it and give the password "ZOOFA" to whomever is inside.'},{completedScriptKey:"quest_floor1PingPongGirl_5",label:"Get an employee's vest and give it to the employee in the storage room.",description:'An employee inside the storage room requires an Employee Vest before he will help.  Find this item.  He mentioned that "somebody is selling it somewhere."'},{completedScriptKey:"quest_floor1PingPongGirl_6",label:"Return to the employee in the storage room.",description:"Give the employee in the storage room the Employee Vest."},{completedScriptKey:"quest_floor1PingPongGirl_7",label:"Return to the Ping Pong Girl.",description:"Give the Ping Pong Equipment to the Ping Pong Girl."}]}}})),define("db/quests/quests-test",["require","exports","view/style"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=void 0,t.init=e=>{e.TestQuest1={label:"Test Quest 1",summary:"This is a test quest.",description:"The test construct in the test room has a quest for you.  It wants you to talk to it a bunch of times for some reason.",questStartScriptKey:"quest_test1",questEndScriptKey:"quest_test1_complete",icon:"gear",iconColor:i.colors.RED,experienceReward:50,itemsReward:()=>[],steps:[{completedScriptKey:"quest_test1_1",label:"Complete task 1.",description:"Talk to TestDialogD to complete task 1."},{completedScriptKey:"quest_test1_2",label:"Complete task 2.",description:"Talk to TestDialogD to complete task 2."}]}}})),define("db/quests/index",["require","exports","db/quests/quests-part1","db/quests/quests-test"],(function(e,t,i,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=t.getAll=t.getIfExists=t.get=void 0;let r={};t.get=e=>{let t=r[e];if(!t)throw Error("No quest template exists with name: "+e);return Object.assign({name:e},t)},t.getIfExists=e=>{let t=r[e];return t?Object.assign({name:e},t):null},t.getAll=()=>r,t.init=()=>{i.init(r),a.init(r);for(let e in r){let t=r[e];t.name=e,t.steps.forEach((e,i)=>{e.i=i,e.completedScriptKey=t.questStartScriptKey+"-"+i})}}})),define("model/quest",["require","exports","db/quests/index"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrentQuestStep=t.completeQuestStep=t.completeQuest=t.beginQuest=t.getAllCompletedQuests=t.getAllActiveQuests=t.questIsNotStarted=t.questIsCompleted=t.questIsActive=t.resetLastUpdatedQuests=t.getLastUpdatedQuests=void 0;let a=[],r=e=>{let t=a.indexOf(e);t>-1&&a.splice(t,1),a.push(e)};t.getLastUpdatedQuests=()=>a,t.resetLastUpdatedQuests=e=>{a=null!=e?e:[]},t.questIsActive=(e,t)=>e.storage[t.questStartScriptKey]&&!e.storage[t.questEndScriptKey],t.questIsCompleted=(e,t)=>!!e.storage[t.questEndScriptKey],t.questIsNotStarted=(e,t)=>!e.storage[t.questStartScriptKey],t.getAllActiveQuests=e=>{let a=i.getAll(),r=[];for(let i in a){let o=a[i];t.questIsActive(e,o)&&r.push(Object.assign({name:i},o))}return r.sort((e,t)=>e.label<t.label?-1:1)},t.getAllCompletedQuests=e=>{let t=i.getAll(),a=[];for(let i in t){let r=t[i];e.storage[r.questEndScriptKey]&&a.push(Object.assign({name:i},r))}return a.sort((e,t)=>e.label<t.label?-1:1)},t.beginQuest=window.beginQuest=(e,a)=>{let o=i.getIfExists(a);o?(console.log("begin quest",o),t.questIsNotStarted(e,o)?(e.storage[o.questStartScriptKey]=!0,r(a)):console.log("somehow the quest is started already?")):console.error("cannot beginQuest, quest not found:",a)},t.completeQuest=window.completeQuest=(e,t)=>{let a=i.getIfExists(t);console.log("COMPLETE QUEST",t),a?(r(t),e.storage[a.questEndScriptKey]=!0):console.error("cannot beginQuest, quest not found:",t)},t.completeQuestStep=(e,a,o)=>{let n=i.getIfExists(a);if(n)if(console.log("COMPLETE STEP",a,o),t.questIsActive(e,n)){for(let t=0;t<n.steps.length;t++){let i=n.steps[t];if(!e.storage[i.completedScriptKey]&&(e.storage[i.completedScriptKey]=!0,r(a),t<n.steps.length-1))return}t.completeQuest(e,a)}else console.error(`cannot completeQuestStep ${o}, quest is not active:`,a);else console.error("cannot completeQuestStep, quest not found:",a)},t.getCurrentQuestStep=(e,a)=>{let r=i.getIfExists(a);if(r){if(t.questIsActive(e,r))for(let t=0;t<r.steps.length;t++){let i=r.steps[t];if(!e.storage[i.completedScriptKey])return Object.assign({i:t},i)}}else console.error("cannot getCurrentQuestStep, quest not found:",a)}})),define("controller/scene/scene-commands",["require","exports","view/ui","controller/ui-actions","model/store","controller/events","model/character","model/room","model/generics","controller/scene-management","utils","model/animation","controller/overworld-management","db/tiles","db/characters/index","db/overworlds","db/encounters/index","db/particles","db/items/index","db/quests/index","model/player","model/utility","view/components/ArcadeCabinet/index","model/overworld","model/sound","controller/battle-management","model/particle","model/battle","model/scene","model/render-object","controller/loop","model/canvas","model/quest","db/stores"],(function(e,t,i,a,r,o,n,l,s,d,c,m,h,u,p,g,y,f,v,b,w,C,S,T,x,E,A,_,I,k,R,P,O,M){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.floor1TutToggleColorDoors=t.setAiState=t.setBattlePaused=t.equipWeaponOrArmor=t.unpauseOverworld=t.pauseOverworld=t.showUISection=t.setCharacterText=t.spawnParticleAtMarker=t.spawnEmotionParticleAtCharacter=t.spawnParticleAtCharacter=t.spawnParticleAtTarget=t.stopMusic=t.playMusic=t.playSound=t.panCameraToFitCharacters=t.panCameraBackToPlayer=t.panCameraRelativeToPlayer=t.removePartyMemberFromActiveParty=t.addPartyMemberToActiveParty=t.enterCombat=t.awaitChoice=t.setDoorStateAtMarker=t.stopAi=t.startAi=t.resetAi=t.setAnimationState=t.setAnimation=t.setAnimationAndWait=t.runArcadeCabinetGame=t.applyZTransform=t.jump=t.modifyTickets=t.modifyTokens=t.removeItem=t.acquireQuestItem=t.acquireItem=t.changeRoom=t.fadeInColor=t.fadeOutColor=t.fadeIn=t.fadeOut=t.despawnCharacter=t.spawnPartyMembersInFormation=t.despawnPartyMembers=t.spawnPartyMembers=t.spawnCharacterAtMarker=t.spawnCharacterAtCharacter=t.removeWallAtTilePosition=t.removeWallAtMarker=t.changeTileAtMarker=t.setCharacterAtMarker=t.walkToOffset=t.setAtMarker=t.walkToCharacter=t.walkToMarker=t.offsetCharacter=t.setCharacterAt=t.shakeScreen=t.setFacing=t.lookAtEachOther=t.lookAtMarker=t.lookAtCharacter=t.callScript=t.setStorage=t.waitMSPreemptible=t.waitMS=t.setFromDialog=t.none=t.setConversationSpeaker=t.endConversation=t.setUnskippable=t.setUnskippableConversation=t.setConversationWithoutBars=t.setConversation=t.setConversation2=t.playDialogue=void 0,t.playDialogue=(e,o,n)=>{let{cutscene:d}=i.getUiInterface().appState;if(!d.visible)return void console.error("Tried to play dialog while cutscene was not visible",e,o);let c=r.CutsceneSpeaker.None,m=e.toLowerCase();d.portraitLeft===m?c=r.CutsceneSpeaker.Left:d.portraitLeft2===m?c=r.CutsceneSpeaker.Left2:d.portraitRight===m?c=r.CutsceneSpeaker.Right:d.portraitRight2===m?c=r.CutsceneSpeaker.Right2:d.portraitCenter===m&&(c=r.CutsceneSpeaker.Center);let h=e,u=s.getCurrentRoom(),p=l.roomGetCharacterByName(u,e);p&&(h=p.nameLabel),c!==d.speaker&&[r.CutsceneSpeaker.Left,r.CutsceneSpeaker.Right].includes(c)&&x.playSoundName("dialog_woosh"),a.setCutsceneText(o,c,"narrator"!==m?h:"",e);let g=()=>{B()};return window.TEST?(g(),!0):t.waitMS(150,g)},t.setConversation2=(e,r,o)=>{if(e){if(r)return i.getUiInterface().appState.cutscene.visible&&a.showConversation(),x.playSoundName("dialog_woosh"),a.startConversation2(""+e.toLowerCase(),""+r.toLowerCase()),0!==o?t.waitMS(null!=o?o:500):void 0;console.error("No right actor specified.")}else console.error("No left actor specified.")},t.setConversation=(e,o)=>{let l=i.getUiInterface().appState,d=s.getCurrentPlayer();if(n.characterStopWalking(d.leader),l.cutscene.visible){if(l.cutscene.portraitCenter===e.toLowerCase())return;a.setCutsceneText(""),t.setConversationSpeaker(r.CutsceneSpeaker.None);let i=()=>{a.startConversation(""+e.toLowerCase(),!0),x.playSoundName("dialog_woosh")};return 0===o?i():t.waitMS(200,i)}if(a.startConversation(""+e.toLowerCase(),!0),x.playSoundName("dialog_woosh"),0!==o)return t.waitMS(100)},t.setConversationWithoutBars=(e,i)=>{if(a.startConversation(""+e.toLowerCase(),!1),x.playSoundName("dialog_woosh"),0!==i)return t.waitMS(100)},t.setUnskippableConversation=(e,i)=>{if(s.setCutsceneSkipEnabled(!1),a.startConversation(""+e.toLowerCase(),!1),0!==i)return t.waitMS(100)},t.setUnskippable=e=>{s.setCutsceneSkipEnabled(!e)},t.endConversation=(e,i)=>{a.setCutsceneText(""),a.hideConversation(),s.setCutsceneSkipEnabled(!0);let o=()=>{void 0!==i&&!1!==i||s.getCurrentBattle()||a.showSection(r.AppSection.Debug,!0)};return 0===e?o():t.waitMS(null!=e?e:500,o)},t.setConversationSpeaker=e=>{let t=i.getUiInterface().appState;t.cutscene.visible&&t.sections.includes(r.AppSection.Cutscene)&&a.setCutsceneText("",e)},t.none=()=>{t.setConversationSpeaker(r.CutsceneSpeaker.None)},t.setFromDialog=e=>{let i=s.getCurrentRoom(),a=l.roomGetCharacterByName(i,e);a?(t.stopAi(e),s.addCharacterWithSuspendedAi(a)):console.error("Could not find character with name: "+e)},t.waitMS=(e,t)=>{let i=s.getCurrentScene();return i.isWaitingForTime=!0,clearTimeout(i.waitTimeoutId),i.waitTimeoutCb=()=>{i.isWaitingForTime=!1,t&&t(),i.waitTimeoutCb=null},i.waitTimeoutId=setTimeout(i.waitTimeoutCb,e*(1/s.getCutsceneSpeedMultiplier())),!0},t.waitMSPreemptible=(e,t)=>{let i=s.getCurrentScene(),a=e=>{switch(e.key){case"Return":case"Enter":case"X":case"x":case" ":clearTimeout(i.waitTimeoutId),o.popKeyHandler(a),r()}};o.pushKeyHandler(a);let r=()=>{i.isWaitingForTime=!1,t&&t(),o.popKeyHandler(a)};return i.isWaitingForTime=!0,clearTimeout(i.waitTimeoutId),i.waitTimeoutId=setTimeout(r,e*(1/s.getCutsceneSpeedMultiplier())),!0};let L=()=>{let e=s.getCurrentScene();return e.isWaitingForTime=!0,()=>{e.isWaitingForTime=!1}},B=e=>{let t=s.getCurrentScene();if(t.isWaitingForInput)return void console.error("Scene is already waiting for input!");t.isWaitingForInput=!0;let i=!1,a=e=>{let t=s.getCurrentScene();if(!t.inputDisabled&&!i)switch(e.key){case"Return":case"Enter":case"x":case"X":case"KeyX":case" ":i=!0,x.playSoundName("dialog_select"),window.TEST?(clearTimeout(t.waitTimeoutId),r()):setTimeout(()=>{clearTimeout(t.waitTimeoutId),r()},100)}};o.pushKeyHandler(a);let r=()=>{t.isWaitingForInput=!1,console.log("SCENE INPUT INVOKED"),o.popKeyHandler(a),e&&e()};return r};t.setStorage=(e,t)=>{"false"===t&&(t=!1),console.log("Set Storage",e,null==t||t),s.getCurrentScene().storage[e]=null==t||t},t.callScript=(e,...t)=>{let i=s.getCurrentScene();return d.callScript(i,e,...t),!0},t.lookAtCharacter=(e,t)=>{let i=s.getCurrentRoom(),a=l.roomGetCharacterByName(i,e),r=l.roomGetCharacterByName(i,t);if(a)if(r){if(a&&r){let e=n.characterGetPosCenterPx(a),t=n.characterGetPosCenterPx(r),i=c.getAngleTowards(e,t);n.characterSetFacingFromAngle(a,i)}}else console.error("Could not find target character to lookAtCharacter with name: "+t);else console.error("Could not find character with name: "+e)},t.lookAtMarker=(e,t)=>{let i=s.getCurrentRoom(),a=l.roomGetCharacterByName(i,e),r=i.markers[t];if(a)if(r){if(a&&r){let e=n.characterGetPosCenterPx(a),t=c.getAngleTowards(e,[r.x,r.y]);n.characterSetFacingFromAngle(a,t)}}else console.error("Could not find target marker with name: "+t);else console.error("Could not find character with name: "+e)},t.lookAtEachOther=(e,i)=>{t.lookAtCharacter(e,i),t.lookAtCharacter(i,e)},t.setFacing=(e,t)=>{let i=l.roomGetCharacterByName(s.getCurrentRoom(),e);i?(t===n.Facing.RIGHT2?t=n.Facing.RIGHT:t===n.Facing.RIGHT_UP2?t=n.Facing.RIGHT_UP:t===n.Facing.RIGHT_DOWN2&&(t=n.Facing.RIGHT_DOWN),n.characterSetFacing(i,t)):console.error("Cannot set facing, no character named:",e,"facing=",t)},t.shakeScreen=(e,i)=>{let a=document.getElementById("canvas-container");if(a&&(a.className="shake"),!i)return t.waitMS(null!=e?e:1e3,()=>{a&&(a.className="")});setTimeout(()=>{a&&(a.className="")},null!=e?e:1e3)},t.setCharacterAt=(e,t,i,a)=>{let r=s.getCurrentRoom(),o=l.roomGetCharacterByName(r,e);o?n.characterSetPos(o,[t,i,null!=a?a:0]):console.error("Could not find character with name: "+e)},t.offsetCharacter=(e,t,i,a)=>{let r=s.getCurrentRoom(),o=l.roomGetCharacterByName(r,e);if(!o)return void console.error("Could not find character with name: "+e);let[d,c,m]=n.characterGetPos(o);t=parseInt(t),i=parseInt(i),a=parseInt(null!=a?a:0),isNaN(t)||isNaN(i)?console.error("Could not offset character, the offsetX is NaN",t,i,a):isNaN(null!=a?a:0)?console.error("Could not offset character, the offsetZ is NaN",t,i,a):n.characterSetPos(o,[d+t,c+i,m+a])},t.walkToMarker=(e,t,i,a,r)=>{let o=s.getCurrentRoom(),d=l.roomGetCharacterByName(o,e),c=o.markers[t];if(!d)return void console.error("Could not find character with name: "+e);if(!c)return void console.error("Could not find target marker with name: "+t);if(void 0!==i&&"number"!=typeof i)return void console.error("xOffset is not a number");if(void 0!==a&&"number"!=typeof a)return void console.error("yOffset is not a number");let m=[c.x+(null!=i?i:0),c.y+(null!=a?a:0)];if(!r)return n.characterSetWalkTarget(d,m,L()),!0;n.characterSetWalkTarget(d,m,()=>{})},t.walkToCharacter=(e,t,i,a,r)=>{let o=s.getCurrentRoom(),d=l.roomGetCharacterByName(o,e),c=l.roomGetCharacterByName(o,t);if(!d)return void console.error("Could not find character with name: "+e);if(!c)return void console.error("Could not find target ch with name: "+t);if(void 0!==i&&"number"!=typeof i)return void console.error("xOffset is not a number");if(void 0!==a&&"number"!=typeof a)return void console.error("yOffset is not a number");let[m,h]=n.characterGetPos(c),u=[m+(null!=i?i:0),h+(null!=a?a:0)];if(!r)return n.characterSetWalkTarget(d,u,L()),!0;n.characterSetWalkTarget(d,u,()=>{})},t.setAtMarker=(e,t,i,a)=>{let r=s.getCurrentRoom(),o=l.roomGetCharacterByName(r,e),d=r.markers[t];o?d?void 0===i||"number"==typeof i?void 0===a||"number"==typeof a?n.characterSetPos(o,[d.x+(null!=i?i:0),d.y+(null!=a?a:0),0]):console.error("yOffset is not a number"):console.error("xOffset is not a number"):console.error("Could not find target marker with name: "+t):console.error("Could not find character with name: "+e)},t.walkToOffset=(e,t,i,a)=>{let r=s.getCurrentRoom(),o=l.roomGetCharacterByName(r,e);if(!o)return void console.error("Could not find character with name: "+e);if(void 0!==t&&"number"!=typeof t)return void console.error("xOffset is not a number");if(void 0!==i&&"number"!=typeof i)return void console.error("yOffset is not a number");let d=[o.x+t,o.y+i];if(!a)return n.characterSetWalkTarget(o,d,L()),!0;n.characterSetWalkTarget(o,d,()=>{})},t.setCharacterAtMarker=(e,t,i,a)=>{let r=s.getCurrentRoom(),o=l.roomGetCharacterByName(r,e),d=r.markers[t];o?d?void 0===i||"number"==typeof i?void 0===a||"number"==typeof a?o&&d&&n.characterSetPos(o,c.extrapolatePoint([Math.floor(d.x+(null!=i?i:0)),Math.floor(d.y+(null!=a?a:0))])):console.error("yOffset is not a number"):console.error("xOffset is not a number"):console.error("Could not find target marker with name: "+t):console.error("Could not find character with name: "+e)},t.changeTileAtMarker=(e,t,i,a)=>{var r,o,n,d;let c=s.getCurrentRoom(),h="string"==typeof e?c.markers[e]:e,p=u.getIfExists(t);if(p)if(h)if(void 0===i||"number"==typeof i)if(void 0===a||"number"==typeof a){if(h){let s=l.roomGetTileBelow(c,[h.x+(null!=i?i:0),h.y+(null!=a?a:0)]);if(!s)return void console.error("Could not get a tile below the provided marker: "+e);if(s.isWall=null!==(r=p.isWall)&&void 0!==r?r:s.isWall,s.isProp=null!==(o=p.isProp)&&void 0!==o?o:s.isProp,s.ro){if(s.sprite=p.baseSprite,s.ro.sprite=p.baseSprite,s.floorTileBeneath&&!1===p.hasFloorTile){let e=c.renderObjects.indexOf(null===(n=s.floorTileBeneath)||void 0===n?void 0:n.ro);e>-1&&(c.renderObjects.splice(e,1),s.floorTileBeneath=void 0)}if(p.animName&&s.animName!==p.animName)if(p.animName){if(s.animName=p.animName,m.hasAnimation(s.animName)){let e=m.createAnimation(p.animName);e.start(),s.ro.anim=e}}else s.ro.anim=void 0;if(p.size&&(s.tileWidth=p.size[0],s.tileHeight=p.size[1]),p.floorTile){let e=u.getIfExists(p.floorTile);if(e){let t=Object.assign(Object.assign(Object.assign({},s),e),{sprite:e.baseSprite,tileWidth:32,tileHeight:32}),i=k.createTileRenderObject(t);if(t.ro=i,s.floorTileBeneath){let e=c.renderObjects.indexOf(null===(d=s.floorTileBeneath)||void 0===d?void 0:d.ro);e>-1?c.renderObjects.splice(e,1,i):c.renderObjects.push(i),s.floorTileBeneath=t}else c.renderObjects.push(i),s.floorTileBeneath=t}else console.error(`Floor tile specified by tile db for tile ${t} does not exist: `,p.floorTile)}let e=c.renderObjects.indexOf(s.ro);if(e>-1){let t=s.ro.anim,i=s.ro.sortY;s.ro=k.createTileRenderObject(s),s.ro.anim=t,s.ro.sortY=i,p.onAfterCreation&&p.onAfterCreation(s),c.renderObjects.splice(e,1,s.ro)}}}}else console.error("yOffset is not a number");else console.error("xOffset is not a number");else console.error("Could not find target marker with name: "+e);else console.error("Could not get a tile template with name: "+t)},t.removeWallAtMarker=(e,t,i)=>{let a=s.getCurrentRoom(),r=a.markers[e];if(r)if(void 0===t||"number"==typeof t)if(void 0===i||"number"==typeof i){if(r){let o=l.roomGetTileBelow(a,[r.x+(null!=t?t:0),r.y+(null!=i?i:0)]);if(!o)return void console.error("Could not get a tile below the provided marker: "+e);if(o.isWall=!1,o.isProp=!1,o.ro&&o.floorTileBeneath){let e=a.renderObjects.indexOf(o.ro);e>-1&&a.renderObjects.splice(e,1)}}}else console.error("yOffset is not a number",i);else console.error("xOffset is not a number",t);else console.error("Could not find target marker with name: "+e)},t.removeWallAtTilePosition=(e,t)=>{let i=s.getCurrentRoom();if("number"!=typeof e)return void console.error("tileX is not a number",e);if("number"!=typeof t)return void console.error("tileY is not a number",t);let a=l.roomGetTileAt(i,e,t);if(a){if(!a)return void console.error("Could not get a tile at the provided position: "+[e,t].join(","));if(a.isWall=!1,a.isProp=!1,a.ro&&a.floorTileBeneath){let e=i.renderObjects.indexOf(a.ro);e>-1&&i.renderObjects.splice(e,1)}}},t.spawnCharacterAtCharacter=(e,t,i,a)=>{let r=s.getCurrentRoom(),o=l.roomGetCharacterByName(r,t),d=p.getIfExists(e);if(!d)return void console.error("Could not get a character template with name: "+e);if(!o)return void console.error("Could not find target character to spawnCharacterAtCharacter with name: "+t);if(void 0!==i&&"number"!=typeof i)return void console.error("xOffset is not a number");if(void 0!==a&&"number"!=typeof a)return void console.error("yOffset is not a number");if(l.roomGetCharacterByName(r,d.name))return void console.error("The character to be spawned already exists in the current room: "+d.name);let c=[o.x+(null!=i?i:0),o.y+(null!=a?a:0),0],m=n.characterCreateFromTemplate(d);n.characterSetPos(m,c),l.roomAddCharacter(r,m)},t.spawnCharacterAtMarker=(e,t,i,a)=>{let r=s.getCurrentRoom(),o=r.markers[t],d=p.getIfExists(e);if(!d)return void console.error("Could not get a character template with name: "+e);if(!o)return void console.error("Could not find target marker with name: "+t);if(void 0!==i&&"number"!=typeof i)return void console.error("xOffset is not a number");if(void 0!==a&&"number"!=typeof a)return void console.error("yOffset is not a number");if(l.roomGetCharacterByName(r,d.name))return void console.error("The character to be spawned already exists in the current room: "+d.name);let c=[o.x+(null!=i?i:0),o.y+(null!=a?a:0),0],m=n.characterCreateFromTemplate(d);n.characterSetPos(m,c),l.roomAddCharacter(r,m)},t.spawnPartyMembers=e=>{let i=s.getCurrentPlayer(),a=i.partyStorage.filter(e=>e!==i.leader),r=[[12,1],[1,-12],[-12,1],[1,12]],o=s.getCurrentRoom();if(a.forEach((e,a)=>{var s,d;let c=r[a];t.spawnCharacterAtCharacter(e.name,i.leader.name,null==c?void 0:c[0],null==c?void 0:c[1]);let m=l.roomGetCharacterByName(o,e.name);if(m){let e=[null!==(s=m.x+c[0])&&void 0!==s?s:0,null!==(d=m.y+c[1])&&void 0!==d?d:0];n.characterSetWalkTarget(m,e,()=>{t.lookAtCharacter(m.name,i.leader.name)})}}),!e)return t.waitMS(1e3)},t.despawnPartyMembers=e=>{let i=s.getCurrentPlayer(),a=i.leader,r=s.getCurrentRoom();if(i.partyStorage.filter(e=>e!==i.leader&&l.roomGetCharacterByName(r,e.name)).forEach(e=>{let t=l.roomGetCharacterByName(r,e.name);t&&n.characterSetWalkTarget(t,[a.x,a.y],()=>{l.roomRemoveCharacter(r,t)})}),!e)return t.waitMS(1e3)},t.spawnPartyMembersInFormation=()=>{let e=s.getCurrentRoom(),i=s.getCurrentPlayer(),a=i.partyStorage.filter(e=>e!==i.leader),r=[[16,1],[1,-16],[-16,1],[1,16]];a.forEach((e,a)=>{let o=r[a];t.spawnCharacterAtCharacter(e.name,i.leader.name,null==o?void 0:o[0],null==o?void 0:o[1])}),i.party.forEach(i=>{let a=l.roomGetCharacterByName(e,i.name);a&&(n.characterSetFacing(a,n.Facing.DOWN),t.spawnParticleAtCharacter("EFFECT_TEMPLATE_PORTAL_SPAWN",a.name,"normal"))})},t.despawnCharacter=e=>{let t=s.getCurrentRoom(),i=l.roomGetCharacterByName(t,e);i?l.roomRemoveCharacter(t,i):console.error("Could not find character with name: "+e)},t.fadeOut=(e,i)=>{if(s.getCurrentScene().skip)return;let a=null!=e?e:750,r=document.getElementById("fade");return r&&(r.style.transition=`background-color ${a}ms`,r.style["background-color"]="rgba(0, 0, 0, 255)"),i?void 0:t.waitMS(a)},t.fadeIn=(e,i)=>{if(s.getCurrentScene().skip)return;let a=null!=e?e:1e3,r=document.getElementById("fade");return r&&(r.style.transition=`background-color ${a}ms`,r.style["background-color"]="rgba(0, 0, 0, 0)"),i?void 0:t.waitMS(a)},t.fadeOutColor=(e,i,a,r,o)=>{let n=null!=r?r:750,l=document.getElementById("fade");if(l&&(l.style.transition=`background-color ${n}ms`,l.style["background-color"]=`rgba(${e}, ${i}, ${a}, 255)`),!o)return t.waitMS(n)},t.fadeInColor=(e,i,a,r,o)=>{let n=null!=r?r:1e3,l=document.getElementById("fade");if(l&&(l.style.transition=`background-color ${n}ms`,l.style["background-color"]=`rgba(${e}, ${i}, ${a}, 0)`),!o)return t.waitMS(n)},t.changeRoom=async(e,t)=>{let i=s.getCurrentPlayer(),a=g.getIfExists(e);if(!i)return void console.error("Player has not been initialized.");if(!a)return void console.error("No overworld template exists with name:",e);s.getCurrentOverworld().music!==a.music&&x.stopCurrentMusic(1e3);let r=h.initiateOverworld(i,a,t);r&&(r.triggersEnabled=!1)},t.acquireItem=(e,i)=>{let a=s.getCurrentPlayer(),r=v.getIfExists(e);if(r)return w.playerAddItem(a,e)?r.onAcquire?r.onAcquire(r):t.playDialogue("Narrator",null!=i?i:"Acquired: "+r.label):void 0;console.error(`Cannot acquire item "${e}" no template exists with that name.`)},t.acquireQuestItem=(e,i)=>{let a=s.getCurrentPlayer();if(w.playerAddItem(a,e))return t.playDialogue("Narrator",null!=i?i:"Acquired: "+e)},t.removeItem=(e,i)=>{let a=s.getCurrentPlayer();if(w.playerRemoveItem(a,e))return t.playDialogue("Narrator",null!=i?i:"Removed: "+e)},t.modifyTokens=e=>{let i=s.getCurrentPlayer();return w.playerModifyTokens(i,e),e>=0?(x.playSoundName("token_get"),t.playDialogue("Narrator",`Gained ${e} Regem Ludos Tokens.`)):(x.playSoundName("lose_token"),t.playDialogue("Narrator",`Removed ${-e} Regem Ludos Tokens.`))},t.modifyTickets=e=>{let i=s.getCurrentPlayer();return w.playerModifyTickets(i,e),t.playDialogue("Narrator",e>=0?`Gained ${e} Prize Tickets.`:`Removed ${-e} Prize Tickets.`)},t.jump=e=>{let i=s.getCurrentRoom(),a=l.roomGetCharacterByName(i,e);if(!a)return void console.error("Could not find character with name: "+e);let o=e=>new Promise(i=>{t.waitMS(33,()=>{let t=n.characterGetPos(a);t[2]=e,n.characterSetPos(a,t),i()})});return t.setConversationSpeaker(r.CutsceneSpeaker.None),(async()=>{await o(8),await o(16),await o(20),await o(22),await o(20),await o(16),await o(8),await o(0),t.waitMS(500)})(),!0},t.applyZTransform=(e,i,a)=>{let r=s.getCurrentRoom(),o=l.roomGetCharacterByName(r,e);if(!o)return void console.error("Could not find character with name: "+e);let d=n.characterGetPos(o),c=[...d];c[2]+=i;let m=null!=a?a:1e3,h=new C.Transform(d,c,m,C.TransformEase.LINEAR);return n.characterSetTransform(o,h),t.waitMS(m,()=>{n.characterSetPos(o,c),o.transform=null})},t.runArcadeCabinetGame=e=>{let t=S.ArcadeGamePath[e];t?(x.playSoundName("start_arcade_game"),a.hideSection(r.AppSection.Cutscene),a.showArcadeGame(t)):console.error("No game exists with name:",e)},t.setAnimationAndWait=(e,i,a)=>{let r=s.getCurrentRoom(),o=l.roomGetCharacterByName(r,e);if(!o)return void console.error("Could not find character with name: "+e);if(!m.hasAnimation(i))return void console.error("Could not find animation with name: "+i);let d=m.createAnimation(i);n.characterOverrideAnimation(o,d);let c=d.getDurationMs();return t.waitMS(c+(null!=a?a:0),()=>{t.setAnimationState(e,n.AnimationState.IDLE)})},t.setAnimation=(e,t)=>{let i=s.getCurrentRoom(),a=l.roomGetCharacterByName(i,e);if(!a)return void console.error("Could not find character with name: "+e);if(!m.hasAnimation(t))return void console.error("Could not find animation with name: "+t);console.log("SET ANIMATION FOR CH",e,t);let r=m.createAnimation(t);n.characterOverrideAnimation(a,r)},t.setAnimationState=(e,t)=>{let i=s.getCurrentRoom(),a=l.roomGetCharacterByName(i,e);a?n.characterSetAnimationState(a,t):console.error("Could not find character with name: "+e)},t.resetAi=e=>{let t=s.getCurrentRoom(),i=l.roomGetCharacterByName(t,e);i?n.characterStartAi(i):console.error("Could not find character with name: "+e)},t.startAi=t.resetAi,t.stopAi=e=>{let t=s.getCurrentRoom(),i=l.roomGetCharacterByName(t,e);i?n.characterStopAi(i):console.error("Could not find character with name: "+e)},t.setDoorStateAtMarker=(e,i,a,r)=>{["BCK","FWD"].includes(a)?["OPEN","CLOSED"].includes(r)?"BCK"===a?(t.changeTileAtMarker(e,`${i}_${a}_${r}2`),t.changeTileAtMarker(e,`${i}_${a}_${r}1`,16,0)):(t.changeTileAtMarker(e,`${i}_${a}_${r}2`),t.changeTileAtMarker(e,`${i}_${a}_${r}1`,0,16)):console.error("Cannot setDoorStateAtMarker. Invalid door state (needs OPEN or CLOSED)"):console.error("Cannot setDoorStateAtMarker. Invalid door direction (needs BCK or FWD)")},t.awaitChoice=(...e)=>(setTimeout(()=>{a.showChoices(e)},33),L()),t.enterCombat=(e,t)=>{let i=y.getIfExists(e);if(!i)return void console.error("No encounter exists with name:",e);T.overworldHide(s.getCurrentOverworld()),x.playSoundName("battle_encountered");let a=s.getCurrentPlayer(),r=n.characterGetPos(a.leader),o=a.leader.facing,l=s.getCurrentRoom();E.transitionToBattle(a,i,E.getReturnToOverworldBattleCompletionCB(l,r,o,i),null!=t&&t)},t.addPartyMemberToActiveParty=e=>{w.playerAddToActiveParty(s.getCurrentPlayer(),e)},t.removePartyMemberFromActiveParty=e=>{w.playerRemoveFromActiveParty(s.getCurrentPlayer(),e)},t.panCameraRelativeToPlayer=(e,i,a,r)=>{let o=null!=a?a:1e3,n=s.getCurrentPlayer();if(n){let a=s.getCameraTransform(),[l,d]=w.playerGetCameraOffset(n),c=l,m=d;if(a){let e=a.current();c=e[0],m=e[1]}let h=new C.Transform([c,m,0],[l-e,d-i,0],o,C.TransformEase.EASE_OUT);if(s.setCameraTransform(h),!r)return t.waitMS(o)}},t.panCameraBackToPlayer=(e,i)=>{t.none();let a=null!=e?e:1e3,r=s.getCurrentPlayer(),o=s.getCameraTransform();if(r&&o){let[e,n]=w.playerGetCameraOffset(r),[l,d]=o.current(),c=new C.Transform([l,d,0],[e,n,0],a,C.TransformEase.EASE_OUT);if(c.timer.awaits.push(()=>{s.setCameraTransform(null)}),s.setCameraTransform(c),!i)return t.waitMS(a)}},t.panCameraToFitCharacters=(e,i,...a)=>{if("string"==typeof e)return void console.error("Invalid argument to panCameraToFitCharacters, did you forget ms and/or skipWait?");t.none();let r=s.getCurrentRoom(),o=a.filter(e=>!!l.roomGetCharacterByName(r,e)||(console.error(`error in panCameraToFitCharacters, character ${e} does not exist in current room.`),!1)).map(e=>l.roomGetCharacterByName(r,e));if(!o.length)return void console.error("error in panCameraToFitCharacters, no characters to pan camera to!");let n=o.map(e=>{let[t,i]=c.isoToPixelCoords(e.x,e.y),[a,r]=P.getScreenSize();return[Math.round(a/2-t-16),Math.floor(r/2-i)]}),d=n.reduce((e,[t])=>e+t,0)/n.length,m=n.reduce((e,[,t])=>e+t,0)/n.length-32,h=null!=e?e:1e3,u=s.getCurrentPlayer(),p=s.getCameraTransform();if(u){let[e,a]=[d,m],[r,o]=p?p.current():w.playerGetCameraOffset(u),n=new C.Transform([r,o,0],[e,a,0],h,C.TransformEase.EASE_OUT);if(s.setCameraTransform(n),!i)return t.waitMS(h)}},t.playSound=e=>{x.playSoundName(e)},t.playMusic=async e=>{x.stopCurrentMusic(100),x.playMusic(e,!0)},t.stopMusic=e=>{let i=null!=e?e:1e3;return x.stopCurrentMusic(i),t.waitMS(i)},t.spawnParticleAtTarget=(e,t,i)=>{let a=s.getCurrentRoom();if("normal"===i){let i=A.particleCreateFromTemplate(t,e);l.roomAddParticle(a,i)}else"weighted"===i?l.roomAddParticle(a,A.createWeightedParticle(e,t[0],t[1],e.duration)):"rise"===i?l.roomAddParticle(a,A.createRiseParticle(e,t[0],t[1],e.duration)):console.error(`Particle method not known: "${i}"`)},t.spawnParticleAtCharacter=(e,i,a)=>{let r=s.getCurrentRoom(),o=l.roomGetCharacterByName(r,i),d=f.getIfExists(e);if(!o)return void console.error("Could not find character with name: "+i);if(!d)return void console.error("Could not find particle with name: "+e);let c=n.characterGetPosCenterPx(o);t.spawnParticleAtTarget(d,c,a)},t.spawnEmotionParticleAtCharacter=(e,t)=>{let i=s.getCurrentRoom(),a=l.roomGetCharacterByName(i,e);if(!a)return void console.error("Could not find character with name: "+e);let r=A.createEmotionBubbleParticle(a,t);l.roomAddParticle(i,r)},t.spawnParticleAtMarker=(e,i,a,r,o)=>{let n=s.getCurrentRoom(),l=f.getIfExists(e),d=n.markers[i];if(!d)return void console.error("Could not find target marker with name: "+i);if(!l)return void console.error("Could not find particle with name: "+e);let[m,h]=c.isoToPixelCoords(d.x+(null!=r?r:0),d.y+(null!=o?o:0));m+=16,h+=16,t.spawnParticleAtTarget(l,[m,h],a)},t.setCharacterText=e=>{i.getUiInterface().appState.overworld.characterText!==e&&a.setCharacterText(e)},t.showUISection=(e,...i)=>{if("BattleUI"===e)a.showSection(r.AppSection.BattleUI,!1);else{if("Save"===e)return a.showSave(()=>{I.sceneStopWaitingUntil(s.getCurrentScene()),a.showSection(r.AppSection.Debug,!0),R.unpause()}),L();if("LevelUp"===e)return a.showLevelUp(()=>{I.sceneStopWaitingUntil(s.getCurrentScene()),a.showSection(r.AppSection.Debug,!0),R.unpause()}),L();if("Modal"===e)return a.showModal(i[0],{onClose:()=>{I.sceneStopWaitingUntil(s.getCurrentScene())}}),L();if("InfoStats"===e)return s.setCutsceneSkipEnabled(!1),t.none(),a.showInfoStatsSection(()=>{a.hideInfoStatsSection(),R.unpause(),s.setCutsceneSkipEnabled(!0),a.hideStoreSection(),I.sceneStopWaitingUntil(s.getCurrentScene()),s.getCurrentScene().inputDisabled=!1}),L()}},t.pauseOverworld=()=>{s.getCurrentOverworld()&&R.pause()},t.unpauseOverworld=()=>{s.getCurrentOverworld()&&R.unpause()},t.equipWeaponOrArmor=(e,t)=>{let i=s.getCurrentPlayer(),a=s.getCurrentRoom(),r=l.roomGetCharacterByName(a,t);if(!r)return void console.error("Could not find character with name: "+t);let o=i.backpack.find(t=>t.name===e);o?n.characterEquipItem(r,o):console.error(`Cannot equipWeaponOrArmor '${e}', no item of that name is in the Player's backpack`)},t.setBattlePaused=e=>{let t=s.getCurrentBattle();t&&("true"===e?(t.isPaused=!0,_.battlePauseTimers(t)):(t.isPaused=!1,_.battleUnpauseTimers(t)))},t.setAiState=(e,t,i)=>{let a=s.getCurrentRoom(),r=l.roomGetCharacterByName(a,e);r?("true"!==i&&"false"!==i||(i="true"===i),r.aiState[t]=i):console.error("Could not find character with name: "+e)};let N=(e,t)=>{I.sceneAddPostSceneCallback(s.getCurrentScene(),()=>{setTimeout(()=>{x.playSoundName("notification"),a.showNotification({text:e,type:null!=t?t:"info"})},200)})};t.floor1TutToggleColorDoors=(e,i)=>{var a;if("true"===i){let t=`tut_vr_${e.toLowerCase()}_doors`,i=s.getCurrentScene(),r=+(null!==(a=i.storage[t])&&void 0!==a?a:0);i.storage[t]=r?0:1}let r=s.getCurrentRoom(),o=l.getAllTagMarkers(r,"TagMarker"+e);for(let i=0;i<o.length;i++){let a=o[i],n=l.roomGetTileBelow(r,[a.x,a.y]);n&&t.changeTileAtMarker(a,n.isWall?"TUT_GATE_FLOOR":"TUT_GATE_"+e.toUpperCase())}};let D={playDialogue:t.playDialogue,setConversation:t.setConversation,setConversation2:t.setConversation2,setConversationWithoutBars:t.setConversationWithoutBars,setUnskippableConversation:t.setUnskippableConversation,setUnskippable:t.setUnskippable,endConversation:t.endConversation,setConversationSpeaker:t.setConversationSpeaker,none:t.none,setFromDialog:t.setFromDialog,waitMS:t.waitMS,waitMSPreemptible:t.waitMSPreemptible,waitUntil:L,waitForUserInput:e=>{let t=s.getCurrentScene();if(t.isWaitingForInput)return void console.error("Scene is already waiting for input!");t.isWaitingForInput=!0;let i=!1,a=e=>{let t=s.getCurrentScene();if(!t.inputDisabled&&!i){switch(e.key){case"Return":case"Enter":case"x":case"X":case"KeyX":case" ":return i=!0,clearTimeout(t.waitTimeoutId),r(),!0}return!1}};o.pushKeyHandler(a);let r=()=>{t.isWaitingForInput=!1,o.popKeyHandler(a),e&&e()};return r},setStorage:t.setStorage,callScript:t.callScript,lookAtCharacter:t.lookAtCharacter,lookAtMarker:t.lookAtMarker,lookAtEachOther:t.lookAtEachOther,setFacing:t.setFacing,shakeScreen:t.shakeScreen,setCharacterAt:t.setCharacterAt,offsetCharacter:t.offsetCharacter,walkToMarker:t.walkToMarker,walkToCharacter:t.walkToCharacter,setAtMarker:t.setAtMarker,walkToOffset:t.walkToOffset,setCharacterAtMarker:t.setCharacterAtMarker,changeTileAtMarker:t.changeTileAtMarker,removeWallAtMarker:t.removeWallAtMarker,removeWallAtTilePosition:t.removeWallAtTilePosition,spawnCharacterAtCharacter:t.spawnCharacterAtCharacter,spawnCharacterAtMarker:t.spawnCharacterAtMarker,spawnPartyMembersInFormation:t.spawnPartyMembersInFormation,spawnPartyMembers:t.spawnPartyMembers,despawnPartyMembers:t.despawnPartyMembers,despawnCharacter:t.despawnCharacter,fadeOut:t.fadeOut,fadeIn:t.fadeIn,fadeOutColor:t.fadeOutColor,fadeInColor:t.fadeInColor,changeRoom:t.changeRoom,acquireItem:t.acquireItem,acquireQuestItem:t.acquireQuestItem,removeItem:t.removeItem,modifyTokens:t.modifyTokens,modifyTickets:t.modifyTickets,jump:t.jump,applyZTransform:t.applyZTransform,runArcadeCabinetGame:t.runArcadeCabinetGame,setAnimationAndWait:t.setAnimationAndWait,setAnimation:t.setAnimation,setAnimationState:t.setAnimationState,resetAi:t.resetAi,stopAi:t.stopAi,startAi:t.startAi,setDoorStateAtMarker:t.setDoorStateAtMarker,awaitChoice:t.awaitChoice,enterCombat:t.enterCombat,addPartyMemberToActiveParty:t.addPartyMemberToActiveParty,removePartyMemberFromActiveParty:t.removePartyMemberFromActiveParty,panCameraRelativeToPlayer:t.panCameraRelativeToPlayer,panCameraBackToPlayer:t.panCameraBackToPlayer,panCameraToFitCharacters:t.panCameraToFitCharacters,playSound:t.playSound,playMusic:t.playMusic,stopMusic:t.stopMusic,spawnParticleAtCharacter:t.spawnParticleAtCharacter,spawnEmotionParticleAtCharacter:t.spawnEmotionParticleAtCharacter,spawnParticleAtMarker:t.spawnParticleAtMarker,setCharacterText:t.setCharacterText,showUISection:t.showUISection,showStore:e=>(M.getIfExists(e)||console.error("Cannot get item store, no store is named: "+e),s.setCutsceneSkipEnabled(!1),t.none(),a.showStoreSection(e,()=>{s.setCutsceneSkipEnabled(!0),a.hideStoreSection(),I.sceneStopWaitingUntil(s.getCurrentScene()),s.getCurrentScene().inputDisabled=!1}),L()),setBattlePaused:t.setBattlePaused,equipWeaponOrArmor:t.equipWeaponOrArmor,pauseOverworld:t.pauseOverworld,unpauseOverworld:t.unpauseOverworld,setAiState:t.setAiState,startQuest:e=>{let i=s.getCurrentScene();return b.getIfExists(e)||console.error("Could not startQuest.  No quest exists with name: "+e),t.none(),O.beginQuest(i,e),i.inputDisabled=!0,x.playSoundName("quest_started"),x.playSoundName("menu_choice_open"),a.showQuestSection(e,()=>{a.hideQuestSection(),I.sceneStopWaitingUntil(s.getCurrentScene()),i.inputDisabled=!1}),L()},completeQuestStep:(e,i)=>{let r=s.getCurrentScene(),o=b.getIfExists(e);if(o||console.error("Could not startQuest.  No quest exists with name: "+e),t.none(),O.completeQuestStep(r,e,i),O.questIsCompleted(r,o))return r.inputDisabled=!0,x.playSoundName("quest_completed"),a.showQuestSection(e,()=>{a.hideQuestSection(),I.sceneStopWaitingUntil(s.getCurrentScene()),r.inputDisabled=!1}),L();N("Your journal has been updated.")},showNotification:N,modifyPartyHP:e=>{s.getCurrentPlayer().party.forEach(t=>{n.characterModifyHp(t,e)})},disableAnimationSounds:()=>{m.Animation.disableSoundsGlobally()},enableAnimationSounds:()=>{m.Animation.enableSoundsGlobally()},changePropAnim:(e,t)=>{let i=l.roomGetProp(s.getCurrentRoom(),e);if(!i)return void console.error("Cannot change prop, no prop in room is named: "+e);if(!m.hasAnimation(t)||!i.ro)return void console.error(`Cannot change prop ${e}, no anim in room is named: `+t);let a=m.createAnimation(t);a.start(),i.ro.anim=a},floor1TutToggleColorDoors:t.floor1TutToggleColorDoors};t.default=D})),define("controller/scene/scene-commands-skip",["require","exports","model/store","model/character","model/room","model/generics","db/items/index","model/player","controller/scene/scene-commands","controller/ui-actions"],(function(e,t,i,r,o,n,l,s,d,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.floor1TutToggleColorDoors=t.setAiState=t.setBattlePaused=t.equipWeaponOrArmor=t.unpauseOverworld=t.pauseOverworld=t.showUISection=t.setCharacterText=t.spawnParticleAtMarker=t.spawnEmotionParticleAtCharacter=t.spawnParticleAtCharacter=t.spawnParticleAtTarget=t.stopMusic=t.playMusic=t.playSound=t.panCameraToFitCharacters=t.panCameraBackToPlayer=t.panCameraRelativeToPlayer=t.removePartyMemberFromActiveParty=t.addPartyMemberToActiveParty=t.enterCombat=t.awaitChoice=t.setDoorStateAtMarker=t.stopAi=t.startAi=t.resetAi=t.setAnimationState=t.setAnimation=t.setAnimationAndWait=t.runArcadeCabinetGame=t.applyZTransform=t.jump=t.modifyTickets=t.modifyTokens=t.removeItem=t.acquireQuestItem=t.acquireItem=t.changeRoom=t.fadeInColor=t.fadeOutColor=t.fadeIn=t.fadeOut=t.despawnCharacter=t.spawnPartyMembersInFormation=t.despawnPartyMembers=t.spawnPartyMembers=t.spawnCharacterAtMarker=t.spawnCharacterAtCharacter=t.removeWallAtTilePosition=t.removeWallAtMarker=t.changeTileAtMarker=t.setCharacterAtMarker=t.walkToOffset=t.setAtMarker=t.walkToCharacter=t.walkToMarker=t.offsetCharacter=t.setCharacterAt=t.shakeScreen=t.setFacing=t.lookAtEachOther=t.lookAtMarker=t.lookAtCharacter=t.callScript=t.setStorage=t.waitMSPreemptible=t.waitMS=t.setFromDialog=t.none=t.setConversationSpeaker=t.endConversation=t.setUnskippable=t.setUnskippableConversation=t.setConversationWithoutBars=t.setConversation=t.setConversation2=t.playDialogue=void 0,d=a(d),t.playDialogue=(e,t,i)=>{console.log("SKIP DIALOG",e,t)},t.setConversation2=(e,t)=>{},t.setConversation=e=>{},t.setConversationWithoutBars=e=>{},t.setUnskippableConversation=()=>{},t.setUnskippable=()=>{},t.endConversation=(e,t)=>d.default.endConversation(0,t),t.setConversationSpeaker=e=>{},t.none=()=>{t.setConversationSpeaker(i.CutsceneSpeaker.None)},t.setFromDialog=e=>{},t.waitMS=(e,t)=>{},t.waitMSPreemptible=(e,t)=>{};let m=()=>{let e=n.getCurrentScene();return e.isWaitingForTime=!0,()=>{e.isWaitingForTime=!1}};t.setStorage=(e,t)=>{"false"===t&&(t=!1),console.log("Set Storage",e,null==t||t),n.getCurrentScene().storage[e]=null==t||t},t.callScript=(e,...t)=>(d.default.callScript(e,...t),!0),t.lookAtCharacter=(e,t)=>{d.default.lookAtCharacter(e,t)},t.lookAtMarker=(e,t)=>{d.default.lookAtMarker(e,t)},t.lookAtEachOther=(e,i)=>{t.lookAtCharacter(e,i),t.lookAtCharacter(i,e)},t.setFacing=(e,t)=>{d.default.setFacing(e,t)},t.shakeScreen=e=>{},t.setCharacterAt=(e,t,i,a)=>{d.default.setCharacterAt(e,t,i,a)},t.offsetCharacter=(e,t,i,a)=>{d.default.offsetCharacter(e,t,i,a)},t.walkToMarker=(e,t,i,a,r)=>{d.default.setAtMarker(e,t,i,a)},t.walkToCharacter=(e,i,a,l,s)=>{let d=n.getCurrentRoom(),c=o.roomGetCharacterByName(d,e),m=o.roomGetCharacterByName(d,i);if(!c)return void console.error("Could not find character with name: "+e);if(!m)return void console.error("Could not find target ch with name: "+i);if(void 0!==a&&"number"!=typeof a)return void console.error("xOffset is not a number");if(void 0!==l&&"number"!=typeof l)return void console.error("yOffset is not a number");let[h,u]=r.characterGetPos(m),p=[h+(null!=a?a:0),u+(null!=l?l:0)];t.setCharacterAt(e,p[0],p[1],0)},t.setAtMarker=(e,t,i,a)=>{d.default.setAtMarker(e,t,i,a)},t.walkToOffset=(e,i,a,r)=>{let l=n.getCurrentRoom(),s=o.roomGetCharacterByName(l,e);if(!s)return void console.error("Could not find character with name: "+e);if(void 0!==i&&"number"!=typeof i)return void console.error("xOffset is not a number");if(void 0!==a&&"number"!=typeof a)return void console.error("yOffset is not a number");let d=[s.x+i,s.y+a];t.setCharacterAt(e,d[0],d[1],0)},t.setCharacterAtMarker=(e,t,i,a)=>{d.default.setCharacterAtMarker(e,t,i,a)},t.changeTileAtMarker=(e,t,i,a)=>{d.default.changeTileAtMarker(e,t,i,a)},t.removeWallAtMarker=(e,t,i)=>{d.default.removeWallAtMarker(e,t,i)},t.removeWallAtTilePosition=(e,t)=>{d.default.removeWallAtTilePosition(e,t)},t.spawnCharacterAtCharacter=(e,t,i,a)=>{d.default.spawnCharacterAtCharacter(e,t,i,a)},t.spawnCharacterAtMarker=(e,t,i,a)=>{d.default.spawnCharacterAtMarker(e,t,i,a)},t.spawnPartyMembers=()=>{d.default.spawnPartyMembers(!0)},t.despawnPartyMembers=()=>{d.default.despawnPartyMembers(!0)},t.spawnPartyMembersInFormation=()=>{let e=n.getCurrentRoom(),i=n.getCurrentPlayer(),a=i.partyStorage.filter(e=>e!==i.leader),l=[[16,1],[1,-16],[-16,1],[1,16]];a.forEach((e,a)=>{let r=l[a];t.spawnCharacterAtCharacter(e.name,i.leader.name,null==r?void 0:r[0],null==r?void 0:r[1])}),i.party.forEach(t=>{let i=o.roomGetCharacterByName(e,t.name);i&&r.characterSetFacing(i,r.Facing.DOWN)})},t.despawnCharacter=e=>{d.default.despawnCharacter(e)},t.fadeOut=(e,t)=>{let i=document.getElementById("fade");i&&(i.style.transition="unset",i.style["background-color"]="rgba(0, 0, 0, 255)")},t.fadeIn=(e,t)=>{let i=document.getElementById("fade");i&&(i.style.transition="unset",i.style["background-color"]="rgba(0, 0, 0, 0)")},t.fadeOutColor=(e,t,i,a,r)=>{let o=document.getElementById("fade");o&&(o.style.transition="unset",o.style["background-color"]=`rgba(${e}, ${t}, ${i}, 255)`)},t.fadeInColor=(e,t,i,a,r)=>{let o=document.getElementById("fade");o&&(o.style.transition="unset",o.style["background-color"]=`rgba(${e}, ${t}, ${i}, 0)`)},t.changeRoom=async(e,t)=>{d.default.changeRoom(e,t)},t.acquireItem=(e,t)=>{let i=n.getCurrentPlayer();l.getIfExists(e)?s.playerAddItem(i,e):console.error(`Cannot acquire item "${e}" no template exists with that name.`)},t.acquireQuestItem=(e,t)=>{let i=n.getCurrentPlayer();s.playerAddItem(i,e)},t.removeItem=(e,t)=>{let i=n.getCurrentPlayer();s.playerRemoveItem(i,e)},t.modifyTokens=e=>{let t=n.getCurrentPlayer();s.playerModifyTokens(t,e)},t.modifyTickets=e=>{let t=n.getCurrentPlayer();s.playerModifyTickets(t,e)},t.jump=e=>{},t.applyZTransform=(e,t,i)=>{let a=n.getCurrentRoom(),l=o.roomGetCharacterByName(a,e);if(!l)return void console.error("Could not find character with name: "+e);let s=[...r.characterGetPos(l)];s[2]+=t,r.characterSetPos(l,s)},t.runArcadeCabinetGame=e=>{d.default.runArcadeCabinetGame(e)},t.setAnimationAndWait=(e,t,i)=>{},t.setAnimation=(e,t)=>{d.default.setAnimation(e,t)},t.setAnimationState=(e,t)=>{d.default.setAnimationState(e,t)},t.resetAi=e=>{d.default.resetAi(e)},t.startAi=t.resetAi,t.stopAi=e=>{d.default.stopAi(e)},t.setDoorStateAtMarker=(e,t,i,a)=>{d.default.setDoorStateAtMarker(e,t,i,a)},t.awaitChoice=(...e)=>(setTimeout(()=>{c.showChoices(e)},250),m()),t.enterCombat=e=>d.default.enterCombat(e),t.addPartyMemberToActiveParty=e=>{d.default.addPartyMemberToActiveParty(e)},t.removePartyMemberFromActiveParty=e=>{d.default.removePartyMemberFromActiveParty(e)},t.panCameraRelativeToPlayer=(e,t,i,a)=>{},t.panCameraBackToPlayer=(e,t)=>{},t.panCameraToFitCharacters=(e,t,...i)=>{},t.playSound=e=>{},t.playMusic=async e=>d.default.playMusic(e),t.stopMusic=async()=>d.default.stopMusic(1),t.spawnParticleAtTarget=(e,t,i)=>{},t.spawnParticleAtCharacter=(e,t,i)=>{},t.spawnEmotionParticleAtCharacter=(e,t)=>{},t.spawnParticleAtMarker=(e,t,i)=>{},t.setCharacterText=e=>{},t.showUISection=(e,...t)=>d.default.showUISection(e,...t),t.pauseOverworld=()=>{d.default.pauseOverworld()},t.unpauseOverworld=()=>{d.default.unpauseOverworld()},t.equipWeaponOrArmor=(e,t)=>d.default.equipWeaponOrArmor(e,t),t.setBattlePaused=e=>{d.default.setBattlePaused(e)},t.setAiState=(e,t,i)=>{d.default.setAiState(e,t,i)},t.floor1TutToggleColorDoors=(e,t)=>{d.default.floor1TutToggleColorDoors(e,t)},t.default={playDialogue:t.playDialogue,setConversation:t.setConversation,setConversation2:t.setConversation2,setConversationWithoutBars:t.setConversationWithoutBars,setUnskippableConversation:t.setUnskippableConversation,setUnskippable:t.setUnskippable,endConversation:t.endConversation,setConversationSpeaker:t.setConversationSpeaker,none:t.none,setFromDialog:t.setFromDialog,waitMS:t.waitMS,waitMSPreemptible:t.waitMSPreemptible,waitUntil:m,waitForUserInput:e=>{},setStorage:t.setStorage,callScript:t.callScript,lookAtCharacter:t.lookAtCharacter,lookAtMarker:t.lookAtMarker,lookAtEachOther:t.lookAtEachOther,setFacing:t.setFacing,shakeScreen:t.shakeScreen,setCharacterAt:t.setCharacterAt,offsetCharacter:t.offsetCharacter,walkToMarker:t.walkToMarker,walkToCharacter:t.walkToCharacter,setAtMarker:t.setAtMarker,walkToOffset:t.walkToOffset,setCharacterAtMarker:t.setCharacterAtMarker,changeTileAtMarker:t.changeTileAtMarker,removeWallAtMarker:t.removeWallAtMarker,removeWallAtTilePosition:t.removeWallAtTilePosition,spawnCharacterAtCharacter:t.spawnCharacterAtCharacter,spawnCharacterAtMarker:t.spawnCharacterAtMarker,spawnPartyMembersInFormation:t.spawnPartyMembersInFormation,spawnPartyMembers:t.spawnPartyMembers,despawnPartyMembers:t.despawnPartyMembers,despawnCharacter:t.despawnCharacter,fadeOut:t.fadeOut,fadeIn:t.fadeIn,fadeOutColor:t.fadeOutColor,fadeInColor:t.fadeInColor,changeRoom:t.changeRoom,acquireItem:t.acquireItem,acquireQuestItem:t.acquireQuestItem,removeItem:t.removeItem,modifyTokens:t.modifyTokens,modifyTickets:t.modifyTickets,jump:t.jump,applyZTransform:t.applyZTransform,runArcadeCabinetGame:t.runArcadeCabinetGame,setAnimationAndWait:t.setAnimationAndWait,setAnimation:t.setAnimation,setAnimationState:t.setAnimationState,resetAi:t.resetAi,stopAi:t.stopAi,startAi:t.startAi,setDoorStateAtMarker:t.setDoorStateAtMarker,awaitChoice:t.awaitChoice,enterCombat:t.enterCombat,addPartyMemberToActiveParty:t.addPartyMemberToActiveParty,removePartyMemberFromActiveParty:t.removePartyMemberFromActiveParty,panCameraRelativeToPlayer:t.panCameraRelativeToPlayer,panCameraBackToPlayer:t.panCameraBackToPlayer,panCameraToFitCharacters:t.panCameraToFitCharacters,playSound:t.playSound,playMusic:t.playMusic,stopMusic:t.stopMusic,spawnParticleAtCharacter:t.spawnParticleAtCharacter,spawnEmotionParticleAtCharacter:t.spawnEmotionParticleAtCharacter,spawnParticleAtMarker:t.spawnParticleAtMarker,setCharacterText:t.setCharacterText,showUISection:t.showUISection,setBattlePaused:t.setBattlePaused,equipWeaponOrArmor:t.equipWeaponOrArmor,pauseOverworld:t.pauseOverworld,unpauseOverworld:t.unpauseOverworld,setAiState:t.setAiState,startQuest:e=>d.default.startQuest(e),showStore:e=>d.default.showStore(e),completeQuestStep:(e,t)=>d.default.completeQuestStep(e,t),showNotification:(e,t)=>d.default.showNotification(e,t),modifyPartyHP:e=>d.default.modifyPartyHP(e),disableAnimationSounds:()=>d.default.disableAnimationSounds(),enableAnimationSounds:()=>d.default.enableAnimationSounds(),changePropAnim:(...e)=>d.default.changePropAnim(e[0],e[1]),floor1TutToggleColorDoors:t.floor1TutToggleColorDoors}})),define("controller/scene/scene-conditionals",["require","exports","db/quests/index","model/generics","model/quest"],(function(e,t,i,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={questActive:e=>{let t=i.getIfExists(e);return t?r.questIsActive(a.getCurrentScene(),t):(console.error("Error in conditional.  Cannot check questActive.  No quest with name: "+e),!1)},questNotStarted:e=>{let t=i.getIfExists(e);return t?r.questIsNotStarted(a.getCurrentScene(),t):(console.error("Error in conditional.  Cannot check questNotStarted.  No quest with name: "+e),!1)},questCompleted:e=>{let t=i.getIfExists(e);return t?r.questIsCompleted(a.getCurrentScene(),t):(console.error("Error in conditional.  Cannot check questCompleted.  No quest with name: "+e),!1)},questNotCompleted:e=>{let t=i.getIfExists(e);return t?!r.questIsCompleted(a.getCurrentScene(),t):(console.error("Error in conditional.  Cannot check questNotCompleted.  No quest with name: "+e),!1)},questStepGT:(e,t)=>{var o;let n=parseInt(t),l=i.getIfExists(e);if(!l)return console.error("Error in conditional.  Cannot check questStepGT.  No quest with name: "+e),!1;let s=r.getCurrentQuestStep(a.getCurrentScene(),e);return!r.questIsCompleted(a.getCurrentScene(),l)&&(null!==(o=null==s?void 0:s.i)&&void 0!==o?o:1/0)>n},questStepLT:(e,t)=>{var o;let n=parseInt(t),l=i.getIfExists(e);if(!l)return console.error("Error in conditional.  Cannot check questStepGT.  No quest with name: "+e),!1;let s=r.getCurrentQuestStep(a.getCurrentScene(),e);return!r.questIsCompleted(a.getCurrentScene(),l)&&(null!==(o=null==s?void 0:s.i)&&void 0!==o?o:1/0)<n},questStepEQ:(e,t)=>{var o;let n=parseInt(t),l=i.getIfExists(e);if(!l)return console.error("Error in conditional.  Cannot check questStepGT.  No quest with name: "+e),!1;let s=r.getCurrentQuestStep(a.getCurrentScene(),e);return!r.questIsCompleted(a.getCurrentScene(),l)&&(null!==(o=null==s?void 0:s.i)&&void 0!==o?o:1/0)===n},inParty:e=>{let t=a.getCurrentPlayer(),i=e.toLowerCase();return!!t.party.find(e=>e.name.toLowerCase()===i)}}})),define("controller/scene-management",["require","exports","lib/rpgscript","model/scene","model/generics","model/room","controller/scene/scene-commands","controller/scene/scene-commands-skip","model/player","db/characters/index","view/ui","model/store","controller/scene/scene-conditionals"],(function(e,t,r,o,n,l,s,d,c,m,h,u,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.skipCurrentScript=t.getSceneCommands=t.sceneIsPlaying=t.createAndCallScript=t.callScript=t.invokeTrigger=t.evalCondition=t.updateScene=void 0,s=i(s),d=a(d),p=a(p);let g=/\[ARG\d\]/,y=e=>{let t=n.getCurrentScene();if("string"==typeof e){let i;for(;i=e.match(g);){let a=e.slice(i.index+1,i.index+5);e=e.slice(0,i.index)+t.storage[a]+e.slice(i.index+6)}let a=e.replace(/--/g,"+");return"true"===a?a=!0:"false"===a&&(a=!1),a}return e};t.updateScene=e=>{if(e.currentScript&&!o.sceneIsWaiting(e)){let i=null;for(;null!==(i=e.currentScript.getNextCommand());)if(void 0===i.block.conditionalResult&&(i.block.conditionalResult=t.evalCondition(e,i.conditional,void 0,void 0,i.i)),i.block.conditionalResult){let a=t.getSceneCommands(e)[i.type];if(!a)throw Error(`Script runtime error.  No command exists with name '${i.type}'`);let r=null==i?void 0:i.args.map(y);if(console.log("next cmd",i.type,i.args,r),a(...r))break}if(null===i)if(e.onScriptCompleted&&e.onScriptCompleted(),e.scriptStack.length){let i=e.scriptStack.shift();if(i){let{script:a,onScriptCompleted:r,args:o}=i;e.currentScript=a,e.onScriptCompleted=r;for(let t=0;t<10;t++){let i=o[t],a="ARG"+t;void 0===i?delete e.storage[a]:s.setStorage(a,i)}setTimeout(()=>t.updateScene(e))}}else e.postSceneCallbacks.forEach(e=>{e()}),e.skip=!1,e.postSceneCallbacks=[],e.currentScript=null,e.currentTrigger=null,e.currentTriggerType=null,e.onceKeysToCommit.forEach(t=>{e.storageOnceKeys[t]=!0}),e.onceKeysToCommit=[]}},t.evalCondition=(e,i,a,o,s)=>{var d,h,u,g,f,v;if(!0===i)return!0;if("object"==typeof i){let{type:b,args:w}=i,C=r.formatArgs(w).map(y).map(t=>{if("object"==typeof t)return t;if("scene"===t&&e.currentTrigger)return e.storage[e.currentTrigger.name];if("string"==typeof t&&t.indexOf(".")>-1){let[i,a]=t.split(".");return"storage"===i?e.storage[a]:e.storage[i]?e.storage[i][a]:(console.error("No storage in scene called:",i),!1)}return t});if("is"===b)return m.getIfExists(C[0])?!!l.roomGetCharacterByName(n.getCurrentRoom(),C[0]):"boolean"==typeof C[0]?C[0]:!!e.storage[C[0]];if("isnot"===b)return"object"==typeof C[0]?!t.evalCondition(e,C[0],a,o,s):"boolean"==typeof C[0]?!C[0]:m.getIfExists(C[0])?!l.roomGetCharacterByName(n.getCurrentRoom(),C[0]):!e.storage[C[0]];if("gt"===b)return"string"==typeof C[0]&&(C[0]=e.storage[C[0]]),"string"==typeof C[1]&&(C[1]=e.storage[C[1]]),C[0]>C[1];if("lt"===b)return"string"==typeof C[0]&&(C[0]=e.storage[C[0]]),"string"==typeof C[1]&&(C[1]=e.storage[C[1]]),C[0]<C[1];if("eq"===b){let t=[C[0]===C[1],e.storage[C[0]]===C[1],e.storage[C[1]]===C[0]];return"number"!=typeof C[1]&&t.push(e.storage[C[0]]===e.storage[C[1]]),t.reduce((e,t)=>t||e,!1)}if("any"===b){for(let i=0;i<C.length;i++)if(t.evalCondition(e,C[i],a,o,s))return!0;return!1}if("all"===b){for(let i=0;i<C.length;i++)if(!t.evalCondition(e,C[i],a,o,s))return!1;return!0}if("as"===b)return console.error('conditional "as" is not defined for this scene.'),!1;if("once"===b){let t=null!==(d=C[0])&&void 0!==d?d:(null===(h=e.currentScript||e.currentTrigger)||void 0===h?void 0:h.name)+"-once";return t[0]||(e.currentScript?t=e.currentScript.name+s+"-once":e.currentTrigger&&(t=e.currentTrigger.name+s+"-once")),o&&(t=null!==(u=C[0])&&void 0!==u?u:(null===(g=e.currentScript||e.currentTrigger)||void 0===g?void 0:g.name)+"-"+o+s+"-once"),!e.storageOnceKeys[t]&&(a||e.onceKeysToCommit.push(t),!0)}if("with"===b){let e=null!==(f=C[0])&&void 0!==f?f:"",t=n.getCurrentPlayer();return e&&c.playerHasItem(t,e)}if("func"===b){let e=null!==(v=C[0])&&void 0!==v?v:"",t=C.slice(1),i=p.default[e];return i?i(...t):(console.error("Error in conditional.  func condition is not registered: "+e,C),!1)}return!1}},t.invokeTrigger=(e,i,a,o)=>{let n=r.getTrigger(i);if(!e.currentScript&&n){"step"!==a&&"step-first"!==a&&console.log("INVOKE TRIGGER",i,a,n);for(let i=0;i<n.scriptCalls.length;i++){let r=n.scriptCalls[i];if(r.type===a){if(e.currentTrigger=n,e.currentTriggerType=a,t.evalCondition(e,r.condition,o,a,i))return async()=>{await t.callScript(e,r.scriptName),e.storage[n.name]=!0,e.currentTrigger=null,e.currentTriggerType=null};e.currentTrigger=null,e.currentTriggerType=null}}}return null},t.callScript=window.callScript=async(e,i,...a)=>new Promise(o=>{let n=r.getScript(i);if(n.reset(),e.currentScript){let t=[];for(let i=0;i<10;i++){let a=e.storage["ARG"+i];void 0!==a&&t.push(a)}e.scriptStack.unshift({script:e.currentScript,onScriptCompleted:e.onScriptCompleted,args:t})}e.currentScript=n,e.onScriptCompleted=o;for(let t=0;t<10;t++){let i=a[t],r="ARG"+t;void 0===i?delete e.storage[r]:s.setStorage(r,i)}t.updateScene(e)}),t.createAndCallScript=(e,i)=>new Promise(a=>{let o=r.parseSingleScript(i="@tmp\n"+i,e).tmp;o.reset(),e.currentScript&&e.scriptStack.push({script:e.currentScript,onScriptCompleted:function(){},args:[]}),e.currentScript=o,e.onScriptCompleted=a,t.updateScene(e)}),t.sceneIsPlaying=e=>e.currentScript||o.sceneIsWaiting(e),t.getSceneCommands=e=>e.skip?d.default:s.default,t.skipCurrentScript=e=>{let t=h.getUiInterface().appState.sections.includes(u.AppSection.Cutscene);!e.skip&&t&&(clearTimeout(e.waitTimeoutId),e.skip=!0,e.waitTimeoutCb&&e.waitTimeoutCb())}})),define("controller/arcade-iframe-actions",["require","exports","model/generics","utils","view/ui","controller/scene-management","controller/ui-actions","view/components/ArcadeCabinet/index"],(function(e,t,i,a,r,o,n,l){"use strict";var s,d;Object.defineProperty(t,"__esModule",{value:!0}),t.beginCurrentArcadeGame=t.setScaleWindow=t.setScaleOriginal=t.setButtonUp=t.setButtonDown=t.unmuteAudio=t.muteAudio=t.showControls=t.hideControls=void 0,function(e){e.HIDE_CONTROLS="HIDE_CONTROLS",e.SHOW_CONTROLS="SHOW_CONTROLS",e.MUTE_AUDIO="MUTE_AUDIO",e.UNMUTE_AUDIO="UNMUTE_AUDIO",e.BUTTON_DOWN="BUTTON_DOWN",e.BUTTON_UP="BUTTON_UP",e.SCALE_ORIGINAL="SCALE_ORIGINAL",e.SCALE_WINDOW="SCALE_WINDOW",e.BEGIN_GAME="BEGIN_GAME"}(s||(s={})),function(e){e.GAME_READY="GAME_READY",e.GAME_STARTED="GAME_STARTED",e.GAME_CONCLUDED="GAME_CONCLUDED",e.GAME_CANCELLED="GAME_CANCELLED",e.RUN_RPGSCRIPT="RUN_RPGSCRIPT"}(d||(d={}));let c=window.location.origin;window.addEventListener("message",async e=>{let t=(e=>{try{return JSON.parse(e)}catch(e){return null}})(e.data);if(t)if(t.action===d.GAME_READY)console.log("game ready"),n.setArcadeGameReady(!0);else if(t.action===d.GAME_STARTED)n.setArcadeGameRunning(!0),console.log("game started");else if(t.action===d.GAME_CONCLUDED){console.log("game concluded",t.payload),window.focus();let e=r.getUiInterface().appState.arcadeGame.path;if(e){let i=l.getArcadeGamePathMeta(e);(null==i?void 0:i.onGameCompleted)&&await(null==i?void 0:i.onGameCompleted(t.payload))}n.setArcadeGameRunning(!1)}else t.action===d.GAME_CANCELLED?(console.log("game cancelled"),n.setArcadeGameRunning(!1)):t.action===d.RUN_RPGSCRIPT?(console.log("run rpgscript from iframe",t.payload),o.createAndCallScript(i.getCurrentScene(),t.payload.scriptSrc)):console.error("Got message event listener with invalid action",t.action)});let m=async()=>{let e=document.getElementById("arcade-iframe");if(e){let t=e;if(!t.contentWindow)for(let e=0;e<100&&(await a.timeoutPromise(33),!t.contentWindow);e++);return t.contentWindow}return console.error("Cannot get iframe contentWindow."),null},h=async(e,t)=>{e.postMessage(JSON.stringify(t),c)};t.hideControls=async()=>{let e=await m();e&&h(e,{action:s.HIDE_CONTROLS})},t.showControls=async()=>{let e=await m();e&&h(e,{action:s.SHOW_CONTROLS})},t.muteAudio=async()=>{let e=await m();e&&h(e,{action:s.MUTE_AUDIO})},t.unmuteAudio=async()=>{let e=await m();e&&h(e,{action:s.UNMUTE_AUDIO})},t.setButtonDown=async e=>{let t=await m();t&&h(t,{action:s.BUTTON_DOWN,payload:e})},t.setButtonUp=async e=>{let t=await m();t&&h(t,{action:s.BUTTON_UP,payload:e})},t.setScaleOriginal=async()=>{let e=await m();e&&h(e,{action:s.SCALE_ORIGINAL})},t.setScaleWindow=async()=>{let e=await m();e&&h(e,{action:s.SCALE_WINDOW})},t.beginCurrentArcadeGame=async()=>{let e=await m();e&&h(e,{action:s.BEGIN_GAME})}})),define("view/elements/Button",["require","exports","preact","view/style","view/icons/Cursor","preact/hooks"],(function(e,t,i,r,o,n){"use strict";var l;Object.defineProperty(t,"__esModule",{value:!0}),t.ButtonContentWithIcon=t.ButtonType=void 0,o=a(o),function(e){e[e.NEUTRAL=0]="NEUTRAL",e[e.PRIMARY=1]="PRIMARY",e[e.SECONDARY=2]="SECONDARY",e[e.ENEMY=3]="ENEMY",e[e.CANCEL=4]="CANCEL",e[e.TOKEN=5]="TOKEN"}(l=t.ButtonType||(t.ButtonType={}));let s={[l.NEUTRAL]:{top:r.colors.GREY,bottom:r.colors.DARKGREY_ALT},[l.PRIMARY]:{top:r.colors.BLUE,bottom:r.colors.DARKBLUE},[l.SECONDARY]:{top:r.colors.GREEN,bottom:r.colors.DARKGREEN},[l.ENEMY]:{top:r.colors.RED,bottom:r.colors.DARKRED},[l.CANCEL]:{top:r.colors.RED,bottom:r.colors.DARKRED},[l.TOKEN]:{top:r.colors.ORANGE,bottom:r.colors.DARKYELLOW}},d=r.keyframes({"0%":{filter:"brightness(100%)"},"50%":{filter:"brightness(80%)"},"100%":{filter:"brightness(100%)"}}),c=r.keyframes({"0%":{transform:"translateX(-10px)"},"20%":{transform:"translateX(-1px)"},"100%":{transform:"translateX(-10px)"}}),m=r.style("div",()=>({color:r.colors.WHITE,position:"absolute",top:"-8px",left:"-32px",animation:c+" 750ms linear infinite"})),h=()=>i.h(m,null,i.h(o.default,{color:r.colors.BLUE})),u=r.style("div",(e={type:l.NEUTRAL})=>Object.assign({fontSize:"16px",textAlign:"center",padding:"4px 10px",cursor:e.disabled?"unset":"pointer",background:e.disabled?r.colors.GREY:s[e.type].bottom,textDecoration:e.selected?"underline":"unset",transition:"border-radius 250sm",border:"2px solid "+(e.selected?r.colors.WHITE:e.disabled?r.colors.GREY:s[e.type].top),pointerEvents:e.disabled?"none":"unset",borderBottom:"2px solid "+r.colors.GREY,filter:e.disabled?"brightness(80%)":"unset",minWidth:"80px",animation:e.selected?d+" 1500ms linear infinite":"unset","&:hover":{filter:e.disabled?"unset":"brightness(120%)"},"&:active":{filter:e.disabled?"unset":"brightness(80%)",transform:"translateY(2px)"}},e.active?{filter:e.disabled?"unset":"brightness(80%)",transform:"translateY(2px)"}:{}));t.ButtonContentWithIcon=r.style("div",()=>({display:"flex",justifyContent:"center",alignItems:"center","& > svg":{marginRight:"8px",width:"16px",height:"16px"}})),t.default=e=>{let[t,a]=n.useState(!1);return i.h("div",{style:{position:"relative",pointerEvents:e.disabled?"none":"unset"}},e.showCursor?i.h(h,null):null,i.h(u,Object.assign({},e,{active:t||e.active,onClick:t=>{(null==e?void 0:e.onClick)&&((null==e?void 0:e.delayClick)?(a(!0),setTimeout(()=>{a(!1),(null==e?void 0:e.onClick)&&e.onClick(t)},100)):e.onClick(t))}})))}})),define("view/elements/IframeShim",["require","exports","preact","preact/hooks","view/style"],(function(e,t,i,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let o=r.style("div",e=>({border:e.borderImageUrl?"20px solid black":"none",transition:"width 0.25s, height 0.25s, marginTop 0.25s",borderImage:`url(${e.borderImageUrl}) 20 round`,width:e.expanded?"calc(100% - 40px)":e.width,height:e.expanded?"calc(100% - 40px - 4rem)":e.height,marginTop:e.expanded?"4rem":"0",display:"flex",justifyContent:"center",alignItems:"center",pointerEvents:"all",[r.MEDIA_QUERY_PHONE_WIDTH]:{width:e.expanded?"calc(100% - 40px)":e.width,height:e.expanded?"calc(100% - 40px - 7.75rem)":e.height,marginTop:e.expanded?"7.75rem":"0"}}));t.default=e=>{var t;let r=a.useRef(null);return a.useEffect(()=>{let t=e.src;setTimeout(()=>{r.current&&(r.current.src=t)},500)},[]),i.h(o,{expanded:e.expanded,borderImageUrl:e.borderImageUrl,width:e.width,height:e.height},e.loading?i.h("div",{id:"iframe-loading",style:{display:"flex",flexDirection:"column",alignItems:"center",background:"rgba(0, 0, 0, 0.5)",padding:"8px",borderRadius:"8px"}},i.h("span",{style:{marginBottom:"8px"}},"Loading game..."),i.h("img",{src:"res/img/flower.svg",alt:"loading",id:"page-loading-icon"})):null,i.h("iframe",{id:e.id,ref:r,allowTransparency:!0,style:Object.assign({border:"0px",width:e.width,height:e.height,display:e.loading?"none":"block"},null!==(t=e.style)&&void 0!==t?t:{})}))}})),define("view/components/ArcadeCabinet/ArcadeCabinetHelpers",["require","exports","controller/scene-management","controller/ui-actions","model/generics","model/store","preact","view/style"],(function(e,t,i,a,r,o,n,l){"use strict";var s;Object.defineProperty(t,"__esModule",{value:!0}),t.CabinetControlButton=t.callScriptSrcFromArcadeEvent=t.getArcadeGamePathMeta=t.ArcadeGamePathMeta=t.ArcadeGamePath=t.registerArcadeGameMeta=void 0,t.registerArcadeGameMeta=(e,i)=>{t.ArcadeGamePathMeta[e]=i},(s=t.ArcadeGamePath||(t.ArcadeGamePath={})).PRESIDENT="iframes/president/dist/president.html",s.TIC_TAC_TOE="iframes/tic-tac-toe/dist/tic-tac-toe.html",s.INVADERZ="iframes/invaderz/dist/index.html",s.ELASTICITY="iframes/elasticity/dist/elasticity.html",s.VORTEX="iframes/vortex/dist/index.html",s.ZAG="iframes/zag/dist/index.html",s.BOWLING="iframes/regem-ludos-bowling/dist/index.html",t.ArcadeGamePathMeta={default:{title:"No Game Specified",tokensRequired:99,controls:()=>n.h("div",null)}},t.getArcadeGamePathMeta=e=>t.ArcadeGamePathMeta[e],t.callScriptSrcFromArcadeEvent=async e=>{let t=r.getCurrentScene();a.hideSection(o.AppSection.Debug),a.hideArcadeGame(),r.disableKeyUpdate(),a.setInterfaceStateDisabled(!0),await i.createAndCallScript(t,e),r.enableKeyUpdate(),a.setInterfaceStateDisabled(!1),a.showSection(o.AppSection.Debug,!0)},t.CabinetControlButton=l.style("div",e=>{var t,i;return{tapHighlightColor:"rgba(0, 0, 0, 0)",webkitTapHighlightColor:"rgba(0, 0, 0, 0)",padding:"16px",fontSize:"16px",minWidth:e.width?"unset":"48px",width:e.width,height:e.height,margin:"16px 4px",background:null!==(t=e.backgroundColor)&&void 0!==t?t:l.colors.DARKBLUE,color:null!==(i=e.color)&&void 0!==i?i:l.colors.WHITE,cursor:"pointer",borderRadius:"8px",border:"2px solid "+l.colors.GREY,textAlign:"center",fontFamily:"monospace",userSelect:"none",display:"text"===e.type?"flex":"",justifyContent:"center",touchAction:"manipulate",alignItems:"center","&:hover":{filter:"brightness(120%)"},"&:active":{filter:"brightness(80%)"}}})})),define("db/games",["require","exports","utils"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=t.get=void 0;let a=["Admantell","BauerXb","Bozerba","Goldos","Latinature","Moress","Ronziang","Steinetit","Tutorksit","Vocatee","Allureek","Berglimis","ByteDot","Jocktrugi","LifeIntincr","PoshyHerald","SaberMagic","Teamback","Variowain","Wannatt","Annonbok","Bondurain","FrogNewscast","Larvinglo","Lobellign","QuoteAnguris","SmoothSexy","Taldene","Vintagentca","WeirdChampion"],r=(e,t=9)=>{let r=[{playerName:"CarlArnold",playerLabel:"CarlArnold",score:e}];for(let o=1;o<=t;o++)r.push({playerLabel:i.randInArr(a),score:Math.floor(e*(t-o/2)/t)});return r},o={};t.get=()=>o,t.init=()=>{o={elasticity:{gameName:"elasticity",gameLabel:"Elasticity",payout:{max:{threshold:1e4,tickets:10},med:{threshold:7500,tickets:5},min:{threshold:0,tickets:1}},leaderboard:r(13665)},vortex:{gameName:"vortex",gameLabel:"Vortex",payout:{max:{threshold:1e4,tickets:10},med:{threshold:7500,tickets:5},min:{threshold:0,tickets:1}},leaderboard:r(152598)},zag:{gameName:"zag",gameLabel:"Zag",payout:{max:{threshold:1e4,tickets:10},med:{threshold:7500,tickets:5},min:{threshold:0,tickets:1}},leaderboard:r(42809)},invaderz:{gameName:"invaderz",gameLabel:"Invaderz",payout:{max:{threshold:1e4,tickets:10},med:{threshold:7500,tickets:5},min:{threshold:0,tickets:1}},leaderboard:r(3015)}}}})),define("model/scores",["require","exports","model/generics","db/games"],(function(e,t,i,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setLeaderboard=t.getLeaderboard=t.addScoreEntry=t.getScores=void 0,t.getScores=()=>a.get(),t.addScoreEntry=(e,t)=>{let r=a.get()[e];if(!r)return void console.error('Cannot set high score, game: "'+e+'" does not exist.');let o=i.getCurrentPlayer(),n={playerName:o.leader.name,playerLabel:o.leader.nameLabel,score:t};return r.leaderboard.push(n),r.leaderboard.sort((e,t)=>e.score>t.score?-1:1),r.leaderboard[0]===n},t.getLeaderboard=e=>{let t=a.get()[e];if(!t)throw Error('Cannot get leaderboard, game: "'+e+'" does not exist.');return t.leaderboard},t.setLeaderboard=(e,t)=>{let i=a.get()[e];i?i.leaderboard=[...t]:console.error('Cannot set leaderboard, game: "'+e+'" does not exist.')}})),define("controller/save-management",["require","exports","model/generics","model/sound","utils","db/items/index","db/characters/index","db/overworlds","model/character","controller/overworld-management","model/player","controller/loop","controller/ui-actions","model/store","model/quest","model/scores"],(function(e,t,i,a,r,o,n,l,s,d,c,m,h,u,p,g){"use strict";var y;Object.defineProperty(t,"__esModule",{value:!0}),t.loadSavedGame=t.saveGame=t.deleteSave=t.createSave=t.getMostRecentSave=t.saveSaveListToLS=t.loadSaveListFromLS=t.loadSettingsFromLS=t.saveSettingsToLS=t.setCurrentSettings=t.getCurrentSettings=void 0,function(e){e[e.SETTINGS=0]="SETTINGS",e[e.SAVE=1]="SAVE"}(y||(y={})),t.getCurrentSettings=()=>({volumeLevels:{[a.SoundType.NORMAL]:i.getVolume(a.SoundType.NORMAL),[a.SoundType.MUSIC]:i.getVolume(a.SoundType.MUSIC),arcadeGame:i.getArcadeGameVolume()},arcadeGameMuted:i.isArcadeGameMuted(),cutsceneSpeed:i.getCutsceneSpeedMultiplier()}),t.setCurrentSettings=e=>{i.setVolume(a.SoundType.NORMAL,e.volumeLevels[a.SoundType.NORMAL]),i.setVolume(a.SoundType.MUSIC,e.volumeLevels[a.SoundType.MUSIC]),i.setArcadeGameVolume(e.volumeLevels.arcadeGame),i.setArcadeGameMuted(e.arcadeGameMuted),i.setCutsceneSpeedMultiplier(e.cutsceneSpeed)};let f=(e,t)=>"regem_ludos__"+(e===y.SETTINGS?"settings":"save_"+(t||""));t.saveSettingsToLS=e=>{try{localStorage.setItem(f(y.SETTINGS),JSON.stringify(e))}catch(e){throw console.error(e),Error("Unable to saveSettingsToLS.")}},t.loadSettingsFromLS=()=>{var e,t,i,r,o,n,l,s;let d=localStorage.getItem(f(y.SETTINGS));if(!d)throw Error("Unable to loadSettingsFromLS, no settings were found.");try{let c=JSON.parse(d);return{volumeLevels:{[a.SoundType.NORMAL]:null!==(t=null===(e=null==c?void 0:c.volumeLevels)||void 0===e?void 0:e[a.SoundType.NORMAL])&&void 0!==t?t:1,[a.SoundType.MUSIC]:null!==(r=null===(i=null==c?void 0:c.volumeLevels)||void 0===i?void 0:i[a.SoundType.MUSIC])&&void 0!==r?r:1,arcadeGame:null!==(n=null===(o=null==c?void 0:c.volumeLevels)||void 0===o?void 0:o.arcadeGame)&&void 0!==n?n:100},arcadeGameMuted:null!==(l=null==c?void 0:c.arcadeGameMuted)&&void 0!==l&&l,cutsceneSpeed:null!==(s=null==c?void 0:c.cutsceneSpeed)&&void 0!==s?s:1}}catch(e){throw console.error(e),Error("Unable to loadSettingsFromLS, malformed JSON in localStorage item.")}},t.loadSaveListFromLS=()=>{let e=localStorage.getItem(f(y.SAVE));if(!e)return[];try{return JSON.parse(e).map(e=>{var t,i,a,r,o,n,l,s,d,c,m,h,u,p,g,y;return{id:e.id,debug:null===(t=e.debug)||void 0===t||t,timestampSaved:new Date(e.timestampSaved),timestampLoaded:new Date(e.timestampLoaded),durationPlayed:e.durationPlayed,overworld:{name:null!==(i=e.overworld.name)&&void 0!==i?i:""},questsUpdated:null!==(a=e.questsUpdated)&&void 0!==a?a:[],scene:{storage:null!==(r=e.scene.storage)&&void 0!==r?r:{},storageOnce:null!==(o=e.scene.storageOnce)&&void 0!==o?o:{},storageOnceKeys:null!==(n=e.scene.storageOnceKeys)&&void 0!==n?n:{},storageEncounters:null!==(l=e.scene.storageEncounters)&&void 0!==l?l:{},storageTreasure:null!==(s=e.scene.storageTreasure)&&void 0!==s?s:{}},player:{tokens:null!==(d=e.player.tokens)&&void 0!==d?d:0,tickets:null!==(c=e.player.tickets)&&void 0!==c?c:0,backpack:null!==(m=e.player.backpack)&&void 0!==m?m:[],leader:null!==(h=e.player.leader)&&void 0!==h?h:0,party:null!==(u=e.player.party)&&void 0!==u?u:[],battlePositions:null!==(p=e.player.battlePositions)&&void 0!==p?p:[],partyStorage:null!==(g=e.player.partyStorage)&&void 0!==g?g:[]},leaderboards:null==e?void 0:e.leaderboards,stores:Object.assign({},null!==(y=null==e?void 0:e.stores)&&void 0!==y?y:{})}})}catch(e){return console.error("Malformed Save List in LS",e),[]}},t.saveSaveListToLS=e=>{try{localStorage.setItem(f(y.SAVE),JSON.stringify(e))}catch(e){throw console.error(e),Error("Unable to saveSaveListToLS.")}},t.getMostRecentSave=()=>{let e=t.loadSaveListFromLS(),i=e[0];for(let t=1;t<e.length;t++){let a=e[t];a.timestampSaved>(null==i?void 0:i.timestampSaved)&&(i=a)}return i},t.createSave=e=>{var t,a,r,o,n,l,s;let d=i.getCurrentScene(),c=i.getCurrentPlayer(),m=g.getScores(),h={};for(let e in m)h[e]=m[e].leaderboard;let u={id:e.saveId,debug:!0,timestampSaved:new Date,timestampLoaded:e.lastTimestampLoaded,durationPlayed:e.durationPlayed+ +new Date-+e.lastTimestampLoaded,overworld:{name:i.getCurrentOverworld().name},questsUpdated:p.getLastUpdatedQuests(),scene:{storage:null!==(t=d.storage)&&void 0!==t?t:{},storageOnce:null!==(a=d.storageOnce)&&void 0!==a?a:{},storageOnceKeys:null!==(r=d.storageOnceKeys)&&void 0!==r?r:{},storageEncounters:null!==(o=d.storageEncounters)&&void 0!==o?o:{},storageTreasure:null!==(n=d.storageTreasure)&&void 0!==n?n:{}},player:{tokens:null!==(l=c.tokens)&&void 0!==l?l:0,tickets:null!==(s=c.tickets)&&void 0!==s?s:0,backpack:c.backpack.map(e=>{var t;return null!==(t=e.name)&&void 0!==t?t:""}),leader:c.partyStorage.indexOf(c.leader),partyStorage:c.partyStorage.map(e=>v(e,c.backpack)),party:c.party.map(e=>c.partyStorage.indexOf(e)),battlePositions:c.battlePositions.map(e=>c.partyStorage.indexOf(e))},leaderboards:h,stores:i.getItemStores()};return u.durationPlayed+=+new Date-+e.lastTimestampLoaded,u},t.deleteSave=e=>{let i=t.loadSaveListFromLS();e<0||e>=i.length||(i.splice(e,1),t.saveSaveListToLS(i))},t.saveGame=e=>{let a=t.loadSaveListFromLS();if(e<0&&(e=0),e>=a.length){let e=t.createSave({saveId:r.randomId(),durationPlayed:i.getDurationPlayed(),lastTimestampLoaded:new Date(i.getTimeLoaded())});console.log("CREATE SAVE",e),a.push(e)}else{let r=a[e];console.log("CREATE SAVE2",r);let o=t.createSave({saveId:r.id,durationPlayed:i.getDurationPlayed(),lastTimestampLoaded:new Date(i.getTimeLoaded())});a[e]=o}t.saveSaveListToLS(a)},t.loadSavedGame=async e=>{let t=n.getIfExists("Ada"),a=c.playerCreateNew(t);i.setCurrentPlayer(a),(e=>{var t,a;console.log("LOAD GAME",e);let r=i.getCurrentScene(),n=i.getCurrentPlayer();if(r.storage=Object.assign({},e.scene.storage),r.storageOnce=Object.assign({},e.scene.storageOnce),r.storageOnceKeys=Object.assign({},e.scene.storageOnceKeys),r.storageEncounters=Object.assign({},e.scene.storageEncounters),r.storageTreasure=Object.assign({},e.scene.storageTreasure),p.resetLastUpdatedQuests(e.questsUpdated),i.setItemStores(null!==(t=e.stores)&&void 0!==t?t:{}),e.leaderboards)for(let t in e.leaderboards)g.setLeaderboard(t,e.leaderboards[t]);n.tokens=e.player.tokens,n.tickets=e.player.tickets,n.backpack=e.player.backpack.map(e=>o.getIfExists(e)||(console.error("Failed to load item from save: ",e,"item is not in db."),null)).filter(e=>!!e),n.partyStorage=e.player.partyStorage.map(e=>b(e,n.backpack)),n.party=e.player.party.map(e=>n.partyStorage[e]),n.battlePositions=e.player.battlePositions.map(e=>n.partyStorage[e]),n.leader=n.partyStorage[e.player.leader];let c=s.characterGetPos(n.leader),m=e.overworld.name,h=l.getIfExists(m);if(!h)throw Error("Could not load save, overworld template not found in db: "+m);d.initiateOverworld(n,h),n.leader.x=c[0],n.leader.y=c[1],n.leader.z=c[2],i.setTimeLoaded(+new Date),i.setDurationPlayed(e.durationPlayed),i.setDebugModeEnabled(null===(a=e.debug)||void 0===a||a)})(e),d.enableOverworldControl(),m.runMainLoop(),i.setCameraTransform(null),document.getElementById("controls").style.display="none",h.showSection(u.AppSection.Debug,!0),m.unpause()};let v=(e,t)=>({stats:{POW:e.stats.POW,ACC:e.stats.ACC,FOR:e.stats.FOR,CON:e.stats.CON,RES:e.stats.RES,SPD:e.stats.SPD,EVA:e.stats.EVA,STAGGER:e.stats.STAGGER,HP:e.stats.HP,RESV:e.stats.RESV},hp:e.hp,resv:e.resv,x:e.x,y:e.y,z:e.z,name:e.name,facing:e.facing,experience:e.experience,experienceCurrency:e.experienceCurrency,equipment:{weapon:t.indexOf(e.equipment.weapon),accessory1:t.indexOf(e.equipment.accessory1),accessory2:t.indexOf(e.equipment.accessory2),armor:t.indexOf(e.equipment.armor)}}),b=(e,t)=>{let i=n.getIfExists(e.name);if(!i)throw Error('Cannot transform saved character to character: "'+e.name+'" does not exist in db.');let a=s.characterCreateFromTemplate(i);if(a.stats=e.stats,a.hp=e.hp,a.resv=e.resv,a.x=e.x,a.y=e.y,a.z=e.z,a.experience=e.experience,a.experienceCurrency=e.experienceCurrency,e.equipment.weapon>=0){let i=e.equipment.weapon,r=t[i];r?s.characterEquipItem(a,r):console.error(`Failed to equip weapon for ${a.name} weaponInd=${i}, index out of bounds`)}if(e.equipment.accessory1>=0){let i=e.equipment.accessory1,r=t[i];r?s.characterEquipItem(a,r,0):console.error(`Failed to equip accessory1 for ${a.name} accessory1=${i}, index out of bounds`)}if(e.equipment.accessory2>=0){let i=e.equipment.accessory2,r=t[i];r?s.characterEquipItem(a,r,1):console.error(`Failed to equip accessory2 for ${a.name} accessory2=${i}, index out of bounds`)}if(e.equipment.armor>=0){let i=e.equipment.armor,r=t[i];r?s.characterEquipItem(a,r):console.error(`Failed to equip armor for ${a.name} armor=${i}, index out of bounds`)}return s.characterSetFacing(a,e.facing),a}})),define("view/icons/SpeakerOff",["require","exports","preact"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>i.h("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},i.h("g",{class:"",transform:"translate(0,0)",style:""},i.h("path",{d:"M275.5 96l-96 96h-96v128h96l96 96V96zm50.863 89.637l-12.726 12.726L371.273 256l-57.636 57.637 12.726 12.726L384 268.727l57.637 57.636 12.726-12.726L396.727 256l57.636-57.637-12.726-12.726L384 243.273l-57.637-57.636z",fill:e.color,"fill-opacity":"1"})))})),define("view/components/ArcadeCabinet/ArcadeCabinetHelpDialog",["require","exports","preact","view/style","view/elements/Button"],(function(e,t,a,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=i(o);let n=r.style("div",()=>({background:"rgba(0, 0, 0, 0.5)",position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",zIndex:"2",pointerEvents:"all"})),l=r.style("div",()=>({margin:"4px",padding:"4px",minWidth:"50%",maxWidth:"90%",border:"2px solid "+r.colors.BLUE,background:r.colors.BGGREY,color:r.colors.WHITE})),s=r.style("div",()=>({margin:"8px",padding:"8px",fontSize:"32px",textTransform:"uppercase",borderBottom:"2px solid "+r.colors.BLACK})),d=r.style("div",()=>({margin:"8px",padding:"8px",fontSize:"16px"})),c=r.style("div",()=>({display:"flex",justifyContent:"flex-end",padding:"8px",margin:"8px"}));t.default=e=>a.h(n,null,a.h(l,null,a.h(s,null,e.title),a.h(d,null,e.children),a.h(c,null,a.h(o.default,{type:o.ButtonType.PRIMARY,style:{marginRight:"1rem"},onClick:()=>{e.setOpen(!1)}},"Close"))))})),define("view/components/ArcadeCabinet/GameTicTacToe",["require","exports","preact","view/style","view/components/ArcadeCabinet/ArcadeCabinetHelpers","view/components/ArcadeCabinet/ArcadeCabinetHelpDialog","view/icons/Help","controller/scene-management","model/generics","controller/ui-actions","model/store","controller/loop","model/quest","db/quests/index"],(function(e,t,i,r,o,n,l,s,d,c,m,h,u,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=a(n),l=a(l),o.registerArcadeGameMeta(o.ArcadeGamePath.TIC_TAC_TOE,{title:"Tic Tac Toe",tokensRequired:1,controls:e=>i.h(i.Fragment,null,i.h(o.CabinetControlButton,{width:"48px",height:"48px",type:"text",onClick:()=>{e.setHelpDialogOpen(!0)}},i.h(l.default,{color:r.colors.YELLOW}))),help:e=>i.h(n.default,{setOpen:e.setHelpDialogOpen,title:"Tic Tac Toe Help"},i.h("p",null,"On this machine you can play Tic Tac Toe."),i.h("p",null,"Insert a Token to start: 1 token = 3 games"),i.h("p",null,"You are the 'X' player for each game."),i.h("p",null,"Place an 'X' by tapping/clicking the grid area where you wish to play."),i.h("p",null,"Place three 'X' in a row to win the game. You lose if there are three 'O' in a row."),i.h("p",null,"Tickets are awarded based off of the number of times you beat the AI.")),onGameCompleted:async e=>{let t=e,i=d.getCurrentScene(),a=p.getIfExists("TicTacToe");if(a)if(console.log("GAME HAS BEEN COMPLETED",e),-1!==t||u.questIsCompleted(i,a))t>-1&&(d.disableKeyUpdate(),d.getCurrentOverworld().triggersEnabled=!1,h.unpause(),await s.createAndCallScript(i,`\n        +setConversation('Ada');\n        +modifyTickets(${t});\n        +endConversation();`),h.pause(),d.getCurrentOverworld().triggersEnabled=!0,d.enableKeyUpdate(),c.hideSection(m.AppSection.Cutscene));else{let e=d.getCurrentScene();c.hideArcadeGame(),d.disableKeyUpdate(),d.getCurrentOverworld().triggersEnabled=!1,await s.callScript(e,"floor1-atrium-TicTacToeGirl-complete"),d.getCurrentOverworld().triggersEnabled=!0,d.enableKeyUpdate()}else console.error("No TicTacToe quest exists.")}})})),define("view/components/ArcadeCabinet/GamePresident",["require","exports","preact","view/style","view/components/ArcadeCabinet/ArcadeCabinetHelpers","view/components/ArcadeCabinet/ArcadeCabinetHelpDialog","view/icons/Help"],(function(e,t,i,r,o,n,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=a(n),l=a(l),o.registerArcadeGameMeta(o.ArcadeGamePath.PRESIDENT,{title:"President",tokensRequired:1,controls:e=>i.h(i.Fragment,null,i.h(o.CabinetControlButton,{width:"48px",height:"48px",type:"text",onClick:()=>{e.setHelpDialogOpen(!0)}},i.h(l.default,{color:r.colors.YELLOW}))),help:e=>i.h(n.default,{setOpen:e.setHelpDialogOpen,title:"President Help"},i.h("p",null,"This is the game President"))})})),define("view/components/ArcadeCabinet/GameInvaderz",["require","exports","preact","view/style","view/components/ArcadeCabinet/ArcadeCabinet","view/components/ArcadeCabinet/ArcadeCabinetHelpers","view/icons/Arrow"],(function(e,t,i,r,o,n,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),l=a(l),n.registerArcadeGameMeta(n.ArcadeGamePath.INVADERZ,{title:"INVADERZ",tokensRequired:1,controls:()=>i.h(i.Fragment,null,i.h(n.CabinetControlButton,Object.assign({width:"48px",height:"48px"},o.buttonHandlers(o.SDLKeyID.Left)),i.h(l.default,{color:r.colors.GREEN,direction:"left"})),i.h(n.CabinetControlButton,Object.assign({width:"48px",height:"48px"},o.buttonHandlers(o.SDLKeyID.Right)),i.h(l.default,{color:r.colors.GREEN,direction:"right"})),i.h(n.CabinetControlButton,Object.assign({width:"48px",height:"48px",type:"text"},o.buttonHandlers(o.SDLKeyID.Space)),"FIRE"),i.h(n.CabinetControlButton,Object.assign({width:"48px",height:"48px",type:"text"},o.buttonHandlers(o.SDLKeyID.Enter)),"START"))})})),define("view/components/ArcadeCabinet/GameElasticity",["require","exports","preact","view/style","view/components/ArcadeCabinet/ArcadeCabinet","view/components/ArcadeCabinet/ArcadeCabinetHelpers","view/icons/Arrow"],(function(e,t,i,r,o,n,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),l=a(l),n.registerArcadeGameMeta(n.ArcadeGamePath.ELASTICITY,{title:"ELASTICITY",tokensRequired:2,controls:()=>i.h(i.Fragment,null,i.h(n.CabinetControlButton,Object.assign({width:"48px",height:"48px"},o.buttonHandlers(o.SDLKeyID.Left)),i.h(l.default,{color:r.colors.GREEN,direction:"left"})),i.h(n.CabinetControlButton,Object.assign({width:"48px",height:"48px"},o.buttonHandlers(o.SDLKeyID.Right)),i.h(l.default,{color:r.colors.GREEN,direction:"right"})),i.h(n.CabinetControlButton,Object.assign({width:"48px",height:"48px",type:"text"},o.buttonHandlers(o.SDLKeyID.Enter)),"START"))})})),define("view/components/ArcadeCabinet/GameZag",["require","exports","preact","view/style","view/components/ArcadeCabinet/ArcadeCabinet","view/components/ArcadeCabinet/ArcadeCabinetHelpers","view/icons/Arrow"],(function(e,t,i,r,o,n,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),l=a(l),n.registerArcadeGameMeta(n.ArcadeGamePath.ZAG,{title:"ZAG",tokensRequired:1,controls:()=>i.h(i.Fragment,null,i.h(n.CabinetControlButton,Object.assign({width:"48px",height:"48px"},o.buttonHandlers(o.SDLKeyID.Left)),i.h(l.default,{color:r.colors.GREEN,direction:"left"})),i.h(n.CabinetControlButton,Object.assign({width:"48px",height:"48px"},o.buttonHandlers(o.SDLKeyID.Right)),i.h(l.default,{color:r.colors.GREEN,direction:"right"})),i.h(n.CabinetControlButton,Object.assign({width:"48px",height:"48px",type:"text"},o.buttonHandlers(o.SDLKeyID.Space)),"SHOOT"))})})),define("view/components/ArcadeCabinet/GameVortex",["require","exports","preact","view/style","view/components/ArcadeCabinet/ArcadeCabinet","view/components/ArcadeCabinet/ArcadeCabinetHelpers","view/icons/Arrow"],(function(e,t,i,r,o,n,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),l=a(l),n.registerArcadeGameMeta(n.ArcadeGamePath.VORTEX,{title:"VORTEX",tokensRequired:1,controls:()=>i.h(i.Fragment,null,i.h(n.CabinetControlButton,Object.assign({width:"48px",height:"48px"},o.buttonHandlers(o.SDLKeyID.Left)),i.h(l.default,{color:r.colors.GREEN,direction:"left"})),i.h(n.CabinetControlButton,Object.assign({width:"48px",height:"48px"},o.buttonHandlers(o.SDLKeyID.Right)),i.h(l.default,{color:r.colors.GREEN,direction:"right"})),i.h(n.CabinetControlButton,Object.assign({width:"48px",height:"48px",type:"text"},o.buttonHandlers(o.SDLKeyID.Space)),"SHOOT"),i.h(n.CabinetControlButton,Object.assign({width:"48px",height:"48px",type:"text"},o.buttonHandlers(o.SDLKeyID.Shift)),"SHIELD"),i.h(n.CabinetControlButton,Object.assign({width:"48px",height:"48px",type:"text"},o.buttonHandlers(o.SDLKeyID.Up)),"BOOST"))})})),define("view/components/ArcadeCabinet/GameBowling",["require","exports","view/components/ArcadeCabinet/ArcadeCabinetHelpers"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.registerArcadeGameMeta(i.ArcadeGamePath.BOWLING,{title:"Regem Ludos Bowling",tokensRequired:0,cabinet:{music:!0,disabled:!0,backgroundColor:"radial-gradient(circle, rgba(17,17,17,0) 81%, rgba(17,17,17,0.8239670868347339) 93%);"},onGameCompleted:async e=>{let t="Good effort!";e>=100?t="Nice work!":e>=150?t="Great technique!":e>=200?t="Very impressive!":e>=250?t="Wow, you're really good at this!":300===e&&(t="<scale=1.5 color=ORANGE shake>A perfect game!!!!!!!</>"),await i.callScriptSrcFromArcadeEvent(`\n      +fadeOut(1000);\n      +setAtMarker(Ada, MarkerPreventBowling);\n      +setAnimationState(Ada, idle);\n      +lookAtEachOther(Ada, Floor1BowlingEmployee);\n      +fadeIn(500);\n      +setConversation(Ada);\n      Floor1BowlingEmployee: "Looks like you bowled a ${e}.  ${t}"\n      ${e>200?"+:happy(Ada)":""}\n      ${e>250?"+:jump(Ada)":""}\n      ${e>=300?"+:jump(Ada)\n+:jump(Ada)":""}\n      +resetAi(Floor1BowlingEmployee);\n      +endConversation();\n      `)},onGameCancelled:async()=>{await i.callScriptSrcFromArcadeEvent('\n      +fadeOut(1000);\n      +setAtMarker(Ada, MarkerPreventBowling);\n      +setAnimationState(Ada, idle);\n      +lookAtEachOther(Ada, Floor1BowlingEmployee);\n      +fadeIn(500);\n      +setConversation(Ada);\n      Floor1BowlingEmployee: "Calling it quits early?"\n      +resetAi(Floor1BowlingEmployee);\n      +endConversation();\n      ')}})})),define("view/components/ArcadeCabinet/ArcadeCabinet",["require","exports","preact","preact/hooks","view/style","controller/arcade-iframe-actions","view/elements/Button","view/elements/IframeShim","controller/ui-actions","model/generics","view/ui","model/player","model/sound","view/components/ArcadeCabinet/ArcadeCabinetHelpers","controller/loop","view/hooks","controller/events","utils","controller/save-management","view/icons/Speaker","view/icons/SpeakerOff","view/icons/Expand","view/icons/Contract","view/components/ArcadeCabinet/GameTicTacToe","view/components/ArcadeCabinet/GamePresident","view/components/ArcadeCabinet/GameInvaderz","view/components/ArcadeCabinet/GameElasticity","view/components/ArcadeCabinet/GameZag","view/components/ArcadeCabinet/GameVortex","view/components/ArcadeCabinet/GameBowling"],(function(e,t,r,o,n,l,s,d,c,m,h,u,p,g,y,f,v,b,w,C,S,T,x){"use strict";var E;Object.defineProperty(t,"__esModule",{value:!0}),t.buttonHandlers=t.SDLKeyID=void 0,s=i(s),d=a(d),C=a(C),S=a(S),T=a(T),x=a(x),(E=t.SDLKeyID||(t.SDLKeyID={}))[E.Enter=13]="Enter",E[E.Space=32]="Space",E[E.Left=1073741904]="Left",E[E.Right=1073741903]="Right",E[E.Up=1073741906]="Up",E[E.Down=1073741905]="Down",E[E.Shift=1073742049]="Shift",t.buttonHandlers=e=>({onMouseDown:()=>{h.getUiInterface().appState.arcadeGame.isGameRunning&&l.setButtonDown(e)},onMouseUp:()=>{h.getUiInterface().appState.arcadeGame.isGameRunning&&l.setButtonUp(e)},onTouchStart:()=>{h.getUiInterface().appState.arcadeGame.isGameRunning&&l.setButtonDown(e)},onTouchEnd:()=>{h.getUiInterface().appState.arcadeGame.isGameRunning&&l.setButtonUp(e)}});let A=n.style("div",e=>({background:e.background,position:e.fixed?"fixed":"absolute",left:"0px",top:"0px",width:"100%",height:"100%"})),_=n.style("div",e=>({position:e.fixed?"fixed":"absolute",left:"0px",top:"0px",padding:"1rem",width:"100%",background:n.colors.BLACK,display:"flex",justifyContent:"flex-start",alignItems:"center",[n.MEDIA_QUERY_PHONE_WIDTH]:{padding:"2rem"}})),I=n.style("div",()=>({display:"flex",justifyContent:"space-between"})),k=n.style("div",()=>({display:"flex"})),R=n.style("div",()=>({display:"flex",justifyContent:"space-between",alignItems:"center"})),P=n.style("div",()=>({padding:"0px 8px"})),O=n.style("div",()=>({position:"relative",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",height:"100%",pointerEvents:"none"})),M=n.style("div",e=>({border:"20px solid "+n.colors.BLACK,background:n.colors.DARKBLUE,color:n.colors.WHITE,fontSize:"4rem",width:"646px",boxSizing:"border-box",textAlign:"center"})),L=n.style("div",()=>({backgroundImage:"url(res/img/arcade-cabinet.png)",width:"646px",height:"712px",position:"absolute",left:"0px",top:"0px",zIndex:"-1"})),B=n.style("div",e=>({height:"96px",width:"548px",background:n.colors.GREY,textAlign:"center",zIndex:"1",display:"flex",justifyContent:"center",alignItems:"center",pointerEvents:"all",transform:"perspective(512px) rotateX(15deg) translateY(22px)",border:"2px solid "+n.colors.WHITE})),N=(n.style("div",e=>{var t,i;return{tapHighlightColor:"rgba(0, 0, 0, 0)",webkitTapHighlightColor:"rgba(0, 0, 0, 0)",padding:"16px",fontSize:"16px",minWidth:e.width?"unset":"48px",width:e.width,height:e.height,margin:"16px 4px",background:null!==(t=e.backgroundColor)&&void 0!==t?t:n.colors.DARKBLUE,color:null!==(i=e.color)&&void 0!==i?i:n.colors.WHITE,cursor:"pointer",borderRadius:"8px",border:"2px solid "+n.colors.GREY,textAlign:"center",fontFamily:"monospace",userSelect:"none",display:"text"===e.type?"flex":"",justifyContent:"center",touchAction:"manipulate",alignItems:"center","&:hover":{filter:"brightness(120%)"},"&:active":{filter:"brightness(80%)"}}}),e=>{let t=e.lastIndexOf("/");return""+(e.slice(0,t)+e.slice(t))}),D=e=>{let t=m.getCurrentPlayer().tokens,i=m.getCurrentPlayer().tickets,a=e.meta.tokensRequired,[n,d]=o.useState(0),g=h.getUiInterface().appState.arcadeGame.isGameRunning,y=h.getUiInterface().appState.arcadeGame.isGameReady,b=n===a,w=e.expanded,[C,S]=o.useState(!1),[T,x]=o.useState(0),E=()=>{S(!0),setTimeout(()=>{S(!1),b?(u.playerModifyTokens(m.getCurrentPlayer(),-n),d(0),l.beginCurrentArcadeGame(),w&&l.showControls()):(d(n+1),p.playSoundName("insert_token"),n+1===a&&setTimeout(()=>{p.playSoundName("ready_arcade_game")},250))},100)},A=()=>{S(!0),setTimeout(()=>{S(!1),d(0),p.playSoundName("eject_tokens")},100)};return f.useKeyboardEventListener(e=>{g||(v.isCancelKey(e.key)&&c.hideArcadeGame(),"ArrowLeft"===e.key?(p.playSoundName("menu_move"),x(0)):"ArrowRight"===e.key?(p.playSoundName("menu_move"),x(1)):v.isConfirmKey(e.key)&&(0===T?E():1===T&&A()))}),r.h("div",null,r.h(R,null,r.h(P,null,"TOKENS: ",t-n),r.h(P,null,"TICKETS: ",i),r.h(P,null,r.h(s.default,{active:C&&0===T,disabled:!y||g||t<=0,style:{width:"140px"},showCursor:0===T,type:b?s.ButtonType.PRIMARY:s.ButtonType.TOKEN,onClick:E},b?"PLAY":"Insert Token")),r.h(P,null,r.h(s.default,{active:C&&1===T,disabled:0===n,type:s.ButtonType.CANCEL,showCursor:1===T,onClick:A},"Eject")),r.h(P,null,"TOKENS INSERTED: ",n,"/",a)))},G=e=>{var t,i;let a=e.expanded,o=e.meta,n=e.iframeRef,l=e.isGameReady,s=e.isGameRunning,c=e.setHelpDialogOpen,m=e.helpDialogOpen,h=e.muted;return r.h(O,null,a?null:r.h(M,null,o.title),r.h("div",{style:{transition:"height 0.25s",height:a?"0px":"32px",width:"646px",position:"relative"}},a?null:r.h(L,null)),e.game?r.h(d.default,{id:"arcade-iframe",ref:n,src:(b.isDevelopmentMode()?N(e.game):e.game)+"?cabinet=true&mute="+h,width:a?"100%":"512px",height:a?"100%":"512px",expanded:a,loading:!l,borderImageUrl:null!==(i=null===(t=null==o?void 0:o.cabinet)||void 0===t?void 0:t.cabinetBorderImagePath)&&void 0!==i?i:"res/img/arcade-border-1.png"}):r.h("div",null,"No game was specified."),a&&!s?r.h("div",{style:{pointerEvents:"all",margin:"8px"}},r.h(D,{meta:o,expanded:a})):null,a?null:r.h(B,{id:"controls-arcade"},s?o.controls?r.h(o.controls,{setHelpDialogOpen:c}):r.h("div",null):r.h(D,{meta:o,expanded:a})),(null==o?void 0:o.help)&&m?r.h(o.help,{setHelpDialogOpen:c}):null)},F=e=>{let t=e.isGameReady,i=e.muted;return r.h(O,null,e.game?r.h(d.default,{id:"arcade-iframe",ref:e.iframeRef,src:(b.isDevelopmentMode()?N(e.game):e.game)+"?cabinet=true&mute="+i,width:"100%",height:"100%",expanded:!0,loading:!t,borderImageUrl:void 0}):r.h("div",null,"No game was specified."))};t.default=e=>{var t,i,a,d,u,p,b,E;let[R,P]=o.useState(!1),[O,M]=o.useState(m.isArcadeGameMuted()),[L,B]=o.useState(m.getArcadeGameVolume()),[N,D]=o.useState(!1),[W]=o.useState(0),U=null!==(t=g.ArcadeGamePathMeta[e.game])&&void 0!==t?t:g.ArcadeGamePathMeta.default,H=U.tokensRequired,j=h.getUiInterface().appState.arcadeGame.isGameRunning,K=h.getUiInterface().appState.arcadeGame.isGameReady,q=W===H,z=o.useRef();o.useEffect(()=>{j||l.hideControls()});let Y=async()=>{U.onGameCancelled?await U.onGameCancelled():(c.hideArcadeGame(),y.unpause())},V=()=>{let e=!R;P(e),e?(q||j?l.showControls():l.hideControls(),l.setScaleWindow()):(l.hideControls(),l.setScaleOriginal())},$=()=>{let e=!O;M(e),e?l.muteAudio():l.unmuteAudio(),m.setArcadeGameMuted(e),w.saveSettingsToLS(w.getCurrentSettings())};f.useKeyboardEventListener(e=>{v.isEscapeKey(e.key)?Y():v.isSelectKey(e.key)?V():v.isMuteKey(e.key)&&$()});let Q=n.colors.BGGREY;return(null===(i=null==U?void 0:U.cabinet)||void 0===i?void 0:i.backgroundColor)?Q=null===(a=null==U?void 0:U.cabinet)||void 0===a?void 0:a.backgroundColor:(null===(d=null==U?void 0:U.cabinet)||void 0===d?void 0:d.disabled)&&(Q="unset"),r.h(A,{background:Q,fixed:!(null===(u=null==U?void 0:U.cabinet)||void 0===u?void 0:u.disabled)},r.h(_,{fixed:!(null===(p=null==U?void 0:U.cabinet)||void 0===p?void 0:p.disabled)},r.h(I,null,r.h(k,null,r.h(s.default,{type:s.ButtonType.CANCEL,onClick:()=>{Y()},style:{marginRight:"1rem"}},"Back ",v.getEscapeKeyLabel()),(null===(b=U.cabinet)||void 0===b?void 0:b.disabled)?null:r.h(s.default,{type:s.ButtonType.PRIMARY,style:{marginRight:"1rem"},onClick:V},R?r.h(s.ButtonContentWithIcon,null,r.h(x.default,{color:n.colors.WHITE}),"Contract ",v.getSkipKeyLabel()):r.h(s.ButtonContentWithIcon,null,r.h(T.default,{color:n.colors.WHITE}),"Expand ",v.getSkipKeyLabel())),r.h(s.default,{type:s.ButtonType.PRIMARY,style:{marginRight:"1rem"},onClick:$},O?r.h(s.ButtonContentWithIcon,null,r.h(S.default,{color:n.colors.WHITE}),"Unmute ",v.getMuteKeyLabel()):r.h(s.ButtonContentWithIcon,null,r.h(C.default,{color:n.colors.WHITE}),"Mute ",v.getMuteKeyLabel()))))),(null===(E=null==U?void 0:U.cabinet)||void 0===E?void 0:E.disabled)?r.h(F,{expanded:R,meta:U,iframeRef:z,isGameReady:K,isGameRunning:j,setHelpDialogOpen:D,helpDialogOpen:N,muted:O,game:e.game}):r.h(G,{expanded:R,meta:U,iframeRef:z,isGameReady:K,isGameRunning:j,setHelpDialogOpen:D,helpDialogOpen:N,muted:O,game:e.game}))}})),define("view/components/ArcadeCabinet/index",["require","exports","view/components/ArcadeCabinet/ArcadeCabinet","view/components/ArcadeCabinet/ArcadeCabinetHelpers"],(function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getArcadeGamePathMeta=t.ArcadeGamePathMeta=t.ArcadeGamePath=t.default=void 0,Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a(i).default}}),Object.defineProperty(t,"ArcadeGamePath",{enumerable:!0,get:function(){return r.ArcadeGamePath}}),Object.defineProperty(t,"ArcadeGamePathMeta",{enumerable:!0,get:function(){return r.ArcadeGamePathMeta}}),Object.defineProperty(t,"getArcadeGamePathMeta",{enumerable:!0,get:function(){return r.getArcadeGamePathMeta}})})),define("model/store",["require","exports"],(function(e,t){"use strict";var i,a,r;Object.defineProperty(t,"__esModule",{value:!0}),t.AppStateInitial=t.ModalSection=t.CutsceneSpeaker=t.AppSection=void 0,function(e){e.BattleUI="battleMenu",e.BattleVictory="battleVictory",e.BattleDefeated="battleDefeated",e.Cutscene="cutscene",e.Debug="debug",e.ArcadeCabinet="arcadeCabinet",e.Choices="choices",e.Settings="settings",e.Modal="modal",e.Save="save",e.Menu="menu",e.LevelUp="level-up",e.Quest="quest",e.Store="store",e.InfoStats="info-stats"}(i=t.AppSection||(t.AppSection={})),function(e){e.Left="left",e.Left2="left2",e.Right="right",e.Right2="right2",e.Center="center",e.None="none"}(a=t.CutsceneSpeaker||(t.CutsceneSpeaker={})),function(e){e.TUTORIAL_ATTACK="TUTORIAL_ATTACK",e.TUTORIAL_PAUSING="TUTORIAL_PAUSING",e.TUTORIAL_ATTACK_AMOUNTS="TUTORIAL_ATTACK_AMOUNTS",e.TUTORIAL_STAGGER="TUTORIAL_STAGGER",e.TUTORIAL_BACK_ROW="TUTORIAL_BACK_ROW",e.TUTORIAL_MAGIC="TUTORIAL_MAGIC",e.TUTORIAL_ARMOR="TUTORIAL_ARMOR",e.ITEM="ITEM",e.INFO="INFO",e.CONFIRM="CONFIRM",e.SELECT_PARTY_MEMBER="SELECT_PARTY_MEMBER",e.SELECT_CHARACTER_FOLLOWER="SELECT_CHARACTER_FOLLOWER"}(r=t.ModalSection||(t.ModalSection={})),t.AppStateInitial={sections:[i.Debug],room:{particles:[]},overworld:{characterText:"",prevCharacterText:"",interfaceDisabled:!1},cutscene:{id:"",showBars:!0,text:"",speaker:a.None,speakerName:"",actorName:"",visible:!0,portraitLeft:"",portraitLeftEmotion:"",portraitLeft2:"",portraitLeft2Emotion:"",portraitRight:"",portraitRightEmotion:"",portraitRight2:"",portraitRight2Emotion:"",portraitCenter:"",portraitCenterEmotion:"",actors:[],portraitActors:[]},battle:{characterIndexSelected:0,targetIndexSelected:0,disabled:!1,paused:!1,effect:{active:!1,bChList:[],effectAnimName:""}},arcadeGame:{path:"",isGameRunning:!1,isGameReady:!1},choices:{choiceTexts:[],keyHandlerInternal:()=>{}},modal:{section:r.TUTORIAL_ATTACK,onClose:()=>{},danger:!1,filter:()=>!0},settings:{onClose:()=>{}},save:{onClose:()=>{}},menu:{onClose:()=>{}},levelUp:{onClose:()=>{}},quest:{onClose:()=>{},questName:""},store:{onClose:()=>{},storeName:""},notifications:[],infoStats:{onClose:()=>{}}}})),define("view/elements/Cursor",["require","exports","preact","view/style","view/icons/Cursor"],(function(e,t,i,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=a(o);let n=r.keyframes({"0%":{transform:"translateX(-5px)"},"20%":{transform:"translateX(0px)"},"100%":{transform:"translateX(-5px)"}}),l=r.style("div",e=>({pointerEvents:"none",color:r.colors.WHITE,position:"absolute",top:-4+e.offsetY+"px",left:-32+e.offsetX+"px",animation:n+" 500ms linear infinite"}));t.default=e=>{var t,a,n,s;return i.h(l,{offsetX:null!==(t=e.offsetX)&&void 0!==t?t:0,offsetY:null!==(a=e.offsetY)&&void 0!==a?a:0,style:{visibility:null!==(n=e.visibility)&&void 0!==n?n:"unset"}},i.h(o.default,{color:r.colors.BLUE,angle:null!==(s=e.angle)&&void 0!==s?s:75}))}})),define("view/elements/VerticalMenu",["require","exports","preact","preact/hooks","view/style","view/elements/Cursor","view/icons/Close","model/sound","controller/events"],(function(e,t,i,r,o,n,l,s,d){"use strict";var c;Object.defineProperty(t,"__esModule",{value:!0}),t.MenuLineHeight=void 0,n=a(n),l=a(l),function(e){e[e.SMALL=0]="SMALL",e[e.MEDIUM=1]="MEDIUM",e[e.LARGE=2]="LARGE"}(c=t.MenuLineHeight||(t.MenuLineHeight={}));let m={backgroundColor:"linear-gradient(0deg, rgba(0,0,0,1) 0%, rgba(45,45,45,1) 100%);",borderColor:o.colors.WHITE,lineHeight:c.MEDIUM,startingIndex:0},h=e=>{switch(e){case c.SMALL:return{fontSize:"12px",padding:"0.25rem",minHeight:"12px"};case c.MEDIUM:return{fontSize:"16px",padding:"0.5rem",minHeight:"16px"};case c.LARGE:return{fontSize:"24px",padding:"1rem",minHeight:"24px"}}},u=o.style("div",e=>({background:e.transparentBg?"rgba(0, 0, 0, 0)":o.colors.BLACK,position:"relative",width:e.width||"100%",height:e.height||"unset",border:"4px double "+e.borderColor,boxSizing:"border-box",transition:e.open?"transform 0.15s ease-out":"unset",transform:e.open?"scale(1.0)":"scale(0.0)"})),p=o.style("div",e=>({position:"relative",borderBottom:"2px solid "+e.borderColor,borderLeft:e.useHover?"2px solid "+o.colors.BLACK:"unset",borderRight:e.useHover?"2px solid "+o.colors.BLACK:"unset","&:hover":e.isInactive?"unset":{borderColor:e.useHover?o.colors.YELLOW:e.borderColor}})),g=o.style("div",e=>Object.assign(Object.assign({textAlign:"center"},h(e.lineHeight)),{color:"white",background:e.backgroundColor,cursor:e.clickDisabled?"default":"pointer",filter:e.active?"brightness(80%)":"",transform:e.active?"translateY(2px)":""})),y=o.style("div",e=>({textAlign:"center",position:"relative",background:o.colors.DARKBLUE,alignItems:"baseline",textTransform:"uppercase"})),f=o.style("div",e=>Object.assign(Object.assign({},h(e.lineHeight)),{width:"1rem",cursor:"pointer",background:e.backgroundColor,borderRight:"2px solid "+o.colors.WHITE,marginTop:"0.15rem",position:"absolute","&:hover":{filter:"brightness(120%)"},"&:active":{filter:"brightness(80%)"}})),v=o.style("div",e=>Object.assign({},h(e.lineHeight))),b=e=>{var t;let a=null!==(t=e.lineHeight)&&void 0!==t?t:c.MEDIUM;return i.h(y,{title:e.title},e.onClick&&!e.hideCloseBox?i.h(f,{backgroundColor:e.backgroundColor,onClick:e.onClick,lineHeight:a},i.h(l.default,{color:o.colors.RED})):null,i.h(v,{lineHeight:a},e.title||""))},w=function(e){var t,a,l,m,h,y;let f=r.useRef(),v=null!==(t=e.itemHeight)&&void 0!==t?t:37,[{cursorIndex:w,active:C},S]=r.useReducer(({cursorIndex:t,active:i},a)=>{var r;let o=t,n=i;if("Increment"===a.type){if(o=(o+1)%e.items.length,f.current&&e.maxHeight){let{height:e}=f.current.getBoundingClientRect();f.current.scrollTop=Math.max(0,o*v-e+2*v)}(isNaN(o)||o<0)&&(o=0)}else if("Decrement"===a.type){if(o=(o-1+e.items.length)%e.items.length,f.current&&e.maxHeight){let{height:e}=f.current.getBoundingClientRect();f.current.scrollTop=Math.max(0,o*v-e+3*v)}(isNaN(o)||o<0)&&(o=0)}else if("Set"===a.type)i||(o=null!==(r=a.payload)&&void 0!==r?r:0);else if("Select"===a.type)i||(n=!0,setTimeout(()=>{S({type:"SelectInactive"})},100));else if("SelectInactive"===a.type){let i=e.items[t];i&&(e.onItemClick(i.value,t),n=!1)}else if("ResetCursor"===a.type){o=0,n=!1;let t=e.items[o];return t&&e.onItemHover&&e.onItemHover(t.value,o),{cursorIndex:o,active:n}}if(t!==o){let i=e.items[o];i&&e.onItemHover&&(e.onItemHover(i.value,o),e.onItemHoverSound&&t>-1&&s.playSoundName(e.onItemHoverSound))}return{cursorIndex:o,active:n}},{cursorIndex:null!==(a=e.startingIndex)&&void 0!==a?a:0,active:!1});r.useEffect(()=>{var t,i;let a=t=>{if(e.open&&!e.isInactive&&!e.isCursorSelectInactive)if(d.isDownKey(t.code))s.playSoundName("menu_move"),S({type:"Increment"});else if(d.isUpKey(t.code))s.playSoundName("menu_move"),S({type:"Decrement"});else if(!t.repeat&&d.isConfirmKey(t.code)||e.useSpaceBarConfirm&&" "===t.key){if(t.repeat)return;S({type:"Select"}),e.onItemClickSound&&s.playSoundName(e.onItemClickSound)}else if(d.isCancelKey(t.code)){if(t.repeat)return;e.onClose&&(e.onCloseSound&&s.playSoundName(e.onCloseSound),e.onClose())}else if(d.isAuxKey(t.code)){if(t.repeat)return;e.onAuxClick&&(e.onAuxClickSound&&s.playSoundName(e.onAuxClickSound),e.onAuxClick(e.items[w].value))}};return window.addEventListener("keydown",a),null!==(i=w>=(null===(t=e.items)||void 0===t?void 0:t.length))&&void 0!==i&&i&&S({type:"Set",payload:0}),()=>{window.removeEventListener("keydown",a)}},[e.open,e.isInactive,e.isCursorSelectInactive,e.onAuxClick]),r.useEffect(()=>{S({type:"ResetCursor"})},[e.resetCursor]),r.useEffect(()=>{e.resetIfTooLong&&w>=e.items.length&&S({type:"ResetCursor"})},[e.resetIfTooLong,e.items,w]);let T=e.lineHeight||c.MEDIUM;return i.h(u,{id:"vertical-menu-"+e.title,transparentBg:!!e.transparentBg,backgroundColor:null!==(l=e.backgroundColor)&&void 0!==l?l:o.colors.BLACK,borderColor:null!==(m=e.borderColor)&&void 0!==m?m:o.colors.WHITE,width:e.width,height:e.height,open:e.open,style:e.style},i.h(p,{key:"title",borderColor:e.hideTitle?"transparent":null!==(h=e.borderColor)&&void 0!==h?h:o.colors.WHITE,useHover:!1,isInactive:!0},e.hideTitle?null:i.h(b,{backgroundColor:e.backgroundColor||o.colors.BLACK,onClick:e.onClose,hideCloseBox:e.hideCloseBox,lineHeight:e.lineHeight,title:e.title})),i.h("div",{ref:f,style:{width:"100%",height:null!==(y=e.maxHeight)&&void 0!==y?y:"unset",overflowY:e.maxHeight?"auto":"unset"}},e.items.map((t,a)=>{var r;return i.h(p,{key:a,borderColor:null!==(r=e.borderColor)&&void 0!==r?r:o.colors.WHITE,useHover:!0,isInactive:!!e.isInactive},i.h(g,{key:a,backgroundColor:e.backgroundColor,highlighted:w===a,lineHeight:T,active:C&&w===a&&!e.isInactive&&!e.isCursorSelectInactive,clickDisabled:!!e.isInactive,selectDisabled:!(!e.isInactive&&!e.isCursorSelectInactive),onClick:()=>{e.isInactive||(S({type:"Set",payload:a}),e.onItemClickSound&&s.playSoundName(e.onItemClickSound),setTimeout(()=>{S({type:"Select"})}))},onMouseOver:t=>{t.preventDefault(),e.isInactive||e.isCursorSelectInactive||S({type:"Set",payload:a})}},"function"==typeof t.label?t.label({cursorIndex:w,i:a}):t.label),w===a?i.h(n.default,{offsetX:e.maxHeight?40:0,offsetY:e.maxHeight?4:0,angle:e.maxHeight?62:75,visibility:e.isInactive||e.isCursorSelectInactive?"hidden":"unset"}):null)})))};w.defaultProps=m,t.default=w})),define("view/components/BattleSelectMenu",["require","exports","preact","view/elements/VerticalMenu","view/style","model/player","model/battle","model/character","controller/battle-management","controller/battle-actions","controller/ui-actions","model/store"],(function(e,t,i,r,o,n,l,s,d,c,m,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=a(r);let u=o.style("div",()=>({display:"flex",justifyContent:"center",alignItems:"center",height:"100%"})),p=o.style("div",()=>({display:"flex",justifyContent:"center",alignItems:"center"}));t.default=e=>i.h(u,null,i.h(r.default,{title:"SELECT BATTLE",width:"256px",open:!0,items:e.battles.map(({template:e,label:t})=>({label:i.h(p,null,i.h("span",null,t)),value:e})),onItemClick:e=>{console.log("clicked",e),(e=>{let t=n.playerCreate({name:"Ada",spriteBase:"ada",stats:l.battleStatsCreate(),facing:s.Facing.RIGHT,animationState:s.AnimationState.BATTLE_IDLE,skills:[c.BattleActions.Swing,c.BattleActions.Defend]}),i=s.characterCreateFromTemplate({name:"Conscience",spriteBase:"conscience",stats:l.battleStatsCreate(),facing:s.Facing.RIGHT,animationState:s.AnimationState.BATTLE_IDLE,skills:[c.BattleActions.Swing,c.BattleActions.Defend]});t.party.push(i),n.playerSetBattlePosition(t,i,l.BattlePosition.BACK),d.initiateBattle(t,e),m.showSection(h.AppSection.BattleUI,!0)})(e)}}))})),define("view/components/TopBar",["require","exports","preact","view/style","view/elements/Button","model/generics","controller/ui-actions","controller/events","view/ui","model/sound","view/icons/Gear","view/icons/Menu","view/icons/Talk"],(function(e,t,r,o,n,l,s,d,c,m,h,u,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TopBarButtons=void 0,n=i(n),h=a(h),u=a(u),p=a(p);let g=o.style("div",{position:"absolute",top:"4px",left:"4px",width:"100%",display:"flex",pointerEvents:"none",zIndex:1,"& > div":{marginRight:"4px"}});var y;!function(e){e.SETTINGS="settings",e.DEBUG="debug",e.MENU="menu",e.BATTLE_MENU="battle-menu",e.ON_SCREEN_CONTROLS="on-screen-controls",e.SKIP_CUTSCENE="skip"}(y=t.TopBarButtons||(t.TopBarButtons={})),t.default=e=>{let t={};return e.disabled||(t.pointerEvents="all"),r.h(r.Fragment,null,r.h(g,null,e.buttons.includes(y.MENU)?r.h(n.default,{disabled:e.disabled,style:t,type:n.ButtonType.PRIMARY,onClick:t=>{t.stopPropagation(),m.playSoundName("menu_select"),e.onMenuClose&&e.onMenuClick&&(s.showMenu(e.onMenuClose),e.onMenuClick())}},r.h(n.ButtonContentWithIcon,null,r.h(u.default,{color:o.colors.WHITE}),"Menu ",d.getCancelKeyLabel())):null,e.buttons.includes(y.BATTLE_MENU)?r.h(n.default,{disabled:e.disabled,style:t,type:n.ButtonType.PRIMARY,onClick:e.onMenuClick},r.h(n.ButtonContentWithIcon,null,r.h(u.default,{color:o.colors.WHITE}),"Menu ",d.getPauseKeyLabel())):null,e.buttons.includes(y.SETTINGS)?r.h(n.default,{disabled:e.disabled,style:t,type:n.ButtonType.PRIMARY,onClick:t=>{t.stopPropagation(),m.playSoundName("menu_select"),e.onSettingsClose&&e.onSettingsClick&&(s.showSettings(e.onSettingsClose),e.onSettingsClick())}},r.h(n.ButtonContentWithIcon,null,r.h(h.default,{color:o.colors.WHITE}),"Settings ",d.getAuxKeyLabel())):null,e.buttons.includes(y.SKIP_CUTSCENE)?r.h(n.default,{disabled:e.disabled||!e.onSkipClick,style:t,type:n.ButtonType.SECONDARY,onClick:()=>{e.onSkipClick&&e.onSkipClick()}},r.h(n.ButtonContentWithIcon,null,r.h(p.default,{color:o.colors.WHITE}),"Skip (Backspace)")):null,e.buttons.includes(y.DEBUG)?r.h(n.default,{disabled:e.disabled,style:t,type:n.ButtonType.SECONDARY,onClick:e=>{e.stopPropagation(),m.playSoundName("menu_select"),l.getTriggersVisible()?(l.hideTriggers(),l.hideMarkers()):(l.showTriggers(),l.showMarkers())}},"Toggle Debug (d)"):null,e.buttons.includes(y.ON_SCREEN_CONTROLS)?r.h(n.default,{disabled:e.disabled,style:t,type:n.ButtonType.SECONDARY,onClick:e=>{e.stopPropagation(),m.playSoundName("menu_select"),l.shouldShowOnScreenControls()?l.setShowOnScreenControls(!1):l.setShowOnScreenControls(!0),null==c.uiInterface||c.uiInterface.render()}},"Toggle Controls"):null))}})),define("view/components/OverworldSection",["require","exports","preact","view/style","controller/loop","model/generics","controller/ui-actions","model/store","controller/events","view/ui","view/components/TopBar","utils","model/character","view/icons/index","picostyle"],(function(e,t,a,r,o,n,l,s,d,c,m,h,u,p,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buttonHandlers=void 0,m=i(m);let y=r.style("div",{position:"absolute",top:"0px",width:"100%",display:"flex","& > div":{marginRight:"4px"}}),f=r.style("div",{position:"absolute",top:"0px",right:"0px",display:"flex",flexDirection:"column","& > div":{marginBottom:"4px"}}),v=r.style("div",e=>({background:"rgba(0, 0, 0, 0.3)",padding:"4px",fontSize:"24px",color:r.colors.WHITE,width:"100%",textAlign:"center",position:"absolute",top:"256px",left:"0px",opacity:e.visible?"1":"0",transform:e.visible?"scaleY(1)":"scaleY(0)",transition:"opacity 100ms, transform 100ms"})),b=r.style("div",()=>({position:"absolute",display:"flex",justifyContent:"center",alignItems:"center",right:"0px",bottom:"0px",margin:"4px",pointerEvents:"all"})),w=r.style("div",e=>({userSelect:"none",color:r.colors.WHITE,background:"rgba(0, 0, 0, 0.5)",fontSize:"24px",borderRadius:"100px",padding:"24px",border:"2px solid rgba(0, 0, 0, 0.25)",margin:"0px "+e.margin,cursor:"pointer",transform:e.rotated?"rotate(-45deg)":"unset","&:hover":{filter:"brightness(120%)",background:"rgba(0, 0, 0, 0.7)"},"&:active":{filter:"brightness(80%)",background:"rgba(0, 0, 0, 0.35)"}})),C=r.style("div",()=>({position:"absolute",display:"flex",justifyContent:"center",alignItems:"center",flexWrap:"wrap",left:"24px",bottom:"24px",margin:"4px",pointerEvents:"all",transform:"rotate(45deg)",width:"166px"})),S=r.style("div",e=>({position:"absolute",right:"0px",top:"0px",fontSize:"24px",padding:"16px",background:h.hexToRGBA(r.colors.DARKBLUE,.75),margin:"8px",maxWidth:"35%",display:"flex",justifyContent:"center",alignItems:"center",border:"2px solid "+r.colors.WHITE,borderBottomColor:r.colors.BLUE,transition:e.visible?"transform 100ms ease-out":"unset",transform:e.visible?"translateX(0px)":"translateX(500px)"})),T=g.keyframes({"0%":{opacity:"1"},"50%":{opacity:"0"},"100%":{opacity:"1"}}),x=r.style("div",e=>({animation:e.blink?T+" 1000ms linear infinite":"unset",width:"64px"}));t.buttonHandlers=e=>({onMouseDown:t=>{e(t,!0)},onMouseUp:t=>{e(t,!1)},onTouchStart:t=>{e(t,!0)},onTouchEnd:t=>{e(t,!1)}});let E=(e,t)=>{var i;let o=null!==(i={[u.ItemStatus.CLOAKED]:{iconName:"cloakConsume",color:r.colors.BLUE},[u.ItemStatus.STAT]:{iconName:"star",color:r.colors.BLUE}}[e.status])&&void 0!==i?i:{iconName:"help",color:r.colors.WHITE},n=p.getIcon(o.iconName);return console.log("RENDER ITEM STATUS",e.state,e.status),a.h(x,{id:e.status+t+e.state,key:e.status+t+e.state,blink:"expiring"===e.state},a.h(n,{color:o.color}))};t.default=()=>{var e,i;let r=null===(e=c.getUiInterface())||void 0===e?void 0:e.appState.overworld,h=null===(i=c.getUiInterface())||void 0===i?void 0:i.appState.notifications;if(!r)return a.h("div",null);let u=e=>(t,i)=>{t.preventDefault(),t.stopImmediatePropagation(),i?n.setKeyDown(e):n.setKeyUp(e);let a=d.getCurrentKeyHandler();a&&a({key:e})},p=n.getCurrentPlayer();return a.h(a.Fragment,null,a.h(y,null,r.interfaceDisabled?null:a.h(m.default,{buttons:[m.TopBarButtons.MENU,m.TopBarButtons.SETTINGS,n.isDebugModeEnabled()?m.TopBarButtons.DEBUG:void 0,m.TopBarButtons.ON_SCREEN_CONTROLS],onMenuClick:()=>{o.pause()},onMenuClose:()=>{o.unpause(),l.showSection(s.AppSection.Debug,!0)},onSettingsClick:()=>{o.pause()},onSettingsClose:()=>{o.unpause(),l.showSection(s.AppSection.Debug,!0)}}),a.h(v,{visible:""!==r.characterText},r.characterText||r.prevCharacterText),a.h(S,{visible:h.length>0},h.map((e,t)=>a.h("p",{key:t},e.text)))),a.h(f,null,null==p?void 0:p.leader.itemStatuses.map(E)),n.shouldShowOnScreenControls()&&!r.interfaceDisabled?a.h(a.Fragment,null,a.h(b,null,a.h(w,Object.assign({margin:"4px"},t.buttonHandlers(u(d.getCancelKey()))),"Menu"),a.h(w,Object.assign({margin:"4px"},t.buttonHandlers(u(d.getConfirmKey()))),"Action")),a.h(C,null,a.h(w,Object.assign({margin:"1px",rotated:!0},t.buttonHandlers(u("ArrowUp"))),"Up"),a.h(w,Object.assign({margin:"1px",rotated:!0},t.buttonHandlers(u("ArrowRight"))),"Rt"),a.h(w,Object.assign({margin:"1px",rotated:!0},t.buttonHandlers(u("ArrowLeft"))),"Lf"),a.h(w,Object.assign({margin:"1px",rotated:!0},t.buttonHandlers(u("ArrowDown"))),"Dn"))):null)}})),define("view/components/Debug",["require","exports","preact","view/style","view/components/OverworldSection"],(function(e,t,i,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=a(o),r.style("div",()=>({position:"absolute",left:"0px",top:"0px"})),t.default=()=>i.h("div",{id:"debug"},i.h(o.default,null))})),define("view/elements/StaticAnimDiv",["require","exports","preact","preact/hooks","view/draw","model/animation"],(function(e,t,i,a,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>{let t=a.useRef(null),[n,l]=a.useState(o.createAnimation(e.animName)),s=e.width,d=e.height,c=e.scale,m=e.animName;return a.useEffect(()=>{let e=t.current;if(n.name!==m)l(o.createAnimation(m));else if(e){let[t,i]=n.getSpriteSize(0),a=null!=c?c:1;e.width=(null!=s?s:t)*a,e.height=(null!=d?d:i)*a;let o=e.getContext("2d");o.imageSmoothingEnabled=!1,o.clearRect(0,0,e.width,e.height),r.drawAnimation(n,0,0,a,o)}},[c,s,d,m,n]),i.h("div",null,i.h("canvas",{style:e.style,ref:t}))}})),define("view/elements/CharacterNameLabel",["require","exports","view/style"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let a=i.style("div",()=>({fontSize:"18px",color:i.colors.BLACK,background:i.colors.WHITE,borderTopLeftRadius:"8px",borderTopRightRadius:"8px",textTransform:"uppercase",padding:"8px",marginBottom:"2px"}));t.default=a})),define("view/elements/ProgressBar",["require","exports","preact","view/hooks","view/style"],(function(e,t,i,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProgressBarWithRender=void 0;let o=r.style("div",e=>({background:e.backgroundColor,position:"relative",height:e.height+"px",width:"100%"})),n=r.style("div",e=>({background:e.backgroundColor,position:"absolute",left:"0",top:"0",width:"100%",height:"100%",transformOrigin:"top left"})),l=r.style("div",{textAlign:"center",fontSize:"16px",position:"absolute",left:"0",top:"0",width:"100%",color:"white"}),s=e=>{var t;return i.h(o,{backgroundColor:e.backgroundColor,height:e.height},i.h(n,{backgroundColor:e.color,style:{transform:`scaleX(${null!==(t=e.pct)&&void 0!==t?t:0})`,transition:e.transitionDuration?`transform ${e.transitionDuration}ms ease-out`:"unset"}}),i.h(l,null,e.label))};t.ProgressBarWithRender=e=>(a.useRenderLoop(e.renderKey),i.h(s,Object.assign({},e,{pct:e.renderFunc()}))),t.default=s})),define("view/elements/MenuBox",["require","exports","preact","view/style","view/elements/Button","view/hooks","controller/events","model/sound","preact/hooks","view/ui","model/store"],(function(e,t,a,r,o,n,l,s,d,c,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=i(o);let h=r.style("div",e=>({position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",zIndex:"2",boxShadow:"0px 0px 12px 8px rgba(0, 0, 0, 0.75)",background:e.dark?"rgba(0, 0, 0, 0.5)":"unset"})),u=r.style("div",e=>{var t;return{position:"relative",margin:"4px",padding:"4px",minWidth:"25%",maxWidth:null!==(t=e.maxWidth)&&void 0!==t?t:"90%",maxHeight:"1024px",width:e.maxWidth,border:"2px solid "+r.colors.BLUE,background:r.colors.BGGREY,color:r.colors.WHITE,transform:"scale(0)",transition:"opacity 100ms, transform 100ms",pointerEvents:"all"}}),p=r.style("div",()=>({position:"absolute",left:"0",top:"0",width:"100%",height:"100%",opacity:"0.04",backgroundImage:"url(res/bg/flowers_menu_bg.png)",zIndex:0,pointerEvents:"none"})),g=r.style("div",()=>({color:r.colors.ORANGE,background:`linear-gradient(90deg, ${r.colors.DARKBLUE} 0%, rgba(0,0,0,0) 100%)`,margin:"8px",marginBottom:"-8px",padding:"8px",fontSize:"32px",textTransform:"uppercase",borderBottom:"2px solid "+r.colors.BLUE,zIndex:2})),y=r.style("div",()=>({margin:"8px",fontSize:"16px",display:"flex",justifyContent:"center",zIndex:2})),f=r.style("div",()=>({borderTop:"2px solid "+r.colors.BLUE,display:"flex",justifyContent:"flex-end",padding:"8px",margin:"8px",marginTop:"16px",zIndex:2,background:`linear-gradient(270deg, ${r.colors.DARKBLUE} 0%, rgba(0,0,0,0) 100%)`}));t.default=e=>{var t;let[i,r]=d.useState(!1);n.useKeyboardEventListener(t=>{if(l.isCancelKey(t.key)&&!e.hideClose&&!e.disableKeyboardShortcut){if(!e.isModal&&c.getUiInterface().appState.sections.includes(m.AppSection.Modal))return;r(!0),setTimeout(()=>{e.disableCloseSound||s.playSoundName("menu_choice_close"),r(!1),e.onClose()},100)}},[]);let v="menu-wrapper-"+e.title,b="menu-container-"+e.title;return d.useEffect(()=>{let e=document.getElementById(b);e&&(e.style.transform="scale(1)")}),a.h(h,{id:v,dark:e.dark},a.h(u,{id:b,maxWidth:e.maxWidth},a.h(p,null),e.hideTitle?null:a.h(g,null,e.title),a.h(y,null,e.children),e.hideClose?null:a.h(f,null,a.h(o.default,{type:o.ButtonType.PRIMARY,style:{marginRight:"1rem"},active:i,onClick:()=>{e.disableCloseSound||s.playSoundName("menu_choice_close"),s.playSoundName("menu_select"),e.onClose()}},null!==(t=e.closeButtonLabel)&&void 0!==t?t:"Close"))))}})),define("view/elements/Card",["require","exports","preact","view/style"],(function(e,t,i,a){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.sizes=t.CardSize=void 0,function(e){e.SMALL="small",e.MEDIUM="medium",e.LARGE="large",e.XLARGE="xlarge",e.ADAPTIVE="adaptive"}(r=t.CardSize||(t.CardSize={})),t.sizes={[r.SMALL]:{width:"256px",height:"256px"},[r.MEDIUM]:{width:"352px",height:"352px"},[r.LARGE]:{width:"512px",height:"512px"},[r.XLARGE]:{width:"864px"},[r.ADAPTIVE]:{width:"100%"}};let o=a.style("div",e=>Object.assign({background:a.colors.DARKGREY,border:"2px solid "+a.colors.WHITE,borderBottom:"2px solid "+a.colors.GREY},t.sizes[e.size]));t.default=e=>i.h(o,{size:e.size,style:e.style,id:e.id},e.children)})),define("view/components/SaveGameListItem",["require","exports","preact","view/style","view/elements/StaticAnimDiv","view/elements/Button","controller/events","utils","db/characters/index"],(function(e,t,r,o,n,l,s,d,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=a(n),l=i(l);let m=o.style("div",e=>{var t,i;return{display:"flex",justifyContent:"space-between",alignItems:"center",height:"64px",background:null!==(t=e.color)&&void 0!==t?t:"unset",padding:null!==(i=e.padding)&&void 0!==i?i:"unset",boxSizing:"border-box",border:e.color?"2px solid "+o.colors.DARKGREEN:"unset"}}),h=o.style("div",()=>({display:"flex",justifyContent:"flex-start",position:"relative",alignItems:"center","& > div":{marginRight:"4px"}})),u=o.style("div",()=>({background:o.colors.DARKGREY,display:"flex",justifyContent:"center",alignItems:"center",borderRight:"2px solid "+o.colors.BLACK,width:"64",height:"64",cursor:"pointer",overflow:"hidden"}));t.default=e=>{let t=e.save;return r.h(m,null,r.h(h,null,r.h("div",{style:{display:"flex",width:"200px",marginRight:"18px"}},t.player.partyStorage.map(e=>{let t=c.get(e.name);return r.h(u,null,r.h(n.default,{style:{width:"128"},animName:(null==t?void 0:t.spriteBase)+"_portrait"}))})),"Time: ",d.msToTimeLabel(t.durationPlayed)),e.handleDeleteClick?r.h(l.default,{style:{minWidth:"unset",fontSize:"12px"},type:l.ButtonType.CANCEL,onClick:t=>{t.stopPropagation(),t.preventDefault(),e.handleDeleteClick&&e.handleDeleteClick(e.i)}},"Delete ",s.getAuxKeyLabel()):null,e.handleDeleteClick?null:r.h("div",null,"Tokens: ",t.player.tokens," "))}})),define("view/components/MenuSection/MenuLoad",["require","exports","preact","view/style","controller/ui-actions","model/store","view/elements/Card","controller/events","preact/hooks","model/sound","controller/save-management","view/elements/VerticalMenu","view/hooks","view/components/SaveGameListItem","controller/scene/scene-commands"],(function(e,t,r,o,n,l,s,d,c,m,h,u,p,g,y){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s=i(s),u=a(u),g=a(g),o.style("div",{position:"absolute",top:"0px",width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",background:"rgba(0, 0, 0, 0.5)"});let f=o.style("div",{display:"flex",justifyContent:"space-between",flexDirection:"column",alignItems:"center",height:"100%"});o.style("div",{display:"flex",justifyContent:"center",padding:"8px"}),t.default=e=>{let[t]=c.useState(h.loadSaveListFromLS()),[i,a]=c.useState(!1),o=()=>{e.onClose()};return p.useKeyboardEventListener(e=>{d.isCancelKey(e.key)&&o()}),r.h("div",null,r.h("p",{style:{textAlign:"center"}},"Press ",d.getConfirmKeyLabel()," to load a saved game."),r.h(s.default,{size:s.CardSize.LARGE},r.h(f,{id:"save-spacer"},r.h(u.default,{title:"Saved Games",width:"100%",open:!0,isInactive:i,items:t.map((e,t)=>({label:r.h(g.default,{save:e,i:t}),value:t})),onItemClickSound:"menu_select",onItemClick:i=>{e.onSaveClicked?e.onSaveClicked(t[i]):(n.hideSection(l.AppSection.Menu),o(),m.playSoundName("menu_choice_open"),y.fadeOut(500,!0),setTimeout(()=>{h.loadSavedGame(t[i]),y.fadeIn(500,!0)},500))}}))))}})),define("view/components/BattleConclusion",["require","exports","preact","preact/hooks","view/style","model/generics","model/battle","view/elements/VerticalMenu","view/elements/StaticAnimDiv","view/elements/CharacterNameLabel","view/elements/ProgressBar","model/character","model/sound","controller/scene/scene-commands","model/player","view/elements/MenuBox","view/elements/Card","controller/save-management","view/components/MenuSection/MenuLoad","controller/events"],(function(e,t,i,r,o,n,l,s,d,c,m,h,u,p,g,y,f,v,b,w){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s=a(s),d=a(d),c=a(c),m=a(m),y=a(y),b=a(b);let C=o.style("div",()=>({display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",height:"100%",fontSize:"4rem",color:o.colors.WHITE,transition:"background-color 2000ms",transform:"scale(1)",backgroundColor:"rgba(0, 0, 0, 0.0)"})),S=o.style("div",()=>({fontSize:"16px",width:"288px",boxSizing:"border-box",padding:"8px",margin:"8px",border:"2px solid "+o.colors.WHITE,background:"rgba(0, 0, 0, 0.5)"})),T=o.style("div",()=>({width:"288px",boxSizing:"border-box",margin:"8px",border:"2px solid "+o.colors.WHITE,background:"rgba(0, 0, 0, 0.5)"})),x=o.style("div",()=>({display:"flex",alignItems:"center",justifyContent:"center",margin:"4px"})),E=o.keyframes({"0%":{transform:"translateX(18px) translateY(-5px)"},"50%":{transform:"translateX(18px) translateY(5px)"},"100%":{transform:"translateX(18px) translateY(-5px)"}}),A=o.keyframes({"0%":{transform:"translateX(20px) translateY(-4px)"},"50%":{transform:"translateX(20px) translateY(6px)"},"100%":{transform:"translateX(20px) translateY(-4px)"}}),_=o.style("div",e=>({fontSize:"24px",width:"2px",whiteSpace:"pre",marginLeft:e.offset?"unset":"16px",animation:`3s ${e.offset?E:A} linear infinite`,color:e.offset?o.colors.WHITE:o.colors.BLACK}));t.default=e=>{let[t,a]=r.useState(!1),[E,A]=r.useState(!1),[I,k]=r.useState(!1),R=n.getCurrentPlayer(),P=R.party,O={ind:0,working:!1};P.forEach(e=>{O[e.name]={name:e.name,levelDiff:0,initialLevel:h.characterGetLevel(e),exp:e.experience,pct:h.characterGetExperiencePct(e)}});let[M,L]=r.useState(O),[B]=r.useState(l.battleGetRewards(n.getCurrentBattle()));return r.useEffect(()=>{if(t){let e=document.getElementById("battle-conclusion-root");e&&(e.style.transform="scale(0)")}},[t]),r.useEffect(()=>{let t=document.getElementById("battle-conclusion-root");t&&!e.isVictory&&(t.style["background-color"]="rgba(0, 0, 0, 0.8)")},[e.isVictory]),i.h(C,{id:"battle-conclusion-root"},e.isVictory?i.h(i.Fragment,null,i.h("span",null,"VICTORY!"),i.h(S,null,B.tokens?i.h("div",null,B.tokens," Token",B.tokens>1?"s":""):null,B.items.map((e,t)=>i.h("div",{key:t},e.label))),i.h(T,null,P.map(e=>{let t=M[e.name];return i.h(x,{key:e.name},i.h("div",{style:{overflow:"hidden",display:"flex",alignItems:"center",height:"64px"}},i.h(d.default,{style:{width:"128"},animName:e.name.toLowerCase()+"_portrait_f"})),i.h("div",null,i.h(c.default,null,e.name),i.h("div",{style:{width:"128px"}},i.h(m.default,{backgroundColor:o.colors.BLACK,color:o.colors.YELLOW,height:24,label:"Level "+h.characterGetLevel(t.exp),transitionDuration:500,pct:t.pct}))),i.h(_,null,t.levelDiff?"Level Up! +"+t.levelDiff:""),i.h(_,{offset:!0},t.levelDiff?"Level Up! +"+t.levelDiff:""))}))):i.h(i.Fragment,null,i.h("span",null,"DEFEAT!")),i.h(s.default,{title:"",width:"50%",open:!E&&!I,hideTitle:!0,style:{transition:"transform 0.15s",transform:I?"scale(0)":"scaleX(1)",width:e.isVictory?"128px":"256px"},items:[e.isVictory?{label:i.h("div",null,0===M.ind?i.h("span",null,"Next"):null,1===M.ind?i.h("span",{style:{color:M.working?o.colors.GREY:o.colors.BLUE}},"Onward!"):null),value:0}:null,e.isVictory?null:{label:i.h("div",null,i.h("span",null,"Load Last Save")),value:1},e.isVictory?null:{label:i.h("div",null,i.h("span",null,"Load Another Save")),value:2},e.isVictory?null:{label:i.h("div",null,i.h("span",null,"Quit To Menu")),value:3}].filter(e=>!!e),onItemClickSound:"menu_select",onItemClick:e=>{if(0===e){if(M.working||t)return;1===M.ind?(()=>{let e=n.getCurrentBattle();a(!0),e&&l.battleInvokeEvent(e,l.BattleEvent.onCompletion,e)})():(async()=>{R.tokens+=B.tokens,B.items.forEach(e=>{e.name&&g.playerAddItem(R,e.name)}),P.forEach(async e=>{let t=M[e.name];e.experience+=B.experience,t.exp=e.experience;let i=h.characterGetLevel(e),a=t.initialLevel;if(i>a){t.pct=1;for(let t=a;t<=i;t++)e.experienceCurrency+=5}else t.pct=h.characterGetExperiencePct(e)}),L(Object.assign(Object.assign({},M),{ind:1,working:!0})),u.playSoundName("exp_gain"),await new Promise(e=>setTimeout(e,500)),P.forEach(async(e,t)=>{await new Promise(e=>setTimeout(e,250*t));let i=M[e.name];if(1===i.pct){let t=h.characterGetLevel(e),a=i.initialLevel;u.playSoundName("level_up"),i.levelDiff=t-a,i.pct=0,L(Object.assign(Object.assign({},M),{ind:1,working:!0}))}}),L(Object.assign(Object.assign({},M),{ind:1,working:!0})),await new Promise(e=>setTimeout(e,300)),P.forEach(async e=>{M[e.name].pct=h.characterGetExperiencePct(e)}),L(Object.assign(Object.assign({},M),{ind:1,working:!1}))})()}if(1===e){let e=v.getMostRecentSave();e?(k(!0),p.fadeOut(500,!0),setTimeout(()=>{v.loadSavedGame(e),p.fadeIn(500,!0)},500)):u.playSoundName("terminal_cancel")}2===e&&A(!0),3===e&&(window.location="/menu.html")}}),E&&!I?i.h(y.default,{title:"Load",onClose:()=>{},maxWidth:f.sizes[f.CardSize.XLARGE].width,closeButtonLabel:"Back "+w.getCancelKeyLabel(),disableKeyboardShortcut:!0},i.h(b.default,{onClose:()=>{A(!1),u.playSoundName("menu_choice_close")},onSaveClicked:e=>{k(!0),p.fadeOut(500,!0),setTimeout(()=>{v.loadSavedGame(e),p.fadeIn(500,!0)},500)}})):null)}})),define("db/battle-actions",["require","exports","controller/battle-actions"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=t.get=void 0;let a={};t.get=e=>{let t=a[e];if(!t)throw Error("Could not get battle action with name: "+e);return t},t.init=()=>{a.NoWeapon={name:"(No weapon)",description:"Jump to target and give 'em a smack.  It probably won't be very effective.",cooldown:5e3,type:i.BattleActionType.SWING,meta:{swings:[i.SwingType.NORMAL],icon:"sword"},cb:async function(e,t){var a,r,o;let n=i.getTarget(e,t);n&&await i.doSwing(e,this,t,n,{baseDamage:1,baseStagger:1,swingType:null!==(o=null===(r=null===(a=this.meta)||void 0===a?void 0:a.swings)||void 0===r?void 0:r[t.actionStateIndex])&&void 0!==o?o:i.SwingType.NORMAL})}}}})),define("view/components/BattleSection/ActionSelectMenu",["require","exports","preact","view/style","view/elements/Button","db/battle-actions","view/icons/Cursor"],(function(e,t,r,o,n,l,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=i(n),s=a(s);let d=o.style("div",()=>({width:"100%",height:"100%"})),c=o.style("div",()=>({position:"relative",margin:"10px 6px"})),m=o.keyframes({"0%":{transform:"translateX(-10px)"},"20%":{transform:"translateX(-1px)"},"100%":{transform:"translateX(-10px)"}}),h=o.style("div",()=>({color:o.colors.WHITE,position:"absolute",top:"-8px",left:"-32px",animation:m+" 750ms linear infinite"})),u=()=>r.h(h,null,r.h(s.default,{color:o.colors.BLUE}));t.default=e=>{var t;let i=t=>()=>{e.disabled||e.onActionClicked(t)},a=t=>()=>{e.disabled||e.setCursorIndex(t)},o=(null===(t=e.bCh.ch.skills)||void 0===t?void 0:t.length)?e.bCh.ch.skills:[l.get("NoWeapon")];return r.h(d,{id:"action-select-menu-"+e.bCh.ch.name},o.map((t,l)=>{let s=e.bCh.ch.skillIndex===l,d=e.cursorIndex===l;return t?r.h(c,{id:"action-select-menu-button-row-"+l,key:"action-button-"+l},d?r.h(u,null):null,r.h(n.default,{type:s?n.ButtonType.PRIMARY:n.ButtonType.NEUTRAL,selected:d,onClick:i(l),onMouseOver:a(l),disabled:e.disabled},t.name)):(console.error("NULL ACTION",t,o,e.bCh.ch),r.h("div",null))}))}})),define("view/components/BattleSection/ActionInfoTooltip",["require","exports","model/generics","preact","view/style"],(function(e,t,i,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let o=r.style("div",e=>({color:r.colors.WHITE,border:"2px solid "+r.colors.WHITE,fontSize:"20px",position:"absolute",padding:"8px",margin:"32px",bottom:"192px",width:"424px",background:"rgba(0, 0, 0, 0.5)",pointerEvents:"none",[e.placement]:"0px"}));t.default=e=>{return a.h(o,{placement:(t=e.characterIndexSelected,t>=i.getCurrentBattle().allies.length/2?"right":"left")},e.children);var t}})),define("view/components/BattleSection/PrimaryInfo",["require","exports","preact","view/style","model/generics","model/battle-character","view/elements/ProgressBar","model/character","view/hooks","model/battle"],(function(e,t,i,a,r,o,n,l,s,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let c=a.colors.GREEN,m=a.colors.BLUE,h=a.colors.YELLOW,u=a.colors.PURPLE,p=a.style("div",()=>({display:"flex",justifyContent:"space-between",alignItems:"baseline",marginBottom:"4px",fontSize:"12px"})),g=a.style("div",e=>{var t;return{width:e.short?"65%":"100%",border:e.short?"unset":"2px solid "+(null!==(t=e.borderColor)&&void 0!==t?t:a.colors.WHITE),borderBottom:e.short?"unset":"0px"}});t.default=e=>{let t=s.useReRender(),y=t=>`${e.bCh.ch.name}_${t}`;s.useBattleSubscriptionWithBattleCharacter(r.getCurrentBattle(),e.bCh,d.BattleEvent.onCharacterDamaged,()=>{t()}),s.useBattleSubscriptionWithBattleCharacter(r.getCurrentBattle(),e.bCh,d.BattleEvent.onCharacterStaggered,()=>{t()}),s.useBattleSubscriptionWithBattleCharacter(r.getCurrentBattle(),e.bCh,d.BattleEvent.onCharacterRecovered,()=>{t()});let f=r.getCurrentBattle();return i.h(i.Fragment,null,i.h(p,null,i.h(g,{short:!1,borderColor:o.battleCharacterCanAct(f,e.bCh)?a.colors.YELLOW:void 0},i.h(n.ProgressBarWithRender,{id:"progress-action",renderFunc:()=>e.bCh.actionTimer.getPctComplete(),renderKey:y("action"),backgroundColor:a.colors.BLACK,color:o.battleCharacterIsStaggered(e.bCh)?a.colors.GREY:m,height:24,label:""}))),i.h(p,null,i.h(g,{short:!1},i.h(n.ProgressBarWithRender,{id:"progress-hp",renderFunc:()=>l.characterGetHpPct(e.bCh.ch),renderKey:y("hp"),backgroundColor:a.colors.BLACK,color:c,height:24,label:"HP: "+e.bCh.ch.hp}))),i.h(p,null,i.h("span",null," STAG "),i.h(g,{short:!0},i.h(n.ProgressBarWithRender,{id:"progress-stagger",renderFunc:()=>o.battleCharacterIsStaggered(e.bCh)?1-e.bCh.staggerTimer.getPctComplete():e.bCh.staggerGauge.getPct(),renderKey:y("stagger"),backgroundColor:a.colors.BLACK,color:o.battleCharacterIsStaggered(e.bCh)?a.colors.WHITE:h,height:6,label:""}))),i.h(p,null,i.h("span",null," RESV "),i.h(g,{short:!0},i.h(n.ProgressBarWithRender,{id:"progress-reserve",renderFunc:()=>.25,renderKey:y("reserve"),backgroundColor:a.colors.BLACK,color:u,height:6,label:""}))))}})),define("view/components/BattleSection/PrimaryActingWeapon",["require","exports","preact","view/style","model/generics","controller/battle-actions","preact/hooks","view/hooks","model/battle","view/icons/Circle","view/icons/Close","view/icons/SwingNormal","view/icons/SwingPierce","view/icons/SwingFinisher"],(function(e,t,i,r,o,n,l,s,d,c,m,h,u,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),c=a(c),m=a(m),h=a(h),u=a(u),p=a(p);let g=r.style("div",()=>({pointerEvents:"none",width:"100%",height:"100%"})),y=r.style("div",()=>({display:"flex",justifyContent:"center",alignItems:"center",height:"100%"})),f=r.style("div",()=>({border:"2px solid "+r.colors.WHITE,borderBottom:"2px solid "+r.colors.GREEN,background:r.colors.DARKGREY,display:"flex",alignItems:"center",justifyContent:"space-between",flexDirection:"column",width:"28px",padding:"8px","& > span":{width:"24px",marginTop:"8px"}}));t.default=e=>{var t;let a=e.battleAction,v=e.bCh.actionStateIndex,b=l.useRef(null),w="acting-weapon-primary-"+e.bCh.ch.name,C=s.useReRender();return l.useEffect(()=>{let e=document.getElementById(w);e&&(e.style.transition="unset",e.style.transform="scale(0.9)",e.style.transition="transform 150ms",setTimeout(()=>{e.style.transform="scale(1.0)"},100))},[v,b,w]),s.useBattleSubscriptionWithBattleCharacter(o.getCurrentBattle(),e.bCh,d.BattleEvent.onCharacterAction,()=>{console.log(e.bCh.ch.name,"Action!"),C()}),i.h(g,{ref:b,id:w},i.h(y,null,null===(t=a.meta.swings)||void 0===t?void 0:t.map((t,a)=>{let o=a<v||0===v;switch(t){case n.SwingType.PIERCE:case n.SwingType.NORMAL:return i.h(f,{id:"swing-table-cell-"+e.bCh.ch.name+"-"+a},((e,t)=>({[n.SwingType.NORMAL]:i.h(h.default,{color:t}),[n.SwingType.PIERCE]:i.h(u.default,{color:t}),[n.SwingType.FINISH]:i.h(p.default,{color:t})}[e]))(t,r.colors.BLUE),i.h("span",null,o?i.h(m.default,{color:r.colors.LIGHTGREEN}):i.h(c.default,{color:r.colors.WHITE})));default:return i.h(f,null)}})))}})),define("view/components/BattleSection/PrimaryActingRanged",["require","exports","preact","view/style","model/generics","controller/battle-actions","preact/hooks","view/hooks","model/battle","view/icons/Circle","view/icons/Close","view/icons/RangedNormal"],(function(e,t,i,r,o,n,l,s,d,c,m,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),c=a(c),m=a(m),h=a(h);let u=r.style("div",()=>({pointerEvents:"none",width:"100%",height:"100%"})),p=r.style("div",()=>({display:"flex",justifyContent:"center",alignItems:"center",height:"100%"})),g=r.style("div",()=>({border:"2px solid "+r.colors.WHITE,borderBottom:"2px solid "+r.colors.GREEN,background:r.colors.DARKGREY,display:"flex",alignItems:"center",justifyContent:"space-between",flexDirection:"column",width:"28px",padding:"8px","& > span":{width:"24px",marginTop:"8px"}}));t.default=e=>{var t;let a=e.battleAction,y=e.bCh.actionStateIndex,f=l.useRef(null),v="acting-range-primary-"+e.bCh.ch.name,b=s.useReRender();return l.useEffect(()=>{let e=document.getElementById(v);e&&(e.style.transition="unset",e.style.transform="scale(0.9)",e.style.transition="transform 150ms",setTimeout(()=>{e.style.transform="scale(1.0)"},100))},[y,f,v]),s.useBattleSubscriptionWithBattleCharacter(o.getCurrentBattle(),e.bCh,d.BattleEvent.onCharacterAction,()=>{console.log(e.bCh.ch.name,"Action!"),b()}),i.h(u,{ref:f,id:v},i.h(p,null,null===(t=a.meta.ranges)||void 0===t?void 0:t.map((t,a)=>{let o=a<y||0===y;switch(t){case n.RangeType.NORMAL:return i.h(g,{id:"range-table-cell-"+e.bCh.ch.name+"-"+a},((e,t)=>({[n.RangeType.NORMAL]:i.h(h.default,{color:t})}[e]))(t,r.colors.BLUE),i.h("span",null,o?i.h(m.default,{color:r.colors.LIGHTGREEN}):i.h(c.default,{color:r.colors.WHITE})));default:return i.h(g,null)}})))}})),define("view/components/BattleSection/PrimaryCasting",["require","exports","preact","view/style","controller/battle-actions","view/icons/SwingNormal","view/icons/SwingPierce","view/icons/SwingFinisher","view/elements/ProgressBar"],(function(e,t,i,r,o,n,l,s,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=a(n),l=a(l),s=a(s);let c=r.style("div",()=>({pointerEvents:"none",width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",fontSize:"20px"})),m=r.style("div",()=>({border:"2px solid "+r.colors.WHITE,borderBottom:"0px",width:"100%"}));t.default=e=>i.h(c,{id:"casting-primary-"+e.bCh.ch.name},i.h("div",null,e.battleAction.name),i.h(m,null,i.h(d.ProgressBarWithRender,{id:"progress-cast-"+e.bCh.ch.name,renderFunc:()=>e.bCh.castTimer.getPctComplete(),renderKey:e.bCh.ch.name+"_cast",backgroundColor:r.colors.BLACK,color:r.colors.PURPLE,height:32,label:""})))})),define("view/components/BattleSection/CharacterInfoCard",["require","exports","preact","model/battle-character","view/style","view/elements/StaticAnimDiv","view/components/BattleSection/ActionSelectMenu","view/hooks","controller/ui-actions","model/generics","view/components/BattleSection/ActionInfoTooltip","model/battle","db/battle-actions","view/components/BattleSection/PrimaryInfo","view/components/BattleSection/PrimaryActingWeapon","view/components/BattleSection/PrimaryActingRanged","view/components/BattleSection/PrimaryCasting","view/icons/Circle","controller/battle-actions","model/sound","controller/battle-management"],(function(e,t,i,r,o,n,l,s,d,c,m,h,u,p,g,y,f,v,b,w,C){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=a(n),l=a(l),m=a(m),p=a(p),g=a(g),y=a(y),f=a(f),v=a(v);let S="0px 0px 12px 8px rgba(0, 0, 0, 0.75)",T=o.style("div",e=>({boxSizing:"border-box",transition:"height 250ms",height:e.expanded?"326px":"180px"})),x=o.style("div",e=>({opacity:e.visible?"1.0":"0.0",transition:"opacity 100ms linear"})),E=o.style("div",()=>({display:"flex",justifyContent:"space-between",alignItems:"baseline",marginLeft:"32px"})),A=o.style("div",()=>({fontSize:"18px",color:o.colors.BLACK,background:o.colors.WHITE,boxShadow:S,borderTopLeftRadius:"8px",borderTopRightRadius:"8px",textTransform:"uppercase",border:"2px solid "+o.colors.BLACK,padding:"8px",marginBottom:"12px"})),_=o.style("div",()=>({fontSize:"16px",color:o.colors.WHITE,background:`linear-gradient(${o.colors.BLUE}, ${o.colors.DARKBLUE})`,boxShadow:S,borderRadius:"8px",padding:"2px 8px",borderBottom:"0px",display:"flex",justifyContent:"center",alignItems:"center"})),I=o.style("div",()=>({display:"flex"})),k=o.style("div",()=>({background:o.colors.DARKGREY,display:"flex",justifyContent:"center",alignItems:"center",borderRight:"2px solid "+o.colors.BLACK,width:"96px",height:"96px",cursor:"pointer",overflow:"hidden"})),R=o.keyframes({"0%":{filter:"brightness(100%)"},"50%":{filter:"brightness(115%)"},"100%":{filter:"brightness(100%)"}}),P=o.style("div",e=>({border:"2px solid "+o.colors.BLACK,background:o.colors.DARKBLUE,display:"flex",justifyContent:"space-between",animation:e.ready?R+" 1000ms linear infinite":"unset",boxShadow:S,height:"96px","&:hover":{border:"2px solid "+o.colors.BLUE}})),O=o.style("div",()=>({display:"flex",alignItems:"column",width:"32px"})),M=o.style("div",()=>({display:"flex",flexDirection:"column",width:"192px",padding:"0px 8px"})),L=o.style("div",e=>({display:"flex",justifyContent:"space-between",position:"relative"})),B=o.keyframes({"0%":{filter:"brightness(100%)",transform:"scale(1)"},"30%":{filter:"brightness(200%)",transform:"scale(1.2)"},"100%":{filter:"brightness(100%)",transform:"scale(1)"}}),N=o.style("div",e=>({position:"relative",fontSize:"16px",textAlign:"center",width:"32px",height:"32px",padding:"0px 8px",color:o.colors.BLACK,marginLeft:"57px",marginTop:"8px",animation:e.active?B+" 750ms linear infinite":"unset"})),D=o.style("div",()=>({position:"absolute",top:"0px",padding:"6px 12px"})),G=o.style("div",()=>({fontSize:"16px",textAlign:"center",width:"192px",padding:"2px 8px",background:o.colors.BGGREY,height:"22px",borderRadius:"8px",boxShadow:S,marginTop:"8px",marginRight:"2px"})),F=o.style("div",e=>({transition:"transform 250ms, border 250ms, opacity 250ms",transformOrigin:"top left",opacity:e.expanded?"1":"0",transform:e.expanded?"scaleY(1)":"scaleY(0)",maxHeight:146,width:"208px",background:o.colors.DARKGREY,border:"2px solid "+o.colors.BLACK,position:e.expanded?"unset":"absolute",top:"0px",right:"0px"})),W=o.style("div",()=>({background:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center",color:o.colors.YELLOW,fontSize:12,position:"absolute",left:"0",top:"0",width:"100%",height:"100%"}));t.default=e=>{var t;let a=s.useReRender(),S=t=>{J||(d.setBattleCharacterSelectedAction(e.bCh,t),w.playSoundName("menu_select2"))};s.useBattleSubscriptionWithBattleCharacter(c.getCurrentBattle(),e.bCh,h.BattleEvent.onCharacterReady,()=>{w.playSoundName("battle_ready"),a()}),s.useBattleSubscriptionWithBattleCharacter(c.getCurrentBattle(),e.bCh,h.BattleEvent.onCharacterActionStarted,()=>{console.log(e.bCh.ch.name,"Action started"),a()}),s.useBattleSubscriptionWithBattleCharacter(c.getCurrentBattle(),e.bCh,h.BattleEvent.onCharacterActionEnded,()=>{console.log(e.bCh.ch.name,"Action ended"),a()}),s.useBattleSubscriptionWithBattleCharacter(c.getCurrentBattle(),e.bCh,h.BattleEvent.onCharacterCasting,()=>{console.log(e.bCh.ch.name,"Casting started"),a()}),s.useBattleSubscriptionWithBattleCharacter(c.getCurrentBattle(),e.bCh,h.BattleEvent.onCharacterStaggered,()=>{console.log(e.bCh.ch.name,"Staggered"),a()}),s.useBattleSubscriptionWithBattleCharacter(c.getCurrentBattle(),e.bCh,h.BattleEvent.onCharacterKnockedDown,()=>{console.log(e.bCh.ch.name,"Knocked Down"),a()}),s.useBattleSubscriptionWithBattleCharacter(c.getCurrentBattle(),e.bCh,h.BattleEvent.onCharacterRecovered,()=>{console.log(e.bCh.ch.name,"Recovered"),a()}),s.useBattleSubscriptionWithBattleCharacter(c.getCurrentBattle(),e.bCh,h.BattleEvent.onCharacterDefeated,()=>{console.log(e.bCh.ch.name,"Defeated"),a()});let[R,B]=s.useCursorIndexStateWithKeypress(e.isSelected,e.bCh.ch.skillIndex,e.bCh.ch.skills.map((e,t)=>t),S),U=c.getCurrentBattle(),H=e.bCh.ch.name,j=r.battleCharacterGetEvasion(e.bCh),K=e.bCh.ch.spriteBase+"_portrait_f",q=r.battleCharacterGetSelectedSkill(e.bCh),z=q.type===b.BattleActionType.CAST&&r.battleCharacterIsActing(e.bCh),Y=r.battleCharacterIsActing(e.bCh)&&!z&&q.type===b.BattleActionType.SWING,V=r.battleCharacterIsActing(e.bCh)&&!z&&q.type===b.BattleActionType.RANGED,$=r.battleCharacterIsCasting(e.bCh)||z,Q=!r.battleCharacterIsActing(e.bCh)&&!r.battleCharacterIsCasting(e.bCh),X=e.isSelected,J=r.battleCharacterIsCasting(e.bCh)||r.battleCharacterIsActing(e.bCh),Z=null!==(t=e.bCh.ch.skills[R])&&void 0!==t?t:u.get("NoWeapon"),ee=null;return e.bCh.isDefeated?ee=i.h(W,null,i.h("div",{style:{width:"80px"}},"Defeated")):r.battleCharacterIsKnockedDown(e.bCh)?ee=i.h(W,null,i.h("div",{style:{width:"80px"}},"Knocked Down!")):r.battleCharacterIsStaggered(e.bCh)&&(ee=i.h(W,null,"Staggered!")),i.h(i.Fragment,null,i.h(x,{visible:X},i.h(m.default,{characterIndexSelected:e.characterIndex},null==Z?void 0:Z.description)),i.h(T,{expanded:X},i.h(E,{id:"top-row-ctr"},i.h(A,{id:"name-label-"+H},H),i.h(_,null,"EVA: ",j,"%")),i.h(I,{id:"primary-row-ctr"},i.h(O,null),i.h(P,{id:"primary-root",onClick:()=>{if(c.getIsPaused()){let t=c.getCurrentBattle();w.playSoundName("menu_select"),d.setBattleCharacterIndexSelected(t.allies.indexOf(e.bCh))}},ready:r.battleCharacterCanAct(U,e.bCh)},i.h(k,{id:"portrait-"+K},i.h("div",{style:{position:"relative"}},i.h(n.default,{style:{width:"152px"},animName:K}),ee)),i.h(M,{id:"primary-"+e.bCh.ch.name},Y?i.h(g.default,{bCh:e.bCh,battleAction:q}):null,V?i.h(y.default,{bCh:e.bCh,battleAction:q}):null,$?i.h(f.default,{bCh:e.bCh,battleAction:q}):null,Q?i.h(p.default,{bCh:e.bCh}):null))),i.h(L,{actionsEnabled:X,id:"bottom-row-ctr-"+e.bCh.ch.name},i.h(N,{active:(r.battleCharacterCanAct(U,e.bCh)||r.battleCharacterIsActingReady(e.bCh))&&!c.getIsPaused()},i.h(v.default,{color:o.colors.GREY}),i.h(D,null,C.allyIndexToKey(U.alliesStorage.indexOf(e.bCh)))),i.h(F,{expanded:X},i.h(l.default,{bCh:e.bCh,cursorIndex:R,setCursorIndex:B,onActionClicked:S,disabled:J})),X?null:i.h(G,null,q.name))))}})),define("view/components/BattleSection/EnemyInfoCard",["require","exports","preact","model/battle-character","view/style","view/elements/ProgressBar","model/character","view/hooks","view/ui","model/generics","model/battle","view/icons/Armor"],(function(e,t,i,r,o,n,l,s,d,c,m,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),h=a(h);let u=o.colors.GREEN,p=o.colors.BLUE,g=o.colors.YELLOW,y=o.style("div",()=>({boxSizing:"border-box",transition:"height 250ms",height:"180px"})),f=o.style("div",()=>({display:"flex",justifyContent:"center",alignItems:"baseline",marginLeft:"32px",marginBottom:"12px",pointerEvents:"none"})),v=o.style("div",()=>({fontSize:"18px",color:o.colors.WHITE,textAlign:"center",padding:"8px"})),b=o.style("div",()=>({display:"flex"})),w=o.style("div",()=>({border:"2px solid "+o.colors.BLACK,borderBottom:"2px solid "+o.colors.RED,background:o.colors.DARKRED,display:"flex",justifyContent:"space-between",boxShadow:"0px 0px 12px 8px rgba(0, 0, 0, 0.75)","&:hover":{border:"2px solid "+o.colors.RED}})),C=o.style("div",()=>({display:"flex",alignItems:"column",width:"32px","& > div":{width:"28px",marginBottom:"8px",zIndex:"1"}})),S=o.style("div",()=>({display:"flex",flexDirection:"column",width:"192px",padding:"0px 8px"})),T=o.style("div",()=>({display:"flex",justifyContent:"space-between",alignItems:"baseline",marginBottom:"4px"})),x=o.style("div",e=>({width:e.short?"65%":"100%",border:e.short?"unset":"2px solid "+o.colors.WHITE,borderBottom:e.short?"unset":"0px"}));t.default=e=>{let t=s.useReRender(),a=t=>`${e.bCh.ch.name}_${t}`;s.useBattleSubscriptionWithBattleCharacter(c.getCurrentBattle(),e.bCh,m.BattleEvent.onCharacterDamaged,()=>{t()});let E=e.bCh.ch.name.slice(0,e.bCh.ch.name.indexOf("+")),A=[];for(let t=0;t<e.bCh.armor;t++)A.push(i.h("div",null,i.h(h.default,{key:t,color:o.colors.LIGHTGREY})));return i.h(i.Fragment,null,i.h(y,null,i.h(f,{id:"top-row-ctr"}),i.h(b,{id:"primary-row-ctr",onMouseOver:()=>{e.bCh.ch.highlighted=!0},onMouseOut:()=>{e.bCh.ch.highlighted=!1}},i.h(C,null,A),i.h(w,{id:"primary-root",onClick:()=>{let t=c.getCurrentBattle();null===m.battleGetActingAllegiance(t)&&(m.battleSetEnemyTargetIndex(t,e.characterIndex),d.renderUi())}},i.h(S,{id:"primary"},i.h(v,{id:"name-label-"+E},E),i.h(T,null,i.h(x,{short:!1},i.h(n.ProgressBarWithRender,{id:"progress-action",renderFunc:()=>e.bCh.actionTimer.getPctComplete(),renderKey:a("action"),backgroundColor:o.colors.BLACK,color:p,height:6,label:""}))),i.h(T,null,i.h(x,{short:!1},i.h(n.ProgressBarWithRender,{id:"progress-hp",renderFunc:()=>l.characterGetHpPct(e.bCh.ch),renderKey:a("hp"),backgroundColor:o.colors.BLACK,color:u,height:24,label:"HP: "+e.bCh.ch.hp}))),i.h(T,null,i.h("span",null," STAG "),i.h(x,{short:!0},i.h(n.ProgressBarWithRender,{id:"progress-stagger",renderFunc:()=>r.battleCharacterIsStaggered(e.bCh)?1-e.bCh.staggerTimer.getPctComplete():e.bCh.staggerGauge.getPct(),renderKey:a("stagger"),backgroundColor:o.colors.BLACK,color:r.battleCharacterIsStaggered(e.bCh)?o.colors.WHITE:g,height:6,label:""}))))))))}})),define("view/elements/AnimDiv",["require","exports","preact","preact/hooks","view/draw","model/animation","view/hooks"],(function(e,t,i,a,r,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>{let t=a.useRef(null),[l,s]=a.useState(o.createAnimation(e.animName)),d=e.width,c=e.height,m=e.scale,h=e.animName,u=a.useCallback(()=>{let e=t.current;if(e){let[t,i]=l.getSpriteSize(0),a=null!=m?m:1;e.width=(null!=d?d:t)*a,e.height=(null!=c?c:i)*a;let o=e.getContext("2d");o.imageSmoothingEnabled=!1,o.clearRect(0,0,e.width,e.height),r.drawAnimation(l,0,0,a,o)}},[m,d,c,l]);return a.useEffect(()=>{let e=t.current;l.name!==h?s(o.createAnimation(h)):e&&u()},[m,d,c,h,l,u]),n.useRenderLoop(e.renderLoopId,u),i.h("div",{id:e.id,style:e.rootStyle},i.h("canvas",{style:e.style,ref:t}))}})),define("view/components/BattleSection/BattleCharacterFollower",["require","exports","preact","view/style","model/generics","view/hooks","model/battle","view/elements/CharacterFollower","view/ui","preact/hooks","view/icons/TargetMelee","view/icons/Target","view/icons/Armor","controller/battle-actions","view/elements/AnimDiv"],(function(e,t,i,r,o,n,l,s,d,c,m,h,u,p,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),m=a(m),h=a(h),u=a(u),g=a(g);let y=r.keyframes({"0%":{transform:"rotateZ(0deg)"},"50%":{transform:"rotateZ(180deg)"},"100%":{transform:"rotateZ(360deg)"}}),f=r.keyframes({"0%":{transform:"translateY(-2px)"},"30%":{transform:"translateY(2px)"},"100%":{transform:"translateY(-2px)"}}),v=r.style("div",()=>({position:"absolute",width:"100%",height:"100%",display:"flex",alignItems:"center",flexDirection:"column",top:"-42px","& > span":{marginLeft:"3px",fontSize:"20px",textTransform:"uppercase",marginBottom:"8px"}})),b=r.style("div",()=>({animation:f+" 750ms linear infinite",width:"48px",height:"48px"})),w=r.style("div",()=>({animation:y+" 3000ms linear infinite",width:"48px",height:"48px"})),C=r.style("div",e=>({position:"absolute",top:"0px",right:"right"===e.align?"0px":"unset",left:"left"===e.align?"14px":"unset",width:"32px",height:"100%",display:"flex",flexDirection:"column",justifyContent:"flex-end","& > div":{width:"28px",marginTop:"4px"}}));t.default=e=>{let t=e.bCh,a=o.getCurrentBattle(),y=n.useReRender(),[f,S]=c.useState(null);n.useBattleSubscription(o.getCurrentBattle(),l.BattleEvent.onTurnStarted,e=>{S(e)}),n.useBattleSubscription(o.getCurrentBattle(),l.BattleEvent.onTurnEnded,()=>{S(null)}),n.useBattleSubscription(o.getCurrentBattle(),l.BattleEvent.onCharacterDamaged,t=>{t===e.bCh&&y()});let T=l.battleGetTargetedEnemy(a,p.BattleActionType.SWING)===t,x=l.battleGetTargetedEnemy(a,p.BattleActionType.RANGED)===t,E=[];e.bCh.armor>0&&E.push(i.h("div",null,i.h(u.default,{key:0,color:r.colors.GREY})));let A=null===f,_=o.getIsPaused(),I=!e.hideTargets&&!t.isDefeated&&(_||A);return i.h(s.CharacterFollower,{ch:t.ch,renderKey:"follower-"+t.ch.name,onClick:()=>{e.isEnemy&&null===l.battleGetActingAllegiance(a)&&(T?l.battleSetEnemyRangeTargetIndex(a,e.battleIndex):l.battleSetEnemyTargetIndex(a,e.battleIndex)||l.battleSetEnemyRangeTargetIndex(a,e.battleIndex),d.renderUi())},onMouseOver:()=>{t.ch.highlighted=!0},onMouseOut:()=>{t.ch.highlighted=!1}},e.animName?i.h(g.default,{id:t.ch.name+"_anim-div",animName:e.animName,renderLoopId:t.ch.name+"_"+e.animName,scale:4,rootStyle:{display:"flex",justifyContent:"center",alignItems:"center",width:"128px",height:"128px"}}):null,T&&I?i.h(v,null,i.h(b,null,i.h(m.default,{color:r.colors.YELLOW}))):null,x&&I?i.h(v,null,i.h(w,null,i.h(h.default,{color:r.colors.RED}))):null,i.h(C,{align:e.isEnemy?"right":"left"},E,E.length>0?i.h("div",{style:{position:"absolute",bottom:"-4px",right:e.isEnemy?"-3px":"unset",left:e.isEnemy?"unset":"-4px",fontSize:"20px"}},e.bCh.armor):null))}})),define("view/components/BattleSection/ChannelIndicators",["require","exports","preact","model/battle","view/style","view/elements/AnimDiv","view/hooks","model/generics","preact/hooks"],(function(e,t,i,r,o,n,l,s,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=a(n);let c=o.style("div",e=>({color:o.colors.WHITE,fontSize:"14px",position:"absolute",padding:"4px",margin:"4px",top:"25%",width:"164px",background:"rgba(0, 0, 0, 0.25)",display:"flex",flexDirection:"column",alignItems:"space-between",justifyContent:"left"===e.placement?"flex-start":"flex-end",[e.placement]:"0px",opacity:e.visible?"1":"0",transition:"opacity 500ms"})),m=o.style("div",e=>({display:"flex",justifyContent:"right"===e.placement?"flex-end":"unset",alignItems:"center",flexDirection:"right"===e.placement?"row-reverse":"unset"})),h=o.style("div",e=>({fontSize:"20px",border:"2px solid "+o.colors.BLACK,borderBottom:"2px solid "+("right"===e.placement?o.colors.RED:o.colors.BLUE),textAlign:"center",padding:"4px",background:"right"===e.placement?o.colors.DARKRED:o.colors.DARKBLUE})),u=e=>(s.getIsPaused(),i.h(m,{placement:e.placement},i.h("span",null,e.params.name),i.h(n.default,{animName:e.params.icon,renderLoopId:"persistent-icon-"+e.params.source.ch.name,scale:2}))),p=e=>e===r.BattleAllegiance.ENEMY?"right":"left";t.default=e=>{let t=l.useReRender(),a=s.getCurrentBattle(),o=r.battleGetAllPersistentEffectsForAllegiance(a,e.allegiance),n=d.useCallback(i=>{let a=s.getCurrentBattle();r.battleGetAllegiance(a,i.ch)===e.allegiance&&t()},[e.allegiance,o]);l.useBattleSubscription(s.getCurrentBattle(),r.BattleEvent.onCharacterDamaged,n),l.useBattleSubscription(s.getCurrentBattle(),r.BattleEvent.onCharacterChannelling,n);let m=o.length>0;return i.h(c,{placement:p(e.allegiance),visible:m},i.h(h,{placement:p(e.allegiance)},e.allegiance," Effects"),o.map((t,a)=>i.h(u,{key:a,params:t,placement:p(e.allegiance)})))}})),define("model/item",["require","exports","db/items/index","model/generics"],(function(e,t,i,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.itemIsCurrentlyUsable=void 0,t.itemIsCurrentlyUsable=e=>{if(!e)return!1;let t=!!(null==e?void 0:e.onUse);return a.getCurrentBattle()&&e.type===i.ItemType.USABLE_OVERWORLD&&(t=!1),a.getCurrentBattle()||e.type!==i.ItemType.USABLE_BATTLE||(t=!1),t}})),define("view/components/ItemDescription",["require","exports","preact","view/style","view/elements/Button","controller/events","view/icons/index","model/item"],(function(e,t,a,r,o,n,l,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=i(o);let d=r.style("div",()=>({height:"100%",width:"100%",display:"flex",flexFlow:"column"})),c=r.style("div",()=>({textAlign:"center",fontSize:"16px",padding:"0.5rem",minHeight:"16px",border:"1px solid"+r.colors.WHITE,background:r.colors.DARKRED,margin:"2px"})),m=r.style("div",()=>({padding:"8px",fontSize:"24px"})),h=r.style("div",()=>({padding:"8px"}));t.default=e=>{var t,i,u,p,g,y,f,v,b,w;let C=(null===(t=e.item)||void 0===t?void 0:t.modifiers)||{},S=[];for(let e in C){let t=C[e];S.push(`${e.toUpperCase()}: ${t>0?"+":""}${t}`)}let T=(null===(i=e.item)||void 0===i?void 0:i.skills)||[],x=[];for(let e in T){let t=T[e],i=t.name,a=t.meta.swings,r=t.meta.ranges;a?i+=" (MELEE) ["+a.map(e=>e.toUpperCase()).join(",")+"]":r&&(i+=" (RANGE) ["+r.map(e=>e.toUpperCase()).join(",")+"]"),x.push(i)}let E=s.itemIsCurrentlyUsable(e.item),A=(null===(u=null==e?void 0:e.item)||void 0===u?void 0:u.icon)?l.getIcon(null===(p=null==e?void 0:e.item)||void 0===p?void 0:p.icon):()=>a.h("div",null);return a.h(d,null,a.h("div",{style:{zIndex:1}},e.disableTitle?null:a.h(c,null,"DESCRIPTION"),e.showName?a.h(m,{style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},a.h("b",null,null===(g=e.item)||void 0===g?void 0:g.label),a.h("div",{style:(null===(y=e.item)||void 0===y?void 0:y.label)?{width:"48px",padding:"8px",border:"1px solid "+r.colors.LIGHTGREY,background:r.colors.BLACK}:{}},a.h(A,{color:r.colors.WHITE}))):null,E&&!e.disableUse?a.h(o.default,{type:o.ButtonType.SECONDARY,style:{width:"100px",marginLeft:"8px",marginBottom:"16px"},onClick:async()=>{var t;(null===(t=null==e?void 0:e.item)||void 0===t?void 0:t.onUse)&&e.onUse&&e.onUse(e.item)}},"Use ",n.getConfirmKeyLabel()):null),a.h("div",{id:"item-description-container",style:{overflowY:"auto",borderTop:"1px solid "+r.colors.WHITE,flex:"1",background:r.colors.DARKGREY}},(null===(f=e.item)||void 0===f?void 0:f.effectDescription)?a.h(h,{style:{color:r.colors.LIGHTGREY}},null===(v=e.item)||void 0===v?void 0:v.effectDescription):null,S.length>0?a.h(h,{style:{color:r.colors.BLUE}},S.join(", ")):null,x.length>0?a.h(h,null,x.map(e=>a.h("div",{style:{color:r.colors.ORANGE},key:e},"Skill: "+e))):null,a.h(h,{dangerouslySetInnerHTML:{__html:null===(b=e.item)||void 0===b?void 0:b.description}},(null===(w=e.item)||void 0===w?void 0:w.description)?"":a.h("div",{style:{color:r.colors.LIGHTGREY,textAlign:"center"}},"Hover over an item to see a description."))))}})),define("view/components/BattleSection/BattleItems",["require","exports","preact","view/style","view/elements/VerticalMenu","model/player","preact/hooks","view/components/ItemDescription","model/sound","db/items/index","view/elements/Card","view/elements/MenuBox","controller/events","model/battle","model/generics","utils"],(function(e,t,i,r,o,n,l,s,d,c,m,h,u,p,g,y){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=a(o),s=a(s),h=a(h);let f=r.style("div",{display:"flex",justifyContent:"space-between",alignItems:"flex-start",width:"800px"}),v=r.style("div",{width:"50%"}),b=r.style("div",{width:"50%"}),w=r.style("div",{width:"100%",height:"508px",border:"1px solid "+r.colors.WHITE,background:r.colors.DARKGREY_ALT});t.default=e=>{let[t,a]=l.useState(!0),C=e.player.backpack.sort().filter(e=>e.type===c.ItemType.USABLE||e.type===c.ItemType.USABLE_BATTLE).sort(y.sortItems),S=[];for(let e=0;e<C.length;e++){let t=C[e];S.find(e=>e.name===t.name)||S.push(t)}let[T,x]=l.useState(0),E=S[T],A=async()=>{(null==E?void 0:E.onUse)&&(a(!1),await E.onUse(E,!0)?(p.battleResetItemTimer(g.getCurrentBattle()),e.onClose()):a(!0))},_=(null==E?void 0:E.modifiers)||{},I=[];for(let e in _){let t=_[e];I.push(`${e.toUpperCase()}: ${t>0?"+":""}${t}`)}let k=(null==E?void 0:E.skills)||[],R=[];for(let e in k)R.push(k[e].name);return i.h(h.default,{title:"Items",onClose:()=>{e.onClose()},maxWidth:m.sizes[m.CardSize.XLARGE].width,closeButtonLabel:"Back "+u.getCancelKeyLabel(),dark:!0,disableKeyboardShortcut:!t},i.h(f,null,i.h(v,null,i.h(o.default,{width:"100%",maxHeight:"465px",open:!0,isInactive:!t,title:"Usable Items",startingIndex:0,items:S.map((t,a)=>({label:i.h("div",{style:{background:a===T?r.colors.DARKGREEN:"unset"}},t.label," (",n.playerGetItemCount(e.player,t.name),")"),value:a})),onItemClickSound:"menu_select",onItemClick:()=>{A()},onItemHover:e=>{x(e)},onAuxClick:A})),i.h(b,null,i.h(w,null,i.h(s.default,{item:E,showName:!0,onUse:()=>{d.playSoundName("menu_select"),A()}})))))}})),define("view/components/BattleSection/BattleTurnIndicator",["require","exports","preact","view/style","view/icons/Hazard","view/icons/Flower","view/icons/Signal","model/battle"],(function(e,t,i,r,o,n,l,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=a(o),n=a(n),l=a(l);let d=r.style("div",()=>({position:"absolute",left:"calc(50% - 90px)",top:"178px",width:"180px",display:"flex",flexDirection:"column",alignItems:"center",whiteSpace:"pre",background:"rgba(0, 0, 0, 0.25)",boxShadow:"0px 0px 12px 8px rgb(0 0 0 / 25%)",borderRadius:"16px"}));t.default=e=>{let{Icon:t,color:a,text:c}={[s.BattleAllegiance.ENEMY]:{Icon:o.default,color:r.colors.RED,text:"Enemy Acting..."},[s.BattleAllegiance.ALLY]:{Icon:n.default,color:r.colors.BLUE,text:"Player Acting..."},[s.BattleAllegiance.NONE]:{Icon:l.default,color:r.colors.YELLOW,text:"Awaiting Action"}}[e.allegiance];return i.h(d,{id:"battle-turn-indicator"},i.h("div",{style:{width:"32px"}},i.h(t,{color:a})),i.h("div",null,e.isEffectActive?"Using item":c))}})),define("view/elements/CharacterFollowerMenu",["require","exports","preact","view/style","view/elements/CharacterFollower","view/elements/Cursor","preact/hooks","model/sound","view/hooks","controller/events"],(function(e,t,i,r,o,n,l,s,d,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=a(n);let m=r.style("div",()=>({position:"absolute",left:"0px",top:"0px",width:"100%",height:"100%"}));t.default=e=>{var t;let[{cursorIndex:a,isSelecting:r},h]=l.useReducer((t,i)=>{var a;let r=Object.assign({},t);switch(i.type){case"CursorNext":s.playSoundName("menu_move"),r.cursorIndex=(r.cursorIndex+1)%e.characters.length;break;case"CursorPrev":s.playSoundName("menu_move"),r.cursorIndex=(r.cursorIndex+1+e.characters.length)%e.characters.length;break;case"SetCursor":r.cursorIndex=null!==(a=i.payload)&&void 0!==a?a:0;break;case"Confirm":{let t=e.characters[r.cursorIndex];h({type:"SetSelecting",payload:!0}),s.playSoundName("menu_select"),setTimeout(()=>{h({type:"SetSelecting",payload:!1}),e.onCharacterClick(t,r.cursorIndex)},100);break}case"Cancel":e.onClose&&e.onClose()}return r},{cursorIndex:null!==(t=e.startingCursorIndex)&&void 0!==t?t:0,isSelecting:!1});return d.useKeyboardEventListener(t=>{e.isInactive||r||(c.isConfirmKey(t.key)?h({type:"Confirm"}):c.isCancelKey(t.key)?h({type:"Cancel"}):c.isLeftKey(t.code)||c.isUpKey(t.code)?h({type:"CursorPrev"}):(c.isRightKey(t.code)||c.isDownKey(t.code))&&h({type:"CursorNext"}))},[e.isInactive,r]),i.h(m,null,i.h("div",{style:{position:"absolute",left:"12px",width:"100%",display:"flex",justifyContent:"center",alignItems:"flex-end",bottom:"311px",fontSize:"24px"}},e.body),e.characters.map((t,r)=>i.h(o.CharacterFollower,{ch:t,renderKey:"menu-follower-"+t.name,key:"menu-follower-"+t.name,onMouseOver:()=>{h({type:"SetCursor",payload:r})},onClick:()=>{h({type:"SetCursor",payload:r}),h({type:"Confirm"})},style:{border:"1px dashed rgba(255, 255, 255, 0.5)",borderRadius:"8px",cursor:"pointer"}},i.h(n.default,{visibility:a===r||e.isAll?"unset":"hidden"}))))}})),define("view/components/BattleSection/BattleSection",["require","exports","preact","preact/hooks","model/generics","view/style","controller/loop","view/components/BattleSection/CharacterInfoCard","view/components/BattleSection/EnemyInfoCard","view/ui","model/battle","view/hooks","view/icons/TargetMelee","view/icons/Target","view/components/BattleSection/BattleCharacterFollower","view/components/BattleSection/ChannelIndicators","view/components/TopBar","controller/ui-actions","model/store","view/elements/VerticalMenu","controller/events","model/sound","view/components/BattleSection/BattleItems","view/components/BattleSection/BattleTurnIndicator","controller/battle-management"],(function(e,t,r,o,n,l,s,d,c,m,h,u,p,g,y,f,v,b,w,C,S,T,x,E,A){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),d=a(d),c=a(c),p=a(p),g=a(g),y=a(y),f=a(f),v=i(v),C=a(C),x=a(x),E=a(E);let _=l.style("div",()=>({position:"absolute",top:"0px",left:"0px",overflow:"hidden",width:"100%",height:"100%",pointerEvents:"none"})),I=l.style("div",()=>({position:"absolute",left:"0",top:"168px",fontSize:"18px",width:"100%",textAlign:"right"})),k=l.style("div",()=>({position:"absolute",bottom:"0px",left:"0px",width:"calc(100% - 64px)",margin:"32px",display:"flex",justifyContent:"center",alignItems:"flex-end",flexDirection:"row-reverse",pointerEvents:"all"})),R=l.style("div",()=>({position:"absolute",top:"0px",right:"0px",width:"calc(100% - 64px)",margin:"8px 32px",display:"flex",justifyContent:"flex-end",alignItems:"flex-end",pointerEvents:"all"})),P=l.style("div",e=>({position:"absolute",pointerEvents:"all",margin:"32px",left:"0",top:"64px",width:"250px",transform:e.visible?"translateX(0)":"translateX(-294px)",transition:"transform 200ms ease-out",boxShadow:"0px 0px 12px 8px rgba(0, 0, 0, 0.75)"})),O=l.style("div",e=>({padding:"8px",pointerEvents:e.disabled?"none":"inherit",background:e.disabled?l.colors.BGGREY:"unset",borderRadius:"4px",color:e.disabled?l.colors.GREY:"unset"})),M=l.style("div",()=>({width:"32px",height:"32px",display:"inline-block",transform:"translateY(10px)",marginLeft:"8px"}));t.default=e=>{var t;let i=n.getCurrentBattle(),a=m.getUiInterface().appState.battle,[L,B]=o.useState(""),N=n.getIsPaused(),D=a.effect.active,G=m.getUiInterface().appState.sections.includes(w.AppSection.Cutscene),[F,W]=o.useState(null);u.useBattleSubscription(n.getCurrentBattle(),h.BattleEvent.onTurnStarted,e=>{console.log("turn started"),W(e)}),u.useBattleSubscription(n.getCurrentBattle(),h.BattleEvent.onTurnEnded,()=>{console.log("turn ended"),W(null)}),u.useKeyboardEventListener(e=>{if(!D&&!G)if(N&&""===L)S.isCancelKey(e.key)||S.isPauseKey(e.key)?(T.playSoundName("woosh_reverse"),s.unpause()):"ArrowLeft"===e.key?(h.battleCycleMeleeTarget(i)?T.playSoundName("menu_select"):T.playSoundName("menu_cancel"),m.renderUi()):"ArrowRight"===e.key&&(h.battleCycleRangeTarget(i)?T.playSoundName("menu_select"):T.playSoundName("menu_cancel"),m.renderUi());else if(N&&"actions"===L)if("Tab"===e.key||"ArrowLeft"===e.key){let t=m.getUiInterface().appState.battle,i=n.getCurrentBattle(),a=(t.characterIndexSelected+1)%i.allies.length;-1===a&&(a=i.allies.length-1),T.playSoundName("menu_select"),b.setBattleCharacterIndexSelected(a),e.preventDefault()}else if("ArrowRight"===e.key){let t=m.getUiInterface().appState.battle.characterIndexSelected-1;-1===t&&(t=0),T.playSoundName("menu_select"),b.setBattleCharacterIndexSelected(t),e.preventDefault()}else S.isCancelKey(e.key)&&(T.playSoundName("menu_select2"),B(""))},[N,L,D]);let U="actions"===L,H=null!==h.battleGetActingAllegiance(n.getCurrentBattle()),j={background:l.colors.DARKGREEN};return console.log("RENDER BATTLE SECTION",N,D,a.effect),r.h(_,{id:"battle-section-root"},r.h(k,{id:"ch-info-cards-ctr"},i.allies.map((e,t)=>e.shouldRemove?r.h("div",null):r.h(d.default,{bCh:e,isSelected:U&&a.characterIndexSelected===t&&N,characterIndex:t,key:e.ch.name,id:"ch-info-card-"+e.ch.name}))),r.h(R,{id:"enemy-info-cards-ctr"},i.enemies.map((e,t)=>r.h(c.default,{bCh:e,isSelected:!1,characterIndex:t,key:e.ch.name,id:"ch-info-card-"+e.ch.name}))),r.h(f.default,{allegiance:h.BattleAllegiance.ENEMY}),r.h(f.default,{allegiance:h.BattleAllegiance.ALLY}),i.alliesStorage.map(e=>r.h(y.default,{key:e.ch.name,bCh:e,battleIndex:i.alliesStorage.indexOf(e),isEnemy:!1,animName:D&&a.effect.bChList.includes(e)?a.effect.effectAnimName:void 0})),i.enemies.map(e=>r.h(y.default,{key:e.ch.name,bCh:e,battleIndex:i.enemies.indexOf(e),isEnemy:!0,hideTargets:D,animName:D&&a.effect.bChList.includes(e)?a.effect.effectAnimName:void 0})),r.h(I,null,N&&!D?r.h(r.Fragment,null,r.h("p",{style:{marginRight:"8px"}},"Press Left Arrow to cycle Melee Target.",r.h(M,null,r.h(p.default,{color:l.colors.YELLOW}))),r.h("p",{style:{marginRight:"8px"}},"Press Right Arrow to cycle Range Target.",r.h(M,null,r.h(g.default,{color:l.colors.RED})))):null),D?null:r.h(r.Fragment,null,r.h(v.default,{disabled:G,buttons:[v.TopBarButtons.BATTLE_MENU,v.TopBarButtons.SETTINGS,v.TopBarButtons.DEBUG],onSettingsClick:()=>{s.pause()},onSettingsClose:()=>{b.showSection(w.AppSection.BattleUI,!0)},onMenuClick:()=>{N?(T.playSoundName("woosh_reverse"),s.unpause()):(T.playSoundName("woosh"),s.pause())}}),r.h(P,{visible:N},r.h(C.default,{width:"100%",open:!0,isCursorSelectInactive:!N||""!==L,title:"Battle Menu",items:[{label:r.h(O,{style:"resume"===L?j:{color:l.colors.BLUE}},"Resume"),value:"resume"},{label:r.h(O,{style:"actions"===L?j:void 0,disabled:H},"Actions"),value:"actions"},{label:r.h(O,{style:"items"===L?j:void 0,disabled:H||i.itemTimer.getPctComplete()<1},"Items"," ",i.itemTimer.getPctComplete()>=1?"":((i.itemTimer.duration-i.itemTimer.getDiff()[0])/1e3).toFixed(2)+"s"),value:"items"},{label:r.h(O,{disabled:H||(null===(t=i.template)||void 0===t?void 0:t.disableFlee)},"Flee"),value:"flee"}],onItemClickSound:"menu_select",onItemClick:e=>{var t;"resume"===e?(T.playSoundName("woosh_reverse"),s.unpause(),B("")):H||"items"===e&&i.itemTimer.getPctComplete()<1?T.playSoundName("menu_cancel"):"flee"===e?(null===(t=i.template)||void 0===t?void 0:t.disableFlee)?T.playSoundName("menu_cancel"):(s.unpause(),A.fleeBattle(i)):B(e)},onClose:()=>{T.playSoundName("woosh_reverse"),B(""),s.unpause()}}))),"items"!==L||D?null:r.h(x.default,{player:n.getCurrentPlayer(),onClose:()=>{B("")}}),r.h(E.default,{isEffectActive:D,allegiance:null!=F?F:h.BattleAllegiance.NONE}))}})),define("view/components/BattleSection/index",["require","exports","view/components/BattleSection/BattleSection"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a(i).default}})})),define("view/components/CutsceneSection/CutsceneSection",["require","exports","preact","view/style","preact/hooks","view/elements/StaticAnimDiv","view/ui","model/store","controller/events","view/icons/Talk","view/components/TopBar","controller/ui-actions","view/hooks","model/generics","view/elements/CharacterFollower","controller/scene-management","controller/scene/scene-commands","controller/loop"],(function(e,t,r,o,n,l,s,d,c,m,h,u,p,g,y,f,v,b){"use strict";var w;Object.defineProperty(t,"__esModule",{value:!0}),t.PortraitActiveState=void 0,l=a(l),m=a(m),h=i(h),function(e){e.Active="active",e.Inactive="inactive",e.Passive="passive",e.Invisible="invisible"}(w=t.PortraitActiveState||(t.PortraitActiveState={}));let C=(e,t,i)=>{let a="";return a=t?`${e}_portrait_${t}`:e+"_portrait","right"===i&&(a+="_f"),a},S=o.style("div",e=>({position:e.fixed?"fixed":"absolute",top:"0px",left:"0px",overflow:"hidden",width:"100%",height:"100%"})),T=o.style("div",e=>({position:"absolute",top:"0px",width:"100%",height:e.visible?"12.5%":"0%",transition:"height 0.25s",background:o.colors.DARKGREY})),x=o.style("div",e=>({position:"absolute",bottom:"0px",width:"100%",height:e.visible?"17%":"0%",transition:"height 0.25s",background:o.colors.DARKGREY})),E=o.style("div",()=>({position:"absolute",left:"0",top:"0",width:"100%",height:"100%",opacity:"0.04",backgroundImage:"url(res/bg/flowers_menu_bg.png)",zIndex:0})),A=o.style("div",e=>{let t="1",i="0%",a="0%",r="left 0.2s, right 0.2s, bottom 0.2s";return e.activeState===w.Active?i="3.125%":e.activeState===w.Inactive?(i="-3.125%",a="-3.125%",t="0.5"):e.activeState===w.Passive?a="-3.125%":e.activeState===w.Invisible&&(t="0",i="-50%",r=""),{position:"absolute",minWidth:"50%",minHeight:"50%",transition:r,left:"left"===e.align?i:"",right:"right"===e.align?i:"",bottom:a,opacity:t}}),_=o.style("div",e=>{let t="40%",i="left"===e.align?"29%":`calc(100% - 29% - ${t})`,a="25%",r="height 0.1s, left 0.1s, transform 0.1s ease-in";return"center"===e.align?(i="25%",t="50%",a="50%",r="height 0.1s, left 0.25s, transform 0.1s ease-in"):"center-low"===e.align?(a="40%",i="25%",t="50%"):e.visible?"center-high"===e.align&&(i="25%",t="50%",a="80%",r="height 0.1s, left 0.25s, transform 0.1s ease-in"):r="",{position:"absolute",width:t,height:a,left:i,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",transition:r,bottom:"0px",transform:e.visible?"scale(1)":"scale(0)"}}),I=o.style("div",e=>{let t="unset",i="unset",a="solid",r="solid",n="2.5%",l="2.5%",s=o.colors.WHITE,d=o.colors.WHITE;return"right"===e.align?(n="5%",t="48px",a="16px solid",d=o.colors.BLUE):"left"===e.align&&(l="5%",i="48px",r="16px solid",s=o.colors.BLUE),{border:"2px solid "+o.colors.WHITE,background:e.isNarration?o.colors.DARKBLUE:"linear-gradient(0deg, rgba(0,0,0,1) 0%, rgba(45,45,45,1) 100%)",boxShadow:"0px 0px 24px 16px rgba(0, 0, 0, 0.75)",boxSizing:"border-box",width:"100%",padding:"2.5%",color:o.colors.WHITE,fontSize:"24px",textAlign:"left",transition:"height 0.1s, width 0.1s",borderBottomLeftRadius:t,borderBottomRightRadius:i,borderLeft:a,borderRight:r,paddingLeft:n,paddingRight:l,borderRightColor:s,borderLeftColor:d,borderTopColor:o.colors.BLUE,position:"relative"}}),k=o.style("div",e=>({position:"absolute",left:"0px",top:"0px",width:"100%",height:"100%",transform:e.visible?"translateY(0%)":"translateY(55%)",transition:"transform 0.15s"})),R=o.style("div",e=>({width:e.visible?"calc(100% + 2px)":"0px",display:"flex",marginBottom:"16px",opacity:e.visible?"100%":"0%",justifyContent:"right"===e.align?"flex-end":"flex-start"})),P=o.style("div",e=>({color:o.colors.BLACK,padding:"8px",fontSize:"18px",fontWeight:"bold",boxShadow:"0px 0px 24px 16px rgba(0, 0, 0, 0.75)",background:o.colors.WHITE,border:"2px solid black",borderTopRightRadius:"8px",borderTopLeftRadius:"8px",minWidth:"64px",textAlign:"center",textTransform:"uppercase"})),O=o.keyframes({"0%":{transform:"translateY(-2px)"},"30%":{transform:"translateY(2px)"},"100%":{transform:"translateY(-2px)"}}),M=o.style("div",e=>({position:"absolute",animation:O+" 750ms linear infinite",bottom:"calc(50% - 22px)",right:e.flipped?"unset":"-61px",left:e.flipped?"-61px":"unset",width:"39px"}));var L;!function(e){e.DELAY="delay",e.COLOR="color",e.SHAKE="shake",e.SCALE="scale",e.CASCADE="cascade",e.CASCADE_SHORTHAND="/",e.ITALIC="italic",e.CASCADE_LETTERS="cascade-letters"}(L||(L={}));let B=e=>({innerHTML:e,delay:0,color:"",scale:1,italic:!1,shake:!1,animation:"",commands:[]}),N=window.parseDialogTextToPhrases=e=>{let t=e.match(/<.+?>/g);t?"<"!==e[0]&&(t=["<cascade=20>",...t],e="<cascade=20>"+e):(t=["<cascade=20>"],e="<cascade=20>"+e);let i=[],a=[];for(let r=0;r<t.length;r++){let o=e.indexOf(t[r]),n=e.slice(0,o),l=t[r].slice(1,-1),s=B(n);s.commands=a,a=l.split(" ").map(e=>{var t,i;return{name:(null!==(t=e.split("=")[0])&&void 0!==t?t:"").toLowerCase(),arg:null!==(i=e.split("=")[1])&&void 0!==i?i:""}}),e=e.slice(o+t[r].length),n&&i.push(s)}let r=B(e);r.commands=a,i.push(r);let n=0;for(let e=0;e<i.length;e++){let t=i[e];t.commands.forEach(e=>{switch(e.name){case L.DELAY:n+=parseInt(e.arg)||0;break;case L.COLOR:t.color=o.colors[e.arg]||"";break;case L.SHAKE:t.shake=!0;break;case L.SCALE:t.scale=parseFloat(e.arg)||1;break;case L.ITALIC:t.italic=!0}}),t.delay=n,t.commands.forEach(a=>{switch(a.name){case L.CASCADE_SHORTHAND:case L.CASCADE:{let r=parseInt(a.arg)||20,o=t.innerHTML.split(/\s+/),l=[];for(let e=0;e<o.length;e++){let i=o[e]||" ",a=Object.assign(Object.assign({},t),{delay:t.delay+e*r,innerHTML:i+(e<o.length-1?1!==t.scale?"&nbsp;":" ":"")});l.push(a)}i.splice(e,1,...l),n+=o.length*r,e+=l.length-1;break}case L.CASCADE_LETTERS:{let r=parseInt(a.arg)||50,o=t.innerHTML.split(""),l=[];for(let e=0;e<o.length;e++){let i=o[e]||"&nbsp",a=Object.assign(Object.assign({},t),{delay:t.delay+e*r,innerHTML:" "===i?"&nbsp":i});l.push(a)}i.splice(e,1,...l),n+=o.length*r,e+=l.length-1;break}}})}return i},D="";t.default=e=>{var t,i,a;let[L,B]=n.useState(!1),[G,F]=n.useState(!1),W=n.useRef(null),U=s.getUiInterface().appState.cutscene,[H,j]=p.useConfirmModal({onConfirm:()=>{q()},onClose:()=>{b.unpause()},body:"Are you sure you want to skip this cutscene?"}),K=()=>{b.pause(),j()};n.useEffect(()=>{L||B(!0)},[L]),n.useEffect(()=>{let e=null==W?void 0:W.current;e&&(async(e,t)=>{if(e.innerHTML="",""===t.text)return;let i=document.getElementById("talk-icon");i&&(i.style.display="none"),g.getCurrentScene().inputDisabled=!0;let a=[],r=(e,t)=>{let i=-1,r=new Promise(a=>{i=setTimeout(()=>{e(),a()},t*(1/g.getCutsceneSpeedMultiplier()))}).catch(()=>{clearTimeout(i)});return a.push(r),r},n=e=>{let t=`<span style="line-height:40px; vertical-align:middle; ${(e=>`color: ${e.color||o.colors.WHITE};`)(e)}${(e=>`animation: ${e.shake?"shake 0.5s infinite":"unset"}; display: ${e.shake?"inline-block":"inline"};`)(e)}${(e=>e.italic?"font-style: italic;":"")(e)}">${e.innerHTML}</span>`;return 1!==e.scale&&(t=`<span style="display: inline-block;${(e=>`font-size: ${e.scale?Math.floor(24*e.scale)+"px":"inherit"};`)(e)}">${t}</span>`),t},l=N(t.text);if(t.id===D){let t="";l.forEach(e=>{t+=n(e)}),e.innerHTML=t}else{await(async()=>{let t="";l.forEach(e=>{t+=n(e)}),e.style.transition="",e.style.opacity="0",e.style.height="unset",e.innerHTML=t,await r(()=>{},200);let i=e.getBoundingClientRect();e.style.height=Math.max(40,i.height)+"px",e.innerHTML=""})(),e.style.transition="",e.style.opacity="0";let i="";l.forEach(t=>{t.delay?r(()=>{i+=n(t),e.innerHTML=i},t.delay):i+=n(t)}),e.innerHTML=i,D=t.id,r(()=>{e.style.transition="opacity 0.15s linear, height 0.15s linear",e.style.opacity="1"},25)}if(await Promise.all(a),i&&(await r(()=>{},150),i.style.display="block"),g.getCurrentScene().inputDisabled=!1,g.isKeyDown(c.getConfirmKey())){let e=c.getCurrentKeyHandler();e&&e({key:"x"})}})(e,U)});let q=async()=>{let e=c.pushEmptyKeyHandler(),t=document.getElementById("ui");t&&(t.style.transition="opacity 500ms linear",t.style.opacity="0");let i=document.getElementById("canv-outer");i&&(i.style.transition="opacity 500ms linear",i.style.opacity="0");let a=document.createElement("div");Object.assign(a.style,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%",display:"flex","font-size":"24px","justify-content":"center","align-items":"center"}),a.innerHTML="Skipping...",document.body.appendChild(a),F(!0);let r=document.getElementById("fade2");r&&(r.style.transition="background-color 300ms",r.style["background-color"]="rgba(0, 0, 0, 255)"),await new Promise(e=>setTimeout(e,1e3)),F(!1),b.unpause(),f.skipCurrentScript(g.getCurrentScene()),c.popKeyHandler(e),setTimeout(()=>{let e=c.getCurrentKeyHandler();e&&e({key:"x"}),g.getCurrentScene().isWaitingForInput=!1},1),a.remove(),v.panCameraBackToPlayer(50,!0),setTimeout(()=>{let e=document.getElementById("fade2");u.hideSection(d.AppSection.Cutscene),e&&(e.style.transition="background-color 300ms",e.style["background-color"]="rgba(0, 0, 0, 0)"),t&&(t.style.transition="opacity 300ms linear",t.style.opacity="1"),i&&(i.style.transition="opacity 300ms linear",i.style.opacity="1")},500)};p.useKeyboardEventListener(e=>{!c.isAuxKey(e.key)||s.getUiInterface().appState.sections.includes(d.AppSection.Settings)||H||u.showSettings(z),!c.isSkipKey(e.key)||G||H||g.getCurrentBattle()||!1===U.showBars||!g.isCutsceneSkipEnabled()||K()},[G,H]);let z=()=>{u.hideSection(d.AppSection.Settings)},Y="center";[d.CutsceneSpeaker.Left].includes(U.speaker)||[d.CutsceneSpeaker.Center].includes(U.speaker)?Y="right":[d.CutsceneSpeaker.Right].includes(U.speaker)?Y="left":U.portraitCenter&&(Y="center-low");let V=G||[d.CutsceneSpeaker.None].includes(U.speaker),$=!U.speakerName&&!V||"narrator"===(null===(t=U.actorName)||void 0===t?void 0:t.toLowerCase());(!1===U.showBars||$)&&(Y="center-high");let Q=null!==(a=null===(i=g.getCurrentRoom())||void 0===i?void 0:i.characters)&&void 0!==a?a:[];console.log("RENDER CUTSCENE",s.getUiInterface().appState.cutscene,H);let X=[h.TopBarButtons.SETTINGS];g.getCurrentBattle()||X.push(h.TopBarButtons.SKIP_CUTSCENE);let J=!G&&!H&&!g.getCurrentBattle()&&!1!==U.showBars&&g.isCutsceneSkipEnabled();return r.h(S,{id:"cutscene-root",fixed:!!s.getUiInterface().appState.arcadeGame.path,onClick:()=>{let e=c.getCurrentKeyHandler();e&&L&&U.visible&&e({key:"x"})}},r.h(T,{visible:U.visible&&U.showBars&&L},r.h(E,null)),r.h(x,{visible:U.visible&&U.showBars&&L},r.h(E,null)),r.h("div",{style:{position:"absolute",left:"0",top:"0",zIndex:2,width:"100%"}},r.h(h.default,{buttons:X,onSettingsClick:()=>{},onSettingsClose:z,onSkipClick:J?()=>{K()}:void 0})),r.h(k,{visible:U.visible&&L},""!==U.portraitLeft?r.h(A,{align:"left",activeState:U.speaker===d.CutsceneSpeaker.Left?w.Active:w.Inactive},r.h(l.default,{animName:C(U.portraitLeft,U.portraitLeftEmotion,"right")})):null,""!==U.portraitCenter?r.h(A,{align:"left",activeState:U.speaker===d.CutsceneSpeaker.Center?w.Active:w.Invisible},r.h(l.default,{animName:C(U.portraitCenter,U.portraitCenterEmotion,"right")})):null,""!==U.portraitRight?r.h(A,{align:"right",activeState:U.speaker===d.CutsceneSpeaker.Right?w.Active:w.Inactive},r.h(l.default,{animName:C(U.portraitRight,U.portraitRightEmotion,"left")})):null),r.h(_,{visible:L&&U.text.length>0,align:Y},r.h(R,{visible:!!U.speakerName,align:U.speaker===d.CutsceneSpeaker.Right?"right":"left"},r.h(P,null,U.speakerName)),r.h(I,{id:"cutscene-textbox",align:Y,isNarration:$},r.h("div",{id:"cutscene-textbox-content",style:{opacity:"0",transition:"unset"},ref:W},e.renderImmediate?U.text:void 0),r.h(M,{id:"talk-icon",style:"display: none",flipped:U.speaker===d.CutsceneSpeaker.Right},r.h(m.default,{color:o.colors.WHITE})))),Q.map(e=>r.h(y.CharacterFollower,{ch:e,renderKey:"cutscene-follower-"+e.name,key:"cutscene-follower-"+e.name},e.name===U.actorName?r.h("div",{style:{display:"flex",justifyContent:"center",position:"relative",top:"-32px"}},r.h("div",{style:{width:"32px",background:"radial-gradient(circle, rgba(0,0,0,0.55) 0%, rgba(0,0,0,0) 85%)",animation:O+" 750ms linear infinite"}},r.h(m.default,{color:o.colors.WHITE}))):r.h("div",null))))}})),define("view/components/CutsceneSection/index",["require","exports","view/components/CutsceneSection/CutsceneSection"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a(i).default}})})),define("view/components/CutsceneSection/CutsceneChoicesSection",["require","exports","preact","preact/hooks","model/scene","view/style","model/generics","view/ui","view/elements/VerticalMenu","controller/ui-actions"],(function(e,t,i,r,o,n,l,s,d,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),d=a(d);let m=n.style("div",{position:"absolute",top:"0px",overflow:"hidden",width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",background:"rgba(0, 0, 0, 0.5)"});t.default=()=>{let e=s.getUiInterface().appState.choices,[t,a]=r.useState(!1);return r.useEffect(()=>{t||a(!0)},[t]),i.h(m,null,i.h(d.default,{title:"Choose",width:"50%",open:!0,style:{transition:"transform 0.15s",transform:t?"scaleX(1)":"scaleX(0)"},items:e.choiceTexts.map((e,t)=>({label:i.h("div",null,i.h("span",null,e)),value:t})),useSpaceBarConfirm:!0,onItemClickSound:"menu_select",onItemClick:e=>{let t=l.getCurrentScene();t.storage.lastChoiceIndex=e,o.sceneStopWaitingUntil(t),c.hideChoices()}}))}})),define("view/components/AppSettings/AppSettings",["require","exports","model/generics","model/sound","preact","view/elements/Card","view/hooks","view/style"],(function(e,t,a,r,o,n,l,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=i(n);let d=s.style("div",()=>({color:s.colors.WHITE,fontSize:"16px",margin:"8px",width:"100%","& > h2":{fontSize:"24px",textDecoration:"underline",margin:"0px",textAlign:"center",width:"100%"},"& > div":{margin:"8px",display:"flex",flexDirection:"column",alignItems:"flex-start",width:"calc(100% - 32px)"}}));t.default=()=>{let e=l.useReRender(),t=(t,i)=>{a.setVolume(i,t),e()},i=e=>{setTimeout(()=>r.playSoundName("aggro_alert",a.getVolume(e)),25)},s=a.getVolume(r.SoundType.NORMAL),c=a.getVolume(r.SoundType.MUSIC),m=a.getCutsceneSpeedMultiplier();return o.h("div",null,o.h("p",null,"Changes to these settings are automatically saved."),o.h(n.default,{size:n.CardSize.ADAPTIVE},o.h(d,null,o.h("h2",null,"Volume Settings"),o.h("div",null,o.h("label",{name:"generic-volume"},"Effects Volume - ",Math.floor(100*s),"%"),o.h("input",{style:{width:"100%"},value:s,type:"range",step:.05,min:0,max:1,onChange:e=>{var i,a;return t(null!==(a=null===(i=null==e?void 0:e.target)||void 0===i?void 0:i.value)&&void 0!==a?a:1,r.SoundType.NORMAL)},onMouseUp:()=>i(r.SoundType.NORMAL)})),o.h("div",null,o.h("label",{name:"music-volume"},"Music Volume - ",Math.floor(100*c),"%"),o.h("input",{style:{width:"100%"},value:c,type:"range",step:.05,min:0,max:1,onChange:e=>{var i,a;return t(null!==(a=null===(i=null==e?void 0:e.target)||void 0===i?void 0:i.value)&&void 0!==a?a:1,r.SoundType.MUSIC)},onMouseUp:()=>i(r.SoundType.MUSIC)}))),o.h(d,null,o.h("h2",null,"Game Settings"),o.h("div",null,o.h("label",{name:"cutscene-speed"},"Cutscene Speed - ",Math.floor(100*m),"%"),o.h("input",{style:{width:"100%"},value:m,type:"range",step:.05,min:.5,max:2,onChange:t=>{var i,r,o;return o=null!==(r=null===(i=null==t?void 0:t.target)||void 0===i?void 0:i.value)&&void 0!==r?r:1,console.log("set cutscene speed",o),a.setCutsceneSpeedMultiplier(o),void e()}})))))}})),define("view/components/AppSettings/index",["require","exports","view/components/AppSettings/AppSettings"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a(i).default}})})),define("view/components/SettingsSection",["require","exports","preact","view/components/AppSettings/index","controller/events","preact/hooks","controller/save-management","view/ui","model/sound","view/elements/MenuBox"],(function(e,t,i,r,o,n,l,s,d,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=a(r),c=a(c),t.default=e=>(n.useEffect(()=>()=>{let e=l.getCurrentSettings();l.saveSettingsToLS(e)},[]),i.h(i.Fragment,null,i.h(c.default,{title:"Settings",onClose:()=>{(()=>{var t;let i=null!==(t=e.onClose)&&void 0!==t?t:s.getUiInterface().appState.settings.onClose;e.onClose||d.playSoundName("menu_choice_close"),i()})()},disableCloseSound:!!e.onClose,dark:!0,closeButtonLabel:"Back "+o.getCancelKeyLabel()},i.h(r.default,null))))})),define("view/elements/DialogBox",["require","exports","preact","view/style","view/elements/Button","view/hooks","controller/events","preact/hooks","model/sound"],(function(e,t,a,r,o,n,l,s,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=i(o);let c=r.style("div",()=>({opacity:"0",transition:"opacity 100ms",background:"rgba(0, 0, 0, 0.5)",position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",zIndex:"2",pointerEvents:"all"})),m=r.style("div",e=>{var t,i;return{margin:"4px",padding:"4px",minWidth:null!==(t=e.maxWidth)&&void 0!==t?t:"unset",maxWidth:null!==(i=e.maxWidth)&&void 0!==i?i:"90%",border:"2px solid "+(e.danger?r.colors.RED:r.colors.BLUE),background:r.colors.BGGREY,color:r.colors.WHITE,transform:"scale(0)",transition:"transform 100ms"}}),h=r.style("div",e=>({margin:"8px",padding:"8px",fontSize:"32px",textTransform:"uppercase",borderBottom:"2px solid "+(e.danger?r.colors.RED:r.colors.BLUE)})),u=r.style("div",()=>({margin:"8px",padding:"8px",fontSize:"16px"})),p=r.style("div",()=>({display:"flex",justifyContent:"flex-end",padding:"8px",margin:"8px"}));t.default=e=>{var t,i,r;let[g,y]=s.useState(!1),[f,v]=s.useState(-1),[b,w]=s.useState(0),[C,S]=s.useState(!1),[T,x]=s.useState(!1),E=!!e.onConfirm,A=e=>{if(g||C||T)return;y(!0);let t=document.getElementById("dialog-container");t&&(t.style.transform="scale(0)");let i=document.getElementById("dialog-wrapper");i&&(i.style.opacity="0"),setTimeout(()=>{console.log("on close in dialog box"),e()},100)};return n.useKeyboardEventListener(t=>{g||C||T||(E?(l.isCancelKey(t.key)&&(v(1),d.playSoundName("menu_select"),x(!0),setTimeout(()=>{A(()=>{e.onClose()})},100)),l.isConfirmKey(t.key)&&(v(b),0===b?(d.playSoundName("menu_select"),S(!0),setTimeout(()=>{A(()=>{e.onConfirm&&e.onConfirm()})},100)):(d.playSoundName("menu_select"),x(!0),setTimeout(()=>{A(()=>{e.onClose()})},100))),"ArrowLeft"===t.key?(d.playSoundName("menu_move"),w(0)):"ArrowRight"===t.key&&(d.playSoundName("menu_move"),w(1))):(l.isCancelKey(t.key)&&(v(0),d.playSoundName("menu_choice_close"),A(()=>{e.onClose()})),l.isConfirmKey(t.key)&&(v(0),d.playSoundName("menu_select"),A(()=>{e.onClose()}))))},[b]),s.useEffect(()=>{let e=document.getElementById("dialog-container");e&&(e.style.transform="scale(1)");let t=document.getElementById("dialog-wrapper");t&&(t.style.opacity="1")},[]),a.h(c,{id:"dialog-wrapper"},a.h(m,{id:"dialog-container",maxWidth:e.maxWidth,danger:e.danger},a.h(h,{danger:e.danger},e.title),a.h(u,null,e.children),a.h(p,null,E?a.h(a.Fragment,null,a.h(o.default,{type:o.ButtonType.PRIMARY,style:{marginRight:"1rem",filter:C?"brightness(80%)":"",transform:C?"translateY(2px)":""},onClick:t=>{t.stopPropagation(),t.preventDefault(),A(()=>{e.onConfirm&&e.onConfirm()})},showCursor:0===b,active:0===f},null!==(t=e.confirmButtonLabel)&&void 0!==t?t:"OK"),a.h(o.default,{type:o.ButtonType.CANCEL,style:{marginRight:"1rem",filter:T?"brightness(80%)":"",transform:T?"translateY(2px)":""},onClick:t=>{t.stopPropagation(),t.preventDefault(),d.playSoundName("menu_select"),A(()=>{e.onClose()})},showCursor:1===b,active:1===f},null!==(i=e.closeButtonLabel)&&void 0!==i?i:"Cancel")):a.h(o.default,{type:o.ButtonType.PRIMARY,style:{marginRight:"1rem",filter:C?"brightness(80%)":"",transform:C?"translateY(2px)":""},onClick:()=>{console.log("handle button click in dialog"),A(()=>{console.log("handle button click in dialog handle closing"),e.onClose()})},showCursor:!0,active:0===f},null!==(r=e.closeButtonLabel)&&void 0!==r?r:"Close"))))}})),define("view/icons/Gun",["require","exports","preact"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>i.h("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:e.color,stroke:e.color},i.h("g",{class:"",transform:"translate(0,0)",style:""},i.h("path",{d:"M375.563 15.344c-3.744-.036-7.46.797-10.875 2.906-6.406 3.954-9.283 10.876-10.188 17.875v.03c-58.905 99.84-141.287 150.724-234.53 208.19-17.742 7.012-29.062 20.612-34.19 35.155-15.89-5.312-23.478-17.805-22.968-25.313l-18.656-1.28c-1.278 18.792 13.092 36.91 35.688 44.312l-1.656.5c-36.15 26.775-70.78 89.097-39.688 163.31 6.443 15.38 17.065 24.21 29.625 28.908 12.56 4.697 27.19 4.848 40 1.468 12.81-3.38 23.52-10.32 28.813-18.094 5.29-7.773 6.53-15.74.062-27.03-13.84-24.154-28.63-50.166-24.5-77.282 28.037 16.267 58.335 11.598 77.156-5.563 19.28-17.577 26.135-48.276 10.125-77.593 79.474-47.578 156.44-86.004 256.064-92.094 3.965.776 8.044.766 11.906-.53.022-.01.04-.025.063-.032.688-.024 1.37-.042 2.062-.063l-.375-.594c.75-.336 1.494-.707 2.22-1.155 6.83-4.218 9.65-11.82 10.342-19.28.693-7.463-.39-15.725-2.687-24.907-4.592-18.366-14.277-40.386-28.125-62.782-13.848-22.396-29.212-40.93-43.594-53.25-7.19-6.16-14.108-10.812-21.094-13.53-3.492-1.36-7.256-2.246-11-2.282zM375.188 34c.148-.01.326-.01.53 0 .82.043 2.094.296 4.063 1.063 3.94 1.532 9.573 5.047 15.72 10.312 12.293 10.53 26.843 27.85 39.844 48.875 13 21.026 21.982 41.773 25.906 57.47 1.962 7.846 2.61 14.454 2.22 18.655-.39 4.2-1.468 5.066-1.564 5.125-.095.06-1.343.595-5.28-.938-3.94-1.532-9.542-5.047-15.688-10.312-12.294-10.53-26.874-27.85-39.875-48.875-13.002-21.026-21.983-41.773-25.907-57.47-1.962-7.846-2.577-14.454-2.187-18.655.39-4.2 1.435-5.035 1.53-5.094.036-.022.24-.125.688-.156zM187.155 302.875c7.386 19.413 1.56 36.125-10.094 46.75-13.57 12.373-35.423 16.472-58.468 1.156 4.427-8.25 11.1-16.105 20.22-23.217 11.695-9.123 27.59-17.28 48.342-24.688z",fill:"#fff","fill-opacity":"1"})))})),define("view/components/CharacterStatus",["require","exports","preact","view/style","view/elements/CharacterNameLabel","model/character","view/elements/ProgressBar","view/elements/StaticAnimDiv","db/items/index","view/icons/Sword","view/icons/RangedNormal","view/icons/Spear","view/icons/Hammer","view/icons/Wand","view/icons/Gun"],(function(e,t,i,r,o,n,l,s,d,c,m,h,u,p,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=a(o),l=a(l),s=a(s),c=a(c),m=a(m),h=a(h),u=a(u),p=a(p),g=a(g);let y=r.style("div",()=>({width:"528px"})),f=r.style("div",()=>({display:"flex",justifyContent:"flex-start","& > div":{marginRight:"8px"}})),v=r.style("div",()=>({background:r.colors.DARKGREY,display:"flex",justifyContent:"center",alignItems:"center",border:"2px solid "+r.colors.WHITE,width:"93",height:"93",cursor:"pointer",overflow:"hidden"})),b=r.style("div",()=>({width:"24px",height:"95px",display:"flex",flexDirection:"column",justifyContent:"flex-end"})),w=r.style("div",()=>({width:"40%",display:"flex",justifyContent:"flex-end",flexDirection:"column",alignItems:"flex-start"})),C=r.style("div",()=>({display:"flex",justifyContent:"flex-start","& > div":{marginRight:"8px"}})),S=r.style("div",e=>{var t;return{marginTop:e.short?"2px":"unset",width:"100%",border:e.short?"unset":"2px solid "+(null!==(t=e.borderColor)&&void 0!==t?t:r.colors.WHITE),borderBottom:e.short?"unset":"0px"}}),T=r.style("div",()=>({})),x=r.style("div",()=>({display:"flex",justifyContent:"flex-start",fontSize:"16px",pointerEvents:"none","& > label":{width:"50px"}})),E=(r.style("div",()=>({marginBottom:"2px"})),r.style("div",()=>({display:"flex",justifyContent:"flex-start",fontSize:"12px",pointerEvents:"none",color:r.colors.YELLOW,"& > label":{marginRight:"12px",textAlign:"left"}})));t.default=e=>{var t;let a=e.ch;return a?i.h(y,{style:e.style,id:"ch-status-"+(null===(t=e.ch)||void 0===t?void 0:t.name)},i.h(f,null,i.h(v,null,i.h(s.default,e.usePortrait?{style:{width:"128"},animName:a.name.toLowerCase()+"_portrait_f"}:{style:{width:"64"},animName:a.spriteBase.toLowerCase()+"_idle_down"})),e.hideWeapons?null:i.h(b,null,a.weaponEquipTypes.map((e,t)=>{let a=(e=>{var t;return null!==(t={[d.WeaponType.SWORD]:c.default,[d.WeaponType.BOW]:m.default,[d.WeaponType.SPEAR]:h.default,[d.WeaponType.HAMMER]:u.default,[d.WeaponType.GUN]:g.default,[d.WeaponType.WAND]:p.default}[e])&&void 0!==t?t:c.default})(e);return i.h(a,{color:"white",key:t})})),i.h(w,null,i.h(C,null,i.h(o.default,{id:"name-label-"+a.name},a.name),i.h("div",{style:{whiteSpace:"pre"}},"Level ",n.characterGetLevel(a),i.h(E,null,i.h("label",null,"LVL Pts"),null==a?void 0:a.experienceCurrency))),e.hideHp?null:i.h(i.Fragment,null,i.h(S,{short:!1,borderColor:r.colors.WHITE},i.h(l.default,{pct:n.characterGetResvPct(a),backgroundColor:r.colors.BLACK,color:r.colors.PURPLE,height:8,label:""})),i.h(S,{short:!1},i.h(l.default,{pct:n.characterGetHpPct(a),backgroundColor:r.colors.BLACK,color:r.colors.GREEN,height:20,label:"HP: "+a.hp})))),e.hideStats?null:i.h(i.Fragment,null,i.h(T,null,[{label:"POW",value:"POW"},{label:"ACC",value:"ACC"},{label:"FOR",value:"FOR"},{label:"CON",value:"CON"},{label:"RES",value:"RES"}].map(({label:e,value:t})=>i.h(x,{key:e},i.h("label",null,e)," ",t?n.characterGetStat(a,t):""))),i.h(T,null,[{label:"SPD",value:"SPD"},{label:"EVA",value:"EVA"},{label:"",value:""},{label:"MHP",value:"HP"},{label:"RESV",value:"RESV"}].map(({label:e,value:t})=>i.h(x,{key:e},i.h("label",null,e)," ",t?n.characterGetStat(a,t):""))))),e.hideExp?null:i.h(S,{short:!0,borderColor:r.colors.DARKBLUE},i.h(l.default,{pct:n.characterGetExperiencePct(a),backgroundColor:r.colors.BROWN,color:r.colors.YELLOW,height:6,label:""}))):i.h("div",null)}})),define("view/components/ModalSection/ModalSection",["require","exports","preact","controller/ui-actions","model/store","view/elements/DialogBox","view/elements/MenuBox","view/style","view/ui","controller/scene/scene-commands","controller/events","model/generics","view/elements/VerticalMenu","view/components/CharacterStatus","preact/hooks","view/components/UseItemDescription","view/elements/CharacterFollowerMenu"],(function(e,t,i,r,o,n,l,s,d,c,m,h,u,p,g,y,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConfirmModal=t.InfoModal=t.MAX_WIDTH=void 0,n=a(n),l=a(l),u=a(u),p=a(p),y=a(y),f=a(f),t.MAX_WIDTH="570px";let v=s.style("div",()=>({width:"100%",display:"flex",justifyContent:"center"})),b=e=>i.h(n.default,{title:"Tutorial",onClose:e.onClose,maxWidth:"500px"},i.h("p",null,"Welcome to the Regem Ludos Battle System!"),i.h("p",null,"Wait for the action bar to fill up, then initiate an attack by tapping the character portrait or button ",i.h("b",null,m.getBattleActionLabel(0)),". Characters may have multiple attacks, so keep tapping until they are all used up!"),i.h(v,null,i.h("img",{src:"res/img/tutorial-ada-waiting-ready.png",alt:"tutorial-image"}))),w=e=>i.h(n.default,{title:"Tutorial",onClose:e.onClose,maxWidth:"500px"},i.h("p",null,"At any time you can pause the game via the button in the top left or by pressing ",i.h("b",null,m.getPauseKeyLabel(),".")),i.h("p",null,"When the game is paused, you can see information about the currently selected actions for your party.")),C=e=>i.h(n.default,{title:"Tutorial",onClose:e.onClose,maxWidth:"500px"},i.h("p",null,"Ada currently has a ",i.h("b",null,"Swing")," action equipped with two attacks."),i.h(v,null,i.h("img",{src:"res/img/tutorial-training-swing.png",alt:"tutorial-image"})),i.h("p",null,"A ",i.h("b",null,"Swing")," action will cause Ada to jump to the character targeted by the yellow sword symbol and initiate an attack. This consumes the first attack."),i.h("p",null,"For a short time afterwards, the action button can be pressed again to consume the next attack."),i.h("p",null,"This can be repeated until all the attacks specified on the action are consumed.")),S=e=>i.h(n.default,{title:"Tutorial",onClose:e.onClose,maxWidth:"500px"},i.h("p",null,"STAGGER is an important mechanic in the Regem Ludos Arcade Battle System!"),i.h("p",null,"Below the HP bar of each character is a STAG gauge. This gage fills when the character is hit."),i.h("p",null,"If this gauge completely fills, then the character is STAGGERED"),i.h("p",null,"While STAGGERED, a character takes double damage and their action bar is reset.")),T=e=>i.h(n.default,{title:"Tutorial",onClose:e.onClose,maxWidth:"500px"},i.h("p",null,"Characters equipped with a ",i.h("b",null,"Swing")," action can only target characters in the first row. Only when characters in the first row have been defeated can a character target the back rows with a ",i.h("b",null,"Swing")," ","action."),i.h("p",null,"However, a character equipped with a ",i.h("b",null,"Shoot")," action can target any character in the battle."),i.h("p",null,"Characters with a ",i.h("b",null,"Shoot")," action will target the character indicated by the spinning, red circle. ",i.h("b",null,"Shoot")," actions typically inflict less damage, but are especially useful at chipping down enemies on the back line.")),x=e=>i.h(n.default,{title:"Tutorial",onClose:e.onClose,maxWidth:"500px"},i.h("p",null,"Some enemies are able to use a ",i.h("b",null,"Magic")," action. These abilities are usually very powerful and may also have a wide range of effects."),i.h("p",null,"To use a ",i.h("b",null,"Magic")," action, however, a character must prepare the action first by entering into a CASTING state. During this state, a character cannot act until the CASTING is complete, or that character is interrupted. When a character is interrupted, the spell is stopped and the character's action timer is reset."),i.h("p",null,"While a character is CASTING, they can be interrupted by taking damage from a character with a ",i.h("b",null," Swing ")," action. However, a ",i.h("b",null,"Ranged")," ","action does not interrupt a cast unless it otherwise states on the action description.")),E=e=>i.h(n.default,{title:"Tutorial",onClose:e.onClose,maxWidth:"500px"},i.h("p",null,"Some particularly difficult enemies have points of ",i.h("b",null," Armor"),". While an enemy has armor, any ",i.h("b",null,"Swing")," action will do zero damage to that enemy."),i.h("p",null,"There are two primary ways to remove ",i.h("b",null," Armor ")," from an enemy. The first is to hit two attacks simultaneously. This breaks one point of armor."),i.h("p",null,"The second is to use a ",i.h("b",null,"Swing")," action with the PIERCE attribute. A PIERCE ",i.h("b",null,"Swing")," action will immediately remove one point of armor when it hits."));t.InfoModal=e=>{let t="string"==typeof e.body?i.h("p",null,e.body):e.body;return i.h(n.default,{title:"Info",onClose:e.onClose,maxWidth:"500px"},t)},t.ConfirmModal=e=>{let t="string"==typeof e.body?i.h("p",null,e.body):e.body;return i.h(n.default,{title:"Confirm",onClose:e.onClose,onConfirm:e.onConfirm,maxWidth:"500px",danger:e.danger},t)};let A=s.style("div",e=>{var t,i;return{position:"relative",display:"flex",justifyContent:"space-between",alignItems:"center",height:"93px",background:null!==(t=e.color)&&void 0!==t?t:"unset",padding:null!==(i=e.padding)&&void 0!==i?i:"unset",boxSizing:"border-box",border:e.color?"2px solid "+s.colors.DARKGREEN:"unset"}}),_=e=>{let[t,a]=g.useState(null),r=h.getCurrentPlayer().party;return i.h(l.default,{title:"Select Party Member",onClose:e.onClose,closeButtonLabel:"Back "+m.getCancelKeyLabel(),isModal:!0,dark:!0},i.h("div",{style:{width:"600px"}},e.meta.itemNameForDescription?i.h(y.default,{itemName:e.meta.itemNameForDescription}):null,i.h(u.default,{title:"Party",open:!0,isInactive:!e.active,width:"600px",items:r.map(t=>{let a=r.filter(e.filter||(()=>!0)).includes(t);return{label:i.h(A,null,i.h(p.default,{ch:t,usePortrait:!1,style:{filter:a?"unset":"blur(1px) brightness(0.25) sepia(75%) invert(25%)"}}),a?null:i.h("div",{style:{position:"absolute",width:"100%",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",height:"106px"}},"Select Another Character")),value:t}}),onItemClickSound:"menu_select",onItemClick:async t=>{var i,o;e.onConfirm&&r.filter(e.filter||(()=>!0)).includes(t)?((null===(i=e.meta)||void 0===i?void 0:i.showDelayInfo)&&a(t),await e.onConfirm(t),(null===(o=e.meta)||void 0===o?void 0:o.showDelayInfo)&&a(null)):c.playSound("terminal_cancel")}})))},I=e=>i.h(f.default,{body:e.body,characters:e.meta.characters,onCharacterClick:t=>{e.onConfirm&&e.onConfirm(t)},onClose:e.onClose,isAll:e.meta.isAll});t.default=()=>{var e;let[a,n]=g.useState(!0),l=null===(e=d.getUiInterface())||void 0===e?void 0:e.appState.modal,s=null==l?void 0:l.onClose,c=null==l?void 0:l.onConfirm,m=()=>{r.hideSection(o.AppSection.Modal),setTimeout(()=>{s&&s()},1)},h=()=>{a&&(r.hideSection(o.AppSection.Modal),setTimeout(()=>{c&&c()},1))},u=null;switch(null==l?void 0:l.section){case o.ModalSection.TUTORIAL_ATTACK:u=i.h(b,{onClose:m});break;case o.ModalSection.TUTORIAL_PAUSING:u=i.h(w,{onClose:m});break;case o.ModalSection.TUTORIAL_ATTACK_AMOUNTS:u=i.h(C,{onClose:m});break;case o.ModalSection.TUTORIAL_STAGGER:u=i.h(S,{onClose:m});break;case o.ModalSection.TUTORIAL_BACK_ROW:u=i.h(T,{onClose:m});break;case o.ModalSection.TUTORIAL_MAGIC:u=i.h(x,{onClose:m});break;case o.ModalSection.TUTORIAL_ARMOR:u=i.h(E,{onClose:m});break;case o.ModalSection.INFO:u=i.h(t.InfoModal,{onClose:m,body:l.body});break;case o.ModalSection.CONFIRM:u=i.h(t.ConfirmModal,{onClose:m,onConfirm:h,body:l.body,danger:l.danger});break;case o.ModalSection.SELECT_PARTY_MEMBER:u=i.h(_,{body:l.body,active:a,onClose:m,onConfirm:async e=>{a&&(c?await c(e):r.hideSection(o.AppSection.Modal))},filter:l.filter,meta:l.meta});break;case o.ModalSection.SELECT_CHARACTER_FOLLOWER:u=i.h(I,{body:l.body,active:a,onClose:m,onConfirm:async e=>{a&&(c?await c(e):r.hideSection(o.AppSection.Modal))},filter:l.filter,meta:l.meta});break;default:u=i.h("div",null,"No Modal Specified.")}return u}})),define("view/components/ModalSection/index",["require","exports","view/components/ModalSection/ModalSection"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a(i).default}})})),define("view/components/SaveSection",["require","exports","preact","view/style","controller/ui-actions","model/store","view/elements/Card","controller/loop","controller/events","preact/hooks","view/ui","model/sound","controller/save-management","view/elements/VerticalMenu","view/elements/Button","view/hooks","view/components/SaveGameListItem"],(function(e,t,r,o,n,l,s,d,c,m,h,u,p,g,y,f,v){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s=i(s),g=a(g),y=i(y),v=a(v);let b=o.style("div",{position:"absolute",top:"0px",width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",background:"rgba(0, 0, 0, 0.5)"}),w=o.style("div",{display:"flex",justifyContent:"space-between",flexDirection:"column",alignItems:"center",height:"100%"}),C=o.style("div",{display:"flex",justifyContent:"center",padding:"8px"}),S=o.style("div",()=>({background:o.colors.DARKGREEN,border:"1px solid "+o.colors.WHITE,borderRadius:"26px",padding:"4px"}));t.default=()=>{let[e,t]=m.useState(p.loadSaveListFromLS()),[i,a]=m.useState(!1),o=e=>{console.log("DELETE GAME",e),u.playSoundName("menu_choice_open"),a(!0),n.showModal(l.ModalSection.CONFIRM,{onClose:()=>{a(!1)},onConfirm:()=>{u.playSoundName("menu_cancel"),p.deleteSave(e),n.showModal(l.ModalSection.INFO,{onClose:()=>{a(!1),t(p.loadSaveListFromLS())},body:"Save deleted!"})},danger:!0,body:"Are you sure you wish to delete this save file?"})},T=()=>{let e=h.getUiInterface().appState.save.onClose;u.playSoundName("menu_select"),e()};return f.useInputEventStack(e=>{c.isCancelKey(e.key)&&T()}),r.h(r.Fragment,null,r.h(b,null,r.h(s.default,{size:s.CardSize.LARGE},r.h(w,{id:"save-spacer"},r.h(g.default,{title:"Saves",width:"100%",open:!0,isInactive:i,items:e.map((e,t)=>({label:r.h(v.default,{save:e,i:t,handleDeleteClick:e=>o(e)}),value:t})).concat(e.length<4?[{label:r.h(S,null,"+ New Save"),value:e.length}]:[]),onItemClickSound:"menu_select",onItemClick:i=>{if(i>=e.length)return console.log("CREATE SAVE GAME"),u.playSoundName("menu_sparkle"),a(!0),p.saveGame(e.length),void n.showModal(l.ModalSection.INFO,{onClose:()=>{a(!1),t(p.loadSaveListFromLS())},body:"Save created!"});console.log("SAVE GAME",i),u.playSoundName("menu_choice_open"),a(!0),n.showModal(l.ModalSection.CONFIRM,{onClose:()=>{a(!1)},onConfirm:()=>{u.playSoundName("menu_sparkle"),p.saveGame(i),n.showModal(l.ModalSection.INFO,{onClose:()=>{a(!1),t(p.loadSaveListFromLS()),d.pause()},body:"Save created!"})},body:"Are you sure you wish to overwrite this save file?"})},onAuxClickSound:"menu_select",onAuxClick:o}),r.h(C,null,r.h(y.default,{type:y.ButtonType.PRIMARY,onClick:T},"Close ",c.getCancelKeyLabel()))))))}})),define("view/components/MenuSection/MenuItems",["require","exports","preact","view/style","view/elements/VerticalMenu","model/player","preact/hooks","view/components/ItemDescription","controller/events","view/icons/Purse","view/icons/Flower","view/icons/Sword","view/icons/Potion","view/icons/Arrow","model/sound","db/items/index","view/hooks","utils","model/item","view/icons/index"],(function(e,t,i,r,o,n,l,s,d,c,m,h,u,p,g,y,f,v,b,w){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=a(o),s=a(s),c=a(c),m=a(m),h=a(h),u=a(u),p=a(p);let C=r.style("div",{display:"flex",justifyContent:"space-between",alignItems:"flex-start",width:"100%",zIndex:"1",marginTop:"16px"}),S=r.style("div",{width:"50%",maxHeight:"628px"}),T=r.style("div",{width:"50%"}),x=r.style("div",{width:"100%",height:"508px",border:"1px solid "+r.colors.WHITE,background:r.colors.DARKGREY_ALT}),E=r.style("div",{border:"1px solid "+r.colors.WHITE,background:r.colors.DARKGREY_ALT,height:"89px"}),A=r.style("div",{textAlign:"center",color:r.colors.WHITE,fontSize:"16px"}),_=r.style("div",{display:"flex",justifyContent:"center"}),I=r.style("div",e=>({margin:"2px",boxSizing:"border-box",border:"1px solid "+r.colors.WHITE,background:e.highlighted?r.colors.DARKBLUE:r.colors.DARKGREY,padding:"4px",width:"99px",cursor:"pointer","&:hover":{borderColor:r.colors.YELLOW}})),k=r.keyframes({"0%":{opacity:"1"},"50%":{opacity:"0"},"100%":{opacity:"1"}}),R=r.style("div",e=>({width:"16px",transform:e.left?"rotate(180deg)":"unset",marginTop:"24px",animation:k+" 750ms linear infinite"}));t.default=e=>{let[t,a]=l.useState(1),[k,P]=l.useState(!0),O=e.player.backpack.filter(e=>{switch(t){case 1:return e.type===y.ItemType.USABLE||e.type===y.ItemType.USABLE_BATTLE||e.type===y.ItemType.USABLE_OVERWORLD;case 2:return[y.ItemType.WEAPON,y.ItemType.ARMOR,y.ItemType.ACCESSORY].includes(e.type);case 3:return e.type===y.ItemType.QUEST;default:return!0}}).sort(v.sortItems),M=[];for(let e=0;e<O.length;e++){let t=O[e];M.find(e=>e.name===t.name)||M.push(t)}let[L,B]=l.useState(0),N=M[L],D=e=>{g.playSoundName("menu_select2"),a(e),B(0),P(!1),setTimeout(()=>{P(!0)},20)},G=async()=>{b.itemIsCurrentlyUsable(N)&&N.onUse&&(P(!1),await N.onUse(N),P(!0))},F=!0;f.useKeyboardEventListener(e=>{if(k)if("ArrowLeft"===e.key)D((t-1+4)%4);else if("ArrowRight"===e.key)D((t+1)%4);else if(d.isAuxKey(e.key)){let e=document.getElementById("item-description-container");e&&(e.scrollTop=F?9999:0,F=!F)}},[t,k]);let W=(null==N?void 0:N.modifiers)||{},U=[];for(let e in W){let t=W[e];U.push(`${e.toUpperCase()}: ${t>0?"+":""}${t}`)}let H=(null==N?void 0:N.skills)||[],j=[];for(let e in H)j.push(H[e].name);let K=[{label:"All",icon:c.default},{label:"Consumable",icon:u.default},{label:"Equipment",icon:h.default},{label:"Quest",icon:m.default}];return i.h(C,null,i.h(S,null,i.h(E,null,i.h(A,null,i.h("div",{style:{padding:"8px"}},"Press Left/Right Arrows to change filter."),i.h(_,null,K.map((e,a)=>i.h(I,{key:e.label+a,highlighted:a===t,onClick:()=>{D(a)}},a===t?i.h("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",height:"0px",position:"relative",alignItems:"center"}},i.h(R,{left:!0},i.h(p.default,{color:r.colors.WHITE})),i.h(R,null,i.h(p.default,{color:r.colors.WHITE}))):null,i.h("div",{style:{width:"22px",margin:"auto"}},i.h(e.icon,{color:r.colors.WHITE})),e.label))))),i.h(o.default,{width:"100%",maxHeight:"409px",open:!0,isInactive:!k||e.isInactive,hideTitle:!0,startingIndex:0,itemHeight:48,items:M.map((t,a)=>{var o;let l=n.playerGetItemCount(e.player,t.name),s=w.getIcon(null!==(o=t.icon)&&void 0!==o?o:"help");return{label:i.h("div",{style:{textAlign:"left",display:"flex",alignItems:"center",padding:"4px",textDecoration:b.itemIsCurrentlyUsable(t)?"underline":"unset",background:a===L?r.colors.DARKGREEN:"unset"}},i.h("div",{style:{width:"24px",marginRight:"16px",marginLeft:"32px"}},i.h(s,{color:r.colors.WHITE})),t.label," ",l>1?`(${l})`:""),value:a}}),onItemClickSound:"menu_select",onItemClick:()=>{G()},onItemHover:e=>{B(e)}})),i.h(T,null,i.h(x,null,i.h(s.default,{item:N,showName:!0,onUse:()=>{g.playSoundName("menu_select"),G()}}))))}})),define("view/components/MenuSection/MenuJournal",["require","exports","preact","view/style","view/elements/VerticalMenu","preact/hooks","model/quest","view/icons/index","model/sound","controller/events"],(function(e,t,i,r,o,n,l,s,d,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=a(o);let m=r.style("div",{display:"flex",justifyContent:"space-between",alignItems:"flex-start",width:"100%",zIndex:"1"}),h=r.style("div",{width:"50%",maxHeight:"628px",zIndex:"1"}),u=r.style("div",{width:"50%"}),p=r.style("div",{width:"100%",height:"475px",zIndex:"1"}),g=r.style("div",{border:"1px solid "+r.colors.WHITE,background:r.colors.DARKGREY,textTransform:"uppercase",padding:"16px",textAlign:"center",marginBottom:"2px"}),y=r.style("div",{border:"1px solid "+r.colors.WHITE,background:r.colors.DARKRED,padding:"16px",height:"72px",boxSizing:"border-box"}),f=r.style("div",{border:"1px solid "+r.colors.WHITE,background:r.colors.DARKGREY_ALT,margin:"2px 0px",padding:"16px",height:"calc(100% - 128px)"}),v=r.keyframes({"0%":{transform:"translateY(-1px)"},"20%":{transform:"translateY(-3px)"},"100%":{transform:"translateY(-1px)"}}),b=r.style("div",{animation:v+" 850ms linear infinite",width:"24px",height:"24px",position:"absolute",right:"8px",top:"0px"});t.default=e=>{var t,a,v,w,C;let S=e.scene,[T,x]=n.useState(l.getLastUpdatedQuests()),E=l.getAllActiveQuests(S).concat(l.getAllCompletedQuests(S)).sort((e,t)=>{let i=l.questIsCompleted(S,e),a=l.questIsCompleted(S,t);return"Main"===e.name?-1:"Main"===t.name?1:i&&a?e.name<t.name?-1:1:i?1:a||e.name<t.name?-1:1}),A=E.findIndex(e=>e.name===T[0]),[_,I]=n.useState(A>-1?A:0),k=E[_],R=k?l.getCurrentQuestStep(S,null==k?void 0:k.name):void 0,P=!!k&&l.questIsCompleted(S,k);return i.h("div",{style:{width:"100%"}},i.h("p",{style:{textAlign:"center"}},"Press ",c.getConfirmKeyLabel()," to mark read."),i.h(m,null,i.h(h,null,i.h(p,null,i.h(g,null,null!==(t=null==k?void 0:k.label)&&void 0!==t?t:i.h("span",{style:{color:r.colors.GREY}},"(No quest selected.)")),i.h(y,null,null!==(a=null==k?void 0:k.summary)&&void 0!==a?a:""),i.h(f,null,P?i.h("p",null,"You have completed this quest."):i.h(i.Fragment,null,i.h("p",{style:{fontSize:"20px",marginTop:"0px"}},null!==(v=null==R?void 0:R.label)&&void 0!==v?v:""),i.h("p",null,null!==(w=null==R?void 0:R.description)&&void 0!==w?w:"")),null===(C=null==k?void 0:k.steps)||void 0===C?void 0:C.map((e,t)=>{var a;return!P&&t>=(null!==(a=null==R?void 0:R.i)&&void 0!==a?a:0)?i.h(i.Fragment,null):i.h("p",{key:e.completedScriptKey+t,style:{textDecoration:"line-through",color:r.colors.LIGHTGREY}},e.label)})))),i.h(u,null,i.h(o.default,{width:"100%",maxHeight:parseInt("628px")-163+"px",open:!0,isInactive:e.isInactive,title:"Quest Name",items:E.map((e,t)=>{let a=l.questIsCompleted(S,e),o=s.getIcon("star");return{label:i.h("div",{style:{color:a?r.colors.LIGHTGREY:"",position:"relative"}},e.label," ",l.questIsCompleted(S,e)?" (completed)":"",T.includes(e.name)?i.h(b,null,i.h(o,{color:r.colors.YELLOW})):null),value:t}}),onItemClickSound:"menu_select",onItemClick:e=>{I(e);let t=T.indexOf(E[e].name);if(t>-1){d.playSoundName("terminal_beep");let e=T.slice();e.splice(t,1),x(e),l.resetLastUpdatedQuests(e)}},onItemHover:e=>{I(e)}}))))}})),define("view/elements/HorizontalMenu",["require","exports","preact","preact/hooks","view/style","view/elements/Cursor","model/sound","controller/events","view/hooks","view/icons/Arrow"],(function(e,t,i,r,o,n,l,s,d,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=a(n),c=a(c);let m=o.style("div",()=>({border:"1px solid "+o.colors.WHITE})),h=o.style("div",e=>{var t;return{border:"1px solid "+o.colors.WHITE,margin:"2px",display:"flex",justifyItems:null!==(t=e.flexAlign)&&void 0!==t?t:"flex-start"}}),u=o.style("div",e=>({position:"relative",cursor:"pointer",border:"1px solid "+o.colors.WHITE,margin:"2px","&:hover":{borderColor:o.colors.YELLOW}})),p=o.keyframes({"0%":{opacity:"1"},"50%":{opacity:"0"},"100%":{opacity:"1"}}),g=o.style("div",e=>({position:"absolute",top:"0px",left:e.left?"0px":"unset",right:e.left?"unset":"0px",width:"16px",transform:e.left?"rotate(180deg)":"unset",marginTop:"24px",animation:p+" 750ms linear infinite"}));t.default=function(e){var t;let[{cursorIndex:a,isSelecting:p},y]=r.useReducer((t,i)=>{var a;let r=Object.assign({},t);switch(i.type){case"CursorNext":e.onItemHoverSound&&l.playSoundName(e.onItemHoverSound),r.cursorIndex=(r.cursorIndex+1)%e.items.length,e.onItemHover&&e.onItemHover(e.items[r.cursorIndex].value,r.cursorIndex);break;case"CursorPrev":e.onItemHoverSound&&l.playSoundName(e.onItemHoverSound),r.cursorIndex=(r.cursorIndex+1+e.items.length)%e.items.length,e.onItemHover&&e.onItemHover(e.items[r.cursorIndex].value,r.cursorIndex);break;case"SetCursor":r.cursorIndex=null!==(a=i.payload)&&void 0!==a?a:0;break;case"Confirm":{let t=e.items[r.cursorIndex];y({type:"SetSelecting",payload:!0}),e.onItemClickSound&&l.playSoundName(e.onItemClickSound),setTimeout(()=>{y({type:"SetSelecting",payload:!1}),e.onItemClick&&e.onItemClick(t.value,r.cursorIndex)},100);break}case"Cancel":e.onCloseSound&&l.playSoundName(e.onCloseSound),e.onClose&&e.onClose()}return r},{cursorIndex:null!==(t=e.startingCursorIndex)&&void 0!==t?t:0,isSelecting:!1});return d.useKeyboardEventListener(t=>{if(!e.isInactive&&!p)if(s.isConfirmKey(t.key)){if(e.disableConfirmButtonClick)return;y({type:"Confirm"})}else s.isCancelKey(t.key)?y({type:"Cancel"}):s.isLeftKey(t.code)?y({type:"CursorPrev"}):s.isRightKey(t.code)&&y({type:"CursorNext"})},[e.isInactive,p,e.disableConfirmButtonClick]),i.h(m,{id:"horizontal-menu-"+e.title,style:e.style},i.h(h,{flexAlign:e.flexAlign},e.items.map((t,r)=>i.h(u,{style:{background:e.itemBackgroundColor},id:("object"==typeof t.value?t.value.name:t)+(r+""),key:("object"==typeof t.value?t.value.name:t)+(r+""),isInactive:e.isInactive,onClick:()=>{e.isInactive||p||(y({type:"SetCursor",payload:r}),setTimeout(()=>{y({type:"Confirm"})},1))},onMouseOver:()=>{e.isInactive||p||e.disableMouseHover||y({type:"SetCursor",payload:r})}},"function"==typeof t.label?t.label({cursorIndex:a,i:r}):t.label,a===r?e.useArrowIndicator?i.h(i.Fragment,null,i.h(g,{left:!0},i.h(c.default,{color:o.colors.WHITE})),i.h(g,null,i.h(c.default,{color:o.colors.WHITE}))):i.h(n.default,{offsetX:0,offsetY:0,angle:75,visibility:e.isInactive?"hidden":"unset"}):null))))}})),define("view/components/MenuSection/MenuEquipment",["require","exports","preact","view/style","view/elements/VerticalMenu","preact/hooks","view/elements/CharacterNameLabel","model/character","view/elements/StaticAnimDiv","db/items/index","view/hooks","view/components/ItemDescription","view/elements/HorizontalMenu","view/icons/index"],(function(e,t,i,r,o,n,l,s,d,c,m,h,u,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=a(o),l=a(l),d=a(d),h=a(h),u=a(u);let g=r.style("div",{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"center",width:"100%"}),y=r.style("div",{display:"flex",justifyContent:"space-between",alignItems:"flex-start",width:"calc(100% + 2px)",margin:"8px"}),f=(r.style("div",{width:"33%"}),r.style("div",e=>({background:e.selected?r.colors.DARKBLUE:r.colors.BLACK,borderRadius:e.selected?"80px 0px 80px 0px":"0px",borderTopRightRadius:"0px",width:"180px",display:"flex",justifyContent:"flex-start",alignItems:"center",transition:"border-radius 300ms"}))),v=r.style("div",{}),b=r.style("div",{width:"45%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between"}),w=r.style("div",{maxHeight:"194px"}),C=r.style("div",e=>({background:e.selected?r.colors.DARKBLUE:r.colors.BLACK,textAlign:"left",paddingLeft:"10px"})),S=r.style("div",{border:"1px solid "+r.colors.WHITE,background:r.colors.BLACK,width:"22.5%",boxSizing:"border-box",padding:"8px",marginRight:"2px"}),T=r.style("div",{padding:"2px",display:"flex",justifyContent:"space-around",alignItems:"center","& > span":{width:"30px"},"& > label":{textAlign:"center",width:"32px"}}),x=r.style("div",{width:"55%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between",position:"relative"}),E=e=>{let t=e.ch;return t?i.h(S,null,e.stats.map(a=>i.h(T,{key:a},i.h("span",null,a.slice(0,4)),i.h("label",null,s.characterGetStat(t,a)),(t=>{var a,o;let n=null===(a=e.hoverItem)||void 0===a?void 0:a.modifiers,l=null==n?void 0:n[t],d=!1;if(e.hoverItem&&e.ch&&s.characterItemIsEquipped(e.ch,e.hoverItem)&&void 0!==l)d=!0;else{let i=null===(o=e.replaceItem)||void 0===o?void 0:o.modifiers,a=null==i?void 0:i[t];void 0!==a&&(l=(null!=l?l:0)-a)}return void 0===l||0===l?i.h("div",{style:{width:"38px"}}):l>0?i.h("div",{style:{width:"38px",color:r.colors.BLUE}},d?`(+${l})`:"+"+l):l<0?i.h("div",{style:{width:"38px",color:r.colors.RED}},d?`(${l})`:""+l):void 0})(a)))):i.h(S,null)},A=r.style("div",()=>({border:"1px solid "+r.colors.WHITE,width:"55%",height:"145px",overflowY:"auto",background:r.colors.BLACK})),_=r.style("div",()=>({width:"24px",position:"absolute",right:"14px",top:"16px"})),I=r.style("div",()=>({width:"24px",position:"absolute",left:"50px",top:"5px"})),k=e=>{switch(e){case R.ACCESSORY:return"accessory1";case R.ACCESSORY2:return"accessory2";default:return""}};var R;!function(e){e.ARMOR="Armor",e.ACCESSORY="Accessory",e.ACCESSORY2="Accessory 2",e.WEAPON="Weapon"}(R||(R={}));let P=(e,t,i)=>e.backpack.filter(a=>{var r;if(((e,t,i)=>{for(let a=0;a<t.partyStorage.length;a++){let r=t.partyStorage[a];if(r!==i&&s.characterItemIsEquipped(r,e))return!0}return!1})(a,e,t))return!1;if(i===R.WEAPON){let e=null!==(r=t.weaponEquipTypes)&&void 0!==r?r:[];return a.type===c.ItemType.WEAPON&&e.includes(a.weaponType)}return i===R.ARMOR?a.type===c.ItemType.ARMOR:!![R.ACCESSORY,R.ACCESSORY2].includes(i)&&a.type===c.ItemType.ACCESSORY&&!((e,t,i)=>{let a=[R.ACCESSORY,R.ACCESSORY2],r=a.indexOf(i);r>-1&&a.splice(r,1);for(let i=0;i<a.length;i++)if(t.equipment[k(a[i])]===e)return!0;return!1})(a,t,i)});t.default=e=>{let t,[a,c]=n.useReducer((e,t)=>{let i=Object.assign({},e);return"SET_CHARACTER"===t.type?i.selectedCharacter=t.payload:"SET_EQUIPMENT_TYPE"===t.type?i.selectedEquipmentType=t.payload:"SET_HOVERED_ITEM"===t.type?i.hoveredItem=t.payload:"SET_HOVER_EQUIPMENT_TYPE"===t.type&&(i.hoveredEquipmentType=t.payload),i},{selectedCharacter:e.player.party[0],hoveredEquipmentType:R.WEAPON}),[S,T]=n.useState(!1),O=()=>{T(!S)},[M,L]=n.useState(!0),B=(m.useReRender(),e.player.party),N=a.selectedCharacter&&!a.selectedEquipmentType,D=!(!a.selectedCharacter||!a.selectedEquipmentType);a.selectedEquipmentType&&a.selectedCharacter&&(t=a.selectedCharacter.equipment[k(a.selectedEquipmentType)]);let G=P(e.player,a.selectedCharacter,a.hoveredEquipmentType);n.useEffect(()=>{1!==G.length||a.hoveredItem||c({type:"SET_HOVERED_ITEM",payload:G[0]})});let F=t=>{let i=G.indexOf(a.hoveredItem);c({type:"SET_CHARACTER",payload:t});let r=P(e.player,t,a.hoveredEquipmentType),o=r.indexOf(a.hoveredItem);r.includes(a.hoveredItem)&&i===o||(c({type:"SET_HOVERED_ITEM",payload:G[0]}),O())};return i.h(g,null,i.h("div",{style:{padding:"8px"}},"Press Left/Right Arrows to change character."),i.h(u.default,{style:{width:"100%",background:r.colors.BLACK,zIndex:"2"},isInactive:!1,title:"Party Member",items:B.map(e=>({label:i.h(f,{selected:a.selectedCharacter===e},i.h(v,null,i.h(d.default,{style:{width:"64"},animName:e.spriteBase.toLowerCase()+"_idle_down"})),i.h(l.default,{style:{fontSize:"14px"}},e.name)),value:e})),onItemClickSound:"menu_select2",onItemClick:F,onItemHoverSound:"menu_select2",onItemHover:F,disableMouseHover:!0,disableConfirmButtonClick:!0,useArrowIndicator:!0}),i.h(y,null,i.h(b,null,i.h(w,null,i.h(o.default,{title:"Equipment",width:"100%",height:"268px",open:!0,isCursorSelectInactive:!N,isInactive:!a.selectedCharacter,hideCloseBox:!0,items:[R.WEAPON,R.ARMOR,R.ACCESSORY,R.ACCESSORY2].map(e=>{var t,o,n,l,d,c,m,h,u,g,y,f,v,b,w,S;let T="(none equipped)",x=r.colors.GREY;switch(e){case R.WEAPON:T=null!==(l=null===(n=null===(o=null===(t=a.selectedCharacter)||void 0===t?void 0:t.equipment)||void 0===o?void 0:o.weapon)||void 0===n?void 0:n.label)&&void 0!==l?l:T;break;case R.ARMOR:T=null!==(h=null===(m=null===(c=null===(d=a.selectedCharacter)||void 0===d?void 0:d.equipment)||void 0===c?void 0:c.armor)||void 0===m?void 0:m.label)&&void 0!==h?h:T;break;case R.ACCESSORY:T=null!==(f=null===(y=null===(g=null===(u=a.selectedCharacter)||void 0===u?void 0:u.equipment)||void 0===g?void 0:g.accessory1)||void 0===y?void 0:y.label)&&void 0!==f?f:T;break;case R.ACCESSORY2:T=null!==(S=null===(w=null===(b=null===(v=a.selectedCharacter)||void 0===v?void 0:v.equipment)||void 0===b?void 0:b.accessory2)||void 0===w?void 0:w.label)&&void 0!==S?S:T}"(none equipped)"!==T&&(x=r.colors.YELLOW);let E=s.characterGetEquippedItem(a.selectedCharacter,e),A=(null==E?void 0:E.icon)?p.getIcon(E.icon):null;return{label:i.h(C,{selected:a.selectedEquipmentType===e},i.h("div",null,i.h("b",null,e)),i.h("div",{style:{color:x,visibility:a.selectedCharacter?"visible":"hidden"}},T),i.h(_,null,A?i.h(A,{color:r.colors.WHITE}):null)),value:e}}),onItemClickSound:"menu_select",onItemClick:e=>{G.length&&(c({type:"SET_EQUIPMENT_TYPE",payload:e}),c({type:"SET_HOVERED_ITEM",payload:void 0}),O())},onItemHover:e=>{c({type:"SET_HOVER_EQUIPMENT_TYPE",payload:e});let t=s.characterGetEquippedItem(a.selectedCharacter,e);c(t?{type:"SET_HOVERED_ITEM",payload:t}:{type:"SET_HOVERED_ITEM",payload:void 0})},onClose:()=>{e.onClose()},backgroundColor:r.colors.BLACK}))),i.h(x,null,i.h(o.default,{title:"Items",width:"100%",height:"268px",maxHeight:"226px",open:!0,resetCursor:S,isCursorSelectInactive:!D,items:G.map(e=>{let t=(null==e?void 0:e.icon)?p.getIcon(e.icon):null;return{label:i.h("div",{style:{textAlign:"left",background:a.selectedCharacter&&s.characterItemIsEquipped(a.selectedCharacter,e)?r.colors.DARKGREEN:"unset"}},i.h(I,null,t?i.h(t,{color:r.colors.WHITE}):null),i.h("div",{style:{marginLeft:"calc(26px + 48px)"}},e.label)),value:e}}),onItemClickSound:"menu_select2",onItemClick:e=>{let t;a.hoveredEquipmentType===R.ACCESSORY?t=0:a.hoveredEquipmentType===R.ACCESSORY2&&(t=1),s.characterItemIsEquipped(a.selectedCharacter,e)?s.characterUnEquipItem(a.selectedCharacter,e,t):s.characterEquipItem(a.selectedCharacter,e,t),c({type:"SET_HOVERED_ITEM",payload:e})},onItemHover:e=>{c({type:"SET_HOVERED_ITEM",payload:e})},hideCloseBox:!0,resetIfTooLong:!0,onClose:()=>{c({type:"SET_EQUIPMENT_TYPE",payload:void 0}),c({type:"SET_HOVERED_ITEM",payload:void 0})},onCloseSound:"menu_choice_close"}))),i.h("div",{style:{width:"calc(100% + 2px)",display:"flex",justifyContent:"flex-start"}},i.h(E,{hoverItem:a.hoveredItem,replaceItem:t,ch:a.selectedCharacter,stats:["HP","STAGGER","RESV","EVA","ACC"]}),i.h(E,{hoverItem:a.hoveredItem,replaceItem:t,ch:a.selectedCharacter,stats:["POW","FOR","CON","RES","SPD"]}),i.h(A,null,i.h(h.default,{item:a.hoveredItem,disableTitle:!0}))))}})),define("view/components/MenuSection/MenuPositions",["require","exports","preact","view/style","view/elements/VerticalMenu","model/player","preact/hooks","view/elements/CharacterNameLabel","model/character","model/battle-character","view/elements/AnimDiv","controller/events"],(function(e,t,i,r,o,n,l,s,d,c,m,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=a(o),s=a(s),m=a(m);let u=r.style("div",{width:"800px"}),p=r.style("div",()=>({height:"225px",display:"flex",justifyContent:"center",alignItems:"center",background:r.colors.DARKGREEN,border:"1px solid "+r.colors.WHITE,marginBottom:"8px"})),g=r.style("div",()=>({width:"400px",height:"200px",border:"1px solid "+r.colors.GREEN})),y=r.style("div",()=>({width:"100%",boxSizing:"border-box",height:"100px",display:"flex",justifyContent:"space-between",alignItems:"center",flexDirection:"row-reverse"})),f=r.style("div",()=>({position:"relative",background:r.colors.DARKGREY,width:"100px",height:"100%",border:"1px solid "+r.colors.GREEN,textAlign:"center"})),v=r.style("div",()=>({display:"flex",justifyContent:"space-around"})),b=r.style("div",e=>({background:e.selected?r.colors.DARKBLUE:r.colors.BLACK,borderRadius:"80px 0px 80px 0px",borderTopRightRadius:"0px",padding:e.selected?"8px":"unset",marginBottom:e.selected?"2px":"unset"})),w=(e,t,a)=>{let o=[h.getBattleActionLabel(0),h.getBattleActionLabel(2),h.getBattleActionLabel(4)],n=[h.getBattleActionLabel(1),h.getBattleActionLabel(3),h.getBattleActionLabel(5)];return i.h(f,{key:e?e.ch.name:t},i.h("div",{style:{color:r.colors.YELLOW,position:"absolute",left:"2",top:"0"}},["Front","Middle","Back"][t]),i.h("div",{style:{position:"absolute",right:"2",bottom:"0"}},(0===a?o:n)[t]),i.h("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"}},e?i.h(m.default,{animName:d.characterGetAnimKey(e.ch),renderLoopId:e.ch.name+"-menu-party",scale:2}):null))},C=(e,t)=>e.map(e=>Object.assign({},e)).map(e=>{let i=c.battleCharacterCreateAlly(e,{position:n.playerGetBattlePosition(t,e)});return d.characterSetFacing(i.ch,d.Facing.RIGHT),c.battleCharacterSetAnimationIdle(i),i});t.default=e=>{var t,a,n,d,c,m;let h=e.player.party,[f,S]=l.useState(-1),[T,x]=l.useState(C(h,e.player)),E=[null!==(t=T[0])&&void 0!==t?t:null,null!==(a=T[2])&&void 0!==a?a:null,null!==(n=T[4])&&void 0!==n?n:null],A=[null!==(d=T[1])&&void 0!==d?d:null,null!==(c=T[3])&&void 0!==c?c:null,null!==(m=T[5])&&void 0!==m?m:null],_=f>=0;return i.h(u,null,i.h("p",null,"The order of your party members determines their formation in battle."),i.h("p",null,"Melee attacks can only target Characters in the front. All positions are targetable by ranged or wand attacks."),i.h(p,null,i.h(g,null,i.h(y,null,E.map((e,t)=>w(e,t,0))),i.h(y,null,A.map((e,t)=>w(e,t,1))))),i.h("p",{style:{textAlign:"center",color:r.colors.YELLOW}},_?"Select party member with whom to swap positions.":"Select a character who's position should be changed."),i.h(v,null,i.h(o.default,{width:"325px",maxHeight:"325px",height:"100%",open:!0,isCursorSelectInactive:_,title:"Party Member",items:h.map((e,t)=>({label:i.h(b,{selected:t===f},t===f?e.name.toUpperCase():i.h(s.default,null,e.name)),value:t})),onItemClickSound:"menu_select",onItemClick:e=>{S(e)},hideCloseBox:!0,onClose:()=>{e.onClose()}}),i.h(o.default,{width:"325px",maxHeight:"325px",height:"100%",open:!0,isInactive:!_,style:{filter:_?"unset":"brightness(50%)"},title:"Swap",items:h.map((e,t)=>({label:i.h(b,{selected:!1},i.h(s.default,null,e.name)),value:t})),onItemClickSound:"menu_select2",onItemClick:t=>{((t,i)=>{if(t!==i){let a=e.player.party[t];e.player.party[t]=e.player.party[i],e.player.party[i]=a,e.player.battlePositions=[...e.player.party]}S(-1),x(C(h,e.player))})(f,t)},hideCloseBox:!0,onCloseSound:"menu_select2",onClose:()=>{S(-1)}})))}})),define("view/components/MenuSection/MenuStatus",["require","exports","preact","view/elements/VerticalMenu","view/style","view/components/CharacterStatus"],(function(e,t,i,r,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=a(r),n=a(n);let l=o.style("div",{width:"800px"}),s=o.style("div",e=>{var t,i;return{display:"flex",justifyContent:"space-between",alignItems:"center",height:"93px",background:null!==(t=e.color)&&void 0!==t?t:"unset",padding:null!==(i=e.padding)&&void 0!==i?i:"unset",boxSizing:"border-box",border:e.color?"2px solid "+o.colors.DARKGREEN:"unset"}});t.default=e=>e.player?i.h(l,null,i.h(r.default,{title:"Party",width:"100%",open:!0,hideCloseBox:!0,backgroundColor:o.colors.BLACK,items:e.player.party.map(e=>({label:i.h(s,null,e?i.h(n.default,{ch:e,usePortrait:!1}):null),value:e})),onItemClickSound:"menu_select",onItemClick:()=>{}})):i.h("div",null)})),define("view/components/MenuSection/MenuMain",["require","exports","preact","view/elements/Card","view/style","view/ui","view/elements/VerticalMenu","view/elements/Button","model/sound","model/generics","preact/hooks","view/elements/MenuBox","controller/events","view/components/MenuSection/MenuItems","view/components/MenuSection/MenuJournal","view/components/MenuSection/MenuEquipment","view/components/MenuSection/MenuPositions","view/components/CharacterStatus","view/components/MenuSection/MenuLoad","view/components/MenuSection/MenuStatus"],(function(e,t,r,o,n,l,s,d,c,m,h,u,p,g,y,f,v,b,w,C){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=i(o),s=a(s),d=i(d),u=a(u),g=a(g),y=a(y),f=a(f),v=a(v),b=a(b),w=a(w),C=a(C);let S=n.style("div",{position:"absolute",top:"0px",width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",background:"rgba(0, 0, 0, 0.5)"}),T=n.style("div",{display:"flex",justifyContent:"center",padding:"8px"}),x=n.style("div",{display:"flex",justifyContent:"space-between",alignItems:"flex-start",backgroundColor:n.colors.BGGREY,position:"relative"}),E=n.style("div",()=>({position:"absolute",left:"0",top:"0",width:"100%",height:"100%",opacity:"0.04",backgroundImage:"url(res/bg/flowers_menu_bg.png)",zIndex:0,pointerEvents:"none"})),A=n.style("div",e=>{var t;return{display:"flex",justifyContent:"space-between",alignItems:"center",height:"93px",padding:null!==(t=e.padding)&&void 0!==t?t:"unset",boxSizing:"border-box",border:e.color?"2px solid "+n.colors.DARKGREEN:"unset"}}),_=n.style("div",e=>({background:e.active?n.colors.BLUE:"unset"})),I=n.style("div",{border:"1px solid "+n.colors.WHITE,margin:"2px",padding:"8px",textAlign:"center"}),k=n.style("div",{display:"flex",justifyContent:"flex-end",flexDirection:"column",height:"247px",boxSizing:"border-box"}),R=n.style("div",{background:n.colors.DARKRED,border:"1px solid "+n.colors.WHITE,margin:"-2px 2px",padding:"8px"}),P=n.style("div",{display:"flex",justifyContent:"flex-start","& > div":{marginRight:"16px",width:"80px"}}),O=()=>r.h("div",null,(new Date).toISOString());var M;!function(e){e[e.ITEMS=0]="ITEMS",e[e.EQUIPMENT=1]="EQUIPMENT",e[e.STATUS=2]="STATUS",e[e.PARTY=3]="PARTY",e[e.JOURNAL=4]="JOURNAL",e[e.LOAD=5]="LOAD",e[e.QUIT=6]="QUIT"}(M||(M={})),t.default=()=>{let[e,t]=h.useState(M.ITEMS),[i,a]=h.useState(!0),[n,L]=h.useState(!1),B=()=>{L(!0),setTimeout(()=>{L(!1);let e=l.getUiInterface().appState.menu.onClose;c.playSoundName("menu_choice_close"),e()},100)};h.useEffect(()=>{let e=document.getElementById("menu-main");e&&(e.style.transform="scale(1)")},[]);let N=m.getCurrentPlayer(),D=[...N.party,null,null,null,null].slice(0,5);return r.h(S,null,r.h(o.default,{id:"menu-main",size:o.CardSize.XLARGE,style:{transform:"scale(0)",transition:"opacity 100ms, transform 100ms"}},r.h(x,{id:"menu-inner-root"},r.h(E,null),r.h(s.default,{title:"Party",width:"60%",open:!0,isInactive:!0,transparentBg:!0,backgroundColor:"linear-gradient(90deg, #2E3740 0%, rgba(0,0,0,0) 100%)",items:D.map(e=>({label:r.h(A,null,e?r.h(b.default,{ch:e,usePortrait:!0,hideStats:!0,style:{filter:e.hp<=0?"sepia(75%) invert(25%) brightness(0.5)":"unset"}}):null),value:e})),onItemClickSound:"menu_select",onItemClick:()=>{},onClose:()=>{B()}}),r.h("div",{style:{width:"40%"}},r.h(s.default,{title:"Menu",open:!0,isInactive:!i,items:[{label:r.h(_,{active:!i&&e===M.EQUIPMENT},"Equipment"),value:M.EQUIPMENT},{label:r.h(_,{active:!i&&e===M.JOURNAL},"Journal"),value:M.JOURNAL},{label:r.h(_,{active:!i&&e===M.ITEMS},"Items"),value:M.ITEMS},{label:r.h(_,{active:!i&&e===M.STATUS},"Status"),value:M.STATUS},{label:r.h(_,{active:!i&&e===M.PARTY},"Positions"),value:M.PARTY},{label:r.h(_,{active:!i&&e===M.LOAD},"Load"),value:M.LOAD},{label:r.h(_,{active:!i&&e===M.QUIT},"Quit"),value:M.QUIT}],onItemClickSound:"menu_select",onItemClick:e=>{t(e),a(!1)},onClose:B,hideCloseBox:!0}),r.h(T,null,r.h(d.default,{type:d.ButtonType.PRIMARY,onClick:B,active:n},"Close ",p.getCancelKeyLabel())),r.h(k,null,r.h(R,null,r.h(P,null,r.h("div",null,"Tickets"),r.h("div",null,N.tickets)),r.h(P,null,r.h("div",null,"Tokens"),r.h("div",null,N.tokens)),r.h(O,null))))),r.h(I,null,r.h("div",null,"Select a menu option ",p.getConfirmKeyLabel(),".")),(()=>{if(i)return null;switch(e){case M.ITEMS:return r.h(u.default,{title:"Items",onClose:()=>{a(!0)},maxWidth:o.sizes[o.CardSize.XLARGE].width,closeButtonLabel:"Back "+p.getCancelKeyLabel()},r.h(g.default,{player:N,isInactive:i,onClose:()=>{c.playSoundName("menu_choice_close"),a(!0)}}));case M.JOURNAL:return r.h(u.default,{title:"Journal",onClose:()=>{a(!0)},maxWidth:o.sizes[o.CardSize.XLARGE].width,closeButtonLabel:"Back "+p.getCancelKeyLabel()},r.h(y.default,{scene:m.getCurrentScene(),isInactive:i,onClose:()=>{}}));case M.EQUIPMENT:return r.h(u.default,{title:"Equipment",onClose:()=>{a(!0)},maxWidth:o.sizes[o.CardSize.XLARGE].width,closeButtonLabel:"Back",disableKeyboardShortcut:!0},r.h(f.default,{player:N,onClose:()=>{c.playSoundName("menu_choice_close"),a(!0)}}));case M.STATUS:return r.h(u.default,{title:"Status",onClose:()=>{a(!0)},maxWidth:o.sizes[o.CardSize.XLARGE].width,closeButtonLabel:"Back "+p.getCancelKeyLabel()},r.h(C.default,{player:m.getCurrentPlayer(),isInactive:!1,onClose:()=>{a(!0)}}));case M.PARTY:return r.h(u.default,{title:"Battle Positions",onClose:()=>{a(!0)},maxWidth:o.sizes[o.CardSize.XLARGE].width,closeButtonLabel:"Back "+p.getCancelKeyLabel(),disableKeyboardShortcut:!0},r.h(v.default,{player:N,isInactive:!1,onClose:()=>{c.playSoundName("menu_choice_close"),a(!0)}}));case M.LOAD:return r.h(u.default,{title:"Load",onClose:()=>{a(!0)},maxWidth:o.sizes[o.CardSize.XLARGE].width,closeButtonLabel:"Back "+p.getCancelKeyLabel(),disableKeyboardShortcut:!0},r.h(w.default,{onClose:()=>{c.playSoundName("menu_choice_close"),a(!0)}}));default:return r.h(u.default,{title:"Menu",onClose:()=>{c.playSoundName("menu_choice_close"),a(!0)},maxWidth:o.sizes[o.CardSize.XLARGE].width,closeButtonLabel:"Back",disableKeyboardShortcut:!0})}})()))}})),define("view/components/MenuSection/index",["require","exports","view/components/MenuSection/MenuMain"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a(i).default}})})),define("view/components/LevelUpSection",["require","exports","preact","preact/hooks","controller/ui-actions","model/store","view/elements/MenuBox","view/style","view/ui","controller/scene/scene-commands","controller/events","model/generics","view/elements/VerticalMenu","view/elements/StaticAnimDiv","model/character","controller/loop","view/hooks","view/elements/AnimDiv","model/player","view/elements/Button","view/elements/Card"],(function(e,t,r,o,n,l,s,d,c,m,h,u,p,g,y,f,v,b,w,C,S){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s=a(s),p=a(p),g=a(g),b=a(b),C=i(C),S=i(S);let T=[{stat:"HP",ticketCost:1,lvlCost:2,desc:"Hit Points. The number of Hit Points a character has."},{stat:"STAGGER",ticketCost:2,lvlCost:1,desc:"Stagger.  The more of this, the longer it takes to become staggered."},{stat:"RESV",ticketCost:2,lvlCost:2,desc:"Reserve.  A representation of how much energy a character has before becoming exhausted."},{stat:"POW",ticketCost:4,lvlCost:2,desc:"Power.  More of this means more damage when attacking."},{stat:"ACC",ticketCost:4,lvlCost:1,desc:"Accuracy.  More of this means higher chance of critical hits."},{stat:"FOR",ticketCost:2,lvlCost:1,desc:"Fortitude.  More of this means a character takes less damage from Weapon-based attacks."},{stat:"CON",ticketCost:2,lvlCost:1,desc:"Constitution.  Determines what kind of armor a character can wear.  The mor CON, the better quality armor."},{stat:"RES",ticketCost:2,lvlCost:1,desc:"Resistance.  Determines damage reduction from Wand-based attacks."},{stat:"SPD",ticketCost:2,lvlCost:1,desc:"Speed.  More of this reduces cooldown timer of abilities."},{stat:"EVA",ticketCost:1,lvlCost:1,desc:"Evasion.  Each point of EVA adds 1% chance to dodge an attack."}],x={HP:0,STAGGER:0,RESV:0,POW:0,ACC:0,FOR:0,CON:0,SPD:0,RES:0,EVA:0},E=d.style("div",e=>({position:e.visible?"unset":"absolute",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"})),A=d.style("div",e=>({display:"flex",justifyContent:"center",alignItems:"center",padding:"4px",boxSizing:"border-box",border:e.color?"2px solid "+d.colors.DARKGREEN:"unset","& > div":{marginRight:"8px"}})),_=d.style("div",()=>({border:"1px solid "+d.colors.WHITE,color:d.colors.LIGHTGREEN,textAlign:"left",marginBottom:"1.5rem",background:d.colors.BLACK,fontFamily:"courier",padding:"16px",width:"100%",boxSizing:"border-box",zIndex:"1",fontSize:"20px",display:"flex",justifyContent:"center",flexDirection:"column"})),I=d.style("div",()=>({display:"flex",justifyContent:"space-between",margin:"2px"})),k=d.style("div",()=>({border:"1px solid "+d.colors.WHITE,background:d.colors.BLACK})),R=d.style("div",()=>({background:d.colors.DARKGREEN,border:"1px solid "+d.colors.WHITE,borderRadius:"26px",padding:"4px"})),P=d.style("span",e=>({color:e.value<=0?d.colors.RED:d.colors.BLUE})),O=(d.style("span",()=>({color:d.colors.RED})),d.style("span",()=>({color:d.colors.BLUE})),e=>{let t=e.ch;return r.h(A,null,r.h(g.default,{style:{width:"64"},animName:t.spriteBase.toLowerCase()+"_idle_down"}),r.h("div",null,t.fullName,","),r.h("div",null,"Level: ",y.characterGetLevel(t),e.hideLvlPoints?"":","),e.hideLvlPoints?null:r.h("div",null,"LVL Points: ",t.experienceCurrency))}),M=d.style("div",()=>({textAlign:"left",display:"flex",justifyContent:"space-between",alignItems:"center"})),L=d.style("div",()=>({textAlign:"right",display:"flex",justifyContent:"flex-end",alignItems:"center","& > div":{marginLeft:"8px"}}));t.default=()=>{let e=u.getCurrentPlayer(),t=e.party,[i,a]=o.useState(void 0),[g,y]=o.useState(e.tickets),[A,B]=o.useState(0),[N,D]=o.useState(0),[G,F]=o.useState(!1),[W,U]=o.useState(!0),[H,j]=o.useState(x);v.useKeyboardEventListener(e=>{h.isCancelKey(e.key)&&K()});let K=()=>{if(!G)if(i){if(m.playSound("menu_select2"),g===e.tickets)return void a(void 0);F(!0),n.showModal(l.ModalSection.CONFIRM,{onClose:()=>{F(!1),U(!1),setTimeout(()=>{U(!0)},1)},onConfirm:()=>{m.playSound("terminal_cancel"),F(!1),y(e.tickets),a(void 0)},body:"Do you wish to disregard this set of stat increases?",danger:!0})}else m.playSound("blip"),f.unpause(),c.getUiInterface().appState.levelUp.onClose()},q=e=>{let{stat:t,lvlCost:i,ticketCost:a}=e;H[t]>0?(m.playSound("blip"),y(g+a),B(A+i),j(Object.assign(Object.assign({},H),{[t]:H[t]-1}))):m.playSound("terminal_cancel")},z=!i,Y=T[N];return r.h(s.default,{title:"VR Improvement Kiosk",hideTitle:!0,onClose:()=>{K()},closeButtonLabel:"Back "+h.getCancelKeyLabel(),dark:!0,disableKeyboardShortcut:!0},r.h(S.default,{id:"menu-main",size:S.CardSize.XLARGE},r.h(I,null,z?r.h(b.default,{animName:"tile_stats_kiosk_menu",renderLoopId:"stats-kiosk",scale:4,style:{transform:"translateY(-20px)",margin:"64px"}}):null,r.h(_,null,z?r.h(r.Fragment,null,r.h("p",null,"Welcome to the Regem Ludos Improvement Kiosk!"),r.h("p",null,"To begin, please select one of your party members.")):r.h(r.Fragment,null,r.h("p",{style:{width:"520px"}},"You have selected ",r.h("b",null,null==i?void 0:i.fullName),"."),r.h("p",{style:{color:d.colors.YELLOW,height:"54px"}},Y?`${Y.stat}: ${Y.desc}`:null)))),r.h(E,{visible:z},r.h("div",{style:{paddingBottom:"8px",display:z?"unset":"none"}},"You have"," ",r.h(P,{value:g},g," Tickets")," ","available to spend."),r.h(p.default,{title:"Party",hideTitle:!0,open:!0,isInactive:!z||G,style:{display:z?"unset":"none"},items:t.map(e=>({label:r.h(O,{ch:e}),value:e})),onItemClickSound:"blip",onItemClick:t=>{a(t),B(t.experienceCurrency),y(e.tickets),j(x)}})),i?r.h(r.Fragment,null,r.h("div",{style:{paddingBottom:"8px",textAlign:"center"}},"You have"," ",r.h(P,{value:g},g," Tickets")," and"," ",r.h(P,{value:A},A," LVL Points")," ","available to spend."),r.h(k,null,r.h(O,{ch:i,hideLvlPoints:!0}),r.h(p.default,{title:"Stats",hideTitle:!0,isInactive:G,resetCursor:W,open:!0,items:[...T.map(e=>{var t;let{lvlCost:a,ticketCost:o,stat:n}=e;return{label:r.h(M,null,r.h("div",{style:{width:"120px"}},n," ",null===(t=null==i?void 0:i.stats)||void 0===t?void 0:t[n]),r.h("div",null,H[n]?"+"+H[n]:""),r.h(L,null,r.h("div",null,r.h(P,{value:a<=A?1:0},"LVL Cost: ",a),","),r.h("div",null,r.h(P,{value:o<=g?1:0},"Ticket Cost: ",o)),r.h(C.default,{type:C.ButtonType.CANCEL,disabled:0===H[n],style:{fontSize:"12px"},onClick:t=>{t.stopPropagation(),q(e)}},"Undo ",h.getAuxKeyLabel()))),value:e}}),{label:r.h(R,null,"Confirm!"),value:null}],onItemClick:t=>{if(t)(e=>{let{stat:t,lvlCost:i,ticketCost:a}=e;g>=a&&A>=i?(m.playSound("blip"),y(g-a),B(A-i),j(Object.assign(Object.assign({},H),{[t]:H[t]+1}))):m.playSound("terminal_cancel")})(t);else{let t=!1;for(let e in H)if(H[e]>0){t=!0;break}t?(m.playSound("menu_sparkle"),(()=>{if(w.playerModifyTickets(e,-(e.tickets-g)),i){i.experienceCurrency-=i.experienceCurrency-A;for(let e in H)i.stats[e]+=H[e];i.hp>0&&(i.hp+=H.HP),i.resv+=H.RESV}})()):m.playSound("blip"),a(void 0)}},onAuxClick:()=>{let e=T[N];e&&q(e)},onItemHover:e=>{D(e?T.indexOf(e):-1)}}))):null))}})),define("view/components/QuestSection",["require","exports","preact","view/style","controller/ui-actions","view/elements/Card","controller/events","model/sound","view/elements/VerticalMenu","view/elements/MenuBox","model/player","model/generics","view/icons/Flower","view/elements/CharacterNameLabel","view/icons/index"],(function(e,t,i,r,o,n,l,s,d,c,m,h,u,p,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),d=a(d),c=a(c),u=a(u),p=a(p);let y=r.style("div",()=>({fontSize:"16px",width:"50%",boxSizing:"border-box",padding:"16px",margin:"8px",border:"2px solid "+r.colors.WHITE,background:"rgba(0, 0, 0, 0.5)"})),f=r.style("div",()=>({display:"flex",flexDirection:"column",alignItems:"center",width:"75%",left:"12.5%",position:"relative"})),v=r.style("div",()=>({padding:"16px",background:r.colors.DARKGREY_ALT,border:"2px solid "+r.colors.WHITE,margin:"64px 0px",marginTop:"42px"})),b=r.style("div",()=>({width:"100%",height:"36px",display:"flex",justifyContent:"space-between"})),w=r.style("div",()=>({width:"96px",height:"96px",border:"2px solid "+r.colors.BLUE,borderTopColor:r.colors.WHITE}));t.default=e=>{let t=()=>{"completed"===e.status&&setTimeout(()=>{var t;let i=!1,r="The following party members have leveled up:";m.playerAddExperience(h.getCurrentPlayer(),null!==(t=e.quest.experienceReward)&&void 0!==t?t:0).forEach((e,t)=>{i=!0,r+=(0===t?" ":", ")+e.name}),i&&(s.playSoundName("level_up"),o.showNotification({text:r,type:"info"}));let n=h.getCurrentPlayer();a.tokensReward&&(n.tokens+=a.tokensReward),a.ticketsReward&&(n.tickets+=a.ticketsReward)},250),e.onClose()},a=e.quest,C=i.h(u.default,{color:a.iconColor||r.colors.WHITE});if(a.icon){let e=g.getIcon(a.icon);C=i.h(e,{color:a.iconColor||r.colors.WHITE})}return i.h(c.default,{title:"Quest",onClose:()=>{t()},maxWidth:n.sizes[n.CardSize.XLARGE].width,closeButtonLabel:"Continue "+l.getConfirmKeyLabel(),disableKeyboardShortcut:!0,hideClose:!0},i.h("div",{style:{width:"100%"}},"completed"===e.status?i.h(f,null,i.h("div",{style:{fontSize:"24px"}}," Quest Completed! "),i.h("p",{style:{width:"100%",textAlign:"center"}},"You have completed:"," ",i.h("span",{style:{color:r.colors.YELLOW}},a.label)),i.h(p.default,null,"Rewards"),i.h(y,null,a.experienceReward?i.h("div",null,a.experienceReward," EXP"):null,a.tokensReward?i.h("div",null,a.tokensReward," Tokens"):null,a.ticketsReward?i.h("div",null,a.ticketsReward," Tickets"):null,a.itemsReward?a.itemsReward().map((e,t)=>i.h("div",{key:t},e.label)):null),i.h(b,null,i.h(w,{style:{backgroundColor:r.colors.BLACK,borderTopRightRadius:"16px"}},C),i.h(w,{style:{borderTopLeftRadius:"16px",backgroundColor:r.colors.BLACK}},i.h(u.default,{color:r.colors.YELLOW})))):i.h(f,null,i.h("div",{style:{fontSize:"24px",marginTop:"16px"}},"Quest Started!"),i.h(v,null,i.h("p",{style:{marginTop:"10px",fontSize:"24px"}},"You have started:"," ",i.h("span",{style:{color:r.colors.YELLOW}},a.label)),i.h("p",{style:{width:"100%"}}," ",a.description)),i.h(b,null,i.h(w,{style:{backgroundColor:r.colors.BLACK,borderTopRightRadius:"16px"}},C),i.h(w,{style:{borderTopLeftRadius:"16px",backgroundColor:r.colors.BLACK}},i.h(u.default,{color:r.colors.YELLOW})))),i.h("div",{style:{display:"flex",justifyContent:"center",margin:"16px"}},i.h(d.default,{title:"",open:!0,hideTitle:!0,style:{transition:"transform 0.15s",transform:"scaleX(1)",width:"128px"},items:[{label:i.h("div",null,i.h("span",null,"Continue")),value:0}],onItemClickSound:"menu_select",onItemClick:()=>{t()}}))))}})),define("view/components/ItemStoreSection",["require","exports","preact","controller/events","view/ui","model/sound","view/elements/MenuBox","view/style","view/elements/VerticalMenu","db/stores","db/items/index","model/generics","view/icons/index","preact/hooks","view/components/ItemDescription","view/elements/Card","model/player","view/hooks"],(function(e,t,i,r,o,n,l,s,d,c,m,h,u,p,g,y,f,v){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),l=a(l),d=a(d),g=a(g);let b=s.style("div",{display:"flex",justifyContent:"space-between",alignItems:"flex-start",width:"100%",zIndex:"1"}),w=s.style("div",{width:"60%",maxHeight:"628px"}),C=s.style("div",{width:"40%"}),S=s.style("div",{width:"100%",height:"400px",border:"1px solid "+s.colors.WHITE,background:s.colors.DARKGREY_ALT}),T=s.keyframes({"0%":{opacity:"1",transform:"translateY(0px)"},"100%":{opacity:"0",transform:"translateY(-28px)"}}),x=s.style("div",{position:"absolute",left:"222px",top:"12px",fontSize:"32px",color:s.colors.YELLOW,opacity:"0"}),E={};t.default=e=>{var t;let a=v.useReRender(),A=o.getUiInterface().appState.store.storeName,_=c.get(A),I=h.getItemStores();I[A]||(I[A]={name:A,items:_.items.map(e=>({itemName:e.itemName,quantity:e.quantity}))});let k=I[A],[R,P]=p.useState(0),O=m.get(k.items[R].itemName),M=h.getCurrentPlayer(),L=f.playerGetItemCount(M,O.name),B=u.getIcon(null!==(t=_.icon)&&void 0!==t?t:"talk");return i.h(l.default,{title:_.label,onClose:()=>{(()=>{var t;(null!==(t=e.onClose)&&void 0!==t?t:o.getUiInterface().appState.store.onClose)()})()},disableCloseSound:!0,dark:!0,maxWidth:y.sizes[y.CardSize.XLARGE].width,closeButtonLabel:"Back "+r.getCancelKeyLabel()},i.h("div",null,i.h("div",{style:{marginTop:"16px",fontSize:"20px",maxWidth:"85%"}},_.description),i.h("div",{style:{margin:"24px 0px 16px 0px",color:s.colors.LIGHTGREY,display:"flex",justifyContent:"space-between",alignItems:"center"}},i.h("div",null,i.h("div",null,"Select an item to purchase."),i.h("div",{style:{color:s.colors.WHITE,marginTop:"8px"}},"You have"," ",i.h("span",{style:{color:s.colors.BLUE}},M.tickets)," ","Tickets.")),i.h("div",{style:{height:"8px"}},i.h("div",{style:{transform:"translateY(-64px)",width:"96px"}},i.h(B,{color:s.colors.WHITE})))),i.h(b,null,i.h(w,null,i.h(d.default,{width:"100%",maxHeight:"357px",open:!0,isInactive:!1,hideTitle:!1,startingIndex:0,itemHeight:48,title:"Purchase",items:k.items.map((e,t)=>{var a;let r=m.get(e.itemName),o=e.quantity,n=_.items[t].price,l=u.getIcon(null!==(a=r.icon)&&void 0!==a?a:"help"),d=o>0&&M.tickets>=n;return{label:i.h(i.Fragment,null,i.h("div",{style:{color:d?"unset":s.colors.LIGHTGREY,textAlign:"left",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"4px",filter:d?"unset":"grayscale(1) brightness(75%)",cursor:d?"pointer":"default",background:t===R?s.colors.DARKGREEN:"unset"}},i.h("div",{style:{display:"flex",alignItems:"center"}},i.h("div",{style:{width:"24px",marginRight:"16px",marginLeft:"32px"}},i.h(l,{color:s.colors.WHITE})),r.label," ",`(${o})`),i.h("div",{style:{color:s.colors.BLUE,width:"100px"}},"Cost: ",n)),i.h(x,{id:e.itemName+"_"+t+"_buy"},"Buy!")),value:t}}),onItemClickSound:"menu_select",onItemClick:e=>{(e=>{let t=k.items[e],i=m.get(t.itemName),r=_.items[e].price;if(t.quantity>0&&M.tickets>=r){n.playSoundName("make_purchase"),k.items[e].quantity--,f.playerAddItem(M,i.name),f.playerModifyTickets(M,-r);let o=t.itemName+"_"+e+"_buy";void 0!==E[o]&&(clearTimeout(E[o]),delete E[o]);let l=document.getElementById(o);if(l){let e=300;l.style.opacity="",l.style.animation="unset",E[o]=setTimeout(()=>{l.style.animation=T+` ${e}ms ease-out 1`,E[o]=setTimeout(()=>{l&&(l.style.animation="unset",l.style.opacity="0"),delete E[o]},e)},100)}a()}else n.playSoundName("terminal_cancel")})(e)},onItemHover:e=>{P(e)}})),i.h(C,null,i.h(S,null,i.h(g.default,{item:O,showName:!0,disableUse:!0})))),i.h("div",{style:{textAlign:"center",margin:"8px"}},"You currently have"," ",i.h("span",{style:{color:L>0?s.colors.LIGHTGREEN:s.colors.LIGHTRED}},L)," ","of this item.")))}})),define("view/components/InfoStats",["require","exports","preact","controller/events","view/ui","view/elements/MenuBox","view/style","view/elements/VerticalMenu","model/generics","preact/hooks","view/elements/Card","model/scores"],(function(e,t,i,r,o,n,l,s,d,c,m,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=a(n),s=a(s);let u=l.style("div",{display:"flex",justifyContent:"space-between",alignItems:"flex-start",width:"100%",zIndex:"1"}),p=l.style("div",{width:"40%",maxHeight:"628px"}),g=l.style("div",{width:"60%"}),y=l.style("div",{width:"100%",height:"400px",border:"1px solid "+l.colors.WHITE,background:l.colors.DARKGREY_ALT}),f=l.style("div",{margin:"1px",border:"1px solid white",background:l.colors.DARKPURPLE,fontSize:"32px",textAlign:"center"}),v=l.style("div",{margin:"4px 8px",fontSize:"24px",display:"flex",justifyContent:"space-between",alignItems:"center"});t.default=e=>{let t=h.getScores(),a=[];for(let e in t)a.push(t[e]);a.sort((e,t)=>e.gameLabel<t.gameLabel?-1:1);let[l,b]=c.useState(0),w=a[l];return d.getCurrentPlayer(),i.h(n.default,{title:"High Scores",onClose:()=>{var t;(null!==(t=e.onClose)&&void 0!==t?t:o.getUiInterface().appState.infoStats.onClose)()},disableCloseSound:!0,dark:!0,maxWidth:m.sizes[m.CardSize.XLARGE].width,closeButtonLabel:"Back "+r.getCancelKeyLabel()},i.h("div",{style:{width:"100%"}},i.h("p",null,"Hover over a game to see the current high scores."),i.h(u,null,i.h(p,null,i.h(s.default,{width:"100%",maxHeight:"357px",open:!0,isInactive:!1,hideTitle:!1,startingIndex:0,itemHeight:48,title:"Games",items:a.map((e,t)=>({label:i.h("div",null,e.gameLabel),value:t})),onItemClickSound:"menu_select",onItemClick:e=>{},onItemHover:e=>{b(e)}})),i.h(g,null,i.h(y,null,i.h(f,null,w.gameLabel),w.leaderboard.slice(0,10).map((e,t)=>i.h(v,{key:e.playerLabel+e.score+t},i.h("span",null,t+1,".) ",e.playerLabel),i.h("span",null,e.score))))))))}})),define("view/ui",["require","exports","preact","preact/hooks","view/style","model/generics","model/store","controller/ui-actions","model/canvas","view/components/Debug","view/components/BattleConclusion","view/components/BattleSection/index","view/components/CutsceneSection/index","view/components/ArcadeCabinet/index","view/components/CutsceneSection/CutsceneChoicesSection","view/components/SettingsSection","view/components/ModalSection/index","view/components/SaveSection","view/components/MenuSection/index","view/components/LevelUpSection","db/quests/index","view/components/QuestSection","model/quest","view/components/ItemStoreSection","view/components/InfoStats"],(function(e,t,i,r,o,n,l,s,d,c,m,h,u,p,g,y,f,v,b,w,C,S,T,x,E){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mountUi=t.renderUi=t.setUiInterface=t.getUiInterface=t.uiInterface=void 0,c=a(c),m=a(m),h=a(h),u=a(u),p=a(p),g=a(g),y=a(y),f=a(f),v=a(v),b=a(b),w=a(w),S=a(S),x=a(x),E=a(E);let A=o.style("div",{position:"relative",height:"100%"}),_=o.style("div",()=>({position:"absolute",left:"0",top:"0",background:"black",opacity:"0.3",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:o.colors.WHITE,fontSize:"24px",width:"100%",height:"100%",pointerEvents:"none"})),I=o.style("div",()=>({marginBottom:"256px"}));t.uiInterface=null,t.getUiInterface=()=>t.uiInterface,t.setUiInterface=e=>t.uiInterface=e;let k=()=>{let[e,a]=r.useState(!1),[o,k]=r.useReducer(s.appReducer,l.AppStateInitial);r.useEffect(()=>{t.uiInterface=window.uiInterface={appState:o,render:()=>{a(!e)},dispatch:k}}),console.log("UI RENDER");let R=d.getDrawScale(),P=d.SCREEN_WIDTH*(R>2?2:R),O=d.SCREEN_HEIGHT*(R>2?2:R),M=window.innerHeight<O||window.innerWidth<P;return i.h("div",{style:{position:M?"fixed":"absolute",top:"0px",left:"0px",width:M?window.innerWidth:Math.min(P,window.innerWidth),height:Math.min(O,window.innerHeight)}},i.h(A,{id:"ui-sections"},n.getIsPaused()&&!o.battle.effect.active?i.h(_,null,i.h(I,null,"PAUSED")):null,o.sections.map((e,t)=>{switch(e){case l.AppSection.BattleVictory:return i.h(m.default,{key:t,isVictory:!0});case l.AppSection.BattleDefeated:return i.h(m.default,{key:t,isVictory:!1});case l.AppSection.BattleUI:return i.h(h.default,{key:t});case l.AppSection.Cutscene:return i.h(u.default,{key:t});case l.AppSection.ArcadeCabinet:return i.h(p.default,{key:t,game:o.arcadeGame.path});case l.AppSection.Choices:return i.h(g.default,{key:t});case l.AppSection.Settings:return i.h(y.default,{key:t});case l.AppSection.Modal:return i.h(f.default,{key:t});case l.AppSection.Debug:return i.h(c.default,null);case l.AppSection.Save:return i.h(v.default,{key:t});case l.AppSection.Store:return i.h(x.default,{key:t});case l.AppSection.InfoStats:return i.h(E.default,{key:t});case l.AppSection.Menu:return i.h(b.default,{key:t});case l.AppSection.Quest:{let e=C.get(o.quest.questName);return i.h(S.default,{key:t,quest:e,onClose:o.quest.onClose,status:T.questIsCompleted(n.getCurrentScene(),e)?"completed":"started"})}case l.AppSection.LevelUp:return i.h(w.default,{key:t});default:return i.h("div",null)}}),o.room.particles.map((e,t)=>{let a=e.uiComponent;return a?i.h(a,{key:"particle-"+t,particle:e}):i.h("div",null)})))};t.renderUi=()=>{t.uiInterface&&t.uiInterface.render()},t.mountUi=()=>{let e=document.getElementById("ui");if(e){let t=document.getElementById("canvas-area-parent");if(t){let e=2;t.style["max-width"]=d.SCREEN_WIDTH*e,t.style["max-height"]=d.SCREEN_HEIGHT*e}i.render(i.h(k,null),e)}}})),define("view/hooks",["require","exports","preact/hooks","model/generics","model/battle","view/ui","model/store","controller/ui-actions","controller/events"],(function(e,t,i,a,r,o,n,l,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useConfirmModal=t.useBattleSubscriptionWithBattleCharacter=t.useBattleSubscription=t.useCursorIndexStateWithKeypress=t.useKeyboardEventListener=t.useInputEventStack=t.useRenderLoop=t.useReRender=t.initHooks=void 0;let d=!1;t.initHooks=()=>{if(d)return void console.log("Hooks have already been initialized.");let e;d=!0,window.addEventListener("resize",()=>{!1!==e&&clearTimeout(e),e=setTimeout(()=>{o.getUiInterface().render(),e=!1},50)}),window.addEventListener("keydown",e=>{let t=c[c.length-1];t&&!e.repeat&&t(e)})},t.useReRender=()=>{let[e,t]=i.useState(!1);return()=>{t(!e)}},t.useRenderLoop=(e,t)=>{let[,r]=i.useReducer(e=>!e,!1),o=()=>{r("")};return i.useEffect(()=>(a.addRenderable(e,t||o),()=>{a.removeRenderable(e)}),[]),o};let c=[];t.useInputEventStack=(e,t)=>{i.useEffect(()=>(c.push(e),()=>{let t=c.indexOf(e);t>-1&&c.splice(t,1)}),null!=t?t:[])},t.useKeyboardEventListener=(e,t)=>{i.useEffect(()=>{let t=t=>{t.repeat||e(t)};return window.addEventListener("keydown",t),()=>{window.removeEventListener("keydown",t)}},t)},t.useCursorIndexStateWithKeypress=(e,t,a,r)=>{let[{cursorIndex:o,active:n},l]=i.useReducer(({cursorIndex:e,active:t},i)=>{var o;let n=e,l=t;return"Increment"===i.type&&t?n=(n+1)%a.length:"Decrement"===i.type&&t?n=(n-1+a.length)%a.length:"Set"===i.type?n=null!==(o=i.payload)&&void 0!==o?o:0:"Select"===i.type&&t?(r(a[e]),l=!1):"SetActive"===i.type&&(l=i.payload),{cursorIndex:n,active:l}},{cursorIndex:null!=t?t:0,active:e});return i.useEffect(()=>{let e=e=>{"ArrowDown"===e.code?l({type:"Increment"}):"ArrowUp"===e.code?l({type:"Decrement"}):"Enter"===e.code&&l({type:"Select"})};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[]),i.useEffect(()=>{e!==n&&l({type:"SetActive",payload:e})}),[o,e=>{l({type:"Set",payload:e})}]},t.useBattleSubscription=(e,t,a)=>{i.useEffect(()=>(r.battleSubscribeEvent(e,t,a),()=>{r.battleUnsubscribeEvent(e,t,a)}),[e,t,a])},t.useBattleSubscriptionWithBattleCharacter=(e,t,a,o)=>{i.useEffect(()=>{let i=e=>{t===e&&o(e)};return r.battleSubscribeEvent(e,a,i),()=>{r.battleUnsubscribeEvent(e,a,i)}},[e,a,o])},t.useConfirmModal=e=>{let[t,a]=i.useState(!1);return[t,()=>{let t=s.pushEmptyKeyHandler();a(!0),l.showModal(n.ModalSection.CONFIRM,{onClose:()=>{s.popKeyHandler(t),a(!1),e.onClose&&e.onClose()},onConfirm:()=>{s.popKeyHandler(t),e.onConfirm&&e.onConfirm()},body:e.body,danger:e.danger})},l.hideModal]}})),define("view/elements/CharacterFollower",["require","exports","preact","view/hooks","view/style","model/canvas","model/character","utils","preact/hooks"],(function(e,t,i,a,o,n,l,s,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CharacterFollower=void 0;let c=o.style("div",()=>({position:"absolute",pointerEvents:"all"})),m=document.getElementById("canvas-container"),h=null==m?void 0:m.getBoundingClientRect();t.CharacterFollower=e=>{var t,o,u,p;let{renderKey:g,ch:y,style:f}=e,v=r(e,["renderKey","ch","style"]);a.useRenderLoop(g),d.useEffect(()=>{h=null==m?void 0:m.getBoundingClientRect()},[]);let[b,w,C]=l.characterGetPosTopLeft(y),[S,T]=l.characterGetSize(y),[x,E]=s.worldToCanvasCoords4by3(b,w,C),A=S,_=T;return(null===(t=y.template)||void 0===t?void 0:t.followerSize)&&(A=null===(o=y.template)||void 0===o?void 0:o.followerSize[0],_=null===(u=y.template)||void 0===u?void 0:u.followerSize[0]),window.innerHeight<1024&&(x+=null!==(p=null==h?void 0:h.left)&&void 0!==p?p:0,E+=0),i.h(c,Object.assign({style:Object.assign({left:x+(S-A)*n.getDrawScale()/2+"px",top:E+(T-_)*n.getDrawScale()/2+"px",width:A*n.getDrawScale()+"px",height:_*n.getDrawScale()+"px"},f)},v))},t.default=t.CharacterFollower})),define("db/particles",["require","exports","view/style","preact","view/elements/CharacterFollower","view/elements/StaticAnimDiv","preact/hooks","utils","model/generics"],(function(e,t,i,r,o,n,l,s,d){"use strict";var c;Object.defineProperty(t,"__esModule",{value:!0}),t.init=t.getIfExists=t.get=t.EmotionBubble=void 0,n=a(n),(c=t.EmotionBubble||(t.EmotionBubble={})).EXCLAMATION="exclaim",c.QUESTION="question",c.RAINDROP="teardrop",c.LIGHTBULB="lightbulb",c.HEART="heart",c.HAPPY="happy",c.SMIRK="smirk",c.BORED="bored",c.SURPRISED="surprised",c.SAD="sad",c.GRUMPY="grumpy",c.BLUSH="blush";let m={};t.get=e=>{let t=m[e];if(!t)throw Error("No particle exists with name: "+e);return t},t.getIfExists=e=>{let t=m[e];return t?Object.assign({},t):null};let h=i.keyframes({"0%":{transform:"scale(0)"},"50%":{transform:"scale(1.75)"},"100%":{transform:"scale(1)"}}),u=i.keyframes({"0%":{transform:"scale(1)"},"100%":{transform:"scale(0)"}});t.init=()=>{Object.assign(m,{EFFECT_TEMPLATE_SWORD_LEFT:{animName:"effect_sword_left"},EFFECT_TEMPLATE_PIERCE_LEFT:{animName:"effect_pierce_left"},EFFECT_TEMPLATE_FIREBALL:{animName:"effect_fireball_explosion_anim",opacity:.65},EFFECT_TEMPLATE_SMOKE:{animName:"effect_smoke_anim"},EFFECT_TEMPLATE_ARMOR_REDUCED:{animName:"effect_armor_shatter",scale:.5},EFFECT_TEMPLATE_RANGED_LEFT:{animName:"effect_range_projectile_left",duration:300},EFFECT_TEMPLATE_RANGED_HIT:{animName:"effect_range_hit_left"},EFFECT_TEMPLATE_GEM:{animName:"effect_gem"},EFFECT_TEMPLATE_TREASURE:{duration:1e3,animName:"effect_treasure_anim"},EFFECT_TEMPLATE_AGGROED:{animName:"effect_aggro",duration:500,offset:[0,-32]},EFFECT_TEMPLATE_DEAD32:{animName:"effect_dead2_anim",offset:[8,-12.5],opacity:1,duration:2320},EFFECT_TEMPLATE_RING:{duration:1e3,text:"RING!",useOuterCanvas:!0,offset:[0,8],textParams:{size:32,color:i.colors.YELLOW,align:"center",strokeColor:i.colors.WHITE}},EFFECT_TEMPLATE_GIGGLE:{duration:750,text:"Ha",useOuterCanvas:!0,offset:[0,-16],textParams:{size:24,color:i.colors.WHITE,align:"center",strokeColor:i.colors.BLACK}},EFFECT_TEMPLATE_SHRUG:{duration:1250,text:"*Shrug*",useOuterCanvas:!0,offset:[4,-16],textParams:{size:24,color:i.colors.WHITE,align:"center",strokeColor:i.colors.BLACK}},EFFECT_TEMPLATE_SIGH:{duration:1500,text:"*Sigh*",useOuterCanvas:!0,offset:[4,-16],textParams:{size:24,color:i.colors.WHITE,align:"center",strokeColor:i.colors.BLACK}},EFFECT_TEMPLATE_VR_PORTAL:{animName:"effect_vr_anim",duration:5e3,scale:4,offset:[0,-32]},EFFECT_TEMPLATE_PORTAL_SPAWN:{animName:"effect_dead2_anim",offset:[3,-12.5],opacity:1,duration:1160},EFFECT_TEMPLATE_SPAWN:{animName:"effect_spawn",duration:1e3},EFFECT_TEMPLATE_BUFF:{animName:"effect_buff_anim",duration:1360},EFFECT_TEMPLATE_PING_PONG_LTR:{animName:"effect_pingpong_ltr"},EFFECT_TEMPLATE_PING_PONG_RTL:{animName:"effect_pingpong_rtl"},EFFECT_TEMPLATE_EMOTION_BUBBLE:{duration:750,uiComponent:e=>{let t=e.particle.meta.ch,i=e.particle.meta.emotion,a=l.useRef(),c=1/d.getCutsceneSpeedMultiplier()*100;return l.useEffect(()=>{s.timeoutPromise(1/d.getCutsceneSpeedMultiplier()*750-c).then(()=>{a.current.style.animation=`${u} ${c}ms linear`})},[]),r.h(o.CharacterFollower,{ch:t,renderKey:`particle-${t.name}-${i}`},r.h("div",{ref:a,style:{position:"absolute",top:"-32px",display:"flex",justifyContent:"center",alignItems:"center",width:"100%",animation:`${h} ${c}ms linear`}},r.h(n.default,{scale:3,animName:"effect_emotions_"+i})))}}})}})),define("model/particle",["require","exports","model/utility","model/animation","utils","model/sprite","view/draw","model/room","model/generics","db/particles"],(function(e,t,i,a,r,o,n,l,s,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.particleUpdate=t.particleGetSize=t.particleGetPos=t.particleCreateFromTemplate=t.particleCreate=t.createEmotionBubbleParticle=t.createStatusParticle=t.createWeightedParticle=t.createRiseParticle=t.createDamageParticle=t.EFFECT_TEMPLATE_DEAD32=t.EFFECT_TEMPLATE_AGGROED=t.EFFECT_TEMPLATE_TREASURE=t.EFFECT_TEMPLATE_GEM=t.EFFECT_TEMPLATE_RANGED_HIT=t.EFFECT_TEMPLATE_RANGED_LEFT=t.EFFECT_TEMPLATE_ARMOR_REDUCED=t.EFFECT_TEMPLATE_SMOKE=t.EFFECT_TEMPLATE_FIREBALL=t.EFFECT_TEMPLATE_PIERCE_LEFT=t.EFFECT_TEMPLATE_SWORD_LEFT=void 0,t.EFFECT_TEMPLATE_SWORD_LEFT={animName:"effect_sword_left"},t.EFFECT_TEMPLATE_PIERCE_LEFT={animName:"effect_pierce_left"},t.EFFECT_TEMPLATE_FIREBALL={animName:"effect_fireball_explosion_anim",opacity:.65},t.EFFECT_TEMPLATE_SMOKE={animName:"effect_smoke_anim"},t.EFFECT_TEMPLATE_ARMOR_REDUCED={animName:"effect_armor_shatter",scale:.5},t.EFFECT_TEMPLATE_RANGED_LEFT={animName:"effect_range_projectile_left",duration:300},t.EFFECT_TEMPLATE_RANGED_HIT={animName:"effect_range_hit_left"},t.EFFECT_TEMPLATE_GEM={animName:"effect_gem"},t.EFFECT_TEMPLATE_TREASURE={animName:"effect_treasure_anim"},t.EFFECT_TEMPLATE_AGGROED={animName:"effect_aggro",duration:500,offset:[0,-32]},t.EFFECT_TEMPLATE_DEAD32={animName:"effect_dead2_anim",offset:[0,-12.5],opacity:.65,duration:2320},t.createDamageParticle=(e,a,o,n)=>{let s={size:16,color:null!=n?n:"white",align:"center",strokeColor:"black"},d=t.particleCreate();return d.anim=void 0,d.text=e,d.textParams=s,d.timer=new i.Timer(1e3),d.transform=new i.Transform([a,o,0],[a+r.getRandBetween(-l.TILE_WIDTH/2,l.TILE_WIDTH/2),o-l.TILE_HEIGHT,0],1e3,i.TransformEase.EASE_OUT),d.x=a,d.y=o,d.timer.start(),d},t.createRiseParticle=(e,a,r,o)=>{let n=null!=o?o:1e3,s=t.particleCreateFromTemplate([a,r],e);return s.transform=new i.Transform([s.x,s.y,0],[s.x,s.y-l.TILE_HEIGHT,0],n,i.TransformEase.EASE_OUT),s.timer.start(n),s},t.createWeightedParticle=(e,a,o,n)=>{let s=null!=n?n:1e3,d=t.particleCreateFromTemplate([a,o],e);return d.transform=new i.Transform([d.x,d.y,0],[d.x+r.getRandBetween(-l.TILE_WIDTH,l.TILE_WIDTH),d.y,0],s,i.TransformEase.EASE_OUT,i.transformOffsetWeightedParticle),d.timer.start(s),d},t.createStatusParticle=(e,a,r,o)=>{let n={size:12,color:null!=o?o:"white",align:"center",strokeColor:"black"},s=t.particleCreate();return s.anim=void 0,s.text=e,s.textParams=n,s.timer=new i.Timer(2e3),s.transform=new i.Transform([a,r,0],[a,r-1.75*l.TILE_HEIGHT,0],2e3,i.TransformEase.EASE_OUT),s.x=a,s.y=r,s.timer.start(),s},t.createEmotionBubbleParticle=(e,i)=>{let a=Object.assign({},d.get("EFFECT_TEMPLATE_EMOTION_BUBBLE"));a.duration=a.duration*(1/s.getCutsceneSpeedMultiplier());let r=t.particleCreateFromTemplate([0,0],a);return r.meta.ch=e,r.meta.emotion=i,r},t.particleCreate=()=>({timer:new i.Timer(1e3),shouldRemove:!1,opacity:1,x:0,y:0,vx:0,vy:0,w:0,h:0,scale:1,meta:{},useOuterCanvas:!1}),t.particleCreateFromTemplate=(e,r)=>{var l,s,d,c,m,h,u,p,g,y,f,v,b;let w=r.animName?a.createAnimation(r.animName+(r.flipped?o.SpriteModification.FLIPPED:o.SpriteModification.NORMAL)):void 0,[C,S]=null!==(l=null==w?void 0:w.getSpriteSize(1))&&void 0!==l?l:[1,1],T=null!==(s=r.scale)&&void 0!==s?s:1;C*=T,S*=T;let x=t.particleCreate();return x.anim=w,x.timer=new i.Timer(null!==(c=null!==(d=r.duration)&&void 0!==d?d:null==w?void 0:w.getDurationMs())&&void 0!==c?c:1e3),x.opacity=null!==(m=r.opacity)&&void 0!==m?m:1,x.x=e[0]-C/2+(null!==(u=null===(h=r.offset)||void 0===h?void 0:h[0])&&void 0!==u?u:0),x.y=e[1]-S/2+(null!==(g=null===(p=r.offset)||void 0===p?void 0:p[1])&&void 0!==g?g:0),x.scale=null!==(y=r.scale)&&void 0!==y?y:1,x.text=null!==(f=r.text)&&void 0!==f?f:"",x.useOuterCanvas=null!==(v=r.useOuterCanvas)&&void 0!==v&&v,x.textParams=null!==(b=r.textParams)&&void 0!==b?b:n.DEFAULT_TEXT_PARAMS,x.uiComponent=r.uiComponent,null==w||w.start(),x.timer.start(),x},t.particleGetPos=e=>e.transform?r.truncatePoint3d(e.transform.current()):[e.x,e.y],t.particleGetSize=e=>{let t=e.anim;return(null==t?void 0:t.getSpriteSize(0))||[0,0]},t.particleUpdate=e=>{let t=s.getFrameMultiplier();e.x+=e.vx*t,e.y+=e.vy*t,e.timer.isComplete()&&(e.shouldRemove=!0)}})),define("db/animation-metadata",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=t.getIfExists=t.get=void 0;let i={};t.get=e=>{let t=i[e];if(!t)throw Error("No AnimationMetadata exists with name: "+e);return Object.assign({},t)},t.getIfExists=e=>{let t=i[e];return t?Object.assign({},t):null},t.init=()=>{var e,t;i.ada_battle_attack_left_f={strikeFrame:3,sounds:[{soundName:"battle_swing1",frame:3}]},i.ada_battle_attack_p_left_f={strikeFrame:5,sounds:[{soundName:"battle_swing1",frame:5}]},i.ada_enter_vr_portal={sounds:[]};for(let a=13;a<=27;a+=2)null===(t=null===(e=null==i?void 0:i.ada_enter_vr_portal)||void 0===e?void 0:e.sounds)||void 0===t||t.push({soundName:"vr_portal_beep",frame:a});i.conscience_battle_ranged_left_f={strikeFrame:5,rangedParticleSpawnOffset:[0,0],sounds:[{soundName:"battle_shoot_arrow",frame:5}]},i.tut_robot_boss_battle_attack_left={strikeFrame:10,sounds:[{soundName:"robot_staggered_damaged",frame:0},{soundName:"robot_clank3",frame:1},{soundName:"robot_clank4",frame:1},{soundName:"robot_clank2",frame:4},{soundName:"woosh_reverse",frame:9},{soundName:"battle_swing4",frame:10},{soundName:"robot_clank2",frame:12},{soundName:"robot_clank4",frame:14}]},i.tut_robot_boss_battle_attack_k_left={strikeFrame:6,sounds:[{soundName:"robot_staggered_damaged",frame:0},{soundName:"robot_clank3",frame:1},{soundName:"robot_clank2",frame:4},{soundName:"battle_swing3",frame:6},{soundName:"robot_clank2",frame:8},{soundName:"robot_clank3",frame:10}]},i.tut_robot_boss_battle_attack_p_left={strikeFrame:6,sounds:[{soundName:"robot_staggered_damaged",frame:1},{soundName:"robot_clank",frame:2},{soundName:"battle_swing2",frame:6},{soundName:"robot_clank3",frame:8},{soundName:"robot_clank2",frame:10}]},i.tut_robot_melee_speedy_battle_attack_left={strikeFrame:2,sounds:[{soundName:"battle_swing1",frame:2}]},i.tut_robot_ranged_battle_ranged_left={strikeFrame:2,rangedParticleSpawnOffset:[8,-8],sounds:[{soundName:"battle_shoot_arrow",frame:0}]},i.tut_robot_armored_battle_attack_left={strikeFrame:2,sounds:[{soundName:"battle_swing1",frame:2}]},i.tut_robot_armored_battle_attack_k_left={strikeFrame:10,sounds:[{soundName:"battle_robot_charge_up",frame:2},{soundName:"battle_swing3",frame:8}]},i.tut_robot_melee_battle_attack_left={strikeFrame:3,sounds:[{soundName:"battle_swing1",frame:3}]},i.tile_vr_portal_active={loopFromFrame:5,sounds:[{soundName:"vr_portal_activate",frame:0}]},i.tile_vr_portal_passive={loopFromFrame:5,sounds:[{soundName:"vr_portal_deactivate",frame:0}]},i.tile_save_point_active={loopFromFrame:6,sounds:[{soundName:"vr_portal_activate",frame:0}]},i.tile_save_point_passive={loopFromFrame:6,sounds:[{soundName:"vr_portal_deactivate",frame:0}]},i.tile_floor_flicker={sounds:[{soundName:"zap_quiet",frame:0}]}}})),define("controller/battle-actions",["require","exports","model/battle","model/battle-character","model/character","model/room","model/utility","utils","model/particle","controller/battle-management","model/generics","db/animation-metadata","model/sound","view/style"],(function(e,t,i,a,r,o,n,l,s,d,c,m,h,u){"use strict";var p,g;Object.defineProperty(t,"__esModule",{value:!0}),t.BattleActions=t.doChannel=t.doSpell=t.doRange=t.doSwing=t.jumpUp=t.jumpToTarget=t.moveBackward=t.moveForward=t.getTarget=t.getTransformOffsetFunction=t.getDurationUntilStrike=t.createParticleAtCharacter=t.RangeType=t.SwingType=t.BattleActionType=void 0,function(e){e.SWING="swing",e.RANGED="ranged",e.CAST="cast",e.CHANNEL="channel"}(p=t.BattleActionType||(t.BattleActionType={})),function(e){e.NORMAL="normal",e.PIERCE="pierce",e.KNOCK_DOWN="knock-down",e.FINISH="finish"}(g=t.SwingType||(t.SwingType={})),(t.RangeType||(t.RangeType={})).NORMAL="normal",t.createParticleAtCharacter=(e,t)=>{let[i,a]=r.characterGetPosCenterPx(t);return s.particleCreateFromTemplate([i,a],e)},t.getDurationUntilStrike=e=>{var t;let i=m.getIfExists(e.name),a=null!==(t=null==i?void 0:i.strikeFrame)&&void 0!==t?t:e.sprites.length-1;return e.getDurationToIndex(a)},t.getTransformOffsetFunction=e=>e<45?n.transformOffsetJumpShort:e<100?n.transformOffsetJumpMedium:n.transformOffsetJumpFar,t.getTarget=(e,t)=>{let r,o=i.battleGetAllegiance(e,t.ch),n=a.battleCharacterGetSelectedSkill(t);return r=o===i.BattleAllegiance.ALLY?i.battleGetTargetedEnemy(e,n.type):i.battleGetNearestAttackable(e,o),r},t.moveForward=async(e,t)=>{let a=t.ch,l=i.battleGetAllegiance(e,a),s=r.characterGetPos(a),d=[...s];l===i.BattleAllegiance.ALLY?(d[0]+=o.TILE_WIDTH/2/2,d[1]-=o.TILE_WIDTH/2/2):(d[0]-=o.TILE_WIDTH/2/2,d[1]+=o.TILE_WIDTH/2/2);let c=new n.Transform(s,d,150,n.TransformEase.LINEAR,n.transformOffsetJumpShort);return r.characterSetTransform(a,c),h.playSoundName("battle_jump"),r.characterSetAnimationState(a,r.AnimationState.BATTLE_JUMP),await c.timer.onCompletion(),c},t.moveBackward=async(e,t)=>{let a=t.ch,l=i.battleGetAllegiance(e,a),s=r.characterGetPos(a),d=[...s];l===i.BattleAllegiance.ALLY?(d[0]-=o.TILE_WIDTH/2,d[1]+=o.TILE_WIDTH/2):(d[0]+=o.TILE_WIDTH/2,d[1]-=o.TILE_WIDTH/2);let c=new n.Transform(s,d,150,n.TransformEase.LINEAR,n.transformOffsetJumpShort);return r.characterSetTransform(a,c),h.playSoundName("battle_jump"),r.characterSetAnimationState(a,r.AnimationState.BATTLE_JUMP),await c.timer.onCompletion(),c},t.jumpToTarget=async(e,a,s)=>{let d=a.ch,c=r.characterGetSize(a.ch),m=r.characterGetSize(s.ch),u=Math.floor(1+(c[0]-32)/32+(m[1]-32)/32),p=i.battleGetAllegiance(e,d),g=r.characterGetPos(d),y=r.characterGetPos(s.ch);if(p===i.BattleAllegiance.ALLY)for(let e=0;e<u;e++)y[0]-=o.TILE_WIDTH/2;else for(let e=0;e<u;e++)y[0]+=o.TILE_WIDTH/2;let f=l.calculateDistance(g,y),v=new n.Transform(g,y,250*l.normalize(f,35,125,1,1.75),n.TransformEase.LINEAR,t.getTransformOffsetFunction(f));return r.characterSetTransform(d,v),r.characterSetAnimationState(d,r.AnimationState.BATTLE_JUMP),h.playSoundName("battle_jump"),await v.timer.onCompletion(),v},t.jumpUp=async(e,t)=>{let i=t.ch,a=r.characterGetPos(i),o=[...a],l=new n.Transform(a,o,400,n.TransformEase.LINEAR,n.transformOffsetJumpShort);return r.characterSetTransform(i,l),h.playSoundName("battle_jump"),r.characterSetAnimationState(i,r.AnimationState.BATTLE_JUMP),l.timer.start(),await l.timer.onCompletion(),l},t.doSwing=async(e,n,c,m,{baseDamage:h,baseStagger:u,swingType:y})=>{var f,v;let b=c.ch,w=null!==(v=null===(f=n.meta.swings)||void 0===f?void 0:f.length)&&void 0!==v?v:1,C=c.actionStateIndex;if(c.actionStateIndex=(c.actionStateIndex+1)%w,console.log("DO SWING",n,c,w),0===C&&(await d.beginAction(c),c.actionReadyTimer.start(),await t.jumpToTarget(e,c,m)),C<w){c.actionReadyTimer.start(),c.actionReadyTimer.pause(),a.battleCharacterSetActonState(c,a.BattleActionState.ACTING);let n=s.EFFECT_TEMPLATE_SWORD_LEFT;y===g.PIERCE&&(n=s.EFFECT_TEMPLATE_PIERCE_LEFT),a.battleCharacterSetAnimationStateAttack(c,p.SWING,y);let f=r.characterGetAnimation(b),v=!0;d.didEvade(m,i.BattleDamageType.SWING,1)&&(v=!1,f.disableSounds());let S=t.getDurationUntilStrike(f);l.timeoutPromise(S).then(()=>{if(v){d.applySwingDamage(e,c,m,{damage:h,staggerDamage:u,attackType:y});let[t,i]=r.characterGetPosCenterPx(m.ch),a=s.particleCreateFromTemplate([t,i],n);o.roomAddParticle(e.room,a)}else d.applyMiss(e,m);f.enableSounds()}),await f.onCompletion(),C===w-1?await l.timeoutPromise(750):await l.timeoutPromise(400),i.battleInvokeEvent(e,i.BattleEvent.onCharacterActionReady,c),a.battleCharacterSetActonState(c,a.BattleActionState.ACTING_READY),a.battleCharacterSetAnimationIdle(c),c.actionReadyTimer.unpause()}0===c.actionStateIndex&&await d.endAction(c)},t.doRange=async(e,c,u,g,{baseDamage:y,baseStagger:f,soundName:v})=>{var b,w;let C=u.ch,S=null!==(w=null===(b=c.meta.ranges)||void 0===b?void 0:b.length)&&void 0!==w?w:1,T=u.actionStateIndex;if(u.actionStateIndex=(u.actionStateIndex+1)%S,console.log("DO RANGE",c,u,S),0===T&&(await d.beginAction(u),u.actionReadyTimer.start(),await t.moveBackward(e,u)),T<S){u.actionReadyTimer.start(),u.actionReadyTimer.pause(),a.battleCharacterSetActonState(u,a.BattleActionState.ACTING),a.battleCharacterSetAnimationStateAttack(u,p.RANGED);let c=r.characterGetAnimation(C),b=t.getDurationUntilStrike(c),w=!0;d.didEvade(g,i.BattleDamageType.SWING,1)&&(w=!1,c.disableSounds()),l.timeoutPromise(b).then(()=>{var a;let l=t.createParticleAtCharacter(Object.assign(Object.assign({},s.EFFECT_TEMPLATE_RANGED_LEFT),{flipped:i.battleGetAllegiance(e,u.ch)===i.BattleAllegiance.ALLY}),C),[d,h]=r.characterGetPosTopLeftPx(g.ch),p=m.getIfExists(c.name),[y,f]=null!==(a=null==p?void 0:p.rangedParticleSpawnOffset)&&void 0!==a?a:[0,0];l.transform=new n.Transform([l.x+y,l.y+f,0],[d,h,0],100,n.TransformEase.LINEAR),o.roomAddParticle(e.room,l)}),l.timeoutPromise(b+75).then(()=>{if(w){d.applyRangeDamage(e,u,g,y,f);let i=t.createParticleAtCharacter(s.EFFECT_TEMPLATE_RANGED_HIT,g.ch);h.playSoundName(null!=v?v:"battle_arrow_hit"),o.roomAddParticle(e.room,i)}else d.applyMiss(e,g);c.enableSounds()}),await c.onCompletion(),T===S-1?await l.timeoutPromise(750):await l.timeoutPromise(400),i.battleInvokeEvent(e,i.BattleEvent.onCharacterActionReady,u),a.battleCharacterSetActonState(u,a.BattleActionState.ACTING_READY),a.battleCharacterSetAnimationIdle(u),u.actionReadyTimer.unpause()}0===u.actionStateIndex&&await d.endAction(u)},t.doSpell=async(e,i,a,n,{particleText:m,particleTemplate:p,soundName:g,baseDamage:y,baseStagger:f,targetCb:v,cb:b})=>{console.log("DO SPELL",i,a),await d.beginAction(a),await t.moveForward(e,a);let[w,C]=r.characterGetPosCenterPx(a.ch);o.roomAddParticle(c.getCurrentRoom(),s.createStatusParticle(m,w,C,u.colors.RED)),await l.timeoutPromise(150),r.characterSetAnimationState(a.ch,r.AnimationState.BATTLE_SPELL),await l.timeoutPromise(150);for(let t=0;t<n.length;t++){let i=n[t];if(i){let[t,n]=r.characterGetPosCenterPx(i.ch);p&&o.roomAddParticle(e.room,s.particleCreateFromTemplate([t,n],p)),h.playSoundName(g||"battle_fire_explosion1"),y&&d.applyMagicDamage(e,a,i,y,null!=f?f:0),v&&v(a),await l.timeoutPromise(100)}}b&&b(),await l.timeoutPromise(1900)},t.doChannel=async(e,n,m,{particleText:p,soundName:g})=>{console.log("DO CHANNEL",n,m),await d.beginAction(m),a.battleCharacterSetActonState(m,a.BattleActionState.CHANNELING),await t.jumpUp(e,m),h.playSoundName(g),r.characterSetAnimationState(m.ch,r.AnimationState.BATTLE_CHANNEL),await l.timeoutPromise(100);let[y,f]=r.characterGetPosCenterPx(m.ch);i.battleInvokeEvent(e,i.BattleEvent.onCharacterChannelling,m),o.roomAddParticle(c.getCurrentRoom(),s.createStatusParticle(p,y,f,u.colors.WHITE)),await d.endAction(m),m.actionTimer.pause()},t.BattleActions={AdaTrainingSwing:{name:"Training Swing",description:"Jump to target and swing your weapon.",cooldown:1e3,type:p.SWING,meta:{swings:[g.NORMAL,g.NORMAL],icon:"sword"},cb:async function(e,i){var a,r,o;let n=t.getTarget(e,i);n&&await t.doSwing(e,this,i,n,{baseDamage:1,baseStagger:5,swingType:null!==(o=null===(r=null===(a=this.meta)||void 0===a?void 0:a.swings)||void 0===r?void 0:r[i.actionStateIndex])&&void 0!==o?o:g.NORMAL})}},Swing:{name:"Swing",description:"Jump to target and swing your weapon.",cooldown:1e3,type:p.SWING,meta:{swings:[g.NORMAL,g.PIERCE,g.NORMAL],icon:"sword"},cb:async(e,i)=>{var a,r,o,n;let l=t.getTarget(e,i);l&&await t.doSwing(e,t.BattleActions.Swing,i,l,{baseDamage:1,baseStagger:5,swingType:null!==(n=null===(o=null===(r=null===(a=t.BattleActions.Swing)||void 0===a?void 0:a.meta)||void 0===r?void 0:r.swings)||void 0===o?void 0:o[i.actionStateIndex])&&void 0!==n?n:g.NORMAL})}},SwingSlow:{name:"SwingSlow",description:"A slower version of the swing.",cooldown:2e3,type:p.SWING,meta:{swings:[g.NORMAL,g.NORMAL,g.NORMAL],icon:"sword"},cb:async(e,i)=>t.BattleActions.Swing.cb(e,i)},SwingKO:{name:"SwingSlow",description:"Instant KO.",cooldown:500,type:p.SWING,meta:{swings:[g.NORMAL],icon:"sword"},cb:async(e,i)=>{var a,r,o,n;let l=t.getTarget(e,i);l&&await t.doSwing(e,t.BattleActions.SwingKO,i,l,{baseDamage:99999,baseStagger:99999,swingType:null!==(n=null===(o=null===(r=null===(a=t.BattleActions.Swing)||void 0===a?void 0:a.meta)||void 0===r?void 0:r.swings)||void 0===o?void 0:o[i.actionStateIndex])&&void 0!==n?n:g.NORMAL})}},SwingWithLongDescription:{name:"Swing LD",description:"This version of Swing is identical to Swing, except it kind of has a super duper long description.  This is done so that it can be TESTED.",cooldown:1e5,type:p.SWING,meta:{swings:[g.NORMAL,g.NORMAL,g.NORMAL],icon:"sword"},cb:async(e,i)=>t.BattleActions.Swing.cb(e,i)},Defend:{name:"Defend",description:"Brace yourself for an attack, taking less damage and reducing stagger for a short time.",cooldown:5e3,type:p.CAST,meta:{castTime:5e3,icon:"sword"},cb:async(e,o)=>{d.beginAction(o);let n=o.ch,l=await t.moveForward(e,o);r.characterSetAnimationState(n,r.AnimationState.BATTLE_ITEM);let s=r.characterGetAnimation(n);await s.onCompletion(),a.battleCharacterAddStatus(o,i.BattleStatus.DEFEND);let c=l.createInverse();r.characterSetTransform(n,c),r.characterSetAnimationState(n,r.AnimationState.BATTLE_JUMP),await c.timer.onCompletion(),c.markForRemoval(),a.battleCharacterSetAnimationIdle(o),d.setCasting(o,{castTime:5e3,onCast:async()=>{console.log("Defense completed"),a.battleCharacterRemoveStatus(o,i.BattleStatus.DEFEND)},onInterrupt:async()=>{console.log("Defense interrupted"),a.battleCharacterRemoveStatus(o,i.BattleStatus.DEFEND)}}),await d.endAction(o)}}}})),define("model/battle-character",["require","exports","model/room","model/character","utils","db/battle-ai","controller/battle-actions","controller/battle-management","model/utility","model/battle","model/sound","db/battle-actions","db/characters/index"],(function(e,t,i,a,r,o,n,l,s,d,c,m,h){"use strict";var u;Object.defineProperty(t,"__esModule",{value:!0}),t.updateBattleCharacter=t.battleCharacterRecoverFromStagger=t.battleCharacterRecoverFromKnockDown=t.battleCharacterSetAnimationStateAttack=t.battleCharacterSetAnimationIdle=t.battleCharacterSetAnimationStateAfterTakingDamage=t.battleCharacterGetEvasion=t.battleCharacterGetSelectedSkill=t.battleCharacterHasStatus=t.battleCharacterRemoveStatus=t.battleCharacterAddStatus=t.battleCharacterRemoveCanActCb=t.battleCharacterSetCanActCb=t.battleCharacterCanAct=t.battleCharacterSetActonState=t.battleCharacterIsChanneling=t.battleCharacterIsCasting=t.battleCharacterIsKnockedDown=t.battleCharacterIsStaggered=t.battleCharacterIsActingReady=t.battleCharacterIsActing=t.battleCharacterIsPreventingTurn=t.battleCharacterCreateAlly=t.battleCharacterCreateEnemy=t.BattleActionState=void 0,function(e){e.IDLE="idle",e.ACTING="acting",e.ACTING_READY="acting-ready",e.CASTING="casting",e.CHANNELING="channeling",e.STAGGERED="staggered",e.KNOCKED_DOWN="knocked-down"}(u=t.BattleActionState||(t.BattleActionState={}));let p=(e,t)=>{var i;let a=e.skills[e.skillIndex],r=e.stats.STAGGER;return{ch:e,armor:0,isDefeated:!1,shouldRemove:!1,actionTimer:new s.Timer(null!==(i=null==a?void 0:a.cooldown)&&void 0!==i?i:2e3),actionReadyTimer:new s.Timer(1500),staggerTimer:new s.Timer(4e3),staggerGauge:new s.Gauge(r,.002),koTimer:new s.Timer(4e3),castTimer:new s.Timer(1e3),armorTimer:new s.Timer(250),position:t,positionMarker:-1,actionState:u.IDLE,actionStateIndex:0,statuses:[],canActSignaled:!1,onCanActCb:async function(){},onCast:async function(){},onCastInterrupted:async function(){},onChannelInterrupted:async function(){},ai:void 0,isReviving:!1}};t.battleCharacterCreateEnemy=(e,t)=>{var i,a,n,l,s;-1===e.name.lastIndexOf("+")&&(e.name=e.name+"+"+r.randomId());let d=p(e,t.position);return d.ai=o.get(null!==(i=t.ai)&&void 0!==i?i:"BATTLE_AI_ATTACK"),d.armor=null!==(l=null!==(a=t.armor)&&void 0!==a?a:null===(n=e.template)||void 0===n?void 0:n.armor)&&void 0!==l?l:0,d.staggerSoundName=t.chTemplate.staggerSoundName,console.log("ENEMY CREATED",d,o.get(null!==(s=t.ai)&&void 0!==s?s:"BATTLE_AI_ATTACK")),d},t.battleCharacterCreateAlly=(e,t)=>{var i,r,o;let n=p(e,t.position),l=h.getIfExists(e.name);return l&&(n.staggerSoundName=l.staggerSoundName,n.armor=null!==(o=null!==(i=l.armor)&&void 0!==i?i:null===(r=e.template)||void 0===r?void 0:r.armor)&&void 0!==o?o:0),n.armor+=a.characterGetStatModifier(e,"armor"),n},t.battleCharacterIsPreventingTurn=e=>[u.ACTING,u.ACTING_READY].includes(e.actionState),t.battleCharacterIsActing=e=>[u.ACTING,u.ACTING_READY,u.CASTING].includes(e.actionState),t.battleCharacterIsActingReady=e=>e.actionState===u.ACTING_READY,t.battleCharacterIsStaggered=e=>e.actionState===u.STAGGERED||e.actionState===u.KNOCKED_DOWN,t.battleCharacterIsKnockedDown=e=>e.actionState===u.KNOCKED_DOWN,t.battleCharacterIsCasting=e=>e.actionState===u.CASTING,t.battleCharacterIsChanneling=e=>e.actionState===u.CHANNELING,t.battleCharacterSetActonState=(e,t)=>{e.actionState=t},t.battleCharacterCanAct=(e,i)=>{if(e.isPaused)return!1;if(i.actionState===u.CHANNELING)return!0;if(t.battleCharacterIsActing(i))return!1;if(t.battleCharacterIsStaggered(i)||t.battleCharacterIsKnockedDown(i))return!1;let a=d.battleGetAllegiance(e,i.ch)===d.BattleAllegiance.ALLY?e.enemies:e.allies;for(let e=0;e<a.length;e++)if(t.battleCharacterIsPreventingTurn(a[e]))return!1;return i.actionTimer.isComplete()},t.battleCharacterSetCanActCb=(e,t)=>{e.onCanActCb=t},t.battleCharacterRemoveCanActCb=e=>{e.onCanActCb=async function(){}},t.battleCharacterAddStatus=(e,t,i)=>{if(!e.statuses.find(e=>e.status===t)){let a=new s.Timer(null!=i?i:1e4);a.start(),e.statuses.push({status:t,timer:a})}},t.battleCharacterRemoveStatus=(e,t)=>{let i=e.statuses.findIndex(e=>t===e.status);i>-1&&e.statuses.splice(i,1)},t.battleCharacterHasStatus=(e,t)=>e.statuses.findIndex(e=>t===e.status)>-1,t.battleCharacterGetSelectedSkill=e=>{var t;return null!==(t=e.ch.skills[e.ch.skillIndex])&&void 0!==t?t:m.get("NoWeapon")},t.battleCharacterGetEvasion=e=>e.ch.stats.EVA,t.battleCharacterSetAnimationStateAfterTakingDamage=e=>{t.battleCharacterIsKnockedDown(e)?a.characterSetAnimationState(e.ch,a.AnimationState.BATTLE_KNOCKED_DOWN_DMG,!0):t.battleCharacterIsStaggered(e)?a.characterSetAnimationState(e.ch,a.AnimationState.BATTLE_STAGGERED,!0):(a.characterSetAnimationState(e.ch,a.AnimationState.BATTLE_DAMAGED,!0),a.characterOnAnimationCompletion(e.ch,()=>{t.battleCharacterIsStaggered(e)?a.characterSetAnimationState(e.ch,a.AnimationState.BATTLE_STAGGERED,!0):t.battleCharacterSetAnimationIdle(e)}))},t.battleCharacterSetAnimationIdle=e=>{t.battleCharacterIsChanneling(e)?a.characterSetAnimationState(e.ch,a.AnimationState.BATTLE_CHANNEL):t.battleCharacterIsCasting(e)?a.characterSetAnimationState(e.ch,a.AnimationState.BATTLE_CAST):a.characterSetAnimationState(e.ch,e.ch.weaponEquipState===a.WeaponEquipState.RANGED?a.AnimationState.BATTLE_IDLE_RANGED:a.AnimationState.BATTLE_IDLE)},t.battleCharacterSetAnimationStateAttack=(e,t,i)=>{switch(t){case n.BattleActionType.RANGED:a.characterSetAnimationState(e.ch,a.AnimationState.BATTLE_RANGED);break;case n.BattleActionType.CAST:a.characterSetAnimationState(e.ch,a.AnimationState.BATTLE_CAST);break;case n.BattleActionType.CHANNEL:console.error("No channel type implemented to set animation");break;case n.BattleActionType.SWING:switch(i){case n.SwingType.NORMAL:a.characterSetAnimationState(e.ch,a.AnimationState.BATTLE_ATTACK);break;case n.SwingType.PIERCE:if(a.characterHasAnimationState(e.ch,a.AnimationState.BATTLE_ATTACK_PIERCE)){a.characterSetAnimationState(e.ch,a.AnimationState.BATTLE_ATTACK_PIERCE);break}a.characterSetAnimationState(e.ch,a.AnimationState.BATTLE_ATTACK);case n.SwingType.KNOCK_DOWN:if(a.characterHasAnimationState(e.ch,a.AnimationState.BATTLE_ATTACK_KNOCKDOWN)){a.characterSetAnimationState(e.ch,a.AnimationState.BATTLE_ATTACK_KNOCKDOWN);break}a.characterSetAnimationState(e.ch,a.AnimationState.BATTLE_ATTACK);case n.SwingType.FINISH:if(a.characterHasAnimationState(e.ch,a.AnimationState.BATTLE_ATTACK_FINISH)){a.characterSetAnimationState(e.ch,a.AnimationState.BATTLE_ATTACK_FINISH);break}a.characterSetAnimationState(e.ch,a.AnimationState.BATTLE_ATTACK)}}},t.battleCharacterRecoverFromKnockDown=(e,i)=>{t.battleCharacterIsKnockedDown(e)&&!e.isReviving&&(e.koTimer.start(),e.koTimer.pause(),e.isReviving=!0,a.characterHasAnimationState(e.ch,a.AnimationState.BATTLE_REVIVE)?(a.characterSetAnimationState(e.ch,a.AnimationState.BATTLE_REVIVE),a.characterOnAnimationCompletion(e.ch,()=>{e.isReviving=!1,e.actionTimer.unpause(),d.battleInvokeEvent(i,d.BattleEvent.onCharacterRecovered,e),t.battleCharacterSetActonState(e,u.IDLE)})):r.timeoutPromise(500).then(()=>{e.isReviving=!1,e.actionTimer.unpause(),d.battleInvokeEvent(i,d.BattleEvent.onCharacterRecovered,e),t.battleCharacterSetActonState(e,u.IDLE)}))},t.battleCharacterRecoverFromStagger=(e,i)=>{t.battleCharacterIsStaggered(e)&&!e.isReviving&&(e.staggerTimer.start(),e.staggerTimer.pause(),t.battleCharacterSetAnimationIdle(e),e.actionTimer.unpause(),d.battleInvokeEvent(i,d.BattleEvent.onCharacterRecovered,e),t.battleCharacterSetActonState(e,u.IDLE))},t.updateBattleCharacter=(e,r)=>{if(r.ch.hp<=0){if(a.characterGetAnimationState(r.ch)!==a.AnimationState.BATTLE_DEFEATED&&a.characterGetAnimationState(r.ch)!==a.AnimationState.BATTLE_DEAD&&a.characterSetAnimationState(r.ch,a.AnimationState.BATTLE_DEFEATED),!r.isDefeated){r.isDefeated=!0,a.characterSetAnimationState(r.ch,a.AnimationState.BATTLE_DEFEATED),c.playSoundName("dead"),r.staggerGauge.empty(),r.staggerTimer.start(),r.staggerTimer.pause(),r.koTimer.start(),r.koTimer.pause(),r.actionState=u.IDLE;let t=()=>{if(d.battleInvokeEvent(e,d.BattleEvent.onCharacterDamaged,r),d.battleUnsubscribeEvent(e,d.BattleEvent.onTurnEnded,t),!r.isDefeated)return;let a=e.enemies.indexOf(r);if(a>-1)return r.shouldRemove=!0,e.defeated.push(r),void i.roomRemoveCharacter(e.room,r.ch);a=e.allies.indexOf(r),a>-1&&(r.shouldRemove=!0,e.defeated.push(r))};d.battleSubscribeEvent(e,d.BattleEvent.onTurnEnded,t)}}else if(!e.isCompleted){t.battleCharacterIsKnockedDown(r)&&!r.isReviving?r.koTimer.isComplete()&&t.battleCharacterRecoverFromKnockDown(r,e):t.battleCharacterIsStaggered(r)&&!r.isReviving&&r.staggerTimer.isComplete()&&t.battleCharacterRecoverFromStagger(r,e),t.battleCharacterIsCasting(r)&&r.castTimer.isComplete()&&l.completeCast(r),t.battleCharacterIsActingReady(r)&&r.actionReadyTimer.isComplete()&&(r.actionStateIndex=0,l.endAction(r));for(let e=0;e<r.statuses.length;e++){let t=r.statuses[e];t.timer.update(),t.timer.isComplete()&&(r.statuses.splice(e,1),e--)}r.staggerGauge.update(),t.battleCharacterIsActing(r)?t.battleCharacterIsActingReady(r)&&r.ai&&r.ai(e,r):t.battleCharacterCanAct(e,r)&&(r.canActSignaled||(r.canActSignaled=!0,d.battleInvokeEvent(e,d.BattleEvent.onCharacterReady,r)),r.onCanActCb(),r.ai&&!t.battleCharacterIsChanneling(r)&&r.ai(e,r))}}})),define("db/battle-ai",["require","exports","model/battle","model/battle-character","controller/battle-management","utils"],(function(e,t,i,a,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=t.getIfExists=t.get=void 0;let n={};t.get=e=>{let t=n[e];if(!t)throw Error("No battle-ai exists with name: "+e);return t},t.getIfExists=e=>n[e]||null,t.init=()=>{n.BATTLE_AI_ATTACK=(e,t)=>{let n=i.battleGetAllegiance(e,t.ch),l=a.battleCharacterGetSelectedSkill(t),s=i.battleGetTargetableCharacters(e,n,l.type),d=o.randInArr(s);console.log("BATTLE AI ATTACK",t,s),d&&r.invokeSkill(t,l)},n.BATTLE_AI_TUT_BOSS1=(e,t)=>{let a=i.battleGetAllegiance(e,t.ch);if(1===e.enemies.length){let n=t.ch.skills[3];t.ch.skillIndex=t.ch.skills.indexOf(n);let l=i.battleGetTargetableCharacters(e,a,n.type);o.randInArr(l)&&r.invokeSkill(t,n)}else{let n=o.randInArr(t.ch.skills.slice(0,3));t.ch.skillIndex=t.ch.skills.indexOf(n);let l=i.battleGetTargetableCharacters(e,a,n.type);o.randInArr(l)&&r.invokeSkill(t,n)}}}})),define("model/battle",["require","exports","model/room","model/battle-character","model/character","controller/scene/scene-commands","model/generics","controller/battle-actions","model/particle","model/utility"],(function(e,t,i,a,r,o,n,l,s,d){"use strict";var c,m,h,u,p,g,y;Object.defineProperty(t,"__esModule",{value:!0}),t.battleGetRewards=t.battleResetItemTimer=t.battleGetBattleCharacterFromCharacter=t.battleCycleRangeTarget=t.battleCycleMeleeTarget=t.battleGetDyingCharacters=t.battleGetDefeatedCharacters=t.battleUnpauseActionTimers=t.battlePauseActionTimers=t.battleUnpauseTimers=t.battlePauseTimers=t.battleGetTargetedEnemy=t.battleSetEnemyRangeTargetIndex=t.battleSetEnemyTargetIndex=t.battleIsEnemyTargetableByMelee=t.battleGetActingAllegiance=t.battleGetAllPersistentEffectsForAllegiance=t.battleGetPersistentEffects=t.battleRemovePersistentEffect=t.battleAddPersistentEffect=t.battleInvokeEvent=t.battleUnsubscribeEvent=t.battleSubscribeEvent=t.battleGetCharactersByPosition=t.battleGetNearestAttackable=t.battleGetTargetableCharacters=t.battleGetCharactersOfAllegiance=t.battleGetOppositeAllegiance=t.battleGetAllegiance=t.battleIsLoss=t.battleIsVictory=t.battleSetEnemyActorPosition=t.battleSetActorPositions=t.battleStatsCreate=t.battleCreate=t.BattleDamageType=t.BattleStatus=t.BattleAllegiance=t.BattleRow=t.BattlePosition=t.BattleEvent=t.PersistentEffectEvent=void 0,(y=t.PersistentEffectEvent||(t.PersistentEffectEvent={})).onBeforeCharacterEvades="onBeforeCharacterEvades",y.onBeforeCharacterDamaged="onBeforeCharacterDamaged",(g=t.BattleEvent||(t.BattleEvent={})).onCharacterDamaged="onCharacterDamaged",g.onCharacterReady="onCharacterReady",g.onCharacterActionStarted="onCharacterActionStarted",g.onCharacterAction="onCharacterAction",g.onCharacterActionReady="onCharacterActionReady",g.onCharacterActionButtonPressed="onCharacterActionButtonPressed",g.onCharacterActionEnded="onCharacterActionEnded",g.onCharacterStaggered="onCharacterStaggered",g.onCharacterKnockedDown="onCharacterKnockedDown",g.onCharacterPinned="onCharacterPinned",g.onCharacterRecovered="onCharacterRecovered",g.onCharacterCasting="onCharacterCasting",g.onCharacterChannelling="onCharacterChannelling",g.onCharacterSpell="onCharacterSpell",g.onCharacterInterrupted="onCharacterInterrupted",g.onCharacterEvaded="onCharacterEvaded",g.onCharacterDefeated="onCharacterDefeated",g.onMagicShieldDamaged="onMagicShieldDamaged",g.onTurnStarted="onTurnStarted",g.onTurnEnded="onTurnEnded",g.onCompletion="onCompletion",function(e){e.FRONT="front",e.MIDDLE="middle",e.BACK="back"}(c=t.BattlePosition||(t.BattlePosition={})),(p=t.BattleRow||(t.BattleRow={})).TOP="top",p.BOTTOM="bottom",p.NONE="none",function(e){e.ALLY="ally",e.ENEMY="enemy",e.NONE="none"}(m=t.BattleAllegiance||(t.BattleAllegiance={})),(u=t.BattleStatus||(t.BattleStatus={})).DEFEND="defend",u.HASTE="haste",(h=t.BattleDamageType||(t.BattleDamageType={})).RANGED="ranged",h.SWING="swing",h.MAGIC="magic",t.battleCreate=(e,t,i)=>({room:e,isStarted:!1,isCompleted:!1,enemies:i,enemiesStorage:[...i],defeated:[],allies:t,alliesStorage:[...t],subscriptions:{onCharacterDamaged:[],onCharacterReady:[],onCharacterActionStarted:[],onCharacterAction:[],onCharacterActionReady:[],onCharacterActionButtonPressed:[],onCharacterActionEnded:[],onCharacterStaggered:[],onCharacterKnockedDown:[],onCharacterRecovered:[],onCharacterPinned:[],onCharacterSpell:[],onCharacterCasting:[],onCharacterChannelling:[],onCharacterInterrupted:[],onCharacterEvaded:[],onCharacterDefeated:[],onMagicShieldDamaged:[],onTurnStarted:[],onTurnEnded:[],onCompletion:[]},persistentEffects:{onBeforeCharacterEvades:[],onBeforeCharacterDamaged:[]},targetedEnemyIndex:0,targetedEnemyRangeIndex:0,itemTimer:new d.Timer(1e4),isPaused:!1,transitioning:!1}),t.battleStatsCreate=()=>({POW:5,ACC:1,FOR:1,CON:1,RES:1,SPD:1,EVA:1,HP:10,STAGGER:10,RESV:10}),t.battleSetActorPositions=e=>{let i=n.getCurrentPlayer();e.allies.forEach((e,t)=>{let a=i.battlePositions.indexOf(e.ch);o.setAtMarker(e.ch.name,"MarkerAlly"+(a>-1?a:t)),e.positionMarker=t}),e.enemies.forEach(i=>{t.battleSetEnemyActorPosition(e,i)})},t.battleSetEnemyActorPosition=(e,t)=>{let i=t.position,a=0;i===c.MIDDLE?a=2:i===c.BACK&&(a=4),e.enemies.find(e=>e.positionMarker===a)&&a++,e.enemies.find(e=>e.positionMarker===a)&&console.error("WARNING: Setting battle character at a position which is already occupied.",t),o.setAtMarker(t.ch.name,"MarkerEnemy"+a),t.positionMarker=a},t.battleIsVictory=e=>0===e.enemies.length,t.battleIsLoss=e=>0===e.allies.length,t.battleGetAllegiance=(e,t)=>{if(e.enemies.find(e=>e.ch===t))return m.ENEMY;if(e.allies.find(e=>e.ch===t))return m.ALLY;throw Error(`Cannot get battle allegiance for character '${t.name}' that does not exist in battle.`)},t.battleGetOppositeAllegiance=e=>e===m.ALLY?m.ENEMY:m.ALLY,t.battleGetCharactersOfAllegiance=(e,t)=>{switch(t){case m.ALLY:return e.allies;case m.ENEMY:return e.enemies;default:return e.allies}},t.battleGetTargetableCharacters=(e,i,a)=>{let r=t.battleGetCharactersOfAllegiance(e,t.battleGetOppositeAllegiance(i));if(a===l.BattleActionType.SWING){let e;return e=r.filter(e=>e.position===c.FRONT),e.length||(e=e.concat(r.filter(e=>e.position===c.MIDDLE))),e.length||(e=r.filter(e=>e.position===c.BACK)),null!=e?e:null}return r},t.battleGetNearestAttackable=(e,i)=>{let a,r=t.battleGetCharactersOfAllegiance(e,t.battleGetOppositeAllegiance(i));return a=r.find(e=>e.position===c.FRONT),a||(a=r.find(e=>e.position===c.MIDDLE)),a||(a=r.find(e=>e.position===c.BACK)),null!=a?a:null},t.battleGetCharactersByPosition=(e,t)=>e.filter(e=>e.position===t),t.battleSubscribeEvent=(e,t,i)=>{e.subscriptions[t].push(i)},t.battleUnsubscribeEvent=(e,t,i)=>{let a=e.subscriptions[t].indexOf(i);a>-1&&e.subscriptions[t].splice(a,1)},t.battleInvokeEvent=(e,t,i)=>{e.subscriptions[t].slice().forEach(e=>{e(i)})},t.battleAddPersistentEffect=function(e,t,a){var o;e.persistentEffects[t].push(a);let[n,l]=r.characterGetPosTopLeftPx(a.source.ch),d=s.particleCreateFromTemplate([n,l],{duration:1/0,opacity:.5});d.anim=a.anim,null===(o=d.anim)||void 0===o||o.start(),a.particle=d,i.roomAddParticle(e.room,d)},t.battleRemovePersistentEffect=function(e,t,a){let r=e.persistentEffects[t].indexOf(a);r>-1&&(e.persistentEffects[t].splice(r,1),a.particle&&i.roomRemoveParticle(e.room,a.particle))},t.battleGetPersistentEffects=function(e,t,i){return e.persistentEffects[t].slice().filter(e=>e.affectedAllegiance===i)},t.battleGetAllPersistentEffectsForAllegiance=function(e,i){let a=[];for(let t in e.persistentEffects)a=a.concat(e.persistentEffects[t]);return a.filter(a=>t.battleGetAllegiance(e,a.source.ch)===i)},t.battleGetActingAllegiance=e=>e.allies.reduce((e,t)=>e||a.battleCharacterIsPreventingTurn(t),!1)?m.ALLY:e.enemies.reduce((e,t)=>e||a.battleCharacterIsPreventingTurn(t),!1)?m.ENEMY:null,t.battleIsEnemyTargetableByMelee=(e,i)=>{let a=e.enemies,r=t.battleGetCharactersByPosition(a,c.FRONT);if(r.length>0&&i>=r.length)return!1;if(i<r.length)return!0;let o=t.battleGetCharactersByPosition(a,c.MIDDLE);return!(o.length>0&&i>=o.length)},t.battleSetEnemyTargetIndex=(e,i)=>[m.ENEMY,m.ALLY].includes(t.battleGetActingAllegiance(e))?(console.log("Cannot set melee battle target index during enemy/ally acting phase."),!1):t.battleIsEnemyTargetableByMelee(e,i)?t.battleGetDefeatedCharacters(e).length?(console.log("Cannot cannot set target when characters are defeated."),!1):(i<e.enemies.length&&(e.targetedEnemyIndex=i),!0):(console.log("Cannot target characters behind other characters."),!1),t.battleSetEnemyRangeTargetIndex=(e,i)=>[m.ENEMY,m.ALLY].includes(t.battleGetActingAllegiance(e))?(console.log("Cannot set ranged battle target index during enemy/ally acting phase."),!1):t.battleGetDefeatedCharacters(e).length?(console.log("Cannot cannot set ranged target when characters are defeated."),!1):(i<e.enemies.length&&(e.targetedEnemyRangeIndex=i),!0),t.battleGetTargetedEnemy=(e,t)=>{var i;return null!==(i=e.enemies[t===l.BattleActionType.SWING?e.targetedEnemyIndex:e.targetedEnemyRangeIndex])&&void 0!==i?i:null},t.battlePauseTimers=(e,t)=>{e.itemTimer.pauseOverride(),(null!=t?t:e.allies.concat(e.enemies)).forEach(e=>{e.actionTimer.pauseOverride(),e.staggerTimer.pauseOverride(),e.koTimer.pauseOverride(),e.castTimer.pauseOverride(),e.actionReadyTimer.pauseOverride(),e.ch.transform&&e.ch.transform.timer.pauseOverride(),e.statuses.forEach(e=>{e.timer.pauseOverride()})})},t.battleUnpauseTimers=(e,t)=>{console.log("BATTLE UNPAUSE",null!=t?t:e.allies.concat(e.enemies)),e.itemTimer.unpauseOverride(),(null!=t?t:e.allies.concat(e.enemies)).forEach(e=>{e.actionTimer.unpauseOverride(),e.staggerTimer.unpauseOverride(),e.castTimer.unpauseOverride(),e.koTimer.unpauseOverride(),e.actionReadyTimer.unpauseOverride(),e.ch.transform&&e.ch.transform.timer.unpauseOverride(),e.statuses.forEach(e=>{e.timer.unpauseOverride()})})},t.battlePauseActionTimers=(e,t,i)=>{(null!=t?t:e.allies.concat(e.enemies)).forEach(e=>{i?e.actionTimer.pauseOverride():e.actionTimer.pause()})},t.battleUnpauseActionTimers=(e,t,i)=>{(null!=t?t:e.allies.concat(e.enemies)).forEach(e=>{i?e.actionTimer.unpauseOverride():e.actionTimer.unpause()})},t.battleGetDefeatedCharacters=e=>e.allies.concat(e.enemies).filter(e=>e.isDefeated),t.battleGetDyingCharacters=e=>e.allies.concat(e.enemies).filter(e=>e.isDefeated&&e.ch.animationState===r.AnimationState.BATTLE_DEAD),t.battleCycleMeleeTarget=e=>{var i;let a=t.battleGetTargetedEnemy(e,l.BattleActionType.SWING),r=null!==(i=e.enemies.indexOf(a))&&void 0!==i?i:0,o=r,n=e.enemies[r],s=0,d=e.enemies.length,c=!1;do{if(s++,o=r+1,n=e.enemies[o],n||(o=0,n=e.enemies[o]),n&&t.battleIsEnemyTargetableByMelee(e,o)){c=t.battleSetEnemyTargetIndex(e,o);break}}while(n&&s<=d);return c},t.battleCycleRangeTarget=e=>{var i;let a=t.battleGetTargetedEnemy(e,l.BattleActionType.RANGED),r=null!==(i=e.enemies.indexOf(a))&&void 0!==i?i:0,o=r,n=e.enemies[r],s=0,d=e.enemies.length,c=!1;do{s++,o=r+1,n=e.enemies[o],n||(o=0,n=e.enemies[o]),n&&(c=t.battleSetEnemyRangeTargetIndex(e,o))}while(n&&s<=d);return c},t.battleGetBattleCharacterFromCharacter=(e,t)=>{{let i=e.alliesStorage.find(e=>e.ch===t);if(i)return i}{let i=e.enemiesStorage.find(e=>e.ch===t);if(i)return i}return null},t.battleResetItemTimer=e=>{e.itemTimer.start(),e.itemTimer.timestampPause=n.getNow(),e.itemTimer.pauseOverride()},t.battleGetRewards=e=>{var t,i,a,r,o,n;let l=[];return(null===(t=e.template)||void 0===t?void 0:t.getDrops)&&(l=null===(i=e.template)||void 0===i?void 0:i.getDrops()),{items:l,experience:null!==(r=null===(a=e.template)||void 0===a?void 0:a.baseExperience)&&void 0!==r?r:1,tokens:null!==(n=null===(o=e.template)||void 0===o?void 0:o.baseTokens)&&void 0!==n?n:0}}})),define("model/character",["require","exports","model/animation","model/battle","utils","controller/battle-actions","model/generics","model/room","model/canvas","view/draw","model/player","db/overworld-ai","db/encounters/index","db/items/index","view/ui"],(function(e,t,i,a,r,o,n,l,s,d,c,m,h,u,p){"use strict";var g,y,f,v;Object.defineProperty(t,"__esModule",{value:!0}),t.characterUpdate=t.characterRemoveNonPersistentItemStatuses=t.characterSetItemStatusState=t.characterRemoveItemStatus=t.characterAddItemStatus=t.characterHasItemStatus=t.characterGetPortraitSpriteName=t.characterGetExperiencePct=t.characterGetLevel=t.characterGetStat=t.characterGetStatModifier=t.characterUnEquipItem=t.characterEquipItem=t.characterGetEquippedItem=t.characterItemIsEquipped=t.characterSetOverworldAi=t.characterClearTimers=t.characterGetCollisionCircle=t.characterCollidesWithOther=t.characterCanSeeOther=t.characterGetVisionPoint=t.characterHasAnimationState=t.characterRestoreState=t.characterStoreState=t.characterHasTimer=t.characterStopWalking=t.characterStartAi=t.characterStopAi=t.characterRemoveTimer=t.characterAddTimer=t.characterHasTag=t.characterRemoveTag=t.characterAddTag=t.characterCollidesWithRect=t.characterCollidesWithPoint=t.characterResetSpeed=t.characterSetSpeed=t.characterHasWalkTarget=t.characterSetWalkTargetAsync=t.characterSetWalkTarget=t.characterGetSize=t.characterGetPosTopLeft=t.characterGetPosCenterPx=t.characterGetPosTopLeftPx=t.characterGetPosPx=t.characterGetPosBottom=t.characterGetPos=t.characterSetTransform=t.characterGetResvPct=t.characterGetHpPct=t.characterModifyHp=t.characterSetFacingFromAngle=t.characterSetFacing=t.characterOnAnimationCompletion=t.characterSetPos=t.characterOverrideAnimation=t.characterGetAnimationState=t.characterSetAnimationState=t.characterGetAnimation=t.characterGetAnimKey=t.characterCreateFromTemplate=t.characterCreate=t.ANIMATIONS_WITHOUT_FACING=t.ItemStatus=t.AnimationState=t.Facing=t.WeaponEquipState=t.DEFAULT_SPEED=void 0,t.DEFAULT_SPEED=.5,function(e){e.NORMAL="normal",e.RANGED="ranged",e.MAGIC="magic"}(g=t.WeaponEquipState||(t.WeaponEquipState={})),function(e){e.LEFT="left",e.UP="up",e.DOWN="down",e.LEFT_UP="leftup",e.LEFT_DOWN="leftdown",e.RIGHT="left_f",e.RIGHT_UP="leftup_f",e.RIGHT_DOWN="leftdown_f",e.RIGHT2="right",e.RIGHT_UP2="rightup",e.RIGHT_DOWN2="rightdown"}(y=t.Facing||(t.Facing={})),function(e){e.OVERRIDDEN="overridden",e.IDLE="idle",e.WALK="walk",e.BATTLE_IDLE="battle_idle",e.BATTLE_IDLE_RANGED="battle_idle_ranged",e.BATTLE_JUMP="battle_jump",e.BATTLE_EVADED="battle_evaded",e.BATTLE_ATTACK="battle_attack",e.BATTLE_ATTACK_PIERCE="battle_attack_p",e.BATTLE_ATTACK_KNOCKDOWN="battle_attack_k",e.BATTLE_ATTACK_FINISH="battle_attack_f",e.BATTLE_DAMAGED="battle_damaged",e.BATTLE_STAGGERED="battle_staggered",e.BATTLE_RANGED="battle_ranged",e.BATTLE_CAST="battle_cast",e.BATTLE_SPELL="battle_spell",e.BATTLE_CHANNEL="battle_channel",e.BATTLE_ITEM="battle_item",e.BATTLE_FLOURISH="battle_flourish",e.BATTLE_DEFEATED="battle_defeated",e.BATTLE_DEAD="battle_dead",e.BATTLE_KNOCKED_DOWN="battle_knocked_down",e.BATTLE_KNOCKED_DOWN_DMG="battle_knocked_down_damaged",e.BATTLE_REVIVE="battle_revive"}(f=t.AnimationState||(t.AnimationState={})),function(e){e.CLOAKED="cloaked",e.SPEEDY="speedy",e.STAT="stat"}(v=t.ItemStatus||(t.ItemStatus={})),t.ANIMATIONS_WITHOUT_FACING=[f.BATTLE_FLOURISH],t.characterCreate=e=>{let i={name:e,nameLabel:e,fullName:"",spriteBase:"ada",x:0,y:0,z:0,vx:0,vy:0,spriteWidth:32,spriteHeight:32,speed:t.DEFAULT_SPEED,transform:null,hp:10,resv:10,experience:2,experienceCurrency:10,stats:a.battleStatsCreate(),skills:[o.BattleActions.SWING],skillIndex:0,equipment:{weapon:u.get("NoWeapon")},facing:y.LEFT,animationState:f.IDLE,animationKey:"",animationOverride:null,storedAnimations:{},weaponEquipState:g.NORMAL,weaponEquipTypes:[],walkTarget:null,walkAngle:0,walkDistance:0,walkRetries:0,onReachWalkTarget:null,talkTrigger:"",aiState:{},aiEnabled:!0,overworldAi:m.get("DO_NOTHING"),storedState:{},timers:[],tags:[],highlighted:!1,visionRange:48,collisionSize:[16,16],collisionOffset:[0,0],encounterStuckRetries:0,itemStatuses:[],sortOffset:void 0,template:null};return i.ro={character:i,sortY:0,visible:!0},i.animationKey=t.characterGetAnimKey(i),i},t.characterCreateFromTemplate=e=>{var a,r,o;let n=t.characterCreate(e.name);if(n.spriteBase=e.spriteBase,n.facing=e.facing||n.facing,n.animationState=e.animationState||n.animationState,n.animationKey=t.characterGetAnimKey(n),n.hp=null!==(r=null===(a=null==e?void 0:e.stats)||void 0===a?void 0:a.HP)&&void 0!==r?r:n.stats.HP,n.stats=Object.assign({},e.stats||n.stats),n.resv=n.stats.RESV,n.skills=e.skills||n.skills,n.talkTrigger=null!==(o=e.talkTrigger)&&void 0!==o?o:"",n.tags=e.tags||[],e.overworldAi&&"string"==typeof e.overworldAi?n.overworldAi=m.get(e.overworldAi):e.overworldAi&&(n.overworldAi=e.overworldAi),n.overworldAi.onCreate&&n.overworldAi.onCreate(n),e.nameLabel&&(n.nameLabel=e.nameLabel),e.weaponEquipState&&(n.weaponEquipState=e.weaponEquipState),e.spriteSize&&(n.spriteWidth=e.spriteSize[0],n.spriteHeight=e.spriteSize[1],n.sortOffset=n.spriteHeight+1),e.canGetStuckWhileWalking&&(n.walkRetries=-1/0),e.encounterName){let t=h.getIfExists(e.encounterName);if(!t)throw console.error(e),Error(`Cannot create character from template.  No encounter exists with encounterName="${e.encounterName}"`);n.encounter=t}if(e.speed&&(n.speed=e.speed),e.equipment&&Object.assign(n.equipment,e.equipment),e.weaponEquipTypes&&(n.weaponEquipTypes=[...e.weaponEquipTypes]),e.fullName&&(n.fullName=e.fullName),void 0!==e.collisionSize&&(n.collisionSize=[e.collisionSize,e.collisionSize]),void 0!==e.collisionOffset&&(n.collisionOffset=e.collisionOffset.slice()),e.visionRange&&(n.visionRange=e.visionRange),e.overrideAnimationName){let a=e.overrideAnimationName;if(i.hasAnimation(a)){let e=i.createAnimation(a);t.characterOverrideAnimation(n,e)}else console.error("loading ch template",e.name,"Could not find override animation with name: "+a)}return void 0!==e.sortOffset&&(n.sortOffset=e.sortOffset),n.template=e,n},t.characterGetAnimKey=e=>{let{spriteBase:i,facing:a,animationState:r}=e;return t.ANIMATIONS_WITHOUT_FACING.includes(r)?`${i}_${r}`:`${i}_${r}_${a}`},t.characterGetAnimation=e=>{let{storedAnimations:a}=e;if(e.animationState===f.OVERRIDDEN){let t=e.animationOverride;if(t)return t;throw Error("Null overridden animation.")}let r=t.characterGetAnimKey(e),o=a[r];if(o)return o;{i.hasAnimation(r)||(r="ada_idle_down");let e=i.createAnimation(r);return a[r]=e,e}},t.characterSetAnimationState=(e,a,r)=>{e.animationState=a;let o=t.characterGetAnimKey(e);if(o!==e.animationKey){if(e.animationPromise&&(e.animationPromise.reject(),e.animationPromise=void 0),e.animationState===f.OVERRIDDEN)return;if(!i.hasAnimation(o))return void console.log("Warning, tried to set animKey for character which did not exist: "+o);e.animationKey=o;let a=t.characterGetAnimation(e);a.reset(),a.start()}else if(r){let i=t.characterGetAnimation(e);i.reset(),i.start()}},t.characterGetAnimationState=e=>e.animationState,t.characterOverrideAnimation=(e,i,a)=>{t.characterSetAnimationState(e,f.OVERRIDDEN),e.animationOverride=i,a&&(i.loop||i.awaits.push(a)),i.reset(),i.start()},t.characterSetPos=(e,t)=>{e.x=Math.floor(t[0]),e.y=Math.floor(t[1]),e.z=Math.floor(t[2])},t.characterOnAnimationCompletion=(e,i)=>{e.animationPromise&&(console.log("overriding previous animation completion",t.characterGetAnimation(e).name),e.animationPromise.reject());let a=t.characterGetAnimation(e);if(a.loop)return console.error("Setting characterOnAnimationCompletion for an animation set with loop=true",a.name),Promise.resolve();let r={},o=new Promise((t,i)=>{r.resolve=t,r.reject=i,(async()=>{await a.onCompletion(),e.animationPromise=void 0,t()})()}).then(()=>{i()}).catch(e=>{console.log("animation was canceled:",a.name,e)});return e.animationPromise=r,o},t.characterSetFacing=(e,i)=>{e.facing=i,t.characterSetAnimationState(e,e.animationState)},t.characterSetFacingFromAngle=(e,i)=>{if(i>337.5||i<22.5)return void t.characterSetFacing(e,y.UP);let a=[y.UP,y.RIGHT_UP,y.RIGHT,y.RIGHT_DOWN,y.DOWN,y.LEFT_DOWN,y.LEFT,y.LEFT_UP];for(let r=1;r<8;r++)i>=45*r-22.5&&i<=45*(r+1)-22.5&&t.characterSetFacing(e,a[r])},t.characterModifyHp=(e,i)=>{e.hp+=i,e.hp>t.characterGetStat(e,"HP")?e.hp=t.characterGetStat(e,"HP"):e.hp<0&&(e.hp=0)},t.characterGetHpPct=e=>+(e.hp/t.characterGetStat(e,"HP")).toFixed(2),t.characterGetResvPct=e=>+(e.resv/t.characterGetStat(e,"RESV")).toFixed(2),t.characterSetTransform=(e,t)=>{e.transform=t},t.characterGetPos=e=>e.transform?e.transform.current():[e.x,e.y,e.z],t.characterGetPosBottom=e=>{let{x:t,y:i}=e;return[t+16,i+16-4]},t.characterGetPosPx=e=>{let[i,a,o]=t.characterGetPos(e);return r.isoToPixelCoords(i,a,o)},t.characterGetPosTopLeftPx=e=>t.characterGetPosPx(e),t.characterGetPosCenterPx=e=>{let[i,a,o]=t.characterGetPosTopLeft(e),[n,l]=r.isoToPixelCoords(i,a,o),[s,d]=t.characterGetSize(e);return[n+s/2,l+d/2]},t.characterGetPosTopLeft=e=>{let[i,a,r]=t.characterGetPos(e),[o,n]=t.characterGetSize(e);return[i-(o-32),a-(n-32)/2,r]},t.characterGetSize=e=>[e.spriteWidth,e.spriteHeight],t.characterSetWalkTarget=(e,i,a)=>{e.walkTarget=i,e.onReachWalkTarget=a;let o=t.characterGetPosBottom(e),n=b(e),l=r.getAngleTowards(o,n);e.walkAngle=l,e.walkDistance=r.calculateDistance(r.extrapolatePoint(o),r.extrapolatePoint(n)),e.walkRetries>0&&(e.walkRetries=0),t.characterCollidesWithPoint(e,[...n,1.5])&&w(e)},t.characterSetWalkTargetAsync=async(e,i)=>new Promise(a=>{t.characterSetWalkTarget(e,i,a)}),t.characterHasWalkTarget=e=>!!e.walkTarget;let b=e=>e.walkTarget?[e.walkTarget[0]+16,e.walkTarget[1]+16-4]:[0,0];t.characterSetSpeed=(e,t)=>{e.speed=t},t.characterResetSpeed=e=>{e.speed=t.DEFAULT_SPEED},t.characterCollidesWithPoint=(e,i)=>{let a=[...t.characterGetPosBottom(e),1];return r.circleCircleCollision(a,i)},t.characterCollidesWithRect=(e,i)=>{let a=[...t.characterGetPosBottom(e),2];return"none"!==r.circleRectCollision(a,i)},t.characterAddTag=(e,i)=>{t.characterHasTag(e,i)||e.tags.push(i)},t.characterRemoveTag=(e,t)=>{let i=e.tags.indexOf(t);i>-1&&e.tags.splice(i,1)},t.characterHasTag=(e,t)=>e.tags.includes(t),t.characterAddTimer=(e,i)=>{t.characterHasTimer(e,i)||e.timers.push(i)},t.characterRemoveTimer=(e,t)=>{let i=e.timers.indexOf(t);i>-1&&e.timers.splice(i,1)},t.characterStopAi=e=>{e.aiEnabled&&(t.characterStoreState(e),e.aiEnabled=!1,t.characterStopWalking(e))},t.characterStartAi=e=>{e.aiEnabled||(e.aiEnabled=!0,t.characterRestoreState(e))};let w=e=>{var i,a;t.characterSetAnimationState(e,f.IDLE);let r=e.walkTarget;t.characterSetPos(e,[null!==(i=null==r?void 0:r[0])&&void 0!==i?i:0,null!==(a=null==r?void 0:r[1])&&void 0!==a?a:0,e.z]),e.onReachWalkTarget&&e.onReachWalkTarget(),e.walkTarget=null,e.onReachWalkTarget=null};t.characterStopWalking=e=>{e.walkTarget=null,t.characterSetAnimationState(e,f.IDLE)},t.characterHasTimer=(e,t)=>e.timers.includes(t),t.characterStoreState=e=>{e.storedState.facing=e.facing,e.storedState.walkTarget=e.walkTarget},t.characterRestoreState=e=>{e.storedState.facing&&t.characterSetFacing(e,e.storedState.facing),e.storedState.walkTarget&&(e.walkTarget=e.storedState.walkTarget)},t.characterHasAnimationState=(e,a)=>{let r=e.animationState,o=e.animationKey;e.animationState=a;let n=t.characterGetAnimKey(e);return e.animationState=r,e.animationKey=o,i.hasAnimation(n)},t.characterGetVisionPoint=e=>{let[i,a]=t.characterGetPos(e),[o,n]=r.facingToIncrements(r.pxFacingToWorldFacing(e.facing));return[i+e.visionRange*o*.75,a+e.visionRange*n*.75]},t.characterCanSeeOther=(e,i)=>{let[a,o]=t.characterGetPos(i),[n,l]=t.characterGetVisionPoint(e);return r.circleCircleCollision([a,o,1],[n,l,e.visionRange])&&!t.characterHasItemStatus(i,v.CLOAKED)},t.characterCollidesWithOther=(e,i)=>r.circleCircleCollision(t.characterGetCollisionCircle(e),t.characterGetCollisionCircle(i)),t.characterGetCollisionCircle=e=>{let[i,a]=t.characterGetPos(e),[r,o]=e.collisionSize;return[i+e.collisionOffset[0],a+e.collisionOffset[1],Math.min(r/2,o/2)]},t.characterClearTimers=e=>{e.timers=[]},t.characterSetOverworldAi=(e,t)=>{e.overworldAi=t,t.onCreate&&t.onCreate(e)},t.characterItemIsEquipped=(e,t)=>{for(let i in e.equipment)if(e.equipment[i]===t)return!0;return!1},t.characterGetEquippedItem=(e,t)=>{"Accessory"===t?t="accessory1":"Accessory 2"===t&&(t="accessory2"),t=t.toLowerCase();let i=e.equipment[t];if(i)return i},t.characterEquipItem=(e,i,a)=>{var r,o,n,l,s,d;let c=t.characterGetHpPct(e);i.type===u.ItemType.WEAPON?e.equipment.weapon=i:i.type===u.ItemType.ARMOR?e.equipment.armor=i:i.type===u.ItemType.ACCESSORY&&(0===a?e.equipment.accessory1=i:1===a&&(e.equipment.accessory2=i)),c!==t.characterGetHpPct(e)&&(e.hp=Math.round(c*t.characterGetStat(e,"HP"))),e.skills=[];let m=null!==(n=null===(o=null===(r=e.equipment)||void 0===r?void 0:r.weapon)||void 0===o?void 0:o.skills)&&void 0!==n?n:[],h=null!==(d=null===(s=null===(l=e.equipment)||void 0===l?void 0:l.armor)||void 0===s?void 0:s.skills)&&void 0!==d?d:[],p=m.concat(h);for(let t in p)e.skills.push(p[t])},t.characterUnEquipItem=(e,i,a)=>{var r,o,n,l,s,d;let c=t.characterGetHpPct(e);i.type===u.ItemType.WEAPON?e.equipment.weapon=void 0:i.type===u.ItemType.ARMOR?e.equipment.armor=void 0:i.type===u.ItemType.ACCESSORY&&(0===a?e.equipment.accessory1=void 0:1===a&&(e.equipment.accessory2=void 0)),c!==t.characterGetHpPct(e)&&(e.hp=Math.round(c*t.characterGetStat(e,"HP"))),e.skills=[];let m=null!==(n=null===(o=null===(r=e.equipment)||void 0===r?void 0:r.weapon)||void 0===o?void 0:o.skills)&&void 0!==n?n:[],h=null!==(d=null===(s=null===(l=e.equipment)||void 0===l?void 0:l.armor)||void 0===s?void 0:s.skills)&&void 0!==d?d:[],p=m.concat(h);for(let t in p)e.skills.push(p[t])},t.characterGetStatModifier=(e,t)=>{var i;let a=0;for(let r in e.equipment){let o=e.equipment[r];if(o){let e=null===(i=o.modifiers)||void 0===i?void 0:i[t];void 0!==e&&(a+=e)}}return a},t.characterGetStat=(e,i)=>{var a;return(null!==(a=e.stats[i])&&void 0!==a?a:0)+t.characterGetStatModifier(e,i)};let C=e=>Math.round(.04*e**3+.8*e**2+2*e);t.characterGetLevel=e=>{var t;let i=1,a=0,r=(null===(t=e)||void 0===t?void 0:t.experience)||e;if(r<3)return 1;for(a=C(i);r>=a&&i<100;)i++,a=C(i);return i},t.characterGetExperiencePct=e=>{let i=t.characterGetLevel(e),a=C(i-1),o=C(i);return r.normalize(e.experience,a,o,0,1)},t.characterGetPortraitSpriteName=e=>{let t=e.spriteBase+"_portrait";return i.hasAnimation(t)?t:""},t.characterHasItemStatus=(e,t)=>!!e.itemStatuses.find(e=>e.status===t),t.characterAddItemStatus=(e,t,i)=>{e.itemStatuses.push({status:t,statMeta:i,state:"normal"}),setTimeout(()=>{p.renderUi()},100)},t.characterRemoveItemStatus=(e,t)=>{let i=e.itemStatuses.findIndex(e=>e.status===t);i>-1&&e.itemStatuses.splice(i,1),setTimeout(()=>{p.renderUi()},100)},t.characterSetItemStatusState=(e,t,i)=>{let a=e.itemStatuses.find(e=>e.status===t);a&&(a.state=i),setTimeout(()=>{p.renderUi()},100)},t.characterRemoveNonPersistentItemStatuses=e=>{t.characterRemoveItemStatus(e,v.CLOAKED)},t.characterUpdate=e=>{let i=n.getCurrentRoom(),a=n.getFrameMultiplier();if(e.transform&&(e.transform.update(),e.transform.shouldRemove&&(e.transform=null)),e.walkTarget){let i=t.characterGetPosBottom(e),a=b(e),o=r.getAngleTowards(i,a);e.walkAngle=o;let n=Math.sin(e.walkAngle*Math.PI/180),l=-Math.cos(e.walkAngle*Math.PI/180),s=e.walkDistance;e.walkDistance=r.calculateDistance(r.extrapolatePoint(i),r.extrapolatePoint(a)),s<=e.walkDistance&&e.walkRetries++,e.vx=n,e.vy=l,t.characterSetAnimationState(e,f.WALK),(e.walkRetries>10||t.characterCollidesWithPoint(e,[...a,1.5]))&&(w(e),e.vx=0,e.vy=0)}if(0!==e.vx||0!==e.vy){let[o,s]=r.getNormalizedVec(e.vx,e.vy),d=o*a*e.speed,c=s*a*e.speed,{x:m,y:h}=e;e.x+=d,e.y+=c;let u=r.getAngleFromVector(-d,-c)-45;if(u<0&&(u+=360),t.characterSetFacingFromAngle(e,u),T(e)){if(x(e,i)){let a=e.x,o=e.y,n=()=>(e.y=o,e.x=m,x(e,i));if(e.y=h,e.x=a,x(e,i)&&n()&&(e.x=m,e.y=h,x(e,i))){console.log("Leader is standing in a wall, warping to nearest adj tile.");let a=l.roomGetTileBelow(i,[e.x,e.y]),o=l.roomGetEmptyAdjacentTile(i,e);if(a&&o)return void t.characterSetPos(e,[...r.tileToWorldCoords(o.x,o.y),e.z])}}}else[l.roomGetTileBelow(i,[e.x-0,e.y+0])].reduce((e,t)=>e||S(t),!1)&&(e.x=m,e.y=h,e.encounter&&(t.characterStopWalking(e),t.characterStopAi(e),e.encounterStuckRetries++,e.encounterStuckRetries>50&&l.roomRemoveCharacter(i,e),r.timeoutPromise(250+250*Math.random()).then(()=>{let i=n.getCurrentRoom();if(i&&i.characters.includes(e)){let a=l.roomGetTileBelow(i,[e.x,e.y]);if(console.log("This encounter character is stuck, resetting to",null==a?void 0:a.x,null==a?void 0:a.y),a){let i=r.extrapolatePoint(r.tileToWorldCoords(a.x,a.y));e.facing===y.RIGHT||e.facing===y.RIGHT_DOWN?i[1]+=4:e.facing!==y.LEFT&&e.facing!==y.LEFT_DOWN||(i[0]+=4),t.characterSetPos(e,i)}t.characterStartAi(e)}})))}let[o,s]=t.characterGetPos(e),[,d]=r.isoToPixelCoords(o,s,0);if(e.ro){let t=33;void 0!==e.sortOffset&&(t=e.sortOffset),e.ro.sortY=d+t}e.vx=0,e.vy=0};let S=e=>(null==e?void 0:e.isWall)&&!(null==e?void 0:e.isProp),T=e=>"ada"===e.spriteBase,x=(e,t)=>{let i=l.roomGetTileBelow(t,[e.x,e.y]),a=null,r=null,o=null;i&&(a=l.roomGetTileAt(t,i.x,Math.floor((e.y+22)/l.TILE_HEIGHT_WORLD)),r=l.roomGetTileAt(t,Math.floor((e.x+22)/l.TILE_WIDTH_WORLD),i.y),o=l.roomGetTileAt(t,Math.floor((e.x+22)/l.TILE_WIDTH_WORLD),Math.floor((e.y+22)/l.TILE_HEIGHT_WORLD)));let n=S(a)||S(r)||S(o);if((null==i?void 0:i.isWall)||n)return!0}})),define("model/room",["require","exports","model/sprite","utils","model/character","db/characters/index","view/draw","lib/rpgscript","db/tiles","model/animation","model/render-object","model/canvas","model/scene","model/generics","db/items/index","model/utility","controller/ui-actions"],(function(e,t,i,a,r,o,n,l,s,d,c,m,h,u,p,g,y){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.roomGetEmptyAdjacentTile=t.roomDoCharactersOccupySameTile=t.roomGetDistanceToNearestWallInFacingDirection=t.roomHide=t.roomShow=t.roomRemoveProp=t.roomGetProp=t.roomRemoveParticle=t.roomRemoveCharacter=t.roomAddCharacter=t.roomGetCharacterByName=t.roomGetTileBelow=t.roomAddParticle=t.roomGetTileAt=t.createRoom=t.awaitAllRoomProps=t.loadDynamicPropsTileset=t.roomCopy=t.getAllTagMarkers=t.tilePosToWorldPos=t.TILE_HEIGHT_WORLD=t.TILE_WIDTH_WORLD=t.TILE_HEIGHT=t.TILE_WIDTH=void 0,t.TILE_WIDTH=32,t.TILE_HEIGHT=32,t.TILE_WIDTH_WORLD=16,t.TILE_HEIGHT_WORLD=16,t.tilePosToWorldPos=(e,i)=>[e*t.TILE_WIDTH/2,i*t.TILE_HEIGHT/2],t.getAllTagMarkers=(e,t)=>e.taggedMarkers.filter(e=>e.name===t);let f=e=>["props_0","props_1","props_2","props_3","props_4","props_5","props_6","props_8","props_9","props_10","props_11","props_12","props_13"].includes(e);t.roomCopy=e=>t.createRoom(e.name,e.tiledJson);let v=(e,t)=>{if(0===t)return{sprite:"invisible",tileWidth:32,tileHeight:32};let i=0;do{let a=e[i],r=e[i+1];if(!r||t>=a.firstgid&&t<r.firstgid)return{sprite:a.name+"_"+(t-a.firstgid),tileWidth:a.tilewidth,tileHeight:a.tileheight};i++}while(i<e.length);throw Error("Could not determine sprite from gid:"+t)},b=null;t.loadDynamicPropsTileset=async()=>{var e,t;let i=await fetch("res/props-dynamic.tiled-sheet.tsx").then(e=>e.text());i&&(b=null!==(t=null===(e=i.match(/source="(.*)\.[\w]+"/g))||void 0===e?void 0:e.map(e=>e.slice(e.indexOf('"')+1,e.lastIndexOf('"')-4)))&&void 0!==t?t:null,console.log("PROPS DYNAMIC",b))};let w=[];t.awaitAllRoomProps=async()=>{await Promise.all(w)},t.createRoom=(e,y)=>{var C;let{width:S,height:T,data:x}=null!==(C=y.layers.find(e=>"Tiles"===e.name))&&void 0!==C?C:{};if(!x)throw Error(`Cannot create room '${e}', it does not have a layer named 'Tiles'`);let E=y.layers.find(e=>"Tiles2"===e.name),{objects:A}=y.layers.find(e=>"Props"===e.name)||{},{objects:_}=y.layers.find(e=>"Objects"===e.name)||{},{objects:I}=y.layers.find(e=>"Objects2"===e.name)||{},{firstgid:k}=y.tilesets.find(e=>{var t;return"props-dynamic"===e.name||(null!==(t=e.source)&&void 0!==t?t:"").indexOf("props-dynamic")>-1})||{firstGid:-9999999},R=S*t.TILE_WIDTH,P=T*t.TILE_HEIGHT/2,[O,M]=m.createCanvas(R,P+t.TILE_HEIGHT),L={name:e,tiledJson:y,width:S,height:T,widthPx:R,heightPx:P,props:[],tiles:[],characters:[],particles:[],markers:{},taggedMarkers:[],triggerActivators:[],renderObjects:[],floorTileObjects:[],floor:i.createSprite(O),defaultFloorSprite:"floors_1",visible:!0,bgImage:"",bgTransform:new g.Transform([0,0,0],[0,0,0],1e3,g.TransformEase.LINEAR)};console.log("create room",e);let B=e=>{var t;try{let i=s.getReplacementTemplate(e.sprite);i&&e.ro&&(e.ro.sprite=i.baseSprite,e.isWall=null!==(t=i.isWall)&&void 0!==t?t:e.isWall,(null==i?void 0:i.animName)&&(e.animName=i.animName,e.ro.anim=d.createAnimation(i.animName),e.ro.anim.start()),i.onAfterCreation&&i.onAfterCreation(e))}catch(e){console.error("Failed to apply tile template: ",e)}},N=t=>{let r=t.x,o=t.y,n=t.gid,l=n-k;if(n>=k&&n<k+(null==b?void 0:b.length)){if(b){let s=b[l];if(!s)throw Error(`Could not load prop in room definition '${e}', the propIndex '${l}' has no associated tilesetTile. (gid=${n} startingGid=${k})`);w.push(new Promise(e=>{i.loadImageAsSprite(s,a.removeFileExtension(s)).then(()=>{let i={id:`prop,${r},${o}`,x:r,y:o,sprite:s,isDynamic:!0,isFront:"front"===t.type},a=c.createPropRenderObject(i);i.ro=a,L.props.push(i),L.renderObjects.push(a),e()})}))}}else if(y.tilesets&&n){let{sprite:e}=v(y.tilesets,n),i={id:`prop,${r},${o}`,x:r,y:o,name:t.name||void 0,sprite:e,isDynamic:!0,sortOffset:isNaN(parseFloat(t.type))?void 0:parseFloat(t.type),isFront:"front"===t.type},a=c.createPropRenderObject(i);i.ro=a,L.props.push(i),L.renderObjects.push(a)}},D=x.slice();if(E&&E.data&&E.data.forEach((e,t)=>{0!==e&&(D[t]=e)}),D.forEach((e,t)=>{0===e&&(e=129);let{sprite:i,tileWidth:a,tileHeight:r}=v(y.tilesets,e),o=i.indexOf("wall")>-1,n=i.indexOf("props")>-1,l=(i.indexOf("floors"),!1);E&&0!==E.data[t]&&x[t]!==E.data[t]&&(l=!0);let s={sprite:i,tileWidth:a,tileHeight:r,isWall:o||n,isProp:n&&!f(i),id:e-1,x:t%S,y:Math.floor(t/S),highlighted:!1};L.tiles.push(s);let d=c.createTileRenderObject(s);if(d.isFloor){if(L.renderObjects.push(d),"floors_0"===s.sprite&&(s.isProp=!0,s.isWall=!0),l){let{sprite:e}=v(y.tilesets,x[t]),i=e,a=Object.assign(Object.assign({},s),{tileWidth:32,tileHeight:32,sprite:i,id:l&&x[t]||1}),r=c.createTileRenderObject(a);a.ro=r,a.ro.sortY-=1,B(a),s.floorTileBeneath=a,L.renderObjects.push(r)}}else{let e=L.defaultFloorSprite;if(l){let{sprite:i}=v(y.tilesets,x[t]);e=i}if(s.isWall&&!s.isProp){let i=Object.assign(Object.assign({},s),{tileWidth:32,tileHeight:32,sprite:e,id:l&&x[t]||1}),a=c.createTileRenderObject(i);i.ro=a,B(i),s.floorTileBeneath=i,L.renderObjects.push(a)}else{d.sortY+=8;let t=Object.assign(Object.assign({},s),{tileWidth:32,tileHeight:32,sprite:e,id:1,x:s.x,y:s.y}),i=c.createTileRenderObject(t);t.ro=i,B(t),s.floorTileBeneath=t,L.renderObjects.push(i)}L.renderObjects.push(d)}s.ro=d,B(s)}),A&&A.forEach(N),_||I){let i=null!=_?_:[];i=i.concat(null!=I?I:[]),i.forEach(i=>{let n=0===i.name.toLowerCase().indexOf("tagmarker"),s=i.name.toLowerCase().indexOf("marker")>-1,d=0===i.name.toLowerCase().indexOf("#"),m=0===i.name.toLowerCase().indexOf("item");n?(e=>{let t=e.x,i=e.y,[r,o]=a.isoToPixelCoords(t,i),[n,l]=a.pixelToIsoCoords(r,o-16),s={name:e.name,x:n,y:l};L.taggedMarkers.push(s),L.renderObjects.push(c.createMarkerRenderObject(s))})(i):s?(t=>{let i=t.x,r=t.y,[o,n]=a.isoToPixelCoords(i,r),[l,s]=a.pixelToIsoCoords(o,n-16);if(L.markers[t.name])throw Error(`Could not load marker '${t.name}' in room definition '${e}', a marker with that name already exists.`);let d={name:t.name,x:l,y:s};L.markers[t.name]=d,L.renderObjects.push(c.createMarkerRenderObject(d))})(i):d?(t=>{let i=t.x,r=t.y,o=t.width,n=t.height,s=t.name.slice(1);if(void 0===t.gid){let e=8,t=24,a={polygon:[[t+i,e+r],[t+i+o,e+r],[t+i+o,e+r+n],[t+i,e+r+n]],name:s,x:i,y:r,width:o,height:n,isTrigger:!0};L.triggerActivators.push(a),L.renderObjects.push(c.createTriggerActivatorRenderObject(a))}else{let[o,n]=a.isoToPixelCoords(i,r),[d,m]=a.pixelToIsoCoords(o,n-16);if(!l.getTrigger(s))throw Error(`Could not load trigger '${t.name}' in room definition '${e}', a trigger with that name does not exist.)`);let h={name:s,x:d,y:m,width:16,height:16,isTrigger:!0};L.triggerActivators.push(h),L.renderObjects.push(c.createTriggerActivatorRenderObject(h))}})(i):m?(t=>{let i=t.name.slice(4);if(!p.getIfExists(i))throw Error(`Could not load treasure ${t.name} in room definition ${e}, no entry for the item is in the db`);let a=t.x-64+16,r=t.y-64+16,o={id:`prop,${a},${r}`,x:a,y:r,sprite:"props_31",isDynamic:!0,isFront:!1,isItem:!0,itemName:i},n=c.createPropRenderObject(o,!0);o.ro=n,L.props.push(o),L.renderObjects.push(n)})(i):i.name&&"Prop"!==i.name.slice(0,4)?(i=>{var n;let l=i.x,s=i.y,[d,c]=a.isoToPixelCoords(l,s),[m,p]=a.pixelToIsoCoords(d,c-16),g=o.get(i.name);if(!g)throw Error(`Could not load character '${i.name}' in room definition '${e}', no entry in the db.`);let y=null!==(n=i.properties)&&void 0!==n?n:[],f=y.find(e=>"overworldAi"===e.name);f&&(g.overworldAi=f.value);let v=y.find(e=>"encounterName"===e.name);if(v){let e=g.name+","+i.id,t=u.getCurrentScene();if(h.sceneIsEncounterDefeated(t,e,L.name))return;g.encounterName=v.value,g.name=e,g.nameLabel=g.name}else f&&console.error(`Error, character has an overworldAi but not an encounterName: ${i.name} `,i);let b=r.characterCreateFromTemplate(g);r.characterSetPos(b,[m,p,0]),t.roomAddCharacter(L,b)})(i):N(i)})}L.floorTileObjects=L.floorTileObjects.sort((e,t)=>e.sortY<t.sortY?-1:1);for(let e=0;e<L.floorTileObjects.length;e++){let{sprite:t,px:i,py:a}=L.floorTileObjects[e];t&&n.drawSprite(t,i+L.widthPx/2,a,1,M)}return L},t.roomGetTileAt=(e,t,i)=>t<0||t>=e.width||i<0||i>=e.height?null:e.tiles[i*e.width+t],t.roomAddParticle=(e,t)=>{e.particles.push(t),t.uiComponent&&y.addRoomUiParticle(t)},t.roomGetTileBelow=(e,i)=>{let[a,r]=i;return t.roomGetTileAt(e,Math.floor((a+t.TILE_WIDTH_WORLD-3)/t.TILE_WIDTH*2),Math.floor((r+t.TILE_HEIGHT_WORLD-3)/t.TILE_HEIGHT*2))},t.roomGetCharacterByName=(e,t)=>{for(let i=0;i<e.characters.length;i++){let a=e.characters[i];if(a.name.toLowerCase()===t.toLowerCase())return a}return null},t.roomAddCharacter=(e,t)=>{e.characters.push(t),t.ro&&e.renderObjects.push(t.ro)},t.roomRemoveCharacter=(e,t)=>{let i=e.characters.indexOf(t);if(i>-1&&e.characters.splice(i,1),t.ro){let i=e.renderObjects.indexOf(t.ro);i>-1&&e.renderObjects.splice(i,1)}},t.roomRemoveParticle=(e,t)=>{let i=e.particles.indexOf(t);i>-1&&e.particles.splice(i,1),y.removeRoomUiParticle(t)},t.roomGetProp=(e,t)=>{for(let i=0;i<e.props.length;i++){let a=e.props[i];if(a.name===t)return a}},t.roomRemoveProp=(e,t)=>{let i=e.props.indexOf(t);i>-1&&e.props.splice(i,1);let a=e.renderObjects.indexOf(t.ro);a>-1&&e.renderObjects.splice(a,1)},t.roomShow=e=>{e.visible=!0},t.roomHide=e=>{e.visible=!1};let C=(e,i,r,o)=>{let n=t.roomGetTileBelow(e,[i,r]);if(!n)return console.error(e,i,r),console.error("cannot _innerNearestInSomeDirection, given point is not contained within the room."),1/0;let[l,s]=a.facingToIncrements(a.pxFacingToWorldFacing(o)),d=0,c=0,m=0;do{if(n){let a=t.roomGetTileBelow(e,[i+c,r+m]);if(!a||a.isWall)break;n=a,c+=1*l,m+=1*s}d++}while(d<100);return a.calculateDistance([i,r,0],[i+c,r+m,0])};t.roomGetDistanceToNearestWallInFacingDirection=(e,t)=>{let[i,a]=r.characterGetPosBottom(t),o=[[i+32,a],[i-32,a],[i,a+32],[i,a-32]],n=1/0;for(let i=0;i<o.length;i++){let a=C(e,o[i][0],o[i][1],t.facing);n=Math.min(n,a)}return n},t.roomDoCharactersOccupySameTile=(e,i,a)=>{let r=t.roomGetTileBelow(e,[i.x,i.y]),o=t.roomGetTileBelow(e,[a.x,a.y]);return!(!r||!o||r!==o)},t.roomGetEmptyAdjacentTile=(e,i,a)=>{let r=t.roomGetTileBelow(e,[i.x-t.TILE_WIDTH_WORLD,i.y]),o=t.roomGetTileBelow(e,[i.x,i.y-t.TILE_HEIGHT_WORLD]),n=t.roomGetTileBelow(e,[i.x+t.TILE_WIDTH_WORLD,i.y]),l=t.roomGetTileBelow(e,[i.x,i.y+t.TILE_HEIGHT_WORLD]),s=[r,o,n,l];if(a){let{x:e,y:t}=a,{x:d,y:c}=i,m=c-t;d-e<0?s=m<0?[n,l,r,o]:[n,o,r,l]:m<0&&(s=[r,l,n,o])}for(let i=0;i<s.length;i++){let a=s[i];if(a&&!a.isWall&&!a.isProp){let i=t.roomGetTileAt(e,a.x,a.y+1),r=t.roomGetTileAt(e,a.x+1,a.y);if(null==i?void 0:i.isWall)continue;if(null==r?void 0:r.isWall)continue;return a}}return null}})),define("model/utility",["require","exports","model/generics","utils","model/room"],(function(e,t,i,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Transform=t.transformOffsetJumpFar=t.transformOffsetJumpMedium=t.transformOffsetJumpShort=t.transformOffsetWeightedParticle=t.transformOffsetFlat=t.TransformEase=t.Gauge=t.Timer=void 0;class o{constructor(e){this.timestampStart=i.getNow(),this.timestampPause=0,this.duration=e,this.shouldRemove=!1,this.paused=!1,this.pausedOverridden=!1,this.awaits=[]}start(e){this.paused&&(this.timestampPause=i.getNow(),this.unpause()),this.timestampStart=i.getNow(),this.duration=null!=e?e:this.duration}isPaused(){return this.paused||this.pausedOverridden}pause(){this.paused||(this.paused=!0,this.timestampPause=i.getNow())}pauseOverride(){this.pausedOverridden||(this.pausedOverridden=!0,this.paused||(this.timestampPause=i.getNow()))}unpause(){this.paused&&(this.paused=!1,this.updateStart(i.getNow()-this.timestampPause))}unpauseOverride(){this.pausedOverridden&&(this.pausedOverridden=!1,this.paused||this.updateStart(i.getNow()-this.timestampPause))}updateStart(e){this.timestampStart+=e}update(){this.isComplete()&&(this.awaits.forEach(e=>e()),this.awaits=[])}isComplete(){return!this.pausedOverridden&&this.getPctComplete()>=1}onCompletion(){return new Promise(e=>{this.isComplete()||this.awaits.push(e)})}forceComplete(){this.timestampStart=-999999}getPctComplete(){let e=i.getNow();this.isPaused()&&(e-=e-this.timestampPause);let t=e-this.timestampStart;return t>this.duration?t=this.duration:t<0&&(t=-1),Math.min(1,t/this.duration)}getDiff(){let e=i.getNow();return this.isPaused()&&(e-=e-this.timestampPause),[e-this.timestampStart,e-this.timestampPause,this.timestampStart,this.timestampPause]}markForRemoval(){this.shouldRemove=!0}}var n;t.Timer=o,t.Gauge=class{constructor(e,t){this.max=e,this.current=0,this.decayRate=t}fill(e){this.current+=e,this.current>this.max&&(this.current=this.max)}empty(){this.current=0}isFull(){return this.current>=this.max}getPct(){return this.current/this.max}update(){this.current-=this.decayRate*i.getFrameMultiplier(),this.current<0&&(this.current=0)}},function(e){e.LINEAR="linear",e.EASE_OUT="ease_out"}(n=t.TransformEase||(t.TransformEase={})),t.transformOffsetFlat=e=>[0*e,0*e,0*e],t.transformOffsetWeightedParticle=e=>{if(e<.6){let t=a.normalizeClamp(e,0,.6,0,1);return[0,-r.TILE_HEIGHT*Math.sin(t*Math.PI),0]}{let t=a.normalizeClamp(e,.6,1,0,1);return[0,-r.TILE_HEIGHT/4*Math.sin(t*Math.PI),0]}},t.transformOffsetJumpShort=e=>[0,0,r.TILE_HEIGHT*Math.sin(e*Math.PI)],t.transformOffsetJumpMedium=e=>[0,0,2*r.TILE_HEIGHT*Math.sin(e*Math.PI)],t.transformOffsetJumpFar=e=>[0,0,4*r.TILE_HEIGHT*Math.sin(e*Math.PI)];class l{constructor(e,i,a,r,n){this.startX=e[0],this.startY=e[1],this.startZ=e[2],this.endX=i[0],this.endY=i[1],this.endZ=i[2],this.timer=new o(a),this.ease=r,this.shouldRemove=!1,this.offsetFunc=n||t.transformOffsetFlat,this.timer.start()}static copy(e){return new l([e.startX,e.startY,e.startZ],[e.endX,e.endY,e.endZ],e.timer.duration,e.ease,e.offsetFunc)}start(){return[this.startX,this.startY,this.endZ]}end(){return[this.endX,this.endY,this.endZ]}current(){let[e,t,i]=this.offsetFunc(this.timer.getPctComplete(),this),r=this.timer.getPctComplete(),o=this.ease===n.EASE_OUT?a.normalizeEaseOutClamp:a.normalizeClamp;return[o(r,0,1,this.startX,this.endX)+e,o(r,0,1,this.startY,this.endY)+t,o(r,0,1,this.startZ,this.endZ)+i]}update(){this.timer.update()}createInverse(){return new l([this.endX,this.endY,this.endZ],[this.startX,this.startY,this.startZ],this.timer.duration,this.ease,this.offsetFunc)}markForRemoval(){this.shouldRemove=!0}}t.Transform=l})),define("utils",["require","exports","model/generics","model/canvas","model/utility","model/character"],(function(e,t,i,a,r,o){"use strict";function n(e,t,i,a){let r=e/a;return-i*r*(r-2)+t}function l(e,t,i,a,r){return a+(e-t)*(r-a)/(i-t)}function s(e,t,i,a,r){let o=l(e,t,i,a,r);return a<r?o>r?o=r:o<a&&(o=a):o<r?o=r:o>a&&(o=a),o}Object.defineProperty(t,"__esModule",{value:!0}),t.isDevelopmentMode=t.msToTimeLabel=t.sortItems=t.varyStats=t.hexToRGBA=t.to1dIndex=t.facingToIncrements=t.pxFacingToWorldFacing=t.randInArr=t.toFixedPrecision=t.createPolygonFromRect=t.getAngleFromVector=t.degreesToRadians=t.radiansToDegrees=t.getNormalizedVec=t.getAngleTowards=t.circleRectCollision=t.circleCircleCollision=t.calculateDistance=t.removeIfPresent=t.getRandBetween=t.timeoutPromise=t.normalizeEaseOutClamp=t.normalizeEaseOut=t.normalizeClamp=t.normalize=t.randomId=t.extrapolatePoint=t.truncatePoint3d=t.removeFileExtension=t.pxToCanvasCoords4by3=t.worldToCanvasCoords4by3=t.tileToWorldCoords=t.pixelToIsoCoords=t.isoToPixelCoords=void 0,t.isoToPixelCoords=(e,t,i)=>[e-t,(e+t)/2-(null!=i?i:0)/2],t.pixelToIsoCoords=(e,t)=>[(2*t+e)/2,(2*t-e)/2],t.tileToWorldCoords=(e,t)=>[16*e,16*t],t.worldToCanvasCoords4by3=(e,i,a)=>{let[r,o]=t.isoToPixelCoords(e,i,a);return t.pxToCanvasCoords4by3(r,o)},t.pxToCanvasCoords4by3=(e,t)=>{let[r,o]=i.getCameraDrawOffset(),n=a.getDrawScale();return[(e+r)*n-(n>=4?686:0),(t+o)*n-(n>=4?512:0)]},t.removeFileExtension=e=>{let t=e.lastIndexOf(".");return t>-1&&(e=e.slice(0,t)),e},t.truncatePoint3d=e=>[e[0],e[1]],t.extrapolatePoint=e=>[e[0],e[1],0],t.randomId=()=>Math.random().toString(36).substr(2,9),t.normalize=l,t.normalizeClamp=s,t.normalizeEaseOut=function(e,t,i,a,r){return n(l(e,t,i,0,1),a,r-a,1)},t.normalizeEaseOutClamp=function(e,t,i,a,r){return n(s(e,t,i,0,1),a,r-a,1)},t.timeoutPromise=async(e,t)=>{let a=new r.Timer(e);t||i.addTimer(a),a.start(),await a.onCompletion(),t||i.removeTimer(a)},t.getRandBetween=(e,t)=>Math.floor(Math.random()*(t-e))+e,t.removeIfPresent=(e,t)=>{let i=e.indexOf(t);return i>-1&&(e.splice(i,1),!0)},t.calculateDistance=(e,t)=>{let[i,a,r]=e,[o,n,l]=t;return Math.sqrt(Math.pow(o-i,2)+Math.pow(n-a,2)+Math.pow(l-r,2))},t.circleCircleCollision=(e,i)=>{let[a,r,o]=e,[n,l,s]=i;return t.calculateDistance([a,r,0],[n,l,0])<=o+s},t.circleRectCollision=(e,t)=>{let[i,a,r]=e,o=[i-r,a-r,2*r,2*r],[n,l,s,d]=o,[c,m,h,u]=t,p=n+s/2-(c+h/2),g=l+d/2-(m+u/2),y=(s+h)/2,f=(d+u)/2,v=y*g,b=f*p,w="none";return Math.abs(p)<=y&&Math.abs(g)<=f&&(w=v>b?v>-b?"bottom":"left":v>-b?"right":"top",i<=c&&a<=m?w="top-left":i>=c+h&&a<=m?w="top-right":i<=c&&a>=m+u?w="bottom-left":i>=c+h&&a>=m+u&&(w="bottom-right")),w},t.getAngleTowards=function(e,t){let[i,a]=e,[r,o]=t,n=o-a,l=r-i,s=Math.sqrt(l*l+n*n),d=0;return d=o>=a&&r>=i?180*Math.asin(n/s)/Math.PI+90:o>=a&&r<i?180*Math.asin(n/-s)/Math.PI-90:o<a&&r>i?180*Math.asin(n/s)/Math.PI+90:180*Math.asin(-n/s)/Math.PI-90,d>=360&&(d=360-d),d<0&&(d=360+d),d},t.getNormalizedVec=(e,t)=>{let i=Math.sqrt(e*e+t*t);return[e/i,t/i]},t.radiansToDegrees=e=>e*(180/Math.PI),t.degreesToRadians=e=>e*(Math.PI/180),t.getAngleFromVector=(e,i)=>{if(0==e)return i>0?90:0==i?0:270;if(0==i)return e>=0?0:180;let a=t.radiansToDegrees(Math.atan(i/e));return e<0&&i<0||e<0?a=180+a:i<0&&(a=270+(90+a)),a},t.createPolygonFromRect=e=>{let[t,i,a,r]=e;return[[t,i],[t+a,i],[t+a,i+r],[t,i+r]]},t.toFixedPrecision=(e,t)=>parseFloat(e.toFixed(t)),t.randInArr=function(e){return e[Math.floor(Math.random()*e.length)]},t.pxFacingToWorldFacing=e=>({[o.Facing.LEFT]:o.Facing.LEFT_DOWN,[o.Facing.RIGHT]:o.Facing.RIGHT_UP,[o.Facing.UP]:o.Facing.LEFT_UP,[o.Facing.DOWN]:o.Facing.RIGHT_DOWN,[o.Facing.LEFT_DOWN]:o.Facing.DOWN,[o.Facing.RIGHT_DOWN]:o.Facing.RIGHT,[o.Facing.LEFT_UP]:o.Facing.LEFT,[o.Facing.RIGHT_UP]:o.Facing.UP}[e]),t.facingToIncrements=e=>{let t=0,i=0;switch(e){case o.Facing.LEFT:t=-1;break;case o.Facing.RIGHT:t=1;break;case o.Facing.UP:i=-1;break;case o.Facing.DOWN:i=1;break;case o.Facing.LEFT_UP:t=-1,i=-1;break;case o.Facing.RIGHT_UP:t=1,i=-1;break;case o.Facing.LEFT_DOWN:t=-1,i=1;break;case o.Facing.RIGHT_DOWN:t=1,i=1}return[t,i]},t.to1dIndex=(e,t)=>e[1]*t+e[0]%t,t.hexToRGBA=function(e,t){let i=parseInt(e.slice(1,3),16),a=parseInt(e.slice(3,5),16),r=parseInt(e.slice(5,7),16);return void 0!==t?"rgba("+i+", "+a+", "+r+", "+t+")":"rgb("+i+", "+a+", "+r+")"},t.varyStats=e=>{let t=e.stats,i=Object.keys(t);for(let e=0;e<i.length;e++){let a=i[e];"STAGGER"!==a&&Math.random()>.5&&(t[a]++,e--)}return e},t.sortItems=(e,t)=>{var i,a;return(null!==(i=e.sortName)&&void 0!==i?i:e.label)<(null!==(a=t.sortName)&&void 0!==a?a:t.label)?-1:1},t.msToTimeLabel=e=>{let t=[],i=Math.trunc(e/36e5);i>0&&(t.push(i+"h"),e-=36e5*i);let a=Math.trunc(e/6e4);a>0&&(t.push(a+"m"),e-=6e4*a);let r=Math.trunc(e/1e3);return r>0&&t.push(r+"s"),t.join(" ")},t.isDevelopmentMode=()=>window.DEVELOPMENT})),define("model/generics",["require","exports","model/sound"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getItemStores=t.setItemStores=t.isCutsceneSkipEnabled=t.setCutsceneSkipEnabled=t.getCutsceneSpeedMultiplier=t.setCutsceneSpeedMultiplier=t.isDebugModeEnabled=t.setDebugModeEnabled=t.isOverworldUpdateKeysDisabled=t.setOverworldUpdateKeysDisabled=t.getCharactersWithSuspendedAi=t.removeCharacterWithSuspendedAi=t.addCharacterWithSuspendedAi=t.setShowOnScreenControls=t.shouldShowOnScreenControls=t.setDurationPlayed=t.getDurationPlayed=t.setTimeLoaded=t.getTimeLoaded=t.setUseZip=t.shouldUseZip=t.isPauseRenderingEnabled=t.disablePauseRendering=t.enablePauseRendering=t.setPlayerWallGlowEnabled=t.getPlayerWallGlowEnabled=t.setGlobalParticleSystem=t.getGlobalParticleSystem=t.getAllTimers=t.removeTimer=t.addTimer=t.setCameraTransform=t.getCameraTransform=t.setCameraDrawOffset=t.getCameraDrawOffset=t.isArcadeGameMuted=t.setArcadeGameMuted=t.getArcadeGameVolume=t.setArcadeGameVolume=t.getVolume=t.setVolume=t.setSoundEnabled=t.getSoundEnabled=t.setRenderBackgroundColor=t.getRenderBackgroundColor=t.hideMarkers=t.showMarkers=t.getMarkersVisible=t.hideTriggers=t.showTriggers=t.getTriggersVisible=t.disableKeyUpdate=t.enableKeyUpdate=t.getKeyUpdateEnabled=t.getRenderables=t.removeRenderable=t.addRenderable=t.setIsPaused=t.getIsPaused=t.isKeyDown=t.setKeyUp=t.setKeyDown=t.setMousePos=t.getMousePos=t.setFrameMultiplier=t.getFrameMultiplier=t.setDeltaT=t.getDeltaT=t.setNow=t.getNow=t.setCurrentPlayer=t.getCurrentPlayer=t.setCurrentScene=t.getCurrentScene=t.setCurrentOverworld=t.getCurrentOverworld=t.setCurrentBattle=t.getCurrentBattle=t.setCurrentRoom=t.getCurrentRoom=void 0;let a=window.room=null;t.getCurrentRoom=()=>a,t.setCurrentRoom=e=>{a=window.room=e};let r=window.battle=null;t.getCurrentBattle=()=>r,t.setCurrentBattle=e=>{r=window.battle=e};let o=window.overworld=null;t.getCurrentOverworld=()=>o,t.setCurrentOverworld=e=>{o=window.overworld=e};let n=window.scene=null;t.getCurrentScene=()=>n,t.setCurrentScene=e=>{n=window.scene=e};let l=window.player=null;t.getCurrentPlayer=()=>l,t.setCurrentPlayer=e=>{l=window.player=e};let s=0;t.getNow=()=>s,t.setNow=e=>{s=e};let d=0;t.getDeltaT=()=>d,t.setDeltaT=e=>{d=e};let c=0;t.getFrameMultiplier=()=>c,t.setFrameMultiplier=e=>{c=e};let m=[0,0];t.getMousePos=()=>m,t.setMousePos=(e,t)=>{m=[e,t]};let h={};t.setKeyDown=e=>{h[e]=!0},t.setKeyUp=e=>{h[e]=!1},t.isKeyDown=e=>{var t;return null!==(t=h[e])&&void 0!==t&&t};let u=window.isPaused=!1;t.getIsPaused=()=>u,t.setIsPaused=e=>{u=window.isPaused=e};let p=window.renderables={};t.addRenderable=(e,t)=>{p[e]=t},t.removeRenderable=e=>{delete p[e]},t.getRenderables=()=>p;let g=!0;t.getKeyUpdateEnabled=()=>g,t.enableKeyUpdate=()=>{g=!0},t.disableKeyUpdate=()=>{g=!1};let y=!1;t.getTriggersVisible=()=>y,t.showTriggers=()=>y=!0,t.hideTriggers=()=>y=!1;let f=!1;t.getMarkersVisible=()=>f,t.showMarkers=()=>f=!0,t.hideMarkers=()=>f=!1;let v="black";t.getRenderBackgroundColor=()=>v,t.setRenderBackgroundColor=e=>v=e;let b=!0;t.getSoundEnabled=()=>b,t.setSoundEnabled=e=>b=e;let w={[i.SoundType.NORMAL]:.5,[i.SoundType.MUSIC]:.25};t.setVolume=(e,t)=>{t>1&&(t=1),t<0&&(t=0),w[e]=t,e===i.SoundType.MUSIC?i.setVolumeForMusic(t):i.setVolumeForActiveSounds(t)},t.getVolume=e=>{var t;return null!==(t=w[e])&&void 0!==t?t:1};let C=100;t.setArcadeGameVolume=e=>{C=e>100?100:e<0?0:e},t.getArcadeGameVolume=()=>C;let S=!1;t.setArcadeGameMuted=e=>{S=e},t.isArcadeGameMuted=()=>S;let T=[0,0];t.getCameraDrawOffset=()=>T,t.setCameraDrawOffset=e=>T=e;let x=null;t.getCameraTransform=()=>x,t.setCameraTransform=e=>x=e;let E=[];t.addTimer=(...e)=>{e.forEach(e=>{-1===E.indexOf(e)&&E.push(e)})},t.removeTimer=(...e)=>{e.forEach(e=>{let t=E.indexOf(e);t>-1&&E.splice(t,1)})},t.getAllTimers=()=>E;let A=null;t.getGlobalParticleSystem=()=>A,t.setGlobalParticleSystem=e=>A=e;let _=!0;t.getPlayerWallGlowEnabled=()=>_,t.setPlayerWallGlowEnabled=e=>_=e;let I=!1;t.enablePauseRendering=()=>I=!0,t.disablePauseRendering=()=>I=!1,t.isPauseRenderingEnabled=()=>I;let k=!0;t.shouldUseZip=()=>k,t.setUseZip=e=>k=e;let R=+new Date;t.getTimeLoaded=()=>R,t.setTimeLoaded=e=>{R=e};let P=0;t.getDurationPlayed=()=>P,t.setDurationPlayed=e=>{P=e};let O=!0;t.shouldShowOnScreenControls=()=>O,t.setShowOnScreenControls=e=>O=e;let M=[];t.addCharacterWithSuspendedAi=e=>{M.push(e)},t.removeCharacterWithSuspendedAi=e=>{let t=M.indexOf(e);t>-1&&M.splice(t,1)},t.getCharactersWithSuspendedAi=()=>[...M];let L=!1;t.setOverworldUpdateKeysDisabled=e=>{L=e},t.isOverworldUpdateKeysDisabled=()=>L;let B=!0;t.setDebugModeEnabled=e=>B=e,t.isDebugModeEnabled=()=>B;let N=1;t.setCutsceneSpeedMultiplier=e=>{N=e},t.getCutsceneSpeedMultiplier=()=>N;let D=!0;t.setCutsceneSkipEnabled=e=>{D=e},t.isCutsceneSkipEnabled=()=>D;let G=window.storesStorage={};t.setItemStores=e=>{G=Object.assign({},e)},t.getItemStores=()=>G})),define("model/animation",["require","exports","model/generics","model/sprite","db/animation-metadata","model/sound"],(function(e,t,i,a,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createAnimation=t.hasAnimation=t.createAnimationBuilder=t.Animation=void 0;class n{constructor(e){this.loop=e||!1,this.sprites=[],this.done=!1,this.isPaused=!1,this.soundsEnabled=!0,this.timestampPause=0,this.totalDurationMs=0,this.currentSpriteIndex=0,this.timestampStart=0,this.name="",this.useSubLoopAnim=!1,this.awaits=[]}reset(e){this.done=!1,this.currentSpriteIndex=0,e?(this.useSubLoopAnim=!0,this.subLoopAnim?this.subLoopAnim.reset(e):this.sprites.forEach(e=>{e.hasPlayedSound=!1})):(this.useSubLoopAnim=!1,this.subLoopAnim&&this.subLoopAnim.reset(),this.sprites.forEach(e=>{e.hasPlayedSound=!1}))}start(){this.timestampStart=i.getNow(),this.useSubLoopAnim&&this.subLoopAnim&&this.subLoopAnim.start()}pause(){this.isPaused||(this.isPaused=!0,this.timestampPause=i.getNow(),this.subLoopAnim&&this.subLoopAnim.pause())}unpause(){this.isPaused&&(this.isPaused=!1,this.timestampStart+=i.getNow()-this.timestampPause,this.currentSpriteIndex=0,this.update(),this.subLoopAnim&&this.subLoopAnim.unpause())}disableSounds(){this.soundsEnabled=!1}enableSounds(){this.soundsEnabled=!0}static enableSoundsGlobally(){n.globalSoundsEnabled=!0}static disableSoundsGlobally(){n.globalSoundsEnabled=!1}getDurationMs(){return this.totalDurationMs}getLongestFrameMs(){return this.sprites.reduce((e,t)=>t.duration>e?t.duration:e,0)}getLongestFrameIndex(){let e=0;return this.sprites.reduce((t,i,a)=>i.duration>e?(e=i.duration,a):t,0)}getDurationToIndex(e){return e>=this.sprites.length?this.totalDurationMs:this.sprites[e].durationUpToNow}addSprite({name:e,duration:t,offsetX:i,offsetY:a,opacity:r}){this.sprites.push({name:e||"",timestampBegin:this.totalDurationMs,timestampEnd:this.totalDurationMs+(null!=t?t:0),duration:null!=t?t:0,durationUpToNow:this.totalDurationMs,offsetX:i||0,offsetY:a||0,opacity:r,hasPlayedSound:!1}),this.totalDurationMs+=null!=t?t:0}getAnimIndex(e){if(this.useSubLoopAnim&&this.subLoopAnim)return this.subLoopAnim.getAnimIndex(e);let t=0,i=this.currentSpriteIndex,a=this.sprites.length-1;for(;i<=a;){let r=i+Math.floor((a-i)/2);t=r;let{timestampEnd:o,timestampBegin:n}=this.sprites[r],l=(n||0)+this.timestampStart,s=(o||0)+this.timestampStart;if(e<s&&e>l)return r;e>=s?i=r+1:a=r-1}return t}update(){if(this.useSubLoopAnim&&this.subLoopAnim)return void this.subLoopAnim.update();let e=i.getNow();if(this.currentSpriteIndex===this.sprites.length-1&&this.loop&&e-this.timestampStart>this.totalDurationMs){let t=this.timestampStart+this.totalDurationMs;this.reset(!0),this.start(),e-t<this.totalDurationMs&&(this.timestampStart=t)}if(this.currentSpriteIndex=this.getAnimIndex(e),this.loop||e-this.timestampStart>=this.totalDurationMs&&(this.done=!0,this.awaits.forEach(e=>e()),this.awaits=[]),this.meta){let e=this.meta.sounds;e&&e.forEach((e,t)=>{let i=this.sprites[t];this.currentSpriteIndex>=e.frame&&!i.hasPlayedSound&&(this.soundsEnabled&&n.globalSoundsEnabled&&o.playSoundName(e.soundName),i.hasPlayedSound=!0)})}}onCompletion(){return new Promise(e=>{this.isDone()||this.loop||this.awaits.push(e)})}getSprite(){var e;return this.useSubLoopAnim&&this.subLoopAnim?this.subLoopAnim.getSprite():null===(e=this.sprites[this.currentSpriteIndex])||void 0===e?void 0:e.name}getSpriteSize(e){let t=i.getNow();e=null!=e?e:this.getAnimIndex(t);let{name:r}=this.sprites[e],[,,,o,n]=a.getSprite(r);return[o,n]}isDone(){return this.done}}t.Animation=n,n.globalSoundsEnabled=!0;let l=window.animations={};t.createAnimationBuilder=(e,t)=>{l[e]=t},t.hasAnimation=e=>!!l[e],t.createAnimation=e=>{var t;let i=l[e];if(i){let a=i();a.name=e,a.meta=r.getIfExists(e);let o=null===(t=null==a?void 0:a.meta)||void 0===t?void 0:t.loopFromFrame;if(void 0!==o){let e=new n(!0);for(let t=o;t<a.sprites.length;t++){let i=a.sprites[t];e.addSprite({name:i.name,duration:i.duration})}a.subLoopAnim=e}return a}throw Error(`No animation exists which is named '${e}'`)}})),define("view/draw",["require","exports","model/sprite","model/canvas","model/room","utils","model/character","model/particle","view/style","model/generics"],(function(e,t,i,a,r,o,n,l,s,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.drawRoom=t.drawParticle=t.drawCharacter=t.drawAnimationNF=t.drawAnimation=t.drawSprite=t.drawText=t.measureText=t.drawPolygon=t.drawCircle=t.drawRect=t.getImageDataScreenshot=t.setGlobalAlpha=t.clearScreen=t.circleToPolygonPx=t.DEFAULT_TEXT_PARAMS=void 0,t.DEFAULT_TEXT_PARAMS={font:"monospace",color:"#fff",size:14,align:"left",strokeColor:""},t.circleToPolygonPx=(e,t,i)=>{let a=[];for(let r=0;r<360;r+=10){let n=e+Math.sin(o.degreesToRadians(r))*i,l=t+Math.cos(o.degreesToRadians(r))*i;a.push(o.pxToCanvasCoords4by3(...o.isoToPixelCoords(n,l)))}return a},t.clearScreen=e=>{(e=e||a.getCtx()).clearRect(0,0,e.canvas.width,e.canvas.height)},t.setGlobalAlpha=(e,t)=>{(t=t||a.getCtx()).globalAlpha=e},t.getImageDataScreenshot=e=>(e=e||a.getCtx()).getImageData(0,0,e.canvas.width,e.canvas.height),t.drawRect=(e,t,i,r,o,n,l)=>{(l=l||a.getCtx()).lineWidth=1,l[n?"strokeStyle":"fillStyle"]=o,l[n?"strokeRect":"fillRect"](Math.floor(e),Math.floor(t),i,r)},t.drawCircle=(e,t,i,r,o,n)=>{(n=n||a.getCtx()).lineWidth=1,n[o?"strokeStyle":"fillStyle"]=r,n.beginPath(),n.arc(e,t,i,0,2*Math.PI),n[o?"stroke":"fill"]()},t.drawPolygon=(e,t,i,r)=>{i=i||1,(r=r||a.getCtx()).fillStyle=t,r.strokeStyle=t,r.beginPath();let n=e[0],[l,s]=n,[d,c]=r?[l,s]:o.isoToPixelCoords(l,s,0);r.moveTo(d,c);for(let t=1;t<e.length;t++){let i=e[t],[a,n]=i,[l,s]=r?[a,n]:o.isoToPixelCoords(a,n,0);r.lineTo(l,s)}r.closePath(),r.lineWidth=2,r.stroke()},t.measureText=(e,i,r)=>{r=r||a.getCtx();let{font:o,size:n}=Object.assign(Object.assign({},t.DEFAULT_TEXT_PARAMS),i||{});return r.textAlign="left",r.textBaseline="top",r.font=n+"px "+o,[r.measureText(e).width,null!=n?n:12]},t.drawText=(e,i,r,o,n)=>{let{font:l,size:s,color:d,align:c,strokeColor:m}=Object.assign(Object.assign({},t.DEFAULT_TEXT_PARAMS),o||{});n=n||a.getCtx(),m&&t.drawText(e,i+1,r+1,{font:l,size:s,color:m,align:c},n),n.font=`${s}px ${l}`,n.fillStyle=d||"#FFF",n.textAlign=c,n.textBaseline="middle",n.fillText(e,i,r)},t.drawSprite=(e,t,r,o,n)=>{if(o=o||1,n=n||a.getCtx(),"invisible"!==e)try{n.fillStyle="black",n.strokeStyle="black";let[a,l,s,d,c]="string"==typeof e?i.getSprite(e):e;n.drawImage(a,l,s,d,c,Math.floor(t),Math.floor(r),d*o,c*o)}catch(t){throw console.error(e),Error("Could not draw sprite: "+t)}},t.drawAnimation=(e,t,r,o,n)=>{o=o||1,n=n||a.getCtx(),e.update();let l=e.getSprite();if(!l)throw console.error(e),Error("Cannot draw animation that did not provide a sprite.");try{n.fillStyle="black",n.strokeStyle="black";let[e,a,s,d,c]="string"==typeof l?i.getSprite(l):l;n.drawImage(e,a,s,d,c,Math.floor(t),Math.floor(r),d*o,c*o)}catch(e){throw Error(`Error attempting to draw animation sprite: "${l}"`)}},t.drawAnimationNF=(e,t,r,o,n)=>{o=o||1,n=n||a.getCtx(),e.update();let l=e.getSprite();if(!l)throw console.error(e),Error("Cannot draw animation that did not provide a sprite.");try{n.fillStyle="black",n.strokeStyle="black";let[e,a,s,d,c]="string"==typeof l?i.getSprite(l):l;n.drawImage(e,a,s,d,c,t,r,d*o,c*o)}catch(e){throw Error(`Error attempting to draw animation sprite: "${l}"`)}},t.drawCharacter=(e,i,r)=>{let[l,s,d]=n.characterGetPosTopLeft(e),c=n.characterGetAnimation(e),[m,h]=o.isoToPixelCoords(l,s,d);if(r=r||a.getCtx(),m+=1,h+=0,c.isPaused){let a=c.getSprite();if(!a)throw console.error(c),Error("Cannot draw paused character that did not provide a sprite.");t.drawSprite(a,m,h,i,r),(e.highlighted||n.characterHasItemStatus(e,n.ItemStatus.CLOAKED))&&(r.globalCompositeOperation="multiply",t.drawSprite(a,m,h,i,r),r.globalCompositeOperation="source-over")}else t.drawAnimation(c,m,h,i,r),(e.highlighted||n.characterHasItemStatus(e,n.ItemStatus.CLOAKED))&&(r.globalCompositeOperation="multiply",t.drawAnimation(c,m,h,i,r),r.globalCompositeOperation="source-over")},t.drawParticle=(e,i,r,o,n)=>{let{anim:l,text:s,textParams:d,opacity:c,w:m,h:h,color:u,shape:p}=e;(n=null!=n?n:a.getCtx()).globalAlpha=null!=c?c:1,l&&t.drawAnimation(l,i,r,o?o*e.scale:e.scale,n),s&&d&&t.drawText(s,i,r,d,n),m&&h&&u&&p&&("rect"===p?t.drawRect(i-m/2,r-h/2,m,h,u,!1,n):"circle"===p&&t.drawCircle(i,r,m,u,!1,n)),n.globalAlpha=1},t.drawRoom=(e,i,c,m,h)=>{let{particles:u}=e;(m=m||a.getCtx()).save(),m.translate(Math.floor(i),Math.floor(c)),(e=>{if(e.length<2)return;let t=!1;do{t=!1;for(let i=0;i<e.length-1;i++){let a=e[i],r=e[i+1];a.sortY>r.sortY&&(t=!0,e[i]=r,e[i+1]=a)}}while(t)})(e.renderObjects);let p=a.getCtx("outer"),g=d.getCurrentPlayer().leader;for(let i=0;i<e.renderObjects.length;i++){let{name:r,sprite:n,anim:l,character:c,px:m,py:u,origPy:p,highlighted:g,visible:y,isMarker:f,isTrigger:v,polygon:b}=e.renderObjects[i];if(y)if(h)c&&t.drawCharacter(c);else if(f){if(d.getMarkersVisible()){let[e,i]=o.pxToCanvasCoords4by3(m+16,u);t.drawText(r||"",e,i,{align:"center",color:s.colors.WHITE,strokeColor:s.colors.BLACK,size:24},a.getCtx("outer")),t.drawSprite(n,m,u)}}else if(v){if(d.getTriggersVisible())if(b){let e=b[0],[i,n]=e,[l,d]=o.pxToCanvasCoords4by3(...o.isoToPixelCoords(i,n,0)),c=b.map(([e,t])=>o.isoToPixelCoords(e,t));t.drawPolygon(c,"rgba(0, 0, 0, 0.5)",1,a.getCtx()),t.drawText(r||"",l,d,{align:"center",color:s.colors.PINK,strokeColor:s.colors.BLACK,size:24},a.getCtx("outer"))}else{let[e,i]=o.pxToCanvasCoords4by3(m+16,u);t.drawSprite(n,m,u),t.drawText(r||"",e,i,{align:"center",color:s.colors.PINK,strokeColor:s.colors.BLACK,size:24},a.getCtx("outer"))}}else l?t.drawAnimation(l,m,u):n?(t.drawSprite(n,m,u),g&&t.drawSprite("indicator",m,p-3)):c&&t.drawCharacter(c)}if(d.getPlayerWallGlowEnabled()&&(m.globalAlpha=.25,m.globalCompositeOperation="luminosity",t.drawCharacter(g),m.globalAlpha=1,m.globalCompositeOperation="source-over"),!h)for(let e=0;e<u.length;e++){let i=u[e];if(i.useOuterCanvas){let[e,a]=l.particleGetPos(i),[r,n]=o.pxToCanvasCoords4by3(e,a);t.drawParticle(i,r,n,1,p)}else{let[e,a]=l.particleGetPos(i);t.drawParticle(i,e,a)}}if(m.restore(),d.getMarkersVisible()){let[i,a]=n.characterGetPos(g);t.drawText(`POS: ${i.toFixed(0)}, ${a.toFixed(0)}`,20,164,{color:"white",size:32},p);let[l,s]=o.isoToPixelCoords(i,a),[d,c]=o.pxToCanvasCoords4by3(l,s);t.drawText(`OPos: ${d.toFixed(0)}, ${c.toFixed(0)}`,20,194,{color:"white",size:32},p);let m=r.roomGetTileBelow(e,[i,a]);t.drawText(`TPos: ${null==m?void 0:m.x.toFixed(0)}, ${null==m?void 0:m.y.toFixed(0)}`,20,224,{color:"white",size:32},p)}}})),define("controller/res-loader",["require","exports","model/animation","model/sprite","model/sound","model/generics"],(function(e,t,i,a,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getZipAudioData=t.getZipImageData=t.loadRes=void 0;let n={},l={};class s{async processAssetFile(e){let t=[],o=async function(e){let[,t,i,a]=e,o=parseFloat(a);return isNaN(o)&&(o=1),r.loadSound(t,i,r.SoundType.NORMAL,o,!0)},n=async function(e){let[,t,i,a]=e,o=parseFloat(a);return isNaN(o)&&(o=1),r.loadSound(t,i,r.SoundType.MUSIC,o)},l=async function(e){let[,t,i,r,o]=e;if("invisible"!==t)return await a.loadImageAsSpritesheet(i,t,+r,+o)},s=function(e,t){let i=e[1],a=e[2].trim();t.name=i,t.loop=a.indexOf("true")>=0},d=function(e,t){t.addSprite({name:e[1],duration:parseFloat(e[2])})},c=e.split("\n"),m=new i.Animation(!1),h=function(){i.createAnimationBuilder(m.name,function(e){let t=new i.Animation(e.loop);return e.sprites.forEach(e=>{t.addSprite({name:e.name,duration:e.duration,opacity:e.opacity,offsetX:e.offsetX,offsetY:e.offsetY})}),t}.bind(this,m)),i.createAnimationBuilder(m.name+a.SpriteModification.FLIPPED,function(e){let t=new i.Animation(e.loop);return e.sprites.forEach(e=>{t.addSprite({name:e.name+a.SpriteModification.FLIPPED,duration:e.duration,opacity:e.opacity,offsetX:e.offsetX,offsetY:e.offsetY})}),t}.bind(this,m))};for(let e of c){let a=e.split(","),[r]=a;if("AnimSprite"!==r)switch(m&&h(),r){case"Picture":t.push(()=>l(a));break;case"Animation":m=new i.Animation(!1),s(a,m);continue;case"Sound":t.push(()=>o(a));break;case"Music":t.push(()=>n(a))}else{if(!m)throw console.error("Error reading res.txt, AnimSprite without Anim",a),Error("display loading error");d(a,m)}}m&&h();for(let e=0;e<t.length;e++)await t[e]()}async loadAssets(e){await this.processAssetFile(e)}}t.loadRes=async e=>{let t=await(await fetch("res/res.txt")).text(),i=await(await fetch("res/res-foley.txt")).text(),a=await(await fetch("res/res-bg.txt")).text();if(e&&e(),o.shouldUseZip()){let e=(await Promise.all([c("res/images.zip")]))[0];await d(e)}let r=new s;return Promise.all([r.loadAssets(t).then(e||function(){}),r.loadAssets(i).then(e||function(){}),r.loadAssets(a).then(e||function(){})])};let d=async e=>Promise.all(Object.keys(e.files).map(async t=>{let i=e.files[t],a=new Blob([await i.async("arraybuffer")],{type:"image/png"}),r=URL.createObjectURL(a),o=document.createElement("img");o.src=r,n[t]=o})).catch(e=>{console.error("Failed to fetch images archive",e)}),c=async e=>await fetch(e).then((function(e){return 200===e.status||0===e.status?Promise.resolve(e.blob()):Promise.reject(Error(e.statusText))})).then(window.JSZip.loadAsync);t.getZipImageData=e=>n[e]||null,t.getZipAudioData=e=>e?l[e]:null})),define("model/sprite",["require","exports","view/draw","model/canvas","model/room","controller/res-loader","model/generics"],(function(e,t,i,a,r,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSprite=t.loadImageAsSpritesheet=t.loadImageAsSprite=t.loadTiles=t.SpriteModification=t.loadImage=t.createSprite=void 0;let l={};var s;window.sprites=l,t.createSprite=(e,t,i,a,r)=>[e,null!=t?t:0,null!=i?i:0,null!=a?a:e.width,null!=r?r:e.height],t.loadImage=async e=>{if(n.shouldUseZip()&&!e.includes("/")){let t=o.getZipImageData(e);if(t)return t;throw Error("Failed to load ZIP image: "+e)}return new Promise((t,i)=>{let a=new Image;a.onload=()=>{t(a)},a.onerror=()=>{i("Failed to load image: "+e)},a.src="res/"+e})},function(e){e.NORMAL="",e.FLIPPED="_f",e.ROT90="_r1",e.ROT180="_r2",e.ROT270="_r3"}(s=t.SpriteModification||(t.SpriteModification={}));let d=(e,r,o,n,l)=>{let d=(i,a,r,o,n,l)=>e[i]=t.createSprite(a,r,o,n,l),c=(e,t,o)=>{let c=d(e,r,o*n,t*l,n,l);h(e)&&d(`${e}${s.FLIPPED}`,(e=>{let[t,i,r]=a.createCanvas(e.width,e.height);return i.translate(r,0),i.scale(-1,1),i.drawImage(e,0,0),t})((e=>{let[,,,t,r]=e,[o,n]=a.createCanvas(t,r);return i.drawSprite(e,0,0,1,n),o})(c)),0,0,n,l)},m=r.width/n,u=r.height/l;for(let e=0;e<u;e++)for(let t=0;t<m;t++){let i=`${o}_${e*m+t}`;1!==m||1!==u||i.includes("512")||(i=o),c(i,e,t)}};t.loadTiles=async()=>{let e=await t.loadImage("battle-terrain1.png");d(l,e,"terrain",r.TILE_WIDTH,r.TILE_HEIGHT)},t.loadImageAsSprite=async(e,i)=>{let a=t.getSprite(i);if(a)return a[0];{l[i]=[new Image,0,0,0,0];let a=await t.loadImage(e);return d(l,a,i,a.width,a.height),a}},t.loadImageAsSpritesheet=async(e,i,a,r)=>{let o=t.getSprite(i);if(o)return o[0];{l[i]=[new Image,0,0,0,0];let o=await t.loadImage(e);return d(l,o,i,a,r),d(l,o,i,o.width,o.height),o}};let c=t.createSprite(document.createElement("canvas"),0,0,1,1);t.getSprite=e=>0===e.indexOf("invisible")?c:l[e];let m=[/^ada/,/^conscience/,/^sigma/,/^rho/,/^skye*/,/^port(.*)/,/^guy(\d*)/,/^girl(\d*)/,/^ch_*/,/^tut_*/,/^employee-*/,/^effects/],h=e=>{for(let t=0;t<m.length;t++)if(m[t].test(e))return!0;return!1}})),define("db/saves",["require","exports","model/character"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=t.getIfExists=t.get=void 0;let a={};t.get=e=>{let t=a[e];if(!t)throw Error("No save exists with name: "+e);return Object.assign({},t)},t.getIfExists=e=>{let t=a[e];return t?Object.assign({},t):null},t.init=()=>{a.bowling={id:"O6vt5dsvr",debug:!1,timestampSaved:new Date,timestampLoaded:new Date,durationPlayed:0,overworld:{name:"bowlingAlleyStandalone"},scene:{storage:{current_overworld:"bowlingAlleyStandalone"},storageOnce:{},storageOnceKeys:{},storageEncounters:{},storageTreasure:{}},player:{tokens:0,tickets:0,backpack:[],leader:0,partyStorage:[{stats:{POW:5,ACC:1,FOR:1,CON:1,RES:1,SPD:1,EVA:1,STAGGER:10,HP:50,RESV:10},hp:50,resv:10,x:295,y:126,z:0,name:"Ada",facing:i.Facing.DOWN,experience:2,experienceCurrency:0,equipment:{weapon:-1,accessory1:-1,accessory2:-1,armor:-1}}],party:[0],battlePositions:[0]},leaderboards:{},stores:{}}}})),define("db/scripts",["require","exports","lib/rpgscript"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=void 0,t.init=async e=>{await Promise.all([i.loadRPGScript("test2",e),i.loadRPGScript("test",e),i.loadRPGScript("example",e),i.loadRPGScript("utils",e),i.loadRPGScript("floor1/tic-tac-toe",e),i.loadRPGScript("floor1/ping-pong",e),i.loadRPGScript("floor1/floor1-atrium",e),i.loadRPGScript("floor1/floor1-tut",e),i.loadRPGScript("floor1/floor1",e),i.loadRPGScript("floor2/floor2-throne-room",e),i.loadRPGScript("floor2/jesse-cafeteria",e),i.loadRPGScript("intro",e),i.loadRPGScript("bowling",e)])}})),define("db/index",["require","exports","db/enemies/index","db/encounters/index","db/characters/index","db/overworlds","db/tiles","db/overworld-ai","db/battle-ai","db/animation-metadata","db/particles","db/quests/index","db/items/index","db/battle-actions","db/stores","db/saves","db/scripts","db/persistent-effects","db/games"],(function(e,t,i,a,r,o,n,l,s,d,c,m,h,u,p,g,y,f,v){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=async e=>{f.init(),m.init(),c.init(),i.init(),r.init(),n.init(),l.init(),s.init(),a.init(),d.init(),h.init(),u.init(),p.init(),g.init(),await y.init(e),o.init(),v.init()}})),define("view/console",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initConsole=t.disableConsole=t.enableConsole=void 0;let i=window.console;t.enableConsole=()=>{window.console={log:i.log,error:i.error,warn:i.warn,debug:i.debug,trace:i.trace,time:i.time,timeEnd:i.timeEnd}},t.disableConsole=()=>{window.console={log:()=>{},error:()=>{},warn:()=>{},debug:()=>{},trace:i.trace,time:i.time,timeEnd:i.timeEnd}},t.initConsole=()=>{t.enableConsole()}})),define("main",["require","exports","model/sprite","controller/loop","controller/res-loader","model/canvas","controller/events","view/ui","view/hooks","model/scene","db/index","model/generics","db/overworlds","controller/overworld-management","model/player","model/character","db/characters/index","controller/save-management","model/room","model/sound","db/items/index","view/style","model/quest","db/saves","view/console"],(function(e,t,i,r,o,n,l,s,d,c,m,h,u,p,g,y,f,v,b,w,C,S,T,x,E){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.main=void 0,m=a(m);let A=()=>{let e=document.getElementById("page-loading-progress");if(e){let t=document.createElement("div");t.style.background=S.colors.DARKBLUE,t.style.border="1px solid "+S.colors.WHITE,t.style.width="16px",t.style.height="32px",t.style.margin="4px 0px",t.style["border-radius"]="4px",e.appendChild(t)}};t.main=async()=>{h.setUseZip(!0),E.initConsole(),console.time("load"),s.mountUi(),c.initScene();let e=h.getCurrentScene();console.log("load res"),console.time("sound-spritesheet"),await w.loadSoundSpritesheet("foley/foley.mp3"),console.timeEnd("sound-spritesheet"),console.time("res"),await o.loadRes(A),await b.loadDynamicPropsTileset(),console.timeEnd("res"),console.log("init db"),console.time("db"),await m.default(e),A(),await b.awaitAllRoomProps(),console.log("load tiles"),await i.loadTiles(),console.timeEnd("db"),A();try{let e=v.loadSettingsFromLS();v.setCurrentSettings(e),console.log("Settings have been loaded from localStorage.")}catch(e){console.log("Settings have NOT been loaded from localStorage.")}console.timeEnd("load"),h.setTimeLoaded(+new Date),console.log("create canvas"),n.getCanvas(),n.setDrawScale(4),l.initEvents(),d.initHooks();let t=document.getElementById("page-loading");t&&(t.style.display="none");let a=f.get("Ada"),_=g.playerCreate(a);y.characterEquipItem(_.leader,_.backpack[0]);let I=y.characterCreateFromTemplate(f.get("Conscience"));_.party.push(I),_.partyStorage.push(I),_.battlePositions.push(I),T.beginQuest(e,"OpeningQuest"),y.characterEquipItem(_.leader,C.get("ShieldRing"),0),y.characterEquipItem(_.leader,C.get("PierceSword")),y.characterEquipItem(I,_.backpack[1]),await new Promise(e=>{let t=()=>{window.removeEventListener("keydown",t),window.removeEventListener("mousedown",t),e()};window.addEventListener("keydown",t),window.addEventListener("mousedown",t);let i=document.getElementById("page-press-any-key");i&&(i.style.display="flex")});let k=document.getElementById("page-press-any-key");k&&(k.style.display="none"),console.log("initiate overworld");let R=function(e){let t={},i=("?"===e[0]?e.substr(1):e).split("&");for(let e=0;e<i.length;e++){let a=i[e].split("=");t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]||"")}return t}(window.location.search);if(R.room){let e=u.get(R.room);p.initiateOverworld(_,e)}else if(R.save){h.setCurrentPlayer(_);let e=x.getIfExists(R.save);if(console.log("Load save from QueryParams",e),!e){let e=document.getElementById("page-loading");return void(e&&(e.style.display="flex",e.style.color=S.colors.RED,e.innerHTML="The save specified in the query string does not exist in the save database."))}v.loadSavedGame(e)}else p.initiateOverworld(_,u.get("test2"));p.enableOverworldControl(),console.log("run loop"),r.runMainLoop(),document.getElementById("controls").style.display="none",s.renderUi()}})),define("view/components/MainMenu",["require","exports","preact","preact/hooks","view/elements/MenuBox","view/elements/VerticalMenu","view/components/ModalSection/ModalSection","view/components/SettingsSection","view/components/MenuSection/MenuLoad","controller/events","view/elements/Card","model/sound","model/generics","model/canvas","view/hooks","db/characters/index","db/overworlds","model/player","model/character","controller/overworld-management","view/ui","controller/loop","controller/save-management","model/quest"],(function(e,t,i,r,o,n,l,s,d,c,m,h,u,p,g,y,f,v,b,w,C,S,T,x){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=a(o),n=a(n),s=a(s),d=a(d);let E=async()=>{u.setTimeLoaded(+new Date),p.getCanvas(),p.setDrawScale(4),g.initHooks(),await new Promise(e=>{setTimeout(e,100)})},A=e=>{let t=i.h("div",null);return"new"===e.activeSection?t=i.h("div",null,i.h(l.ConfirmModal,{onConfirm:()=>{h.playSoundName("level_up"),e.startGame()},onClose:()=>{e.hideActiveSection()},body:i.h("p",null,"Do you wish to create a new game?")})):"settings"===e.activeSection?t=i.h(s.default,{onClose:()=>{e.hideActiveSection()}}):"load"===e.activeSection&&(t=i.h(o.default,{title:"Load",onClose:()=>{e.hideActiveSection()},maxWidth:m.sizes[m.CardSize.XLARGE].width,closeButtonLabel:"Back "+c.getCancelKeyLabel(),disableKeyboardShortcut:!0},i.h(d.default,{onClose:()=>{e.hideActiveSection()},onSaveClicked:t=>{e.loadGame(t)}}))),t};t.default=e=>{let[t,a]=r.useState(null),o=r.useRef();return r.useEffect(()=>{o.current&&(o.current.style.opacity="1")},[t]),i.h("div",{ref:o,style:{opacity:"0",transition:"opacity 300ms linear",display:"flex",justifyContent:"center",alignItems:"flex-end",position:"fixed",left:"0",top:"0",width:"calc(100% - 37px)",height:"calc(100% - 64px)"}},i.h(A,{activeSection:t,hideActiveSection:()=>{a(null),h.playSoundName("menu_choice_close"),e.squareCommands.logo()},startGame:async()=>{a("loading"),await e.squareCommands.hide(!0),(async()=>{await E();let e=y.get("Ada"),t=v.playerCreateNew(e),i=b.characterCreateFromTemplate(y.get("Conscience"));t.party.push(i),t.partyStorage.push(i),t.battlePositions.push(i),x.beginQuest(u.getCurrentScene(),"OpeningQuest");let a=f.get("floor1Outside");w.initiateOverworld(t,a),w.enableOverworldControl(),S.runMainLoop(),document.getElementById("controls").style.display="none",C.renderUi()})()},loadGame:async t=>{a("loading"),await e.squareCommands.hide(!1),await E(),T.loadSavedGame(t)}}),i.h(n.default,{title:"MAKE YOUR SELECTION",width:"256px",open:null===t,isInactive:null!=t,items:[{label:"New Game",value:"new"},{label:"Load Game",value:"load"},{label:"Arcade Games",value:"games"},{label:"Settings",value:"settings"}],onItemClickSound:"menu_select",onItemClick:t=>{if(console.log("clicked",t),"new"===t);else if("load"===t)h.playSoundName("menu_choice_open"),e.squareCommands.field();else if("settings"===t)h.playSoundName("menu_choice_open"),e.squareCommands.plus2();else if("games"===t)return;a(t)}}))}})),define("menu",["require","exports","controller/res-loader","model/generics","model/sound","utils","view/style","preact","model/room","model/scene","db/index","model/sprite","controller/save-management","view/components/MainMenu","controller/events","controller/scene/scene-commands","view/ui"],(function(e,t,i,r,o,n,l,s,d,c,m,h,u,p,g,y,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.main=void 0,m=a(m),p=a(p);let v=-1,b=!1,w={10:l.colors.GREY,11:l.colors.DARKGREY_ALT,14:l.colors.RED,15:l.colors.LIGHTRED,12:l.colors.DARKBLUE_ALT,13:l.colors.LIGHTBLUE},C=()=>{clearInterval(v),b=!1},S=e=>{C(),e.forEach(e=>{let{resultX:t,resultY:i,div:a,timeoutId:r}=e;a&&(a.style.transition=`transform ${750+Math.floor(500*Math.random())}ms ease-out`,a.style.transform=`translate(${t}px, ${i}px)`,clearTimeout(r))}),setTimeout(()=>{b=!0},1e3),v=setInterval(()=>{let t=Math.floor(7-10*Math.random());if(!(t<=0)&&b)for(let i=0;i<t;i++){let t=n.randInArr(e),{div:i,resultX:a,resultY:r}=t;i&&(i.style.transition="transform 250ms ease-out",setTimeout(()=>{i.style.transform=`translate(${a}px, ${r}px) rotate(360deg)`,setTimeout(()=>{i.style.transition="transform 0ms ease-out",i.style.transform=`translate(${a}px, ${r}px) rotate(0deg)`},250)},100))}},500)},T=(e,t,i,a)=>{C();let r=(e,t)=>{let a=null!=t?t:8e3+8e3*Math.random(),o=5-10*Math.random(),{div:n}=e;if(n){let t=Math.round(1600*Math.random())-400;n.style.transition=`transform ${a}ms ease-out`,n.style.transform=`translate(${t}px, ${i()+o}px)`,e.timeoutId=setTimeout(()=>{r(e)},a)}},o=(e,i)=>{let a=null!=i?i:8e3+8e3*Math.random(),r=5-10*Math.random(),{div:n}=e;if(n){let i=Math.round(1728*Math.random())-432;n.style.transition=`transform ${a}ms ease-out`,n.style.transform=`translate(${t()+r}px, ${i}px)`,e.timeoutId=setTimeout(()=>{o(e)},a)}};e.forEach(e=>{clearTimeout(e.timeoutId),Math.random()>=.5?(r(e,750),clearTimeout(e.timeoutId),e.timeoutId=setTimeout(()=>{r(e)},a?50:750)):(o(e,750),clearTimeout(e.timeoutId),e.timeoutId=setTimeout(()=>{o(e)},a?50:750))})};t.main=async()=>{r.setUseZip(!0),o.loadSound("game_ready","game_ready.mp3",o.SoundType.NORMAL,1,!1),f.mountUi(),c.initScene();let e=(e=>{let t=[];"0,0,0,0,0,0,0,0,0,0,0,10,10,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n0,0,0,0,0,0,0,0,0,0,0,10,10,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n0,0,0,0,0,0,0,0,0,0,10,10,10,10,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n0,0,0,0,0,0,0,0,0,0,10,10,11,10,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n0,0,0,0,0,0,0,0,0,10,10,10,10,10,10,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n0,0,0,0,0,0,0,0,0,10,11,10,10,10,10,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n14,14,14,0,0,14,14,14,14,10,10,14,14,14,10,14,14,14,14,0,14,0,0,0,14,0,0,0,0,0,\n14,0,0,14,0,14,0,0,10,10,14,10,10,10,11,14,0,0,0,0,14,14,0,14,14,0,0,0,0,0,\n15,15,15,0,0,15,15,15,15,10,15,10,15,15,10,15,15,15,15,0,15,0,15,0,15,0,0,0,0,0,\n14,0,0,14,0,14,0,0,10,10,14,10,10,14,10,14,0,0,0,0,14,0,14,0,14,0,0,0,0,0,\n14,0,0,14,0,14,14,14,14,0,10,14,14,10,0,14,14,14,14,0,14,0,14,0,14,0,0,0,0,0,\n0,0,0,0,0,0,0,10,10,11,10,10,10,10,10,10,10,0,0,0,0,0,0,0,0,0,0,0,0,0,\n12,0,0,0,0,12,0,11,12,10,12,12,12,10,10,10,12,12,0,0,0,12,12,12,12,0,0,0,0,0,\n12,0,0,0,0,12,10,10,12,10,12,10,10,12,10,12,10,10,12,0,12,0,0,0,0,0,0,0,0,0,\n13,0,0,0,0,13,10,10,13,10,13,10,10,13,11,13,10,10,13,0,0,13,13,13,0,0,0,0,0,0,\n12,0,0,0,0,12,10,10,12,10,12,10,10,12,10,12,10,10,12,0,0,0,0,0,12,0,0,0,0,0,\n12,12,12,12,0,0,12,12,10,0,12,12,12,0,10,0,12,12,0,0,12,12,12,12,0,0,0,0,0,0,\n0,0,0,0,0,0,10,11,10,0,10,10,10,10,10,10,10,10,0,0,0,0,0,0,0,0,0,0,0,0,\n0,0,0,0,0,0,0,10,10,10,10,10,10,11,10,0,10,10,0,0,0,0,0,0,0,0,0,0,0,0,\n0,0,0,0,0,0,10,10,10,10,0,10,10,10,10,10,10,0,0,0,0,0,0,0,0,0,0,0,0,0,\n0,0,0,0,0,0,10,11,0,10,0,10,11,10,10,0,10,10,0,0,0,0,0,0,0,0,0,0,0,0,\n0,0,0,0,0,0,10,10,0,10,10,0,10,0,10,0,10,0,0,0,0,0,0,0,0,0,0,0,0,0,\n0,0,0,0,0,0,10,0,0,11,10,10,0,10,0,10,10,0,0,0,0,0,0,0,0,0,0,0,0,0,\n0,0,0,0,0,0,0,10,0,10,0,10,0,10,0,0,10,0,0,0,0,0,0,0,0,0,0,0,0,0,\n0,0,0,0,0,0,0,0,10,0,0,0,10,0,0,0,0,11,0,0,0,0,0,0,0,0,0,0,0,0,\n0,0,0,0,0,0,10,0,0,0,0,11,0,0,0,10,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n0,0,0,0,0,0,0,0,0,10,0,0,0,10,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0".split("\n").forEach((e,i)=>{","===e[e.length-1]&&(e=e.slice(0,-1)),e.split(",").forEach((e,a)=>{let r=w[parseInt(e)];if(r){let e=32*a,o=32*i;t.push({nextX:e,nextY:o,resultX:e,resultY:o,color:r,timeoutId:null})}})});let i=[],a=t.length;for(let e=0;e<a;e++){let e=n.randInArr(t),a=t.indexOf(e);t.splice(a,1),i.push(e)}return i})(),t=(e=>{let t=document.createElement("div");t.style.position="fixed",t.style.background=l.colors.WHITE,t.style.left="0px",t.style.top="0px",t.style.width="100%",t.style.height="100%",t.style.display="flex",t.style["justify-content"]="center",t.style["align-items"]="center",t.style["flex-direction"]="column",t.style["padding-top"]="0px",t.style.transition="padding-top 300ms ease-out";let i=document.createElement("div");return i.style.position="relative",i.style.width="800px",i.style.height="864px",e.forEach((e,t)=>{let a=document.createElement("div");a.id="square-"+t,a.style.position="absolute",a.style.transition="transform 1000ms ease-in-out",a.style.left="0px",a.style.top="0px",a.style.width="28px",a.style.height="28px",a.style.background=e.color,e.color!==l.colors.RED&&e.color!==l.colors.DARKBLUE_ALT||(a.style["border-radius"]="6px"),a.style.transform="translate(0px, 0px)",i.appendChild(a),e.div=a}),t.appendChild(i),document.body.appendChild(t),t})(e);T(e,()=>window.innerWidth/2+50,()=>window.innerHeight/2+50,!0);let a=document.createElement("div");a.style.position="fixed",a.style.left="0px",a.style.top="0px",a.style.width="100%",a.style.height="100%",a.style.display="flex",a.style["justify-content"]="center",a.style["align-items"]="center",a.style.background="radial-gradient(circle, rgba(17,17,17,0) 81%, rgba(17,17,17,1) 93%)",a.style.transition="opacity 750ms ease-out";let v=document.createElement("div");v.style.position="fixed",v.style.width="100%",v.style.height="100%",v.style.transition="opacity 750ms ease-out",v.style.opacity="1",v.style.background="radial-gradient(circle, rgba(17, 17, 17, 0) 1%, rgba(17, 17, 17, 1) 4%)",a.appendChild(v);let b=document.createElement("img");b.src="res/img/flower.png",b.style.width="64px",b.className="bob-load",a.appendChild(b);let x=document.createElement("div");x.innerHTML="Press Any Key.",x.style.padding="8px",x.style.background=l.colors.DARKGREY,x.style["font-size"]="20px",x.style.margin="16px",x.style.border="2px solid "+l.colors.BLUE,x.style["border-radius"]="8px",x.style["z-index"]=1,a.appendChild(x);let E=b.cloneNode();a.appendChild(E),document.body.appendChild(a),await new Promise(e=>{let t=()=>{window.removeEventListener("keydown",t),window.removeEventListener("mousedown",t),e()};window.addEventListener("keydown",t),window.addEventListener("mousedown",t),a.style.display="flex"}),y.playSound("game_ready"),v.style.opacity="0",x.style.background=l.colors.GREY,x.innerHTML="Loading...",b.className="spin-load-fast",E.className="spin-load-fast",await new Promise(e=>{setTimeout(e,100)}),console.log("load assets"),console.time("assets"),await(async()=>{c.initScene(),g.initEvents();let e=r.getCurrentScene();await o.loadSoundSpritesheet("foley/foley.mp3"),await i.loadRes(),await d.loadDynamicPropsTileset(),await m.default(e),await h.loadTiles();try{let e=u.loadSettingsFromLS();u.setCurrentSettings(e),console.log("Settings have been loaded from localStorage.")}catch(e){console.log("Settings have NOT been loaded from localStorage.")}})(),console.timeEnd("assets"),y.playMusic("music_menu"),a.style.opacity="0",t.style["justify-content"]="flex-start",t.style["padding-top"]="32px",S(e),await new Promise(e=>{setTimeout(e,1e3)}),a.remove();let A=document.createElement("div");document.body.appendChild(A),((e,t,i)=>{s.render(s.h(p.default,{squareCommands:{plus:()=>{T(i,()=>window.innerWidth/2+50,()=>window.innerHeight/2+50)},plus2:()=>{T(i,()=>window.innerWidth/2-50,()=>window.innerHeight/2-50)},plus3:()=>{T(i,()=>10,()=>10)},logo:()=>{S(i)},field:()=>{(e=>{C();let t=e=>{let{div:i}=e;if(i){let a=Math.round(1600*Math.random())-400,r=Math.round(1728*Math.random())-432,o=5e3+5e3*Math.random();i.style.transition=`transform ${o}ms ease-out`,i.style.transform=`translate(${a}px, ${r}px)`,e.timeoutId=setTimeout(()=>{t(e)},o)}};e.forEach(e=>{clearTimeout(e.timeoutId),t(e),clearTimeout(e.timeoutId),e.timeoutId=setTimeout(()=>{t(e)},100)})})(i)},hide:t}}),e)})(A,async i=>{i?(o.stopCurrentMusic(800),t.style.transition="background-color 1000ms linear",t.style["background-color"]=l.colors.BLACK,A.style.transition="opacity 800ms linear",A.style.opacity="0",C(),await new Promise(e=>{setTimeout(e,2500)}),o.playSoundName("menu_sparkle"),(e=>{C(),e.forEach(e=>{clearTimeout(e.timeoutId);let{div:t}=e;if(t){let e=Math.round(1600*Math.random())-400;t.style.transition="transform 3000ms ease-out",t.style.transform=`translate(${e}px, -1000px) rotate(${1e3+1e3*Math.random()}deg) scale(0.1)`}})})(e),await new Promise(e=>{setTimeout(e,2e3)}),t.remove(),A.remove()):(o.stopCurrentMusic(800),t.style.transition="background-color 1000ms linear, opacity 1000ms linear",t.style["background-color"]=l.colors.BLACK,t.style.opacity="0",A.style.transition="opacity 800ms linear",A.style.opacity="0",C(),await new Promise(e=>{setTimeout(e,1500)}),t.remove(),A.remove())},e)}})),define("soundboard",["require","exports","controller/res-loader","model/sound"],(function(e,t,i,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.main=void 0,t.main=async()=>{console.log("load res"),await a.loadSoundSpritesheet("foley/foley.mp3"),await i.loadRes();let e=Object.keys(a.sounds).sort().filter(e=>!e.includes("music_"));for(let t=0;t<e.length;t++){let i=e[t],r=document.createElement("button");r.onclick=()=>{a.playSoundName(i)},r.innerHTML=i,document.body.appendChild(r),document.body.appendChild(document.createElement("div"))}}})),define("lib/picostyle",["require","exports"],(function(e,t){"use strict";function i(e,t){var i="p"+o++,a=t+i;return e.forEach((function(e){if(/^@/.test(e)){var t=e.indexOf("{")+1;e=e.slice(0,t)+a+e.slice(t)}else e=a+e;n.insertRule(e,n.cssRules.length)})),i}function a(e,t){return t+"{"+e+"}"}function r(e,t){var i,o=[""];for(var n in t=t||0,e){var l=null!==(i=e[n])&&void 0!==i?i:"unset";n=n.replace(/[A-Z]/g,"-$&").toLowerCase(),l.sub||Array.isArray(l)?(l=Array.isArray(l)?l:[l]).forEach((function(e){return o[0]+=n+":"+e+";"})):(n=n.replace(/&/g,""),o.push(a(r(l,!/^@/.test(n)).join(""),n)))}return t||(o[0]=a(o[0],"")),o}Object.defineProperty(t,"__esModule",{value:!0}),t.keyframes=void 0;var o=0,n=document.head.appendChild(document.createElement("style")).sheet;t.default=function(e,t){function a(t){return function(i){return function(a,r){r=(a=a||{}).children||r;var n="function"==typeof i?i(a):i;return a.class=[o(n),a.class].filter(Boolean).join(" "),e(t,a,r)}}}function o(e){var t=r(e),a=t.join("");return n[a]||(n[a]=i(t,"."))}var n={};return(t=t||{}).returnObject?{style:a,css:o}:a},t.keyframes=function(e){return i([a(r(e,1).join(""),"")],"@keyframes ")}})),define("lib/preact-hooks",["require","exports","preact"],(function(e,t,i){"use strict";function a(e,t){i.options.__h&&i.options.__h(p,e,y||t),y=0;var a=p.__H||(p.__H={__:[],__h:[]});return e>=a.__.length&&a.__.push({}),a.__[e]}function r(e){return y=1,o(h,e)}function o(e,t,i){var r=a(u++,2);return r.t=e,r.__c||(r.__=[i?i(t):h(void 0,t),function(e){var t=r.t(r.__[0],e);r.__[0]!==t&&(r.__=[t,r.__[1]],r.__c.setState({}))}],r.__c=p),r.__}function n(e,t){var r=a(u++,4);!i.options.__s&&m(r.__H,t)&&(r.__=e,r.__H=t,p.__h.push(r))}function l(e,t){var i=a(u++,7);return m(i.__H,t)&&(i.__=e(),i.__H=t,i.__h=e),i.__}function s(){f.forEach((function(e){if(e.__P)try{e.__H.__h.forEach(d),e.__H.__h.forEach(c),e.__H.__h=[]}catch(t){e.__H.__h=[],i.options.__e(t,e.__v)}})),f=[]}function d(e){var t=p;"function"==typeof e.__c&&e.__c(),p=t}function c(e){var t=p;e.__c=e.__(),p=t}function m(e,t){return!e||e.length!==t.length||t.some((function(t,i){return t!==e[i]}))}function h(e,t){return"function"==typeof t?t(e):t}Object.defineProperty(t,"__esModule",{value:!0}),t.useErrorBoundary=t.useDebugValue=t.useContext=t.useCallback=t.useMemo=t.useImperativeHandle=t.useRef=t.useLayoutEffect=t.useEffect=t.useReducer=t.useState=void 0;var u,p,g,y=0,f=[],v=i.options.__b,b=i.options.__r,w=i.options.diffed,C=i.options.__c,S=i.options.unmount;t.useState=r,t.useReducer=o,t.useEffect=function(e,t){var r=a(u++,3);!i.options.__s&&m(r.__H,t)&&(r.__=e,r.__H=t,p.__H.__h.push(r))},t.useLayoutEffect=n,t.useRef=function(e){return y=5,l((function(){return{current:e}}),[])},t.useImperativeHandle=function(e,t,i){y=6,n((function(){"function"==typeof e?e(t()):e&&(e.current=t())}),null==i?i:i.concat(e))},t.useMemo=l,t.useCallback=function(e,t){return y=8,l((function(){return e}),t)},t.useContext=function(e){var t=p.context[e.__c],i=a(u++,9);return i.__c=e,t?(null==i.__&&(i.__=!0,t.sub(p)),t.props.value):e.__},t.useDebugValue=function(e,t){i.options.useDebugValue&&i.options.useDebugValue(t?t(e):e)},t.useErrorBoundary=function(e){var t=a(u++,10),i=r();return t.__=e,p.componentDidCatch||(p.componentDidCatch=function(e){t.__&&t.__(e),i[1](e)}),[i[0],function(){i[1](void 0)}]},i.options.__b=function(e){p=null,v&&v(e)},i.options.__r=function(e){b&&b(e),u=0;var t=(p=e.__c).__H;t&&(t.__h.forEach(d),t.__h.forEach(c),t.__h=[])},i.options.diffed=function(e){w&&w(e);var t=e.__c;t&&t.__H&&t.__H.__h.length&&(1!==f.push(t)&&g===i.options.requestAnimationFrame||((g=i.options.requestAnimationFrame)||function(e){var t,i=function(){clearTimeout(a),T&&cancelAnimationFrame(t),setTimeout(e)},a=setTimeout(i,100);T&&(t=requestAnimationFrame(i))})(s)),p=void 0},i.options.__c=function(e,t){t.some((function(e){try{e.__h.forEach(d),e.__h=e.__h.filter((function(e){return!e.__||c(e)}))}catch(a){t.some((function(e){e.__h&&(e.__h=[])})),t=[],i.options.__e(a,e.__v)}})),C&&C(e,t)},i.options.unmount=function(e){S&&S(e);var t=e.__c;if(t&&t.__H)try{t.__H.__.forEach(d)}catch(e){i.options.__e(e,t.__v)}};var T="function"==typeof requestAnimationFrame})),define("lib/preact",["require","exports"],(function(e,t){"use strict";function i(e,t){for(var i in t)e[i]=t[i];return e}function a(e){var t=e.parentNode;t&&t.removeChild(e)}function r(e,t,i){var a,r,n,l=arguments,s={};for(n in t)"key"==n?a=t[n]:"ref"==n?r=t[n]:s[n]=t[n];if(arguments.length>3)for(i=[i],n=3;n<arguments.length;n++)i.push(l[n]);if(null!=i&&(s.children=i),"function"==typeof e&&null!=e.defaultProps)for(n in e.defaultProps)void 0===s[n]&&(s[n]=e.defaultProps[n]);return o(e,s,a,r,null)}function o(e,t,i,a,r){var o={type:e,props:t,key:i,ref:a,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==r?++A.__v:r};return null!=A.vnode&&A.vnode(o),o}function n(e){return e.children}function l(e,t){this.props=e,this.context=t}function s(e,t){if(null==t)return e.__?s(e.__,e.__.__k.indexOf(e)+1):null;for(var i;t<e.__k.length;t++)if(null!=(i=e.__k[t])&&null!=i.__e)return i.__e;return"function"==typeof e.type?s(e):null}function d(e){var t,i;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(i=e.__k[t])&&null!=i.__e){e.__e=e.__c.base=i.__e;break}return d(e)}}function c(e){(!e.__d&&(e.__d=!0)&&I.push(e)&&!m.__r++||R!==A.debounceRendering)&&((R=A.debounceRendering)||k)(m)}function m(){for(var e;m.__r=I.length;)e=I.sort((function(e,t){return e.__v.__b-t.__v.__b})),I=[],e.some((function(e){var t,a,r,o,n,l,c;e.__d&&(l=(n=(t=e).__v).__e,(c=t.__P)&&(a=[],(r=i({},n)).__v=n.__v+1,o=b(c,n,r,t.__n,void 0!==c.ownerSVGElement,null!=n.__h?[l]:null,a,null==l?s(n):l,n.__h),w(a,n),o!=l&&d(n)))}))}function h(e,t,i,r,l,d,c,m,h,p){var g,y,f,v,w,C,x,E=r&&r.__k||L,A=E.length;for(h==M&&(h=null!=c?c[0]:A?s(r,0):null),i.__k=[],g=0;g<t.length;g++)if(null!=(v=i.__k[g]=null==(v=t[g])||"boolean"==typeof v?null:"string"==typeof v||"number"==typeof v?o(null,v,null,null,v):Array.isArray(v)?o(n,{children:v},null,null,null):null!=v.__e||null!=v.__c?o(v.type,v.props,v.key,null,v.__v):v)){if(v.__=i,v.__b=i.__b+1,null===(f=E[g])||f&&v.key==f.key&&v.type===f.type)E[g]=void 0;else for(y=0;y<A;y++){if((f=E[y])&&v.key==f.key&&v.type===f.type){E[y]=void 0;break}f=null}w=b(e,v,f=f||M,l,d,c,m,h,p),(y=v.ref)&&f.ref!=y&&(x||(x=[]),f.ref&&x.push(f.ref,null,v),x.push(y,v.__c||w,v)),null!=w?(null==C&&(C=w),h=u(e,v,f,E,c,w,h),p||"option"!=i.type?"function"==typeof i.type&&(i.__d=h):e.value=""):h&&f.__e==h&&h.parentNode!=e&&(h=s(f))}if(i.__e=C,null!=c&&"function"!=typeof i.type)for(g=c.length;g--;)null!=c[g]&&a(c[g]);for(g=A;g--;)null!=E[g]&&T(E[g],E[g]);if(x)for(g=0;g<x.length;g++)S(x[g],x[++g],x[++g])}function u(e,t,i,a,r,o,n){var l,s,d;if(void 0!==t.__d)l=t.__d,t.__d=void 0;else if(r==i||o!=n||null==o.parentNode)e:if(null==n||n.parentNode!==e)e.appendChild(o),l=null;else{for(s=n,d=0;(s=s.nextSibling)&&d<a.length;d+=2)if(s==o)break e;e.insertBefore(o,n),l=n}return void 0!==l?l:o.nextSibling}function p(e,t,i){"-"===t[0]?e.setProperty(t,i):e[t]=null==i?"":"number"!=typeof i||B.test(t)?i:i+"px"}function g(e,t,i,a,r){var o,n,l;if(r&&"className"==t&&(t="class"),"style"===t)if("string"==typeof i)e.style.cssText=i;else{if("string"==typeof a&&(e.style.cssText=a=""),a)for(t in a)i&&t in i||p(e.style,t,"");if(i)for(t in i)a&&i[t]===a[t]||p(e.style,t,i[t])}else"o"===t[0]&&"n"===t[1]?(o=t!==(t=t.replace(/Capture$/,"")),(n=t.toLowerCase())in e&&(t=n),t=t.slice(2),e.l||(e.l={}),e.l[t+o]=i,l=o?f:y,i?a||e.addEventListener(t,l,o):e.removeEventListener(t,l,o)):"list"!==t&&"tagName"!==t&&"form"!==t&&"type"!==t&&"size"!==t&&"download"!==t&&"href"!==t&&!r&&t in e?e[t]=null==i?"":i:"function"!=typeof i&&"dangerouslySetInnerHTML"!==t&&(t!==(t=t.replace(/xlink:?/,""))?null==i||!1===i?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),i):null==i||!1===i&&!/^ar/.test(t)?e.removeAttribute(t):e.setAttribute(t,i))}function y(e){this.l[e.type+!1](A.event?A.event(e):e)}function f(e){this.l[e.type+!0](A.event?A.event(e):e)}function v(e,t,i){var a,r;for(a=0;a<e.__k.length;a++)(r=e.__k[a])&&(r.__=e,r.__e&&("function"==typeof r.type&&r.__k.length>1&&v(r,t,i),t=u(i,r,r,e.__k,null,r.__e,t),"function"==typeof e.type&&(e.__d=t)))}function b(e,t,a,r,o,s,d,c,m){var u,p,g,y,f,b,w,S,T,E,_,I=t.type;if(void 0!==t.constructor)return null;null!=a.__h&&(m=a.__h,c=t.__e=a.__e,t.__h=null,s=[c]),(u=A.__b)&&u(t);try{e:if("function"==typeof I){if(S=t.props,T=(u=I.contextType)&&r[u.__c],E=u?T?T.props.value:u.__:r,a.__c?w=(p=t.__c=a.__c).__=p.__E:("prototype"in I&&I.prototype.render?t.__c=p=new I(S,E):(t.__c=p=new l(S,E),p.constructor=I,p.render=x),T&&T.sub(p),p.props=S,p.state||(p.state={}),p.context=E,p.__n=r,g=p.__d=!0,p.__h=[]),null==p.__s&&(p.__s=p.state),null!=I.getDerivedStateFromProps&&(p.__s==p.state&&(p.__s=i({},p.__s)),i(p.__s,I.getDerivedStateFromProps(S,p.__s))),y=p.props,f=p.state,g)null==I.getDerivedStateFromProps&&null!=p.componentWillMount&&p.componentWillMount(),null!=p.componentDidMount&&p.__h.push(p.componentDidMount);else{if(null==I.getDerivedStateFromProps&&S!==y&&null!=p.componentWillReceiveProps&&p.componentWillReceiveProps(S,E),!p.__e&&null!=p.shouldComponentUpdate&&!1===p.shouldComponentUpdate(S,p.__s,E)||t.__v===a.__v){p.props=S,p.state=p.__s,t.__v!==a.__v&&(p.__d=!1),p.__v=t,t.__e=a.__e,t.__k=a.__k,p.__h.length&&d.push(p),v(t,c,e);break e}null!=p.componentWillUpdate&&p.componentWillUpdate(S,p.__s,E),null!=p.componentDidUpdate&&p.__h.push((function(){p.componentDidUpdate(y,f,b)}))}p.context=E,p.props=S,p.state=p.__s,(u=A.__r)&&u(t),p.__d=!1,p.__v=t,p.__P=e,u=p.render(p.props,p.state,p.context),p.state=p.__s,null!=p.getChildContext&&(r=i(i({},r),p.getChildContext())),g||null==p.getSnapshotBeforeUpdate||(b=p.getSnapshotBeforeUpdate(y,f)),h(e,Array.isArray(_=null!=u&&u.type==n&&null==u.key?u.props.children:u)?_:[_],t,a,r,o,s,d,c,m),p.base=t.__e,t.__h=null,p.__h.length&&d.push(p),w&&(p.__E=p.__=null),p.__e=!1}else null==s&&t.__v===a.__v?(t.__k=a.__k,t.__e=a.__e):t.__e=C(a.__e,t,a,r,o,s,d,m);(u=A.diffed)&&u(t)}catch(e){t.__v=null,(m||null!=s)&&(t.__e=c,t.__h=!!m,s[s.indexOf(c)]=null),A.__e(e,t,a)}return t.__e}function w(e,t){A.__c&&A.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){A.__e(e,t.__v)}}))}function C(e,t,i,a,r,o,n,l){var s,d,c,m,u,p=i.props,y=t.props;if(r="svg"===t.type||r,null!=o)for(s=0;s<o.length;s++)if(null!=(d=o[s])&&((null===t.type?3===d.nodeType:d.localName===t.type)||e==d)){e=d,o[s]=null;break}if(null==e)try{if(null===t.type)return document.createTextNode(y);e=r?document.createElementNS("http://www.w3.org/2000/svg",t.type):document.createElement(t.type,y.is&&{is:y.is}),o=null,l=!1}catch(e){throw console.error("TYPE",t),e}if(null===t.type)p===y||l&&e.data===y||(e.data=y);else{if(null!=o&&(o=L.slice.call(e.childNodes)),c=(p=i.props||M).dangerouslySetInnerHTML,m=y.dangerouslySetInnerHTML,!l){if(null!=o)for(p={},u=0;u<e.attributes.length;u++)p[e.attributes[u].name]=e.attributes[u].value;(m||c)&&(m&&(c&&m.__html==c.__html||m.__html===e.innerHTML)||(e.innerHTML=m&&m.__html||""))}(function(e,t,i,a,r){var o;for(o in i)"children"===o||"key"===o||o in t||g(e,o,null,i[o],a);for(o in t)r&&"function"!=typeof t[o]||"children"===o||"key"===o||"value"===o||"checked"===o||i[o]===t[o]||g(e,o,t[o],i[o],a)})(e,y,p,r,l),m?t.__k=[]:h(e,Array.isArray(s=t.props.children)?s:[s],t,i,a,"foreignObject"!==t.type&&r,o,n,M,l),l||("value"in y&&void 0!==(s=y.value)&&(s!==e.value||"progress"===t.type&&!s)&&g(e,"value",s,p.value,!1),"checked"in y&&void 0!==(s=y.checked)&&s!==e.checked&&g(e,"checked",s,p.checked,!1))}return e}function S(e,t,i){try{"function"==typeof e?e(t):e.current=t}catch(e){A.__e(e,i)}}function T(e,t,i){var r,o,n;if(A.unmount&&A.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||S(r,null,t)),i||"function"==typeof e.type||(i=null!=(o=e.__e)),e.__e=e.__d=void 0,null!=(r=e.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(e){A.__e(e,t)}r.base=r.__P=null}if(r=e.__k)for(n=0;n<r.length;n++)r[n]&&T(r[n],t,i);null!=o&&a(o)}function x(e,t,i){return this.constructor(e,i)}function E(e,t,i){var a,o,l;A.__&&A.__(e,t),o=(a=i===P)?null:i&&i.__k||t.__k,e=r(n,null,[e]),l=[],b(t,(a?t:i||t).__k=e,o||M,M,void 0!==t.ownerSVGElement,i&&!a?[i]:o?null:t.childNodes.length?L.slice.call(t.childNodes):null,l,i||M,a),w(l,e)}Object.defineProperty(t,"__esModule",{value:!0}),t.options=t.__u=t.toChildArray=t.createContext=t.cloneElement=t.Component=t.isValidElement=t.createRef=t.Fragment=t.h=t.createElement=t.hydrate=t.render=void 0;var A,_,I,k,R,P,O,M={},L=[],B=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;t.options=A,t.isValidElement=_,t.createElement=r,t.h=r,t.createRef=function(){return{current:null}},t.Fragment=n,t.Component=l,t.toChildArray=function e(t,i){return i=i||[],null==t||"boolean"==typeof t||(Array.isArray(t)?t.some((function(t){e(t,i)})):i.push(t)),i},t.__u=T,t.render=E,t.hydrate=function(e,t){E(e,t,P)},t.cloneElement=function(e,t,a){var r,n,l,s=arguments,d=i({},e.props);for(l in t)"key"==l?r=t[l]:"ref"==l?n=t[l]:d[l]=t[l];if(arguments.length>3)for(a=[a],l=3;l<arguments.length;l++)a.push(s[l]);return null!=a&&(d.children=a),o(e.type,d,r||e.key,n||e.ref,null)},t.createContext=function(e,t){var i={__c:t="__cC"+O++,__:e,Consumer:function(e,t){return e.children(t)},Provider:function(e,i,a){return this.getChildContext||(i=[],(a={})[t]=this,this.getChildContext=function(){return a},this.shouldComponentUpdate=function(e){this.props.value!==e.value&&i.some(c)},this.sub=function(e){i.push(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){i.splice(i.indexOf(e),1),t&&t.call(e)}}),e.children}};return i.Provider.__=i.Consumer.contextType=i},t.options=A={__e:function(e,t){for(var i,a,r,o=t.__h;t=t.__;)if((i=t.__c)&&!i.__)try{if((a=i.constructor)&&null!=a.getDerivedStateFromError&&(i.setState(a.getDerivedStateFromError(e)),r=i.__d),null!=i.componentDidCatch&&(i.componentDidCatch(e),r=i.__d),r)return t.__h=o,i.__E=i}catch(t){e=t}throw e},__v:0},t.isValidElement=_=function(e){return null!=e&&void 0===e.constructor},l.prototype.setState=function(e,t){var a;a=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=i({},this.state),"function"==typeof e&&(e=e(i({},a),this.props)),e&&i(a,e),null!=e&&this.__v&&(t&&this.__h.push(t),c(this))},l.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),c(this))},l.prototype.render=n,I=[],k="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,m.__r=0,P=M,O=0})),define("view/components/BattleActionMenu",["require","exports","preact","view/elements/VerticalMenu","view/style"],(function(e,t,i,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=a(r);let n=o.style("div",()=>({})),l=o.style("div",()=>({display:"flex",justifyContent:"space-between",alignItems:"center"})),s=o.style("div",()=>({width:"24px",height:"24px"}));t.default=e=>i.h(n,null,i.h(r.default,{title:"ACTION",open:!0,onClose:e.onClose,width:"8rem",items:e.bCh.ch.skills.map((e,t)=>({label:i.h(l,null,i.h("span",null,e.name),i.h(s,null)),value:t})),onItemClick:t=>{e.bCh.ch.skillIndex=t,e.onClose()}}))})),define("view/components/BattleCharacterStatus",["require","exports","preact","model/battle-character","view/style","view/elements/StaticAnimDiv","view/elements/ProgressBar","model/character","model/animation"],(function(e,t,i,r,o,n,l,s,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=a(n);let c=o.colors.GREEN,m=o.colors.BLUE,h=o.style("div",e=>({display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",width:"64px",boxShadow:e.highlighted?"0px 0px 67px 21px rgba(255, 255, 255,0.75)":"unset"})),u=o.style("div",{background:"black",border:"2px solid "+o.colors.GREY,position:"relative"}),p=o.style("div",{position:"absolute",top:"0",left:"1px"}),g=o.style("div",e=>({border:e.omitBorder?"":"2px solid "+o.colors.WHITE,width:"100%",borderBottomLeftRadius:e.bottom?"4px":0,borderBottomRightRadius:e.bottom?"4px":0,borderTopLeftRadius:e.top?"4px":0,borderTopRightRadius:e.top?"4px":0}));t.default=e=>{let t=t=>`${e.bCh.ch.name}_${t}`,a=e.bCh.ch.skills[e.bCh.ch.skillIndex],y="battlePortraits_"+e.bCh.ch.spriteBase;return d.hasAnimation(y)||(y="bartolo_portrait"),console.log("RENDER BATTLE CHARACTER STATUS",e.bCh.ch.name),i.h(h,null,i.h(g,{top:!0},i.h(l.ProgressBarWithRender,{renderFunc:()=>e.bCh.actionTimer.getPctComplete(),renderKey:t("action"),backgroundColor:o.colors.BLACK,color:m,height:20,label:null==a?void 0:a.name})),i.h(u,null,i.h(n.default,{style:{width:"64px"},animName:y}),i.h(p,null,e.bCh.ch.name)),i.h(g,{top:!0,omitBorder:!0},i.h(l.ProgressBarWithRender,{renderFunc:()=>r.battleCharacterIsStaggered(e.bCh)?1:e.bCh.staggerGauge.getPct(),renderKey:t("stagger"),backgroundColor:o.colors.BLACK,color:r.battleCharacterIsStaggered(e.bCh)?o.colors.WHITE:o.colors.ORANGE,height:4,label:""})),i.h(g,{bottom:!0},i.h(l.ProgressBarWithRender,{renderFunc:()=>s.characterGetHpPct(e.bCh.ch),renderKey:t("hp"),backgroundColor:o.colors.BLACK,color:c,height:20,label:"HP: "+e.bCh.ch.hp})))}})),define("view/components/BattleUISection",["require","exports","preact","preact/hooks","view/style","view/components/BattleCharacterStatus","view/components/BattleActionMenu","view/elements/Button","controller/loop","model/generics"],(function(e,t,r,o,n,l,s,d,c,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),l=a(l),s=a(s),d=i(d);let h=n.style("div",{position:"absolute",bottom:"0px",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",width:"100%"}),u=n.style("div",{display:"flex",justifyContent:"center",alignItems:"center",width:"100%"}),p=n.style("div",{position:"absolute",bottom:"150px",width:"100%",display:"flex",justifyContent:"center"}),g=n.style("div",{margin:"16px"});t.default=()=>{let[e,t]=o.useState(!1),i=m.getCurrentBattle();return r.h(r.Fragment,null,e?null:r.h(p,null,r.h(d.default,{type:d.ButtonType.PRIMARY,onClick:()=>{t(!e),c.pause()}},"PAUSE")),r.h(h,null,r.h(u,null,i.allies.map(e=>r.h(g,{key:e.ch.name},r.h(l.default,{battle:i,bCh:e}))),i.enemies.map(e=>r.h(g,{key:e.ch.name},r.h(l.default,{battle:i,bCh:e})))),e?r.h(s.default,{onClose:()=>{c.unpause(),t(!1)},open:e,bCh:i.allies[0]}):null))}})),define("view/elements/PillButton",["require","exports","view/style"],(function(e,t,i){"use strict";var a;Object.defineProperty(t,"__esModule",{value:!0}),t.ButtonType=void 0,function(e){e[e.NEUTRAL=0]="NEUTRAL",e[e.PRIMARY=1]="PRIMARY",e[e.SECONDARY=2]="SECONDARY",e[e.ENEMY=3]="ENEMY"}(a=t.ButtonType||(t.ButtonType={}));let r={[a.NEUTRAL]:{top:i.colors.GREY,bottom:i.colors.DARKGREY_ALT},[a.PRIMARY]:{top:i.colors.BLUE,bottom:i.colors.DARKBLUE},[a.SECONDARY]:{top:i.colors.GREEN,bottom:i.colors.DARKGREEN},[a.ENEMY]:{top:i.colors.RED,bottom:i.colors.DARKRED}},o=i.keyframes({"0%":{filter:"brightness(100%)"},"50%":{filter:"brightness(80%)"},"100%":{filter:"brightness(100%)"}}),n=i.style("div",(e={type:a.NEUTRAL})=>({fontSize:"16px",textAlign:"center",padding:"2px 8px",cursor:e.disabled?"unset":"pointer",background:r[e.type].bottom,textDecoration:e.selected?"underline":"unset",transition:"border-radius 250sm",border:"2px solid "+(e.selected?i.colors.WHITE:e.disabled?i.colors.GREY:r[e.type].top),borderBottom:"0px solid transparent",filter:e.disabled?"brightness(80%)":"unset",animation:e.selected?o+" 1500ms linear infinite":"unset","&:hover":{filter:e.disabled?"unset":"brightness(120%)"},"&:active":{filter:e.disabled?"unset":"brightness(80%)",transform:"translateY(2px)"}}));t.default=n})),define("view/elements/TextIcon",["require","exports","view/style"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let a=i.style("div",()=>({display:"flex",justifyContent:"center",alignItems:"center","& > svg":{marginRight:"8px",width:"16px",height:"16px"}}));t.default=a}))})();